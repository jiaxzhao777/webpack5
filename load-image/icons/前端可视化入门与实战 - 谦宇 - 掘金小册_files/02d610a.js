(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1068:function(t,e,o){"use strict";o.d(e,"b",(function(){return r})),o.d(e,"a",(function(){return n}));var n,r={hotTag:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51b98a0c69a34689b8ca2c10dd66156d~tplv-k3u1fbpfcp-image.image#?w=43&h=20&s=6724&e=svg&a=1&b=f36937"};!function(t){t.publishComment="jj_publish_comment",t.publishReply="jj_publish_reply",t.changeLike="jj_change_like",t.setCommentCount="jj_set_comment_count",t.changeCommentCount="jj_change_comment_count",t.deleteComment="jj_delete_comment",t.deleteReply="jj_delete_reply"}(n||(n={}))},1070:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return r})),o.d(e,"c",(function(){return l}));var n,r,c=o(39);function l(t,e){Object(c.h)(t,e)}!function(t){t.commentShow="comment_all_show",t.commentItemShow="comment_item_show",t.commentItemDig="comment_item_dig",t.commentButtonClick="comment_button_click",t.replyButtonClick="comment_item_reply",t.moreCommentClick="more_comment_click",t.moreReplyClick="more_replyment_click",t.commentAction="comment_action_2",t.commentMessageShow="comment_information_show",t.commentMessageClick="comment_information_click",t.commentMessageDig="comment_information_dig",t.commentMessageReply="comment_information_reply"}(n||(n={})),function(t){t[t.other=100]="other",t[t.postViewBottom=1]="postViewBottom",t[t.postViewDrawer=2]="postViewDrawer",t[t.pinFeed=3]="pinFeed",t[t.pinDetail=4]="pinDetail",t[t.bookDetail=5]="bookDetail",t[t.bookSectionDetail=6]="bookSectionDetail",t[t.userTimeline=7]="userTimeline"}(r||(r={}))},1071:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o(3),r=o(1068);function c(t){var e=Object(n.n)(t),o=Object(n.c)(),c=null==o?void 0:o.proxy.$getBean("eventBus"),f=Object(n.n)(0);return Object(n.j)((function(){(null==o?void 0:o.proxy)&&c&&(c.onVmLife(null==o?void 0:o.proxy,r.a.setCommentCount,(function(t){m(t)&&e.value&&e.value===t.itemId&&(f.value=t.val)})),c.onVmLife(null==o?void 0:o.proxy,r.a.changeCommentCount,(function(t){m(t)&&e.value&&e.value===t.itemId&&(f.value=f.value+t.val)})))})),{commentCount:f,itemIdRef:e,setCommentCount:function(e){f.value=e,c&&l(c,t,e)},changeCommentCount:function(e){f.value=f.value+e,c&&d(c,t,e)},emitSetCommentCount:function(t,e){c&&l(c,t,e)},emitChangeCommentCount:function(t,e){f.value=f.value+e,c&&d(c,t,e)}}}function l(t,e,o){null==t||t.emit(r.a.setCommentCount,{itemId:e,val:o})}function d(t,e,o){null==t||t.emit(r.a.changeCommentCount,{itemId:e,val:o})}function m(t){return"itemId"in t&&"val"in t}},1072:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return r})),o.d(e,"d",(function(){return c})),o.d(e,"c",(function(){return l}));o(11);var n="掘金,稀土,Vue.js,前端面试题,Kotlin,ReactNative,Python",r="掘金是面向全球中文开发者的技术内容分享与交流平台。我们通过技术文章、沸点、课程、直播等产品和服务，打造一个激发开发者创作灵感，激励开发者沉淀分享，陪伴开发者成长的综合类技术社区。",c="https://juejin.cn",l="juejin.cn"},1084:function(t,e,o){"use strict";o(19);var n=o(5),r=o(3),c=o(39),l=o(135),d=(o(23),o(243),o(34)),m=o(95),f=o(7),v=o(174),h=o(16),_=o(179),y=o(1131),C=o(208),O=o(1071),w=o(1068);var k=o(1070),j=(o(79),o(10),o(30),o(55),o(51),o(59),o(89),o(1169)),x=o.n(j),I=o(1170),P=o.n(I),S=o(1171),L=o.n(S),B=o(1150),M=o(1151),R=o(1133),E=o(1146),T=o(247),D=o(1135),$=o(1142),A=o(120);function U(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}var V=Object(r.b)({components:{Tooltip:m.Tooltip,AuthCard:B.a,CloseIcon:x.a,ImageIcon:L.a,Emoji:M.a,InfoIcon:P.a},props:{size:{type:String,default:"default"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},textLimit:{type:Number,default:1e3},imageFileSizeLimit:{type:Number,default:5242880},buttonText:{type:String,default:"发布"}},emits:["onBlur","onFocus","onSubmit","onEmptyBlur"],setup:function(t,e){var o=e.emit,c=Object(r.c)(),d=Object(r.n)(!1),f=Object(r.n)(0),v=Object(r.n)(),h=Object(r.n)(),_=Object(r.n)(),y=Object(r.n)(""),content=Object(r.n)(""),C=Object(r.a)((function(){return t.loading?"提交中...":t.buttonText})),O=Object(r.a)((function(){return(null==c?void 0:c.proxy.$device.isMacOS)?"⌘ + Enter":"Ctrl + Enter"}));Object(r.y)(_,(function(){Object(E.g)(v.value)}));var w=Object(r.n)(!0),k=Object(A.b)((function(){w.value=x()}),300,!0);function j(t){_.value=t,y.value&&window.URL.revokeObjectURL(y.value),y.value=t?window.URL.createObjectURL(t):""}function x(){return!content.value.trim()}function I(t){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(regeneratorRuntime.mark((function e(o){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.value){e.next=3;break}return e.abrupt("return");case 3:if(n.value="",o){e.next=6;break}return e.abrupt("return");case 6:if(!(o.size>t.imageFileSizeLimit)){e.next=9;break}return m.Message.error("文件过大"),e.abrupt("return");case 9:return e.next=11,Object(D.a)(o,R.a);case 11:if(e.sent){e.next=14;break}return m.Message.error("不支持此格式的图片"),e.abrupt("return");case 14:j(o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){x()||(f.value>t.textLimit?m.Message.error("字数超过限制，请删减后发送"):o("onSubmit",{content:content.value,files:_.value?[_.value]:[]}))}return Object(r.y)([content,_],(function(){k()})),Object(r.y)(d,(function(t){o(t?"onFocus":"onBlur"),!t&&x()&&o("onEmptyBlur")})),Object(r.y)(content,(function(){f.value=Object(E.h)(content.value)})),{textCount:f,focused:d,focus:function(){Object(r.g)((function(){var t;null===(t=v.value)||void 0===t||t.focus()}))},reset:function(){j(),v.value&&(v.value.innerHTML=""),content.value=""},inputElementRef:h,richInputRef:v,sendTip:O,submitButtonTitle:C,isEmpty:w,imagePreviewUrl:y,changeFile:j,onFocus:function(){null==c||c.proxy.$ensureAuthorized({loginGuideFrom:l.b.comment_login}).then((function(){return d.value=!0})).catch((function(t){return console.log("focus comment input err:",t)}))},onOuterClick:function(){d.value=!1},onFormBoxClick:function(e){var o=e.target;if(!t.disabled){var n=v.value;n&&(n.focus(),n.contains(o)||Object(E.g)(n))}},onInput:function(){v.value&&(d.value=!0,Object(E.e)(v.value),content.value=Object(E.b)(U(v.value.innerHTML)))},onPaste:function(t){if(t.preventDefault(),v.value){Object(E.f)(t,I);var text=Object(E.a)(t),html=Object(T.e)(text)+'<span id="parse-end"></span>';Object(E.c)(v.value,html);var e=v.value.querySelector("#parse-end");e&&(e.scrollIntoView({block:"center"}),e.remove()),d.value=!0,content.value=Object(E.b)(U(v.value.innerHTML))}},onKeydown:function(e){t.disabled||t.loading||Object($.a)(e,(function(){return S()}))},updateEmoji:function(t){v.value&&(Object(E.c)(v.value,Object(T.d)(t)),d.value=!0,content.value=Object(E.b)(U(v.value.innerHTML)))},showFileDialog:function(){null==c||c.proxy.$ensureAuthorized({loginGuideFrom:l.b.comment_login}).then((function(){var t;return null===(t=h.value)||void 0===t?void 0:t.click()})).catch((function(t){return console.warn("show file dialog err:",t)}))},onFileSelected:I,submit:S}}}),F=(o(1172),o(29)),N=Object(F.a)(V,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return t.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-input",class:t.size,on:{click:t.onFormBoxClick}},[o("AuthCard",[o("div",{staticClass:"input-box",class:{disabled:t.disabled,focused:t.focused,"not-empty":!t.isEmpty}},[o("div",{ref:"richInputRef",staticClass:"rich-input",class:{empty:t.isEmpty},attrs:{contenteditable:!t.disabled,spellcheck:"false",placeholder:t.placeholder||"输入评论（Enter换行，"+t.sendTip+"发送）",disabled:t.loading},on:{focus:t.onFocus,input:t.onInput,paste:t.onPaste,keydown:t.onKeydown,keyup:function(t){t.stopPropagation()}}}),t._v(" "),t.imagePreviewUrl?o("div",{staticClass:"image-preview-box"},[o("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.imagePreviewUrl+")"}}),t._v(" "),o("div",{staticClass:"clean-btn",on:{click:function(e){return t.changeFile()}}},[o("CloseIcon")],1)]):t._e(),t._v(" "),o("div",{staticClass:"action-box",class:{disabled:t.disabled,active:!t.disabled&&!t.loading&&!t.isEmpty}},[o("Emoji",{staticClass:"emoji-btn",attrs:{label:""},on:{selectEmoji:t.updateEmoji}}),t._v(" "),o("div",{staticClass:"image-btn",on:{click:t.showFileDialog}},[o("ImageIcon",{staticClass:"icon"})],1),t._v(" "),o("div",{staticStyle:{flex:"1"}}),t._v(" "),o("div",{staticClass:"text-count-wrapper"},[o("div",{staticClass:"text-count",class:{danger:t.textCount>t.textLimit}},[o("span",{staticClass:"text-count-real"},[t._v(t._s(t.textCount))]),t._v(" "),o("span",{staticClass:"text-count-limit"},[t._v("/ "+t._s(t.textLimit))])]),t._v(" "),o("Tooltip",{staticClass:"count-info",attrs:{content:"标点符号、链接等不计算在有效字数内",placement:"bottom","append-to-body":!1}},[o("InfoIcon",{staticClass:"info-icon"})],1)],1),t._v(" "),o("div",{staticClass:"submit"},[o("Tooltip",{attrs:{content:t.sendTip,placement:"top","append-to-body":!1}},[o("button",{staticClass:"submit-btn",class:{disabled:t.disabled,active:!t.disabled&&!t.loading&&!t.isEmpty,loading:t.loading},attrs:{disabled:t.disabled||t.loading||t.isEmpty},on:{click:t.submit}},[t._v("\n              "+t._s(t.submitButtonTitle)+"\n            ")])])],1)],1)])]),t._v(" "),t._t("unLogin"),t._v(" "),o("input",{ref:"inputElementRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){return t.onFileSelected(e.target.files[0])}}})],2)}),[],!1,null,"2320b114",null).exports,H=Object(r.b)({components:{CommentInput:N},inject:{getRecommendScoreInfo:{from:"getRecommendScoreInfo",default:null},getFromPage:{from:"getFromPage",default:null}},props:{avatarVisible:{type:Boolean,default:!0},size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,default:null},reply:{type:Object,default:null},teaParams:{type:Object,default:null},autoFocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},submitTitle:{type:String,default:"发布"}},emits:["onEmptyBlur","onPublishSuccess","onPublishFail","onPublish"],setup:function(t,e){var o=e.emit,j=function(t){var e=t.currentUser,o=Object(r.c)(),c=null==o?void 0:o.proxy.$getBean("eventBus"),l=Object(r.s)(),k=Object(r.n)(!1),j=Object(r.n)(!1),x=Object(O.a)("").emitChangeCommentCount;function I(t){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(regeneratorRuntime.mark((function t(o){var n,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e?void 0:e.userId){t.next=2;break}throw new Error("用户未登录");case 2:if(null==e?void 0:e.isBindPhone){t.next=4;break}throw new Error("用户需要绑定手机号");case 4:if(0!==(o||[]).length){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,Object(y.a)(e.userId,o).catch((function(){return[]}));case 8:if(0!==((n=t.sent)||[]).length){t.next=11;break}throw new Error("图片上传异常");case 11:return r={gif:0,png:1,jpg:2,jpeg:2},c=function(t){var e=t.Url,o=l.$imgUrlTransformInstance.parseImgUrl(e).extra,n=null==o?void 0:o.format;return{pic_url:e,width:t.ImageHeight,height:t.ImageWidth,pic_type:r[n||"png"]||1}},t.abrupt("return",n.map((function(t){return c(t)})));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(n.a)(regeneratorRuntime.mark((function t(e,o){var content,n,source,r,l,f,y,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(content=e.content,n=e.files,source=o.source,!k.value){t.next=4;break}return t.abrupt("return");case 4:if(0!==n.length||0!==content.trim().length){t.next=7;break}return m.Message.error("请填写评论内容后发送"),t.abrupt("return");case 7:return k.value=!0,j.value=!1,t.next=11,Object(C.a)(I(n));case 11:if(r=t.sent,l=Object(d.a)(r,2),f=l[0],y=l[1],!f&&y){t.next=18;break}return m.Message.error("图片上传失败, 请稍后尝试"),t.abrupt("return");case 18:return t.next=20,v.c.PublishComment({client_type:h.e,item_id:source.itemId,item_type:source.itemType,comment_content:content,comment_pics:y},{showError:!1}).catch((function(){return null}));case 20:if(O=t.sent,k.value=!1,(null==O?void 0:O.err_no)===v.b.ERROR_NO.OK){t.next=27;break}return Object(_.b)(null==O?void 0:O.err_no)||m.Message.error((null==O?void 0:O.err_msg)||"评论失败, 请稍后重试"),console.error("publishCommentToSource error",O),j.value=!0,t.abrupt("return");case 27:return x(source.itemId,1),m.Message.success("评论成功"),null==c||c.emit(w.a.publishComment,{itemId:source.itemId,val:O.data}),t.abrupt("return",O.data);case 31:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=Object(n.a)(regeneratorRuntime.mark((function t(e,o){var content,n,source,r,l,y,O,P,S,L,B;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(content=e.content,n=e.files,source=o.source,r=o.comment,!k.value){t.next=4;break}return t.abrupt("return");case 4:if(0!==content.trim().length){t.next=7;break}return m.Message.error("请填写回复内容后发送"),t.abrupt("return");case 7:return k.value=!0,j.value=!1,t.next=11,Object(C.a)(I(n));case 11:if(y=t.sent,O=Object(d.a)(y,2),P=O[0],S=O[1],!P&&S){t.next=18;break}return m.Message.error("图片上传失败, 请稍后尝试"),t.abrupt("return");case 18:return L=[],r.bot_info&&r.bot_info.bot_id&&L.push({item_type:f.IdType.BotIdType,item_id:r.bot_info.bot_id,name:r.bot_info.bot_name}),t.next=22,v.c.PublishCommentReply({client_type:h.e,item_id:source.itemId,item_type:source.itemType,reply_to_comment_id:r.comment_id,reply_to_user_id:null===(l=r.comment_info)||void 0===l?void 0:l.user_id,reply_content:content,reply_pics:S,mentions:L,reply_to_reply_id:null},{showError:!1}).catch((function(){return null}));case 22:if(B=t.sent,k.value=!1,(null==B?void 0:B.err_no)===v.b.ERROR_NO.OK){t.next=29;break}return Object(_.b)(null==B?void 0:B.err_no)||m.Message.error((null==B?void 0:B.err_msg)||"回复失败, 请稍后重试"),console.error("publishReplyToComment error",B),j.value=!0,t.abrupt("return");case 29:return m.Message.success("回复成功"),x(r.comment_id,1),x(source.itemId,1),null==c||c.emit(w.a.publishReply,{itemId:r.comment_id,val:B.data}),t.abrupt("return",B.data);case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){return(B=Object(n.a)(regeneratorRuntime.mark((function t(e,o){var content,n,source,r,l,y,O,P,S,L,B;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(content=e.content,n=e.files,source=o.source,r=o.comment,l=o.reply,!k.value){t.next=4;break}return t.abrupt("return");case 4:if(0!==n.length||0!==content.trim().length){t.next=7;break}return m.Message.error("请填写回复内容后发送"),t.abrupt("return");case 7:return k.value=!0,j.value=!1,t.next=11,Object(C.a)(I(n));case 11:if(y=t.sent,O=Object(d.a)(y,2),P=O[0],S=O[1],!P&&S){t.next=18;break}return m.Message.error("图片上传失败, 请稍后尝试"),t.abrupt("return");case 18:return L=[],l.bot_info&&l.bot_info.bot_id&&L.push({item_type:f.IdType.BotIdType,item_id:l.bot_info.bot_id,name:l.bot_info.bot_name}),t.next=22,v.c.PublishCommentReply({client_type:h.e,item_id:source.itemId,item_type:source.itemType,reply_to_comment_id:r.comment_id,reply_to_reply_id:l.reply_info.reply_id,reply_to_user_id:l.reply_info.user_id,reply_content:content,mentions:L,reply_pics:S},{showError:!1}).catch((function(){return null}));case 22:if(B=t.sent,k.value=!1,(null==B?void 0:B.err_no)===v.b.ERROR_NO.OK){t.next=29;break}return Object(_.b)(null==B?void 0:B.err_no)||m.Message.error((null==B?void 0:B.err_msg)||"回复失败, 请稍后重试"),console.error("PublishComment error",B),j.value=!0,t.abrupt("return");case 29:return m.Message.success("回复成功"),x(r.comment_id,1),x(source.itemId,1),null==c||c.emit(w.a.publishReply,{itemId:r.comment_id,val:B.data}),t.abrupt("return",B.data);case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{publishLoading:k,publishError:j,publishCommentToSource:function(t,e){return S.apply(this,arguments)},publishReplyToComment:function(t,e){return L.apply(this,arguments)},publishReplyToCommentReply:function(t,e){return B.apply(this,arguments)}}}({currentUser:t.currentUser}),x=j.publishError,I=j.publishLoading,P=j.publishCommentToSource,S=j.publishReplyToComment,L=j.publishReplyToCommentReply,B=Object(r.c)(),M=Object(r.n)(),R=Object(r.a)((function(){var e,o;return!!I.value||!!(null===(e=t.currentUser)||void 0===e?void 0:e.userId)&&!(null===(o=t.currentUser)||void 0===o?void 0:o.isBindPhone)}));function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function e(n){var r,c,l,d,m,f,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o("onPublish"),!(t.reply&&t.comment&&t.source)){e.next=7;break}return e.next=4,L(n,{source:t.source,comment:t.comment,reply:t.reply});case 4:h=e.sent,e.next=17;break;case 7:if(!t.comment||!t.source){e.next=13;break}return e.next=10,S(n,{source:t.source,comment:t.comment});case 10:h=e.sent,e.next=17;break;case 13:if(!t.source){e.next=17;break}return e.next=16,P(n,{source:t.source});case 16:h=e.sent;case 17:h?(null===(r=M.value)||void 0===r||r.reset(),o("onPublishSuccess",h)):o("onPublishFail"),Object(k.c)(k.b.commentAction,{replyment_id:(null===(l=null===(c=t.reply)||void 0===c?void 0:c.reply_info)||void 0===l?void 0:l.reply_id)||"0",mode:(null===(d=t.teaParams)||void 0===d?void 0:d.mode)||"",comment_status:h?1:0,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:(null===(m=t.comment)||void 0===m?void 0:m.is_hot)?1:0,theme_id:null===(f=t.teaParams)||void 0===f?void 0:f.theme_id,section_id:null===(v=t.teaParams)||void 0===v?void 0:v.section_id});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.j)((function(){t.autoFocus&&Object(r.g)((function(){var t;null===(t=M.value)||void 0===t||t.focus()}))})),{commentInputRef:M,isDisabled:R,publishLoading:I,publishError:x,loginGuidVisibleChange:function(t){t&&Object(c.h)("login_guide_show",{from:l.a.comment,type:l.c.auto})},onLogin:function(){Object(c.h)("login_guide_click",{from:l.a.comment}),null==B||B.proxy.$requestLogin()},onSubmit:function(t){return E.apply(this,arguments)}}}}),z=(o(1173),Object(F.a)(H,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment-form",class:{reply:!!t.comment,"sub-reply":!!t.reply,small:"small"===t.size}},[o("div",{staticClass:"content"},[t.avatarVisible?o("div",{staticClass:"avatar-box"},[o("Avatar",{staticClass:"avatar",attrs:{url:(t.currentUser||{}).avatar,size:50}})],1):t._e(),t._v(" "),o("div",{staticClass:"form-box"},[o("CommentInput",{ref:"commentInputRef",attrs:{size:t.size,"button-text":t.submitTitle,placeholder:t.placeholder,loading:t.publishLoading,disabled:t.isDisabled},on:{onSubmit:t.onSubmit,onEmptyBlur:function(e){return t.$emit("onEmptyBlur")}},scopedSlots:t._u([{key:"unLogin",fn:function(){return[t._t("unLogin")]},proxy:!0}],null,!0)})],1)])])}),[],!1,null,"673c9859",null));e.a=z.exports},1086:function(t,e,o){"use strict";var n={components:{Icon:o(95).Icon},props:{robot:{type:Object,required:!1},maxWidth:{type:String,default:"128px"},universal:{type:Boolean,default:!1},tagName:{type:String,default:"app-link"},tab:{type:String,default:null}},data:function(){return{mapStyle:{maxWidth:this.maxWidth||"128px"}}},computed:{robotname:function(){var t;return(null===(t=this.robot)||void 0===t?void 0:t.bot_name)||""},isOffline:function(){return this.robot&&-1===this.robot.status},userId:function(){var t;return"".concat(null===(t=this.robot)||void 0===t?void 0:t.user_id)||""}}},r=(o(1193),o(29)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.universal?o(t.tagName,{tag:"Component",staticClass:"username",attrs:{to:t.$userRoute(t.userId,t.tab),blank:!0}},[o("span",{staticClass:"name",style:t.mapStyle},[t._v("\n    "+t._s(t.robotname)+"\n  ")]),t._v(" "),o("span",{staticClass:"tag robot-tag"},[t._v("机器人")]),t._v(" "),t.isOffline?o("span",{staticClass:"tag robot-offline"},[t._v("已下线")]):t._e(),t._v(" "),t._t("default")],2):o("client-only",[o(t.tagName,{tag:"Component",staticClass:"username",attrs:{to:t.$userRoute(t.userId,t.tab),blank:!0}},[o("span",{staticClass:"name",style:t.mapStyle},[t._v("\n      "+t._s(t.robotname)+"\n    ")]),t._v(" "),o("span",{staticClass:"tag robot-tag"},[t._v("机器人")]),t._v(" "),t.isOffline?o("span",{staticClass:"tag robot-offline"},[t._v("已下线")]):t._e(),t._v(" "),t._t("default")],2)],1)}),[],!1,null,"734d9ec8",null);e.a=component.exports},1090:function(t,e,o){"use strict";var n=o(8),r=o(1156),c=o(1248),l=o(0),d=o(1086),m=o(1144),f=o(1132),v=o(1075);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y=Object(n.defineComponent)({components:{Button:v.a,Triangle:m.a,Robotname:d.a},props:{robotInfo:Object},data:function(){return{showTips:!1,showBotInfoTips:!1}},computed:{currentUser:function(){return this.$store.getters.USER},robotDetailInfo:function(){var t;return(null===(t=this.robotInfo)||void 0===t?void 0:t.bot_info)||{}},userInfo:function(){var t;return(null===(t=this.robotInfo)||void 0===t?void 0:t.author_user_info)||{}},isOffline:function(){var t,e;return(null===(t=this.robotInfo)||void 0===t?void 0:t.bot_info)&&-1===(null===(e=this.robotInfo)||void 0===e?void 0:e.bot_info.status)},position:function(){var t,e;return(null===(e=null===(t=this.robotInfo)||void 0===t?void 0:t.bot_info)||void 0===e?void 0:e.bot_description)||"暂无简介"},teaInfo:function(){var t,e;return{bot_id:null===(t=this.robotDetailInfo)||void 0===t?void 0:t.bot_id,author_id:null===(e=this.robotDetailInfo)||void 0===e?void 0:e.user_id,user_id:this.currentUser?this.currentUser.id:"unknown"}}},mounted:function(){this.showTea()},methods:{showTip:function(){this.showTips=!0},hideTip:function(){this.showTips=!1},showBotTip:function(){this.position.length>14&&(this.showBotInfoTips=!0)},hideBotTip:function(){this.showBotInfoTips=!1},handleDeveloper:function(){this.$TEA("beconEvent","bot_author_click",this.teaInfo)},showTea:function(){var t;(null===(t=this.robotDetailInfo)||void 0===t?void 0:t.bot_id)&&this.$TEA("bot_detail_show",this.teaInfo)},toCreate:function(){this.$TEA("beconEvent","bot_create_click",_(_({},this.teaInfo),{},{coze_from:0})),window.open("https://www.coze.cn/","_blank")},toSendpins:function(){var t;this.$TEA("beconEvent","bot_talk_click",this.teaInfo),window.open(this.$router.resolve(this.$topicRoute({id:f.a},{robotId:null===(t=this.robotDetailInfo)||void 0===t?void 0:t.bot_id})).href,"_blank")}}}),C=(o(1194),o(29)),O=Object(C.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"info-row",on:{click:function(t){t.stopPropagation()}}},[o("app-link",{attrs:{to:t.$userRoute(t.userInfo.user_id,"robots"),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{size:100,url:t.robotDetailInfo.bot_avatar,alt:t.robotDetailInfo.bot_name+"的头像"}})],1),t._v(" "),o("div",{staticClass:"user-info"},[o("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:t.robotDetailInfo,universal:!1,tab:"robots"}}),t._v(" "),o("div",{staticClass:"position",on:{mouseenter:t.showBotTip,mouseleave:t.hideBotTip}},[t._v("\n        "+t._s(t.position)+"\n      ")]),t._v(" "),o("div",{staticClass:"developer"},[t._v("\n        开发者:\n        "),o("app-link",{attrs:{to:t.$userRoute(t.userInfo.user_id,"robots"),blank:!0},on:{click:t.handleDeveloper}},[o("span",{staticClass:"developer-user"},[t._v("\n            "+t._s(t.userInfo.user_name||t.userInfo.user_id)+"\n          ")])])],1)],1),t._v(" "),t.showBotInfoTips?o("div",{staticClass:"robot_info_tips"},[t._v("\n      "+t._s(t.position)+"\n      "),o("triangle",{staticClass:"triangle-top"})],1):t._e()],1),t._v(" "),o("div",{staticClass:"operate-btn",on:{mouseenter:t.showTip,mouseleave:t.hideTip}},[o("div",{on:{mouseenter:t.showTip,mouseleave:t.hideTip}},[o("Button",{staticClass:"btn",attrs:{attention:!1,size:"large","show-icon":!1,disabled:t.isOffline},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toSendpins(e)}}},[t._v("\n        去互动\n      ")])],1),t._v(" "),o("a",{staticClass:"create-btn btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toCreate(e)}}},[o("div",[t._v("去创建")])]),t._v(" "),t.showTips&&t.isOffline?o("p",{staticClass:"tip"},[t._v("\n      机器人已下线无法互动\n      "),o("triangle",{staticClass:"triangle-bottom"})],1):t._e()])])}),[],!1,null,"4d33cb53",null).exports,w=Object(n.defineComponent)({components:{Popover:c.a,RobotCard:O},props:{robotId:String,trigger:{type:String,default:"hover"},enablePopover:{type:Boolean,default:!0}},setup:function(t){var e=Object(n.ref)(null),o=Object(n.ref)();return{fetchUserPromise:o,robotInfo:e,handleShow:function(){t.robotId&&t.enablePopover&&(o.value=Object(r.a)({botId:t.robotId}).then((function(t){e.value=t.data})))}}},computed:{},methods:{showPopover:function(t,e){this.$refs.Popover.showPopover&&this.$refs.Popover.showPopover(t,e)},hidePopover:function(t){this.$refs.Popover.hidePopover&&this.$refs.Popover.hidePopover(t)}}}),k=(o(1195),Object(C.a)(w,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Popover",{ref:"Popover",staticClass:"user-popover",attrs:{promise:t.fetchUserPromise,trigger:t.trigger},on:{show:t.handleShow},scopedSlots:t._u([{key:"content",fn:function(){return[o("RobotCard",{attrs:{"robot-info":t.robotInfo}})]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,"78a63d78",null));e.a=k.exports},1091:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return r}));o(30),o(96),o(243);var n=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(t){throw"copy link error"}};function r(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var t=((null==content?void 0:content.trim())||"").split("\n")[0];return t.length<=30?t:t.substring(0,30)}},1093:function(t,e,o){},1094:function(t,e,o){},1095:function(t,e,o){"use strict";o.d(e,"a",(function(){return c})),o.d(e,"b",(function(){return l}));o(19);var n=o(5),r=o(3);function c(){var t=Object(r.c)();return{openReportModal:function(e,o){if(t){var n=t.proxy.$getBean("eventBus");n.emit(n.eventType.REPORT_CONTENT,e,o)}}}}function l(t){var e=Object(r.m)({visible:!1,show:!1});function o(){return(o=Object(n.a)(regeneratorRuntime.mark((function o(n,r){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.$validLogin()){o.next=2;break}return o.abrupt("return");case 2:e.show||(e.show=!0),e.visible=!0,e.itemId=n,e.idType=r;case 6:case"end":return o.stop()}}),o)})))).apply(this,arguments)}return{reportModalData:e,showReportModal:function(t,e){return o.apply(this,arguments)}}}},1096:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o(1147),r=o.n(n);function c(content){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:410,svg=new r.a({content:content,color:t,padding:0,width:e,height:e,background:"#ffffff",ecl:"L"}).svg();return"data:image/svg+xml;utf8,".concat(encodeURIComponent(svg))}},1099:function(t,e,o){},1100:function(t,e,o){},1101:function(t,e,o){},1102:function(t,e,o){},1103:function(t,e,o){},1106:function(t,e,o){"use strict";o(23);var n=o(3),r=o(1143),c=o(1137),l=o(209),d=(o(79),o(1165)),m=o.n(d),f=Object(n.b)({components:{MoreImageIcon:m.a},props:{count:{type:Number,required:!0,default:1}}}),v=(o(1166),o(29)),h=Object(v.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("MoreImageIcon",{staticClass:"icon-svg"}),this._v(" "),e("span",{staticClass:"icon-count"},[e("span",{staticClass:".plus"},[this._v("+")]),this._v(" "),e("span",[this._v(this._s(this.count))])])],1)}),[],!1,null,"6c6510ce",null).exports,_=Object(n.b)({components:{PinGallery:r.a,PinMobileGallery:c.a,MoreImageIcon:h},props:{list:{type:Array,required:!0,default:function(){return[]}},lazy:{type:Boolean,default:!0}},data:function(){return{isShowMobileGallery:!1,galleryVisible:!1}},computed:{galleryList:function(){var t=this;return this.list.map((function(e){var o=Object(l.b)(e.pic_url,t.list.length).isLong;return{url:e.pic_url,isLong:o,isLoaded:!1,isError:!1}}))}},methods:{openGallery:function(){this.$device.isMobile?this.isShowMobileGallery=!0:this.galleryVisible=!0},closeGallery:function(){this.isShowMobileGallery=!1,this.galleryVisible=!1}}}),y=(o(1167),Object(v.a)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.list.length>=1?o("div",{staticClass:"comment-img"},[o("Lazy",{attrs:{"data-src":t.list[0].pic_url,url:t.list[0].pic_url,resize:{w:120,h:120},crop:{w:120,h:120},lazy:t.lazy},on:{click:function(e){return e.stopPropagation(),t.openGallery(e)}}}),t._v(" "),t.list.length>1?o("div",{staticClass:"img-more-icon",on:{click:function(e){return e.stopPropagation(),t.openGallery(e)}}},[t._t("moreIcon",[o("MoreImageIcon",{attrs:{count:t.list.length-1}})])],2):t._e(),t._v(" "),t.galleryVisible?o("PinGallery",{attrs:{list:t.galleryList,"current-index":0},on:{closeGallery:t.closeGallery},nativeOn:{click:function(t){t.stopPropagation()}}}):t._e(),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.isShowMobileGallery?o("PinMobileGallery",{attrs:{list:t.list.map((function(t){return t.pic_url})),"current-index":0},on:{closeMobileGallery:t.closeGallery},nativeOn:{click:function(t){t.stopPropagation()}}}):t._e()],1)],1):t._e()}),[],!1,null,"204d24f0",null));e.a=y.exports},1109:function(t,e,o){},1110:function(t,e,o){t.exports=o.p+"img/image-error.3338abe.png"},1111:function(t,e,o){},1112:function(t,e,o){},1113:function(t,e,o){},1114:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.99976 7.93206L10.0656 3.86619C10.1633 3.76856 10.3215 3.76856 10.4192 3.86619L10.7727 4.21975C10.8704 4.31738 10.8704 4.47567 10.7727 4.5733L6.35331 8.99272C6.15805 9.18798 5.84147 9.18798 5.6462 8.99272L1.22679 4.5733C1.12916 4.47567 1.12916 4.31738 1.22679 4.21975L1.58034 3.86619C1.67797 3.76856 1.83626 3.76856 1.93389 3.86619L5.99976 7.93206Z"}})]))}}},1115:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"}})]))}}},1116:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM7.96483 7.91404C8.52898 7.91404 8.98631 7.45671 8.98631 6.89257C8.98631 6.32842 8.52898 5.87109 7.96483 5.87109C7.40069 5.87109 6.94336 6.32842 6.94336 6.89257C6.94336 7.45671 7.40069 7.91404 7.96483 7.91404ZM12.1699 6.89257C12.1699 7.45671 11.7126 7.91404 11.1484 7.91404C10.5843 7.91404 10.127 7.45671 10.127 6.89257C10.127 6.32842 10.5843 5.87109 11.1484 5.87109C11.7126 5.87109 12.1699 6.32842 12.1699 6.89257Z"}})]))}}},1117:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},_)},y),d.concat([o("path",{attrs:{d:"M1.66675 3.66927L3.50008 3.66927M3.50008 3.66927L3.50008 13.3359C3.50008 13.52 3.64932 13.6693 3.83342 13.6693L12.1667 13.6693C12.3508 13.6693 12.5001 13.52 12.5001 13.3359V3.66927M3.50008 3.66927L5.33342 3.66927M12.5001 3.66927L14.3334 3.66927M12.5001 3.66927L10.6667 3.66927M5.33342 3.66927V2.33594L10.6667 2.33594V3.66927M5.33342 3.66927L10.6667 3.66927","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}}),o("path",{attrs:{d:"M6.66675 6.5V10.5M9.33342 6.5V10.5","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},1118:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.21356 7.13688C9.49486 7.13688 10.5336 6.09818 10.5336 4.81688C10.5336 3.53557 9.49486 2.49688 8.21356 2.49688C6.93225 2.49688 5.89356 3.53557 5.89356 4.81688C5.89356 6.09818 6.93225 7.13688 8.21356 7.13688ZM8.21356 8.33688C10.1576 8.33688 11.7336 6.76092 11.7336 4.81688C11.7336 2.87283 10.1576 1.29688 8.21356 1.29688C6.26951 1.29688 4.69355 2.87283 4.69355 4.81688C4.69355 6.76092 6.26951 8.33688 8.21356 8.33688ZM5.91749 10.5125C4.30178 10.5125 2.99199 11.8223 2.99199 13.438C2.99199 13.4706 3.01845 13.4971 3.05108 13.4971H7.53515C7.86652 13.4971 8.13515 13.7657 8.13515 14.0971C8.13515 14.4285 7.86652 14.6971 7.53515 14.6971H3.05108C2.35571 14.6971 1.79199 14.1334 1.79199 13.438C1.79199 11.1595 3.63904 9.3125 5.91749 9.3125H7.53515C7.86652 9.3125 8.13515 9.58113 8.13515 9.9125C8.13515 10.2439 7.86652 10.5125 7.53515 10.5125H5.91749ZM9.78025 10.1265C10.0146 9.8922 10.3945 9.8922 10.6288 10.1265L11.908 11.4057L13.1833 10.1304C13.4176 9.89611 13.7975 9.89611 14.0318 10.1304C14.2661 10.3647 14.2661 10.7446 14.0318 10.979L12.7565 12.2542L14.0229 13.5206C14.2572 13.7549 14.2572 14.1348 14.0229 14.3692C13.7886 14.6035 13.4087 14.6035 13.1744 14.3692L11.908 13.1028L10.6377 14.3731C10.4034 14.6074 10.0235 14.6074 9.78914 14.3731C9.55483 14.1388 9.55483 13.7589 9.78914 13.5245L11.0594 12.2542L9.78025 10.975C9.54594 10.7407 9.54594 10.3608 9.78025 10.1265Z"}})]))}}},1119:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.06904 2.67359L13.856 12.6969C13.8684 12.7183 13.8687 12.7297 13.8686 12.7359C13.8684 12.7457 13.8654 12.7606 13.856 12.7769C13.8466 12.7932 13.8352 12.8032 13.8268 12.8083C13.8215 12.8115 13.8114 12.8169 13.7867 12.8169H2.21282C2.18809 12.8169 2.17799 12.8115 2.17273 12.8083C2.16432 12.8032 2.15294 12.7932 2.14354 12.7769C2.13413 12.7606 2.13109 12.7457 2.13092 12.7359C2.13081 12.7297 2.13117 12.7183 2.14354 12.6969L7.93048 2.67359C7.94284 2.65218 7.95258 2.64614 7.95795 2.64316C7.96654 2.6384 7.98095 2.63359 7.99976 2.63359C8.01858 2.63359 8.03299 2.6384 8.04157 2.64316C8.04694 2.64614 8.05668 2.65218 8.06904 2.67359ZM6.89125 2.07359C7.38392 1.22026 8.6156 1.22026 9.10828 2.07359L14.8952 12.0969C15.3879 12.9502 14.7721 14.0169 13.7867 14.0169H2.21282C1.22747 14.0169 0.611633 12.9502 1.10431 12.0969L6.89125 2.07359ZM7.99976 5.29656C8.33113 5.29656 8.59976 5.56519 8.59976 5.89656L8.59976 9.56844C8.59976 9.89981 8.33113 10.1684 7.99976 10.1684C7.66839 10.1684 7.39976 9.89981 7.39976 9.56844V5.89656C7.39976 5.56519 7.66839 5.29656 7.99976 5.29656ZM8.59976 11.2872C8.59976 11.6186 8.33113 11.8872 7.99976 11.8872C7.66839 11.8872 7.39976 11.6186 7.39976 11.2872C7.39976 10.9558 7.66839 10.6872 7.99976 10.6872C8.33113 10.6872 8.59976 10.9558 8.59976 11.2872Z"}})]))}}},1120:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"}})]))}}},1121:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64704 7.10003 2.80015 7.05661 2.93822L7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"}})]))}}},1122:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("circle",{attrs:{cx:"2.33301",cy:"8",r:"1.0625",fill:"#8A919F"}}),o("circle",{attrs:{cx:"8",cy:"8",r:"1.0625",fill:"#8A919F"}}),o("circle",{attrs:{cx:"13.667",cy:"8",r:"1.0625",fill:"#8A919F"}})]))}}},1123:function(t,e,o){},1124:function(t,e,o){},1125:function(t,e,o){},1126:function(t,e,o){},1127:function(t,e,o){},1128:function(t,e,o){},1129:function(t,e,o){},1130:function(t,e,o){},1132:function(t,e,o){"use strict";o.d(e,"d",(function(){return r})),o.d(e,"b",(function(){return c})),o.d(e,"a",(function(){return l})),o.d(e,"c",(function(){return d}));var n=o(28),r=[{name:"popular",text:"热门"},{name:"newest",text:"最新"}],c="6824710203112423437",l=n.f?"7173895829281833012":"6824710202562969614",d="@你想互动的机器人，碰撞AI火花吧～"},1137:function(t,e,o){"use strict";o(23),o(79);var n=o(3),r=o(1163),c=o.n(r),l=Object(n.b)({components:{LoadingIcon:c.a},props:{list:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},data:function(){return{index:this.currentIndex,screenWidth:0,itemStyle:{},imgStyleList:[],startPoint:{},movePoint:{},endPoint:{},groupTranslate:"",hasTransition:!1,loadedNum:0,loading:!0}},computed:{length:function(){return this.list.length},imgList:function(){var t=this;return this.list.map((function(e){return t.$imgUrlTransform(e)}))},groupStyle:function(){var t=this.screenWidth,e=this.length*t,o=this.index*t,n="";n=""===this.groupTranslate?"translateX(-".concat(o,"px)"):0===this.index?"translateX(".concat(this.groupTranslate,"px)"):"translateX(-".concat(o-this.groupTranslate,"px)");var r=this.hasTransition?".6s cubic-bezier(0.165, 0.84, 0.44, 1)":"";return{width:"".concat(e,"px"),transform:n,transition:r}}},watch:{loadedNum:function(t){t===this.length&&(this.setPosition(),this.loading=!1,document.body.addEventListener("touchstart",this.touchStart),document.body.addEventListener("touchmove",this.touchMove),document.body.addEventListener("touchend",this.touchEnd))}},mounted:function(){this.setBodyScroll(!1),this.initSize()},beforeDestroy:function(){this.close()},methods:{setBodyScroll:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],body=document.querySelector("body");body.style.overflow=t?null:"hidden"},close:function(){this.$emit("closeMobileGallery"),this.setBodyScroll()},toggle:function(t){"next"===t&&this.index<this.length-1&&this.index++,"prev"===t&&this.index>0&&this.index--},initSize:function(){var t=document.documentElement.clientWidth;this.screenWidth=t,this.itemStyle={width:"".concat(t,"px")}},setPoint:function(t){var e=t.changedTouches[0],o=e.clientX,n=e.clientY,r={touchstart:this.startPoint,touchmove:this.movePoint,touchend:this.endPoint}[t.type];this.$set(r,"x",o),this.$set(r,"y",n)},touchStart:function(t){this.hasTransition=!1,this.setPoint(t)},touchMove:function(t){this.setPoint(t);var e=this.startPoint.x,o=this.movePoint.x-e,n=o>0?o-30:o+30;Math.abs(o)>30&&(this.groupTranslate=n)},touchEnd:function(t){this.groupTranslate="",this.setPoint(t),this.touchSlide()},touchSlide:function(){var t=this.startPoint.x,e=this.endPoint.x;this.hasTransition=!0,e-t>120&&this.toggle("prev"),e-t<-120&&this.toggle("next")},setPosition:function(){var t=this;this.$nextTick((function(){var e=document.documentElement.clientHeight,o=t.$refs.img,n=[];for(var r in o){var c=o[r].offsetHeight,style={};if(c<e){var l=(e-c)/2;style.top="".concat(l,"px")}n.push(style)}t.imgStyleList=n}))},loaded:function(){this.loadedNum++},onError:function(){this.loadedNum++}}}),d=(o(1164),o(29)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mobile-gallery"},[o("div",{staticClass:"mobile-gallery-counter"},[t._v(t._s(t.index+1)+"/"+t._s(t.length))]),t._v(" "),o("div",{staticClass:"mobile-gallery-close",on:{click:t.close}},[t._v("关闭")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mobile-gallery-loading"},[o("LoadingIcon")],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"mobile-gallery-group",style:t.groupStyle},t._l(t.imgList,(function(img,e){return o("div",{key:e,staticClass:"mobile-gallery-img",style:t.itemStyle},[o("img",{ref:"img",refInFor:!0,style:t.imgStyleList[e],attrs:{src:img},on:{load:t.loaded,error:t.onError}})])})),0)])}),[],!1,null,"1775a238",null);e.a=component.exports},1138:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return c})),o.d(e,"b",(function(){return l}));o(44),o(68);var n=o(57),r={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var t=sessionStorage.getItem("SEARCH_PARAMS"),e=JSON.parse(t),o=e.query,r=e.search_attached_info,l=void 0===r?"":r,d=e.rank,m=e.display_search_type;return{query:o,detail_from:n.a.searchResult,search_attached_info:l,rank:d,display_search_type:m}}catch(t){return{}}}},1142:function(t,e,o){"use strict";function n(t,e){if((10==t.keyCode||13==t.keyCode)&&(t.ctrlKey||t.metaKey))return e()}o.d(e,"a",(function(){return n}))},1150:function(t,e,o){"use strict";var n=o(3),r=Object(n.b)({props:{user:{type:Object,default:null}},setup:function(t){var e=Object(n.c)(),o=Object(n.x)(),r=Object(n.a)((function(){return o.getters.USER||{}}));return{isVisible:Object(n.a)((function(){var e,o;return t.user?!t.user.isBindedPhone:!!(null===(e=r.value)||void 0===e?void 0:e.id)&&!(null===(o=r.value)||void 0===o?void 0:o.isBindedPhone)})),bindPhone:function(){null==e||e.proxy.$requestBindPhoneNumber()}}}}),c=(o(1153),o(29)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"auth-card"},[o("transition",{attrs:{name:"fade"}},[t.isVisible?o("div",{staticClass:"auth-cover"},[o("span",{staticClass:"hint"}),t._v("\n      您需要\n      "),o("a",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.bindPhone(e)}}},[t._v("绑定手机号")]),t._v("\n      后才可在社区内发布内容。\n    ")]):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"34f85b71",null);e.a=component.exports},1151:function(t,e,o){"use strict";o(10);var n=o(8),r=o(1154),c=o.n(r),l=Object(n.defineComponent)({components:{EmotionIcon:c.a,Picker:function(){return o.e(49).then(o.bind(null,4795))}},props:{label:{type:String,default:"表情"}},emits:["selectEmoji"],setup:function(t,e){var o=e.root,r=e.emit,c=Object(n.ref)(!1);var l=Object(n.ref)(!1),d=Object(n.watch)(c,(function(){l.value=!0,d()}));return{once:l,visible:c,toggleShow:function(){o.$validLoginAndBindPhone()&&(c.value=!c.value)},hide:function(){c.value=!1},handleChange:function(t){r("selectEmoji",t.source)}}}}),d=(o(1155),o(29)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:t.hide,expression:"hide"}],staticClass:"emoji-container"},[o("div",{staticClass:"emoji-box",class:t.visible&&"active",on:{click:t.toggleShow}},[o("EmotionIcon",{staticClass:"icon"}),t._v(" "),t.label?o("span",[t._v(t._s(t.label))]):t._e()],1),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.once?o("Picker",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],on:{change:t.handleChange}}):t._e()],1)],1)}),[],!1,null,"0c6d399b",null);e.a=component.exports},1153:function(t,e,o){"use strict";o(1093)},1154:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"}})]))}}},1155:function(t,e,o){"use strict";o(1094)},1156:function(t,e,o){"use strict";o.d(e,"b",(function(){return c})),o.d(e,"a",(function(){return d}));o(19);var n=o(5),r=o(69);function c(t){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(regeneratorRuntime.mark((function t(e){var o,n,c,cursor,l,d,m,f,v,h,_,y,C,data,O,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.userId,n=void 0===o?"":o,c=e.cursor,cursor=void 0===c?"0":c,l=e.limit,d=void 0===l?20:l,m=e.query,f=void 0===m?"":m,v=e.topicId,h=void 0===v?"":v,t.next=3,r.a.QueryBotList({user_id:n||"0",topic_id:h||"0",cursor:cursor,limit:d,query:f});case 3:return _=t.sent,y=_.count,C=void 0===y?0:y,data=_.data,O=_.cursor,w=_.has_more,t.abrupt("return",{total:C,list:Array.isArray(data)?data:[],cursor:O,hasMore:w});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function t(e){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.botId,t.next=3,r.a.QueryBotDetail({bot_id:o});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},1158:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"d",(function(){return c})),o.d(e,"e",(function(){return l})),o.d(e,"b",(function(){return d})),o.d(e,"f",(function(){return m})),o.d(e,"g",(function(){return f}));var n="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=banner",r="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=link",c="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=more",l="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",d="https://wenjuan.feishu.cn/m/cfm?t=sxwlA0AtjAxi-l0um",m="https://juejin.cn/book/6844733795329900551/section/6844733795371843597",f="https://juejin.cn/book/6844733795329900551/section/6925688212903952399"},1162:function(t,e,o){"use strict";o(79);var n=o(3),r=o(174),c=(o(44),o(68),o(19),o(5)),l=o(4),d=o(1186),m=o(95),f=o(7),v=o(56);var h=Object(n.b)({components:{Modal:d.a},setup:function(t,e){var o=e.root,r=Object(n.x)(),d=Object(n.n)(),h=Object(n.n)(),_=function(){var t=Object(n.x)(),e=Object(n.a)((function(){var e,o,n;return null!==(n=null===(o=null===(e=null==t?void 0:t.state)||void 0===e?void 0:e.dislike)||void 0===o?void 0:o.whiteList)&&void 0!==n?n:[]}));function o(){return(o=Object(c.a)(regeneratorRuntime.mark((function t(o){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.uid,r=o.disType,!e.value.includes(n)){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,v.b.MUpdateDislike({item_ids:[n],item_type:f.IdType.UserIdType,action:1,dis_type:r});case 6:m.Message.success({duration:2e3,closable:!1,isHtml:!0,content:'屏蔽成功，在<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>可取消屏蔽'}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),(null===t.t0||void 0===t.t0?void 0:t.t0.statusCode)===f.ERROR_NO.AUTHOR_DISLIKE_LIMIT?('<p class="block-failed-message">屏蔽沸点作者<span class="highlight">已达上限100</span>，</p><p class="block-failed-message">是否前往<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>清理屏蔽作者？</p>',m.Message.warning({duration:2e3,closable:!1,isHtml:!0,content:'<p class="block-failed-message">屏蔽沸点作者<span class="highlight">已达上限100</span>，</p><p class="block-failed-message">是否前往<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>清理屏蔽作者？</p>'})):m.Message.warning({duration:2e3,closable:!1,content:"屏蔽失败"});case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}return{dislikeWhiteList:e,blockUser:function(t){return o.apply(this,arguments)}}}(),y=_.dislikeWhiteList,C=_.blockUser,O=Object(n.a)((function(){return r.getters[l.USER]})),w=Object(n.n)(!1),k=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.$ensureAuthorized();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:if((null===(r=O.value)||void 0===r?void 0:r.user_id)&&e.user_id!==(null===(c=O.value)||void 0===c?void 0:c.user_id)){t.next=11;break}return console.error("doBlockUser error: 不支持未登录或者屏蔽自己"),t.abrupt("return");case 11:if(!y.value.includes(e.user_id)){t.next=14;break}return console.error("doBlockUser error: 屏蔽白名单用户不支持屏蔽"),t.abrupt("return");case 14:w.value=!0,h.value=e,d.value=n;case 17:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,o){return t.apply(this,arguments)}}();return{userInfo:h,isModalShow:w,handleModalOk:function(){w.value=!1,h.value&&d.value&&C({uid:h.value.user_id,disType:d.value})},doBlockUser:k}}}),_=o(29),y=Object(_.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Modal",{attrs:{value:t.isModalShow,user:t.userInfo},on:{"on-close":function(e){t.isModalShow=!1},"on-ok":t.handleModalOk}})}),[],!1,null,null,null).exports,C=o(1185),O=o(1095),w=o(1084),k=(o(207),o(244),o(63),o(0)),j=o(1114),x=o.n(j),I=o(385),P=o(1138),S=o(24),L=o(39),B=(o(11),o(40),o(60),o(85),o(71),o(10),o(1259),o(64),o(62)),M=o(34),R=o(16),E=o(208),T=o(1071),D=o(1068);var $=o(1070),A=o(1115),U=o.n(A),V=o(1116),F=o.n(V),N=o(1117),H=o.n(N),z=o(1118),Z=o.n(z),G=o(1119),W=o.n(G),K=o(1120),X=o.n(K),Y=o(1121),Q=o.n(Y),J=o(1122),tt=o.n(J);function et(){var t=Object(n.n)(!1),e=Object(n.n)();function o(){var o=e.value;if(o){var n=o.clientHeight;o.scrollHeight>n&&(t.value=!0)}}return Object(n.j)((function(){return o()})),{contentRef:e,needExpand:t,updateNeedExpand:o}}var ot=o(178),nt=o(1086),it=o(1090),st=o(1076),at=o(386),ct=o(387),lt=o(314),ut=o(1065),pt=o(179);function mt(t,e){var o=Object(n.c)(),l=null==o?void 0:o.proxy.$getBean("eventBus"),d=Object(n.n)(0),v=Object(n.n)(!1),h=Object(n.n)(!1);Object(n.j)((function(){(null==o?void 0:o.proxy)&&l&&t&&l.onVmLife(null==o?void 0:o.proxy,D.a.changeLike,(function(e){t===e.itemId&&(d.value=d.value+e.val,v.value=e.isActive)}))}));var _=function(){var n=Object(c.a)(regeneratorRuntime.mark((function n(){var c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!h.value){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,null==o?void 0:o.proxy.$ensureAuthorized();case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(2),n.abrupt("return");case 10:if(h.value=!0,c=v.value,v.value=!v.value,d=null,c){n.next=21;break}return Object(L.h)("like_action",{like_comment_mode:"this.mode"}),n.next=18,r.c.SaveDigg({item_id:t,item_type:e,client_type:f.ClientType.WEB},{showError:!1}).catch((function(){return null}));case 18:d=n.sent,n.next=24;break;case 21:return n.next=23,r.c.CancelDigg({item_id:t,item_type:e,client_type:f.ClientType.WEB},{showError:!1}).catch((function(){return null}));case 23:d=n.sent;case 24:if(h.value=!1,(null==d?void 0:d.err_no)===f.ERROR_NO.OK){n.next=29;break}return Object(pt.b)(null==d?void 0:d.err_no)||m.Message.error((null==d?void 0:d.err_msg)||"网络开小差了, 请稍后再试~"),v.value=c,n.abrupt("return");case 29:l&&ft(l,{itemId:t,val:v.value?1:-1,isActive:v.value});case 30:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(){return n.apply(this,arguments)}}();return{likeCount:d,isLike:v,toggleLike:_}}function ft(t,e){null==t||t.emit(D.a.changeLike,e)}var vt=o(1106);function bt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function ht(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?bt(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):bt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _t=Object(n.b)({components:{ImageBox:vt.a,CommentForm:w.a,RobotPopover:it.a,Popover:m.Popover,UserPopover:st.default,VipLevel:at.a,CommentIcon:U.a,CommentActiveIcon:F.a,LikeIcon:X.a,LikeActiveIcon:Q.a,DeleteIcon:H.a,BlockAuthorIcon:Z.a,ReportIcon:W.a,MoreDotIcon:tt.a,Robotname:nt.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},reply:{type:Object,required:!0,default:null},teaParams:{type:Object,default:null},hideReplyBtn:{type:Boolean,default:!1}},emits:["onFirstVisible","onDeleteClick","onReportClick","onBlockUserClick","onRequestLogin","onPublishReply"],setup:function(t,e){var o=e.emit,r=Object(n.c)(),c=Object(n.a)((function(){return t.reply.user_info})),l=Object(n.a)((function(){var e;return(null===(e=t.reply.reply_user)||void 0===e?void 0:e.user_name)?t.reply.reply_user:{}})),d=Object(n.a)((function(){return t.reply.reply_info||{}})),m=Object(n.a)((function(){var e;return t.comment.comment_info.user_id===(null===(e=t.currentUser)||void 0===e?void 0:e.userId)})),v=Object(n.a)((function(){return t.reply.bot_info})),h=Object(n.a)((function(){return t.reply.bot_info&&t.reply.bot_info.bot_id})),_=Object(n.a)((function(){return t.reply.reply_bot})),y=Object(n.a)((function(){return t.reply.reply_bot&&t.reply.reply_bot.bot_id})),C=Object(n.a)((function(){var e;return c.value.user_id===(null===(e=t.currentUser)||void 0===e?void 0:e.userId)})),O=Object(n.a)((function(){return c.value.user_id===t.source.userId})),w=Object(n.a)((function(){var e,o;return!!(null===(e=t.currentUser)||void 0===e?void 0:e.userId)&&(!!C.value||(null===(o=t.currentUser)||void 0===o?void 0:o.userId)===t.source.userId)})),k=mt(d.value.reply_id,f.IdType.ReplyIdType),j=k.likeCount,x=k.isLike,I=k.toggleLike;j.value=d.value.digg_count,x.value=t.reply.user_interact.is_digg;var P=Object(n.a)((function(){return j.value?Object(lt.c)(j.value):"点赞"})),S=Object(n.n)(!1),B=Object(n.n)(!1),M=Object(n.a)((function(){var e;return!!(null===(e=t.currentUser)||void 0===e?void 0:e.isBindPhone)})),R=Object(n.a)((function(){var e;return"回复".concat((h.value?null===(e=v.value)||void 0===e?void 0:e.bot_name:t.reply.user_info.user_name)||"","...")}));return ht(ht({robotInfo:v,isBotReply:h,replyRobot:_,isReplyRobot:y,isExpand:S,likeCountText:P,isLike:x,replyAuthor:c,replyInfo:d,IdType:f.IdType,isReplyAuthor:C,isCommentAuthor:m,isSourceAuthor:O,canDelete:w,replyUser:l},et()),{},{toggleLike:function(){var e,o,n,r,c;I(),Object($.c)($.b.commentItemDig,{comment_position:null!==(o=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==o?o:$.a.other,item_id:d.value.reply_id,item_type:f.IdType.ReplyIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(r=null===(n=t.teaParams)||void 0===n?void 0:n.from)&&void 0!==r?r:"other"}),Object(L.h)("like_action",{like_comment_mode:(null===(c=t.teaParams)||void 0===c?void 0:c.mode)||""})},FollowType:ut.b,parseUrlEmoji:ct.b,imgAssets:D.b,cardVisibleChange:function(e){var n,r,c,l;e&&(o("onFirstVisible"),Object($.c)($.b.commentItemShow,{comment_position:null!==(r=null===(n=t.teaParams)||void 0===n?void 0:n.comment_position)&&void 0!==r?r:$.a.other,item_id:d.value.reply_id,item_type:f.IdType.ReplyIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(l=null===(c=t.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}))},toggleReplyEditorVisible:function(){var e,n,c,l,m;Object($.c)($.b.replyButtonClick,{comment_position:null!==(n=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==n?n:$.a.other,item_id:d.value.reply_id,item_type:f.IdType.ReplyIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(l=null===(c=t.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),(null===(m=t.currentUser)||void 0===m?void 0:m.userId)?B.value=!B.value:null==r||r.proxy.$ensureAuthorized().catch((function(){o("onRequestLogin")}))},replyEditorVisible:B,replyAuthority:M,replyPlaceholder:R,onReplyFormEmptyBlur:function(){setTimeout((function(){B.value=!1}))},onPublishSuccess:function(t){B.value=!1,o("onPublishReply",t)}})}}),yt=(o(1196),Object(_.a)(_t,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.cardVisibleChange,expression:"cardVisibleChange",modifiers:{once:!0}}],staticClass:"reply-card",class:t.size,attrs:{"data-jj-helper-comment-type":"reply","data-jj-helper-comment-id":t.replyInfo.reply_id,"data-jj-helper-comment-status":t.replyInfo.reply_status,"data-jj-helper-item-id":t.source.itemId,"data-jj-helper-item-type":t.source.itemType}},[o("div",{staticClass:"reply-avatar"},[t.isBotReply?o("RobotPopover",{attrs:{"robot-id":t.robotInfo.bot_id}},[o("AppLink",{attrs:{to:t.$userRoute(""+t.robotInfo.user_id,"robots"),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{size:50,url:t.robotInfo.bot_avatar,alt:t.robotInfo.bot_name+"的头像"}})],1)],1):o("UserPopover",{attrs:{"user-id":t.replyAuthor.user_id,"enable-popover":!t.replyAuthor.is_logout,"show-jscore-level":!0,"tea-follow-type":t.FollowType.commentUserPopover}},[o("AppLink",{attrs:{to:t.$userRoute(t.replyAuthor.user_id),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{size:50,url:t.replyAuthor.avatar_large,alt:t.replyAuthor.user_name+"的头像"}},[o("VipLevel",{staticClass:"avatar-tag",attrs:{user:t.replyAuthor}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"reply-wrapper"},[o("div",{staticClass:"reply-content"},[o("div",{directives:[{name:"visible-change",rawName:"v-visible-change.visible.once",value:t.updateNeedExpand,expression:"updateNeedExpand",modifiers:{visible:!0,once:!0}}],ref:"contentRef",staticClass:"content",class:{expand:t.isExpand}},[o("div",{staticClass:"user-info"},[t.isBotReply?o("RobotPopover",{attrs:{"robot-id":t.robotInfo.bot_id}},[o("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:t.robotInfo,universal:!1,tab:"robots"}})],1):o("UserPopover",{attrs:{"user-id":t.replyAuthor.user_id,"enable-popover":!t.replyAuthor.is_logout,"show-jscore-level":!0,"tea-follow-type":t.FollowType.commentUserPopover}},[o("Username",{staticClass:"username",attrs:{"max-width":"120px",user:t.replyAuthor,universal:!1,"show-jpower-level":!1,"show-vip-level":!1,"show-jscore-level":!1}})],1),t._v(" "),t.replyAuthor.user_id===t.source.userId?o("div",{staticClass:"author-tag"},[t._v("\n            作者\n          ")]):t._e(),t._v(" "),t.replyUser.user_id?[o("span",[t._v("回复")]),t._v(" "),t.isReplyRobot?o("RobotPopover",{attrs:{"robot-id":t.replyRobot.bot_id}},[o("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:t.replyRobot,universal:!1,tab:"robots"}})],1):o("UserPopover",{attrs:{"user-id":t.replyUser.user_id,"enable-popover":!t.replyUser.is_logout,"show-jscore-level":!0,"tea-follow-type":t.FollowType.commentUserPopover}},[o("Username",{staticClass:"username",attrs:{"max-width":"120px",user:t.replyUser,universal:!1,"show-jpower-level":!1,"show-vip-level":!1,"show-jscore-level":!1}})],1),t._v(" "),t.replyUser.user_id===t.source.userId?o("div",{staticClass:"author-tag"},[t._v("\n              作者\n            ")]):t._e()]:t._e(),t._v(" "),o("span",[t._v(":")])],2),t._v(" "),o("span",{domProps:{innerHTML:t._s(t.parseUrlEmoji(t.replyInfo.reply_content))}})]),t._v(" "),t.needExpand?o("div",{staticClass:"expand-action-wrap"},[t.isExpand?o("span",{staticClass:"expand-action",on:{click:function(e){t.isExpand=!1}}},[t._v("\n          收起\n        ")]):o("span",{staticClass:"expand-action",on:{click:function(e){t.isExpand=!0}}},[t._v("\n          展开\n        ")])]):t._e(),t._v(" "),o("div",{staticClass:"reply-img-box"},[o("ImageBox",{attrs:{list:t.replyInfo.reply_pics}})],1)]),t._v(" "),o("div",{staticClass:"reply-action"},[o("time",{staticClass:"action-time",attrs:{dateTime:t._f("iso")(1e3*t.replyInfo.ctime),title:new Date(1e3*t.replyInfo.ctime)}},[t._v("\n        "+t._s(t._f("relative")(1e3*t.replyInfo.ctime))+"\n      ")]),t._v(" "),o("div",{staticClass:"action-digg",class:t.isLike&&"active",on:{click:t.toggleLike}},[t.isLike?o("LikeActiveIcon",{staticClass:"icon"}):o("LikeIcon",{staticClass:"icon"}),t._v("\n        "+t._s(t.likeCountText)+"\n      ")],1),t._v(" "),t.hideReplyBtn?t._e():o("div",{staticClass:"action-reply",class:t.replyEditorVisible&&"active",on:{click:function(e){return e.stopPropagation(),t.toggleReplyEditorVisible(e)}}},[t.replyEditorVisible?o("CommentActiveIcon",{staticClass:"icon"}):o("CommentIcon",{staticClass:"icon"}),t._v("\n        "+t._s(t.replyEditorVisible?"取消回复":"回复")+"\n      ")],1),t._v(" "),o("div",{staticStyle:{flex:"1"},attrs:{"data-jj-comment-action":t.replyInfo.reply_id}}),t._v(" "),o("div",{staticClass:"more-action"},[o("Popover",{staticClass:"more-popover",attrs:{"append-to-body":!1,"visible-arrow":!1,trigger:"hover",placement:"bottom-end"},scopedSlots:t._u([{key:"content",fn:function(){return[o("ul",{staticClass:"more-menu"},[t.canDelete?o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onDeleteClick",{itemId:t.replyInfo.reply_id,itemType:t.IdType.ReplyIdType})}}},[o("DeleteIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("删除")])],1):t._e(),t._v(" "),t.isReplyAuthor?t._e():o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onBlockUserClick",{userInfo:t.replyAuthor,from:t.IdType.ReplyIdType})}}},[o("BlockAuthorIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("\n                  屏蔽作者："+t._s(t.replyAuthor.user_name)+"\n                ")])],1),t._v(" "),t.isReplyAuthor?t._e():o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onReportClick",{itemId:t.replyInfo.reply_id,itemType:t.IdType.CommentIdType})}}},[o("ReportIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("举报")])],1)])]},proxy:!0}])},[o("div",{staticClass:"more-btn"},[o("MoreDotIcon")],1)])],1)]),t._v(" "),o("keep-alive",[t.replyEditorVisible?o("div",{staticClass:"reply-editor"},[o("CommentForm",{staticClass:"reply-editor",attrs:{size:t.size,"current-user":t.currentUser,"avatar-visible":!1,source:t.source,comment:t.comment,reply:t.reply,"auto-focus":t.replyAuthority,placeholder:t.replyPlaceholder,"tea-params":t.teaParams,"submit-title":"回复"},on:{onEmptyBlur:t.onReplyFormEmptyBlur,onPublishSuccess:t.onPublishSuccess}})],1):t._e()])],1)])}),[],!1,null,"624473bc",null).exports),gt=Object(n.b)({components:{Reply:yt,MoreIcon:x.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},teaParams:{type:Object,default:null},previewReply:{type:Boolean,default:!0},hideReplyBtn:{type:Boolean,default:!1}},emits:["onReportClick","onBlockUserClick","onPublishReply"],setup:function(t){var e=function(t){var e=t.sourceId,o=t.sourceType,l=t.comment,d=t.pageSize,v=void 0===d?10:d,h=t.ifPreviewReply,_=void 0===h||h,y=Object(n.c)(),C=Object(n.n)(""),O=null==y?void 0:y.proxy.$getBean("eventBus"),w=Object(n.n)("0"),k=Object(n.n)([]),j=Object(n.n)(!1),x=Object(n.n)(!0),I=Object(n.n)(!1),P=Object(n.a)((function(){return k.value.reduce((function(t,e){return t[e.reply_info.reply_id]=e,t}),{})})),S=Object(T.a)(l.comment_id),L=S.commentCount,$=S.setCommentCount,A=S.emitChangeCommentCount;$(l.comment_info.reply_count),_?(k.value=l.reply_infos||[],k.value.length>=L.value&&(x.value=!1)):k.value.length>=L.value&&(x.value=!1);var U=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(){var n,c,d,f,h,data,cursor,_,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!j.value&&x.value){t.next=2;break}return t.abrupt("return");case 2:return j.value=!0,I.value=!1,t.next=6,Object(E.a)(r.c.QueryCommentReplies({comment_id:l.comment_id,item_id:e,item_type:o,cursor:w.value,limit:v,client_type:R.e},{showError:!1}));case 6:if(n=t.sent,c=Object(M.a)(n,2),d=c[0],f=c[1],j.value=!1,!d&&(null==f?void 0:f.err_no)===r.b.ERROR_NO.OK){t.next=16;break}return I.value=!0,m.Message.error((null==f?void 0:f.err_msg)||"拉取回复失败, 请稍后重试"),console.error(d||f),t.abrupt("return");case 16:h=f.data,data=void 0===h?[]:h,cursor=f.cursor,_=f.count,y=f.has_more,$(_),C.value=w.value,w.value=cursor,x.value=y,k.value=k.value.concat(data.filter((function(t){return!P.value[t.reply_info.reply_id]})));case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V={},F=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P.value[o]&&!V[o]){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,null==y?void 0:y.proxy.$ensureAuthorized();case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return");case 10:if(window.confirm("确定删除这条回复吗？")){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,r.c.DeleteCommentReply({comment_id:l.comment_id,reply_id:o},{showError:!1}).catch((function(){return null}));case 15:if(n=t.sent,V[o]=!1,(null==n?void 0:n.err_no)===f.ERROR_NO.OK){t.next=20;break}return m.Message.error((null==n?void 0:n.err_msg)||"网络开小差了, 请稍后再试"),t.abrupt("return");case 20:m.Message.success("删除成功"),$(L.value-1),A(e,-1),null==O||O.emit(D.a.deleteReply,{sourceId:e,commentId:l.comment_id,replyId:o});case 24:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),N=function(t){k.value=[t].concat(Object(B.a)(k.value))};return Object(n.j)((function(){(null==y?void 0:y.proxy)&&O&&e&&(O.onVmLife(null==y?void 0:y.proxy,D.a.publishReply,(function(t){l.comment_id===t.itemId&&N(t.val)})),O.onVmLife(null==y?void 0:y.proxy,D.a.deleteReply,(function(t){l.comment_id===t.commentId&&(k.value=k.value.filter((function(e){return e.reply_info.reply_id!==t.replyId})))})))})),{loading:j,fetchError:I,currentCursor:C,nextCursor:w,replyList:k,hasMore:x,replyCount:L,resetList:function(){C.value="",w.value="0",k.value=[],j.value=!1,x.value=!0,I.value=!1},fetchData:U,deleteReply:F,publishReply:N}}({sourceId:t.source.itemId,sourceType:t.source.itemType,comment:t.comment,pageSize:30,ifPreviewReply:t.previewReply}),o=e.currentCursor,l=e.nextCursor,d=e.replyList,v=e.fetchData,h=e.deleteReply,_=e.hasMore;return{currentCursor:o,nextCursor:l,replyList:d,fetchData:function(){var e,o;Object($.c)($.b.moreReplyClick,{comment_position:null!==(o=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==o?o:$.a.other,item_id:t.comment.comment_id,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0}),v()},deleteReply:h,replyCount:e.replyCount,loading:e.loading,hasMore:_,fetchError:e.fetchError}}}),Ct=(o(1197),Object(_.a)(gt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.replyList.length?o("div",{staticClass:"reply-list",class:t.size},[t._l(t.replyList,(function(e){return o("Reply",{key:e.reply_info.reply_id,staticClass:"reply-item",attrs:{"data-cid":e.reply_info.reply_id,size:t.size,"current-user":t.currentUser,source:t.source,comment:t.comment,reply:e,"tea-params":t.teaParams,"hide-reply-btn":t.hideReplyBtn},on:{onReportClick:function(e){return t.$emit("onReportClick",e)},onBlockUserClick:function(e){return t.$emit("onBlockUserClick",e)},onDeleteClick:function(o){return t.deleteReply(e.reply_info.reply_id)},onPublishReply:function(e){return t.$emit("onPublishReply",e)}}})})),t._v(" "),t.hasMore?o("div",{staticClass:"top-has-more",class:t.size,on:{click:t.fetchData}},[t.fetchError?o("span",[t._v("加载出错, 请点击重试")]):t.loading?o("span",[t._v("加载中...")]):t.currentCursor?o("span",[t._v("\n      加载更多回复\n      "),o("MoreIcon")],1):o("span",[t._v("\n      查看全部 "+t._s(t.replyCount)+" 条回复\n      "),o("MoreIcon")],1)]):t._e()],2):t.hasMore&&t.replyCount>0?o("div",{staticClass:"top-has-more",on:{click:t.fetchData}},[t.fetchError?o("span",[t._v("加载出错, 请点击重试")]):t.loading?o("span",[t._v("加载中...")]):o("span",[t._v("\n    查看全部 "+t._s(t.replyCount)+" 条回复\n    "),o("MoreIcon")],1)]):t._e()}),[],!1,null,"48aabfe4",null).exports);function Ot(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function wt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ot(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ot(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var kt=Object(n.b)({components:{Popover:m.Popover,UserPopover:st.default,VipLevel:at.a,Lazy:ot.a,CommentForm:w.a,ReplyList:Ct,CommentIcon:U.a,CommentActiveIcon:F.a,LikeIcon:X.a,ImageBox:vt.a,LikeActiveIcon:Q.a,DeleteIcon:H.a,BlockAuthorIcon:Z.a,ReportIcon:W.a,MoreDotIcon:tt.a,Robotname:nt.a,RobotPopover:it.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},previewReply:{type:Boolean,default:!0},teaParams:{type:Object,default:null},hideReplyBtn:{type:Boolean,default:!1}},emits:["onFirstVisible","onDeleteClick","onReportClick","onBlockUserClick","onRequestLogin","onPublishComment"],setup:function(t,e){var o=e.emit,r=Object(n.c)(),c=Object(n.a)((function(){return t.comment.user_info||{}})),l=Object(n.a)((function(){return t.comment.bot_info})),d=Object(n.a)((function(){return t.comment.bot_info&&t.comment.bot_info.bot_id})),m=Object(n.a)((function(){return t.comment.comment_info||{}})),v=Object(n.a)((function(){return c.value.is_logout})),h=Object(n.a)((function(){var e;return(null===(e=t.currentUser)||void 0===e?void 0:e.userId)===c.value.user_id})),_=Object(n.a)((function(){return c.value.user_id===t.source.userId})),y=Object(n.a)((function(){var e,o;return!!(null===(e=t.currentUser)||void 0===e?void 0:e.userId)&&(!!h.value||(null===(o=t.currentUser)||void 0===o?void 0:o.userId)===t.source.userId)})),C=Object(T.a)(t.comment.comment_id).commentCount;C.value=m.value.reply_count||0;var O=mt(t.comment.comment_id,f.IdType.CommentIdType),w=O.likeCount,k=O.isLike,j=O.toggleLike;w.value=m.value.digg_count||0,k.value=!!m.value.is_digg;var x=Object(n.a)((function(){return C.value?Object(lt.c)(C.value):"评论"})),I=Object(n.a)((function(){return w.value?Object(lt.c)(w.value):"点赞"})),P=Object(n.n)(!1),S=Object(n.n)(!1),B=Object(n.a)((function(){var e;return!!(null===(e=t.currentUser)||void 0===e?void 0:e.isBindPhone)})),M=Object(n.a)((function(){var e;return"回复".concat(d.value?null===(e=l.value)||void 0===e?void 0:e.bot_name:t.comment.user_info.user_name,"...")}));return wt(wt({},et()),{},{isExpand:P,isBotComment:d,commentRobot:l,likeCountText:I,commentCountText:x,isLike:k,commentAuthor:c,commentInfo:m,IdType:f.IdType,isCommentAuthor:h,isSourceAuthor:_,canDelete:y,commentAuthorLogout:v,toggleLike:function(){var e,o,n,r,c;j(),Object($.c)($.b.commentItemDig,{comment_position:null!==(o=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==o?o:$.a.other,item_id:m.value.comment_id,item_type:f.IdType.CommentIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(r=null===(n=t.teaParams)||void 0===n?void 0:n.from)&&void 0!==r?r:"other"}),Object(L.h)("like_action",{like_comment_mode:(null===(c=t.teaParams)||void 0===c?void 0:c.mode)||""})},FollowType:ut.b,parseUrlEmoji:ct.b,imgAssets:D.b,cardVisibleChange:function(e){var n,r,c,l;e&&(Object($.c)($.b.commentItemShow,{comment_position:null!==(r=null===(n=t.teaParams)||void 0===n?void 0:n.comment_position)&&void 0!==r?r:$.a.other,item_id:m.value.comment_id,item_type:f.IdType.CommentIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(l=null===(c=t.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),o("onFirstVisible"))},toggleReplyEditorVisible:function(){var e,n,c,l,d;Object($.c)($.b.replyButtonClick,{comment_position:null!==(n=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==n?n:$.a.other,item_id:m.value.comment_id,item_type:f.IdType.CommentIdType,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment:t.comment.is_hot?1:0,from:null!==(l=null===(c=t.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),(null===(d=t.currentUser)||void 0===d?void 0:d.userId)?S.value=!S.value:null==r||r.proxy.$ensureAuthorized().catch((function(){o("onRequestLogin")}))},replyEditorVisible:S,replyAuthority:B,replyPlaceholder:M,onReplyFormEmptyBlur:function(){setTimeout((function(){S.value=!1}),100)},onPublishSuccess:function(t){S.value=!1,o("onPublishComment",t)},onPublishReply:function(t){o("onPublishReply",t)}})}}),jt=(o(1198),Object(_.a)(kt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment-card",class:t.size,attrs:{"data-jj-helper-comment-type":"comment","data-jj-helper-comment-id":t.comment.comment_id,"data-jj-helper-comment-status":t.commentInfo.comment_status,"data-jj-helper-item-id":t.source.itemId,"data-jj-helper-item-type":t.source.itemType}},[o("div",{staticClass:"comment-avatar"},[t.isBotComment?o("RobotPopover",{attrs:{"robot-id":t.commentRobot.bot_id}},[o("AppLink",{attrs:{to:t.$userRoute(""+t.commentRobot.user_id,"robots"),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{size:50,url:t.commentRobot.bot_avatar,alt:t.commentRobot.bot_name+"的头像"}})],1)],1):o("UserPopover",{attrs:{"user-id":t.commentAuthor.user_id,"enable-popover":!t.commentAuthorLogout,"show-jscore-level":!0,"tea-follow-type":t.FollowType.commentUserPopover}},[o("AppLink",{attrs:{to:t.$userRoute(t.commentAuthor.user_id),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{size:50,url:t.commentAuthor.avatar_large,alt:t.commentAuthor.user_name+"的头像"}},[o("VipLevel",{staticClass:"avatar-tag",attrs:{user:t.commentAuthor}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"comment-wrapper"},[o("div",{staticClass:"comment-header"},[t.isBotComment?o("RobotPopover",{staticStyle:{"flex-shrink":"0","flex-grow":"0"},attrs:{"robot-id":t.commentRobot.bot_id}},[o("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:t.commentRobot,universal:!1,tab:"robots"}})],1):o("UserPopover",{attrs:{"user-id":t.commentAuthor.user_id,"enable-popover":!t.commentAuthorLogout,"show-jscore-level":!0,"tea-follow-type":t.FollowType.commentUserPopover}},[o("Username",{staticClass:"username",attrs:{"max-width":"300px",user:t.commentAuthor,universal:!1,"show-jpower-level":!0,"show-vip-level":!1,"show-jscore-level":!1}})],1),t._v(" "),t.isSourceAuthor&&!t.isBotComment?o("div",{staticClass:"author-tag"},[t._v("\n        作者\n      ")]):t._e(),t._v(" "),o("div",{staticClass:"author-intro"},[t._v("\n        "+t._s(t.isBotComment?t.commentRobot.bot_description:t.$formatUserIntro(t.commentAuthor))+"\n      ")]),t._v(" "),o("div",{staticStyle:{flex:"1"}}),t._v(" "),t.comment.is_hot?o("div",{staticStyle:{display:"flex","flex-shrink":"0","flex-grow":"0"}},[o("Lazy",{staticClass:"hot-icon",attrs:{url:t.imgAssets.hotTag}})],1):t._e()],1),t._v(" "),o("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.cardVisibleChange,expression:"cardVisibleChange",modifiers:{once:!0}}],staticClass:"comment-content"},[o("div",{directives:[{name:"visible-change",rawName:"v-visible-change.visible.once",value:t.updateNeedExpand,expression:"updateNeedExpand",modifiers:{visible:!0,once:!0}}],ref:"contentRef",staticClass:"content",class:{expand:t.isExpand},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.commentInfo.comment_content))}}),t._v(" "),t.needExpand?o("div",{staticClass:"expand-action-wrap"},[t.isExpand?o("span",{staticClass:"expand-action",on:{click:function(e){t.isExpand=!1}}},[t._v("\n          收起\n        ")]):o("span",{staticClass:"expand-action",on:{click:function(e){t.isExpand=!0}}},[t._v("\n          展开\n        ")])]):t._e(),t._v(" "),t.commentInfo.comment_pics&&t.commentInfo.comment_pics.length?o("div",{staticClass:"comment-img-box"},[o("ImageBox",{attrs:{list:t.commentInfo.comment_pics}})],1):t._e()]),t._v(" "),o("div",{staticClass:"comment-action",attrs:{"jj-comment-anchor-bottom":"true"}},[o("time",{staticClass:"action-time",attrs:{dateTime:t._f("iso")(1e3*t.commentInfo.ctime),title:new Date(1e3*t.commentInfo.ctime)}},[t._v("\n        "+t._s(t._f("relative")(1e3*t.commentInfo.ctime))+"\n      ")]),t._v(" "),o("div",{staticClass:"action-digg",class:t.isLike&&"active",on:{click:function(e){return e.stopPropagation(),t.toggleLike(e)}}},[t.isLike?o("LikeActiveIcon",{staticClass:"icon"}):o("LikeIcon",{staticClass:"icon"}),t._v("\n        "+t._s(t.likeCountText)+"\n      ")],1),t._v(" "),t.hideReplyBtn?t._e():o("div",{staticClass:"action-reply",class:t.replyEditorVisible&&"active",on:{click:function(e){return e.stopPropagation(),t.toggleReplyEditorVisible(e)}}},[t.replyEditorVisible?o("CommentActiveIcon",{staticClass:"icon"}):o("CommentIcon",{staticClass:"icon"}),t._v("\n        "+t._s(t.replyEditorVisible?"取消回复":t.commentCountText)+"\n      ")],1),t._v(" "),o("div",{staticStyle:{flex:"1"},attrs:{"data-jj-comment-action":t.comment.comment_id}}),t._v(" "),o("div",{staticClass:"more-action"},[o("Popover",{staticClass:"more-popover",attrs:{"append-to-body":!1,"visible-arrow":!1,trigger:"hover",placement:"bottom-end"},scopedSlots:t._u([{key:"content",fn:function(){return[o("ul",{staticClass:"more-menu"},[t.canDelete&&!t.isBotComment?o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onDeleteClick",{itemId:t.commentInfo.comment_id,itemType:t.IdType.CommentIdType})}}},[o("DeleteIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("删除")])],1):t._e(),t._v(" "),t.isCommentAuthor||t.isBotComment?t._e():o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onBlockUserClick",{userInfo:t.commentAuthor,from:t.IdType.CommentIdType})}}},[o("BlockAuthorIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("\n                  屏蔽作者："+t._s(t.commentAuthor.user_name)+"\n                ")])],1),t._v(" "),t.isCommentAuthor?t._e():o("li",{on:{click:function(e){return e.stopPropagation(),t.$emit("onReportClick",{itemId:t.commentInfo.comment_id,itemType:t.IdType.CommentIdType})}}},[o("ReportIcon",{staticClass:"menu-icon"}),t._v(" "),o("div",{staticClass:"menu-label"},[t._v("举报")])],1)])]},proxy:!0}])},[o("div",{staticClass:"more-btn"},[o("MoreDotIcon")],1)])],1)]),t._v(" "),o("keep-alive",[t.replyEditorVisible?o("div",{staticClass:"comment-reply-editor"},[o("CommentForm",{staticClass:"comment-form",attrs:{size:t.size,"current-user":t.currentUser,source:t.source,comment:t.comment,"avatar-visible":!1,"auto-focus":t.replyAuthority,placeholder:t.replyPlaceholder,"tea-params":t.teaParams,"submit-title":"回复"},on:{onEmptyBlur:t.onReplyFormEmptyBlur,onPublishSuccess:t.onPublishSuccess}})],1):t._e()]),t._v(" "),o("div",{staticClass:"comment-reply-wrapper"},[o("ReplyList",{attrs:{size:t.size,"current-user":t.currentUser,source:t.source,comment:t.comment,"tea-params":t.teaParams,"preview-reply":t.previewReply,"hide-reply-btn":t.hideReplyBtn},on:{onReportClick:function(e){return t.$emit("onReportClick",e)},onBlockUserClick:function(e){return t.$emit("onBlockUserClick",e)},onPublishReply:t.onPublishReply}})],1)],1)])}),[],!1,null,"01ae2ffd",null).exports);function xt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function It(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?xt(Object(source),!0).forEach((function(e){Object(k.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):xt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Pt=Object(n.b)({components:{Comment:jt,MoreIcon:x.a,CommonEmpty:I.b},props:{startLoadMore:{type:Boolean,default:!0},size:{type:String,default:"default"},count:{type:Number,default:0},teaParams:{type:Object,default:null},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},hasSort:{type:Boolean,default:!1},defaultSort:{type:Number,default:r.a.TimeDesc},firstPageSize:{type:Number,default:3},loadMorePageSize:{type:Number,default:20},commentDisplayMax:{type:Number,default:0},previewReply:{type:Boolean,default:!0},anchorComment:{type:Object,default:null},filterStarComments:{type:Boolean,default:!1},hideReplyBtn:{type:Boolean,default:!1},showEmptyPlaceholder:{type:Boolean,default:!0}},emits:["refetch","onReplyPublish","onDeleteClick","onReportClick","onBlockUserClick","onSortChange","onCommentLimit"],setup:function(t,e){var o=e.emit,l=Object(n.n)(!1),d=Object(n.c)(),v=function(t){var e=t.sourceId,o=t.sourceType,l=t.sort,d=t.commentCount,v=void 0===d?0:d,h=t.firstPageSize,_=void 0===h?10:h,y=t.loadMorePageSize,C=void 0===y?20:y,O=t.anchor,w=t.filterStarComments,k=void 0!==w&&w,j=t.commentDisplayMax,x=Object(n.c)(),I=null==x?void 0:x.proxy.$getBean("eventBus"),P=Object(n.n)(l),S=Object(n.n)(""),L=Object(n.n)("0"),$=Object(n.n)([]),A=Object(n.n)(!1),U=Object(n.n)(!0),V=Object(n.n)(!1),F=Object(n.n)(""),N=Object(n.a)((function(){return $.value.reduce((function(t,e){return t[e.comment_id]=e,t}),{})})),H=Object(T.a)(e),z=H.commentCount,Z=H.setCommentCount;z.value=v;var G=function(){S.value="",L.value="0",$.value=[],A.value=!1,U.value=!0,V.value=!1},W=[];function K(){return new Promise((function(t){A.value?W.push(t):(G(),t())}))}Object(n.y)(A,(function(){!A.value&&W.length>0&&(W.forEach((function(t){return t()})),W=[],G())}));var X=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(){var n,c,l,d,v,h,data,cursor,y,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!A.value&&U.value){t.next=2;break}return t.abrupt("return");case 2:return A.value=!0,V.value=!1,t.next=6,Object(E.a)(r.c.QueryItemComments({item_id:e,item_type:o,cursor:L.value,limit:"0"===L.value?_:C,sort:P.value,client_type:R.e},{showError:!1}));case 6:if(n=t.sent,c=Object(M.a)(n,2),l=c[0],d=c[1],!O||"0"!==L.value||F.value){t.next=15;break}return t.next=13,r.c.GetCommentDetail({item_id:O.itemId,item_type:O.itemType},{showError:!1}).catch((function(t){return console.warn("err get anchor comment detail, err:",t)}));case 13:(null==(v=t.sent)?void 0:v.err_no)!==r.b.ERROR_NO.OK?console.error("GetCommentDetail error",v):(F.value=O.itemId,$.value=[v.data]);case 15:if(A.value=!1,!l&&(null==d?void 0:d.err_no)===r.b.ERROR_NO.OK){t.next=21;break}return V.value=!0,m.Message.error((null==d?void 0:d.err_msg)||"拉取评论失败, 请稍后重试"),console.error(l||d),t.abrupt("return");case 21:h=d.data,data=void 0===h?[]:h,cursor=d.cursor,y=d.count,w=d.has_more,Z(y),S.value=L.value,L.value=cursor,U.value=w,$.value=$.value.concat(data.filter((function(t){return!N.value[t.comment_id]&&(!k||t.comment_info.comment_status===f.CommentStatus.Star)}))),j&&($.value=$.value.slice(0,j));case 28:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y={},Q=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(o){var n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=N.value[o],N.value[o]&&!Y[o]){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,null==x?void 0:x.proxy.$ensureAuthorized();case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(3),t.abrupt("return");case 11:if(window.confirm("确定删除这条评论吗？")){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,r.c.DeleteComment({comment_id:o},{showError:!1}).catch((function(){return null}));case 16:if(c=t.sent,Y[o]=!1,(null==c?void 0:c.err_no)===f.ERROR_NO.OK){t.next=21;break}return m.Message.error((null==c?void 0:c.err_msg)||"网络开小差了, 请稍后再试"),t.abrupt("return");case 21:m.Message.success("删除成功"),Z(z.value+(-1-1*n.comment_info.reply_count)),null==I||I.emit(D.a.deleteComment,{sourceId:e,commentId:o});case 24:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),J=function(t){$.value=[t].concat(Object(B.a)($.value))};return Object(n.j)((function(){(null==x?void 0:x.proxy)&&I&&e&&(I.onVmLife(null==x?void 0:x.proxy,D.a.publishComment,(function(t){e===t.itemId&&J(t.val)})),I.onVmLife(null==x?void 0:x.proxy,D.a.deleteComment,(function(t){e===t.sourceId&&($.value=$.value.filter((function(e){return e.comment_id!==t.commentId})))})))})),{anchorShow:F,loading:A,fetchError:V,currentCursor:S,nextCursor:L,commentList:$,hasMore:U,commentCount:z,sort:P,setSort:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.value=t,e.next=3,K();case 3:return e.next=5,X();case 5:case"end":return e.stop()}}),e)})))()},resetList:K,fetchData:X,deleteComment:Q,publishComment:J}}({sourceId:t.source.itemId,sourceType:t.source.itemType,sort:t.defaultSort,commentCount:t.count,firstPageSize:t.firstPageSize,loadMorePageSize:t.loadMorePageSize,anchor:t.anchorComment,filterStarComments:t.filterStarComments,commentDisplayMax:t.commentDisplayMax}),h=v.sort,_=v.loading,y=v.fetchError,C=v.hasMore,O=v.commentCount,w=v.commentList,j=v.currentCursor,x=v.nextCursor,I=v.anchorShow,A=v.setSort,U=v.fetchData,V=v.publishComment,F=v.deleteComment;Object(n.y)((function(){return t.defaultSort}),(function(){A(t.defaultSort)})),Object(n.y)(I,(function(t){t&&Object(n.g)((function(){var e,o,n,r=null==d?void 0:d.proxy.$el.querySelector('[data-cid="'.concat(t,'"]'));if(r){if(r.classList.add("anchor-active"),((null===(o=null===(e=w.value.find((function(e){return String(e.comment_id)===t})))||void 0===e?void 0:e.reply_infos)||void 0===o?void 0:o.length)||0)>0){var c=r.getBoundingClientRect().bottom,l=((null===(n=r.querySelector("[jj-comment-anchor-bottom=true]"))||void 0===n?void 0:n.getBoundingClientRect())||{}).bottom,m=c-(void 0===l?c:l)-4;r.style.setProperty("--juejin-anchor-bottom","".concat(m,"px"))}else r.style.setProperty("--juejin-anchor-bottom","0");setTimeout((function(){r.classList.remove("anchor-active")}),3e3)}}))}));var N=Object(n.n)(t.startLoadMore);Object(n.j)((function(){return U()}));var H=Object(n.a)((function(){return It(It({},t.teaParams),{},{mode:h.value===r.a.HotDesc?"hot":"new"})})),z=!0;return Object(n.y)(l,(function(){var e;z&&0!==(w.value||[]).length&&(z=!1,Object($.c)($.b.commentShow,{comment_position:null!==(e=H.value.comment_position)&&void 0!==e?e:$.a.other,par_item_id:t.source.itemId,mode:H.value.mode||(h.value===r.a.HotDesc?"hot":"new"),hot_comment_status:w.value.findIndex((function(t){return t.is_hot}))>=0?1:0}))})),Object(n.y)(w,(function(){var e;z&&l.value&&0!==(w.value||[]).length&&(z=!1,Object($.c)($.b.commentShow,{comment_position:null!==(e=H.value.comment_position)&&void 0!==e?e:$.a.other,par_item_id:t.source.itemId,mode:H.value.mode||(h.value===r.a.HotDesc?"hot":"new"),hot_comment_status:w.value.findIndex((function(t){return t.is_hot}))>=0?1:0}))})),{visible:l,newTeaParams:H,enableLoadMore:N,deleteComment:F,commentCount:O,loading:_,fetchError:y,hasMore:C,commentList:w,currentCursor:j,nextCursor:x,Sort:r.a,sort:h,fetchData:U,setSort:function(t){var e,o=(e={},Object(k.a)(e,r.a.HotDesc,"hot"),Object(k.a)(e,r.a.TimeDesc,"new"),e);Object(L.h)("comment_switch",{switch:o[t]||""}),z=!0,A(t)},publishComment:V,refetch:function(){o("refetch")},loadMoreTriggerVisible:function(e){e&&C.value&&N.value&&(!t.commentDisplayMax||w.value.length<t.commentDisplayMax)&&U()},doEnableLoadMore:function(){var e,o;N.value||(N.value=!0,U(),Object($.c)($.b.moreCommentClick,{comment_position:null!==(o=null===(e=t.teaParams)||void 0===e?void 0:e.comment_position)&&void 0!==o?o:$.a.other,par_item_id:t.source.itemId,par_item_type:t.source.itemType,hot_comment_status:w.value.findIndex((function(t){return t.is_hot}))>=0?1:0}))},onCommentPublish:function(){if(Object(P.a)()){var t=Object(P.b)();Object(L.h)("search_detail_action",It(It({},t),{},{action_type:S.a.Comment,action_value:O.value}))}},onVisibleChange:function(t){l.value=t}}}}),St=(o(1199),Object(_.a)(Pt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"visible-change",rawName:"v-visible-change:[0]",value:t.onVisibleChange,expression:"onVisibleChange",arg:0}],staticClass:"comment-list-wrapper",class:t.size},[t.hasSort&&(t.commentList.length>0||t.loading)?o("div",{staticClass:"comment-list-header"},[o("div",{staticClass:"sort"},[o("div",{staticClass:"item",class:t.sort===t.Sort.HotDesc&&"active",on:{click:function(e){return t.setSort(t.Sort.HotDesc)}}},[t._v("\n        最热\n      ")]),t._v(" "),o("div",{staticClass:"divider"}),t._v(" "),o("div",{staticClass:"item",class:t.sort===t.Sort.TimeDesc&&"active",on:{click:function(e){return t.setSort(t.Sort.TimeDesc)}}},[t._v("\n        最新\n      ")])])]):t._e(),t._v(" "),0===t.commentList.length&&"0"===t.currentCursor?[t.showEmptyPlaceholder?o("CommonEmpty",{attrs:{description:"暂无评论数据"}}):t._e()]:[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading&&!t.currentCursor,expression:"loading && !currentCursor"}],staticClass:"comment-list"},t._l(t.commentList,(function(e){return o("Comment",{key:e.comment_id,staticClass:"comment-item",attrs:{"data-cid":e.comment_id,size:t.size,"current-user":t.currentUser,source:t.source,comment:e,"tea-params":t.newTeaParams,"preview-reply":t.previewReply,"hide-reply-btn":t.hideReplyBtn},on:{onDeleteClick:function(e){return t.deleteComment(e.itemId)},onReportClick:function(e){return t.$emit("onReportClick",e)},onBlockUserClick:function(e){return t.$emit("onBlockUserClick",e)},onPublishComment:t.onCommentPublish,onPublishReply:t.onCommentPublish}})})),1),t._v(" "),"0"!==t.nextCursor?[t.hasMore?t.fetchError?o("div",{staticClass:"fetch-more-comment",on:{click:function(e){return e.stopPropagation(),t.fetchData(e)}}},[t._v("\n        加载失败, 请点击重试\n      ")]):t.loading?o("div",{directives:[{name:"visible-change",rawName:"v-visible-change",value:t.loadMoreTriggerVisible,expression:"loadMoreTriggerVisible"}],staticClass:"fetch-more-comment"},[t._v("\n        加载中...\n      ")]):t.commentDisplayMax&&t.commentList.length>=t.commentDisplayMax?o("div",{staticClass:"fetch-more-comment",on:{click:function(e){return t.$emit("onCommentLimit")}}},[t._v("\n        查看全部 "+t._s(t.commentCount)+" 条评论\n      ")]):o("div",{directives:[{name:"visible-change",rawName:"v-visible-change",value:t.loadMoreTriggerVisible,expression:"loadMoreTriggerVisible"}],staticClass:"fetch-more-comment",on:{click:t.doEnableLoadMore}},[o("span",[t._v("\n          "+t._s(t.enableLoadMore?"加载更多评论":"查看全部 "+t.commentCount+" 条评论")+"\n          "),o("MoreIcon",{staticStyle:{position:"relative",top:"1px"}})],1)]):o("div")]:t._e()]],2)}),[],!1,null,"3c9d31de",null).exports),Lt=Object(n.b)({components:{CommentForm:w.a,CommentList:St,DislikeUserModal:y,ImageViewer:C.a},props:{source:{type:Object,required:!0,default:null},startLoadMore:{type:Boolean,default:!0},size:{type:String,default:"default"},count:{type:Number,default:0},commentDisplayMax:{type:Number,default:0},teaParams:{type:Object,default:null},forbidInput:{type:Boolean,default:!1},hotMaxLimit:{type:Number,default:5},hasSort:{type:Boolean,default:!1},defaultSort:{type:Number,default:r.a.TimeDesc},anchorComment:{type:Object,default:null},previewReply:{type:Boolean,default:!0},firstPageSize:{type:Number,default:20},loadMorePageSize:{type:Number,default:20},filterStarComments:{type:Boolean,default:!1},hideReplyBtn:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},showEmptyPlaceholder:{type:Boolean,default:!0}},emits:["onCommentLimit"],setup:function(t){var e=Object(n.c)(),o=Object(n.x)(),r=Object(n.a)((function(){return o.getters.USER||{}})),c=Object(n.a)((function(){return o.getters.USER_INITIATED})),l=Object(n.a)((function(){var t;if(r.value&&r.value.id)return{userId:r.value.id,isBindPhone:!!r.value.isBindedPhone,username:r.value.user_name,avatar:r.value.avatar_large,isAdmin:!!(null===(t=r.value.roles)||void 0===t?void 0:t.isAdmin)}})),d=Object(T.a)(t.source.itemId).commentCount;d.value=t.count;var m=Object(n.n)(),f=Object(O.a)().openReportModal,v=Object(n.n)(),h=Object(n.n)(),_=Object(n.a)((function(){return 0===d.value?"抢首评，友善交流":"平等表达，友善交流"}));return Object(n.j)((function(){var t;null===(t=v.value)||void 0===t||t.attachContainer(null==e?void 0:e.proxy.$el)})),{placeholder:_,commentListRef:h,commentCount:d,userInited:c,imageViewer:v,currentUserInfo:l,dislikeUserRef:m,blockUser:function(t){var e;null===(e=m.value)||void 0===e||e.doBlockUser(t.userInfo,t.from)},reportItem:function(t){var e=t.itemId,o=t.itemType;f(e,o)}}}}),Bt=(o(1200),Object(_.a)(Lt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"jj-comment-list-container",class:[{"hidden-title":!t.showTitle,small:"small"===t.size}],attrs:{"data-jj-helper":"comment-container"}},[t.userInited?[t.showTitle?t._t("title",[o("div",{staticClass:"title"},[t._v("评论 "+t._s(t.commentCount))])]):t._e(),t._v(" "),t.forbidInput?t._e():o("CommentForm",{staticClass:"comment-editor",attrs:{size:t.size,placeholder:t.placeholder,"current-user":t.currentUserInfo,source:t.source,"tea-params":t.teaParams,small:t.size,"avatar-visible":!0,"submit-title":"发送"},scopedSlots:t._u([{key:"unLogin",fn:function(){return[t._t("unLogin")]},proxy:!0}],null,!0)}),t._v(" "),o("CommentList",{ref:"commentListRef",staticClass:"comment-list-root",attrs:{size:t.size,"current-user":t.currentUserInfo,source:t.source,count:t.commentCount,"has-sort":t.hasSort,"default-sort":t.defaultSort,"anchor-comment":t.anchorComment,"comment-display-max":t.commentDisplayMax,"preview-reply":t.previewReply,"first-page-size":t.firstPageSize,"load-more-page-size":t.loadMorePageSize,"start-load-more":t.startLoadMore,"tea-params":t.teaParams,"filter-star-comments":t.filterStarComments,"hide-reply-btn":t.hideReplyBtn,"show-empty-placeholder":t.showEmptyPlaceholder},on:{onBlockUserClick:t.blockUser,onReportClick:t.reportItem,onCommentLimit:function(e){return t.$emit("onCommentLimit")}}})]:t._e(),t._v(" "),o("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),o("DislikeUserModal",{ref:"dislikeUserRef"})],2)}),[],!1,null,"5b99e65b",null));e.a=Bt.exports},1163:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[{"enable-background":"new 0 0 50 50"},style,v],attrs:Object.assign({version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:"enable-background:new 0 0 50 50;","xml:space":"preserve"},_)},y),d.concat([o("path",{attrs:{fill:"#0371df",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"}},[o("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})])]))}}},1164:function(t,e,o){"use strict";o(1099)},1165:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:["icon",m,f],style:[style,v],attrs:Object.assign({t:"1711971469505",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9601",width:"16",height:"16"},_)},y),d.concat([o("path",{attrs:{d:"M791.04 95.232H327.68c-76.8 0-138.752 62.464-138.752 138.752v8.192C135.168 261.12 96.256 312.832 96.256 373.248v416.768c0 76.8 62.464 138.752 138.752 138.752h463.36c76.8 0 127.488-62.464 127.488-138.752 54.272-18.944 104.448-78.848 104.448-138.752V234.496c0-76.8-62.464-139.264-139.264-139.264z m104.448 556.032c0 33.792-41.472 88.064-69.632 104.448V373.248c0-76.8-62.464-138.752-138.752-138.752H235.008c0-51.2 53.248-104.448 104.448-104.448h451.584c51.2 0 104.448 53.248 104.448 104.448v416.768z",fill:"#333333","p-id":"9602"}})]))}}},1166:function(t,e,o){"use strict";o(1100)},1167:function(t,e,o){"use strict";o(1101)},1169:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:"#E4E6EB"}}),o("path",{attrs:{d:"M0.5 8C0.5 3.85786 3.85786 0.5 8 0.5C12.1421 0.5 15.5 3.85786 15.5 8C15.5 12.1421 12.1421 15.5 8 15.5C3.85786 15.5 0.5 12.1421 0.5 8Z",stroke:"#E4E6EB","stroke-opacity":"0.5"}}),o("path",{attrs:{d:"M5.8789 5.40701C5.74872 5.27683 5.53767 5.27683 5.40749 5.40701C5.27732 5.53718 5.27732 5.74824 5.40749 5.87841L7.52882 7.99973L5.40749 10.1211C5.27732 10.2512 5.27732 10.4623 5.40749 10.5925C5.53767 10.7226 5.74872 10.7226 5.8789 10.5925L8.00022 8.47113L10.1215 10.5925C10.2517 10.7226 10.4628 10.7226 10.5929 10.5925C10.7231 10.4623 10.7231 10.2512 10.5929 10.1211L8.47162 7.99973L10.5929 5.87841C10.7231 5.74824 10.7231 5.53718 10.5929 5.40701C10.4628 5.27683 10.2517 5.27683 10.1215 5.40701L8.00022 7.52832L5.8789 5.40701Z",fill:"#515767"}}),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.73748 5.54843C5.68541 5.49636 5.60099 5.49636 5.54892 5.54843C5.49685 5.6005 5.49685 5.68492 5.54892 5.73699L7.81166 7.99972L5.54892 10.2625C5.49685 10.3145 5.49685 10.399 5.54892 10.451C5.60099 10.5031 5.68541 10.5031 5.73748 10.451L8.00022 8.18829L10.263 10.451C10.315 10.5031 10.3994 10.5031 10.4515 10.451C10.5036 10.399 10.5036 10.3145 10.4515 10.2625L8.18878 7.99972L10.4515 5.73699C10.5036 5.68492 10.5036 5.6005 10.4515 5.54843C10.3994 5.49636 10.315 5.49636 10.263 5.54843L8.00022 7.81116L5.73748 5.54843ZM5.26607 5.26559C5.47435 5.05731 5.81204 5.0573 6.02032 5.26558L8.00022 7.24548L9.98011 5.26558C10.1884 5.05731 10.5261 5.05731 10.7344 5.26558C10.9426 5.47386 10.9426 5.81155 10.7344 6.01983L8.75447 7.99973L10.7344 9.97963C10.9426 10.1879 10.9426 10.5256 10.7344 10.7339C10.5261 10.9422 10.1884 10.9422 9.98011 10.7339L8.00022 8.75397L6.02032 10.7339C5.81204 10.9422 5.47435 10.9422 5.26607 10.7339C5.05779 10.5256 5.05779 10.1879 5.26607 9.97963L7.24597 7.99973L5.26607 6.01983C5.05779 5.81155 5.05779 5.47387 5.26607 5.26559Z",fill:"#515767"}})]))}}},1170:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("g",[o("path",{attrs:{d:"M14.75 8C14.75 11.7279 11.7279 14.75 8 14.75C4.27209 14.75 1.25 11.7279 1.25 8C1.25 4.27209 4.27209 1.25 8 1.25C11.7279 1.25 14.75 4.27209 14.75 8Z","stroke-width":"1.25"}}),o("path",{attrs:{d:"M8.00216 9.875L7.99976 9.5C7.99976 8.375 9.12476 8 9.79203 7.09914C10.4593 6.19828 9.6081 4.625 7.9953 4.625C6.49008 4.625 5.97697 5.58054 5.97461 6.31764V6.49197","stroke-width":"1.25"}}),o("path",{attrs:{d:"M8.00195 10.625V12.1279","stroke-width":"1.25"}})])]))}}},1171:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},1172:function(t,e,o){"use strict";o(1102)},1173:function(t,e,o){"use strict";o(1103)},1185:function(t,e,o){"use strict";o(30),o(145);var n=o(45);o(11),o(10);function r(t){return new Promise((function(e,o){var img=new window.Image;img.onload=function(){return e({width:img.naturalWidth,height:img.naturalHeight,url:t})},img.onerror=function(){return o()},img.src=t}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(t){var e=t.thumbUrl,o=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:o,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(t){var e=this,o=t.thumbUrl,rect=t.rect,n=this.token;r(o).then((function(t){if(e.isInSameView(n)&&!e.loaded&&!e.error){var r=e.computeRenderedRect(t.width,t.height);e.applyRect(r),e.src=o,e.applyTransform(e.computeTransform(r,rect))}})).catch((function(t){e.isInSameView(n)&&console.error(t)}))},loadImage:function(t){var e=this,o=t.originalUrl,rect=t.rect,n=this.token;this.loading=!0,r(o).then((function(image){if(e.isInSameView(n)){var t=!!e.src,r=!e.full&&e.isLargeLongImage(image),c=e.computeRenderedRect(image.width,image.height,r);e.applyRect(c),e.src=o,e.loading=!1,e.loaded=!0,r&&e.lockScroll(),t||e.applyTransform(e.computeTransform(c,rect))}})).catch((function(t){e.isInSameView(n)&&(console.error(t),e.loading=!1,e.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(t){var e=this;this.imageStyle.transform=t,this.$nextTick((function(){e.forceReflow(),e.imageStyle.transform=""}))},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),o=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,o,(function(){t.src&&t.close()}))},computeRenderedRect:function(t,e,o){var r=Object(n.h)(),c=this.getSafeAreaSize();if(o){var l=Math.min(r.width,t,960),d=l*e/t;return{top:0,left:(r.width-l)/2,width:l,height:d}}var m=t/c.width,f=e/c.height,v=Math.max(m,f,1),h=t/v,_=e/v;return{top:(r.height-_)/2,left:(r.width-h)/2,width:h,height:_}},computeTransform:function(t,rect){var e=rect.width/t.width,o=rect.height/t.height,n=rect.width-t.width,r=rect.height-t.height,c=rect.top-t.top+r/2,l=rect.left-t.left+n/2,d="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),m="scale3d(".concat(e,", ").concat(o,", 1)");return"".concat(d," ").concat(m)},forceReflow:function(){document.body.clientWidth},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=this.getSafeAreaSize(),e=t.width,o=t.height,n=o/e,r=image.height/image.width,c=r>1&&r>n;return(image.width>e||image.height>o)&&c},getSafeAreaSize:function(){var t=Object(n.h)(),e=t.width,o=t.height;return{width:Math.max(0,e-2*(+this.margin||0)),height:Math.max(0,o-2*(+this.margin||0))}},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},d=(o(1190),o(29)),m=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.src?n("div",{staticClass:"image-viewer",class:{loading:t.loading},on:{click:t.close}},[n("div",{staticClass:"image-box",style:{backgroundColor:t.backgroundColor}},[t.error?n("img",{staticClass:"image error",attrs:{src:o(1110)}}):n("img",{staticClass:"image",style:t.imageStyle,attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"10b7b0e6",null).exports,f=(o(63),o(1258)),v=o.n(f),h=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},_={props:["backgroundColor","margin","full"],data:h,methods:{show:function(t){var e=t.thumbUrl,o=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:o,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,h()),this.unlockScroll()},loadTumb:function(t){var e=this,o=t.thumbUrl,n=(t.rect,this.token);r(o).then((function(t){!e.isInSameView(n)||e.loaded||e.error||(e.src=o)})).catch((function(t){e.isInSameView(n)&&console.error(t)}))},loadImage:function(t){var e=this,o=t.originalUrl,n=(t.rect,this.token);this.loading=!0,r(o).then((function(image){if(e.isInSameView(n)){var t=!e.full&&e.isLargeLongImage(image);e.src=o,e.loading=!1,e.loaded=!0,e.isLargeLongMode=t,e.canZoom=e.isLargeImage(image),e.initGesture(),e.isLargeLongMode&&e.lockScroll()}})).catch((function(t){e.isInSameView(n)&&(console.error(t),e.loading=!1,e.error=!0)}))},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=Object(n.h)(),e=t.width,o=t.height,r=o/e,c=image.height/image.width,l=c>1&&c>r;return(image.width>e||image.height>o)&&l},isLargeImage:function(image){var t=Object(n.h)(),e=t.width;return t.height<image.height||e<image.width},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),o=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,o,(function(){t.src&&!t.isZoomMode&&t.close()}))},adjustOffset:function(){var t=Object(n.h)(),e=t.width,o=t.height,rect=this.$refs.image.getBoundingClientRect();rect.width<e?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<e&&(this.offsetX+=e-rect.left-rect.width),rect.height<o?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<o&&(this.offsetY+=o-rect.top-rect.height)},initGesture:function(){var t=this;this.$nextTick((function(){t.finger=new v.a(t.$refs.imageBox,{singleTap:function(e){t.isZoomMode?(t.isZoomMode=!1,t.offsetX=0,t.offsetY=0):t.close()},doubleTap:function(e){t.canZoom&&(t.isZoomMode=!t.isZoomMode,t.isZoomMode?t.lockScroll():(t.unlockScroll(),t.offsetX=0,t.offsetY=0))},pressMove:function(e){var o=e.deltaX,n=e.deltaY;t.isZoomMode&&(t.offsetX+=o,t.offsetY+=n)},touchEnd:function(){t.isZoomMode&&window.setTimeout((function(){t.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}};o(1191);var y={components:{Desktop:m,Mobile:Object(d.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.src?n("div",{staticClass:"image-viewer mobile",class:{loading:t.loading}},[n("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":t.isLargeLongMode},style:{backgroundColor:t.backgroundColor}},[t.error?n("img",{staticClass:"image error",attrs:{src:o(1110)}}):n("img",{ref:"image",staticClass:"image",class:{zoom:t.isZoomMode},style:{transform:"translate3d("+t.offsetX+"px, "+t.offsetY+"px, 0)"},attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"93a27598",null).exports},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()},methods:{attachContainer:function(t){this.container!==t&&(this.removeEventListener(),this.addEventListener(t),this.container=t)},onClick:function(t){var e,o=t.target;if(this.isMatched(o)){var n=(e=o).getAttribute("data-src")||e.getAttribute("src")||function(t){var e=(t.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return e&&e[1]}(e);if(n){var r=this.$imgUrlTransform(n),rect=o.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:n,originalUrl:r,rect:rect})}}},addEventListener:function(t){var e=this;t.__removeIamgeViewListener=Object(n.k)(t,"click",(function(t){e.onClick(t)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(t){return!t.classList.contains("equation")&&!this.$el.contains(t)&&Object(n.j)(t,this.selector||"img")}}},C=(o(1192),Object(d.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-viewer-box"},[e(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"34cee571",null));e.a=C.exports},1186:function(t,e,o){"use strict";o(44),o(68);var n=o(3),r=o(8),c=o(95),l=Object(r.defineComponent)({components:{Modal:c.Modal,Button:c.Button},props:{value:{type:Boolean},user:{type:Object}},emits:["on-close","on-ok"],setup:function(t,e){var o=e.emit,c=Object(n.x)(),l=Object(r.computed)((function(){var t,e,o;return null!==(o=null===(e=null===(t=null==c?void 0:c.state)||void 0===t?void 0:t.dislike)||void 0===e?void 0:e.officialList)&&void 0!==o?o:[]}));return{isOfficial:Object(r.computed)((function(){var e,o,n;return null===(o=null===(e=l.value)||void 0===e?void 0:e.includes)||void 0===o?void 0:o.call(e,null===(n=t.user)||void 0===n?void 0:n.user_id)})),username:Object(r.computed)((function(){var e;return null===(e=t.user)||void 0===e?void 0:e.user_name})),isModalShow:Object(r.computed)((function(){return t.value})),handleModalOk:function(){return o("on-ok")},handleModalClose:function(){return o("on-close")}}}}),d=(o(1189),o(29)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{staticClass:"dislike-modal",attrs:{value:t.isModalShow,"footer-hide":!0,closable:!1}},[o("div",{staticClass:"container"},[o("div",{staticClass:"title"},[t._v("确定屏蔽该用户")]),t._v(" "),o("div",{staticClass:"content"},[t.isOfficial?o("span",[t._v("\n        确定屏蔽官方账号\n        "),o("span",{staticClass:"username"},[t._v(t._s(t.username))]),t._v("\n        吗 ？屏蔽后可能错过丰富礼品和重要信息哦\n      ")]):o("span",[t._v("\n        屏蔽后，对方将不能关注你、与你产生任何互动，无法查看你的主页\n      ")])]),t._v(" "),o("div",{staticClass:"footer"},[o("Button",{staticClass:"btn-cancel",on:{click:t.handleModalClose}},[t._v("取消")]),t._v(" "),o("Button",{staticClass:"btn-confirm",attrs:{type:"primary"},on:{click:t.handleModalOk}},[t._v("\n        确定\n      ")])],1)])])}),[],!1,null,"50548bfc",null);e.a=component.exports},1189:function(t,e,o){"use strict";o(1109)},1190:function(t,e,o){"use strict";o(1111)},1191:function(t,e,o){"use strict";o(1112)},1192:function(t,e,o){"use strict";o(1113)},1193:function(t,e,o){"use strict";o(1123)},1194:function(t,e,o){"use strict";o(1124)},1195:function(t,e,o){"use strict";o(1125)},1196:function(t,e,o){"use strict";o(1126)},1197:function(t,e,o){"use strict";o(1127)},1198:function(t,e,o){"use strict";o(1128)},1199:function(t,e,o){"use strict";o(1129)},1200:function(t,e,o){"use strict";o(1130)},1211:function(t,e,o){},1242:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return c}));o(79),o(389),o(10),o(30),o(46),o(51),o(96);function n(t,e){if(0===t)return 0;var o=function(t,e){var o,n,r=0,c=t.toString(),l=e.toString();try{r+=(null===(o=c.split(".")[1])||void 0===o?void 0:o.length)||0}catch(t){console.error(t)}try{r+=(null===(n=l.split(".")[1])||void 0===n?void 0:n.length)||0}catch(t){console.error(t)}c=Number(c.replace(".","")),l=Number(l.replace(".",""));var d=c*l/Math.pow(10,r),m=e>0?.01:0;return Math.max(m,d)}(t,isNaN(e)?1:e/10);return 0===o?0:o.toFixed(2)}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startTime:0,endTime:0},e=t.startTime,o=t.endTime,time=(new Date).getTime();return time>e&&time<o}function c(t,e){if(e){if(t<0||!t)return"0小时";var o=t/3600;return o<.1?"0小时":o.toFixed(1)+"小时"}if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var n=Math.floor(t/3600),r=n>0?Math.floor(t%60):Math.floor(t/60),s=Math.floor(t%60);return n>0?r>0?n+"小时"+r+"分":n+"小时":s>0?r+"分"+s+"秒":r+"分"}},1249:function(t,e,o){},1293:function(t,e,o){"use strict";o(1211)},1346:function(t,e,o){"use strict";o(11),o(10),o(55),o(59),o(89);var n=o(3),r=o(95),c=o(1362),l=o.n(c),d=o(1347),m=Object(n.b)({components:{BAffix:r.Affix,CourseIcon:l.a,UserAuth:d.a},props:{isHeaderVisible:{type:Boolean,default:!0},section:{type:Boolean,default:!1},bookId:{type:String,default:""}},setup:function(t,e){var o=e.root,r=Object(n.w)(),c=Object(n.a)((function(){return o.$device.isMobile})),l=Object(n.a)((function(){var t;return null===(t=o.$store.state.auth)||void 0===t?void 0:t.user}));return{currentUser:l,isMobileBrowser:c,handleToMycourse:function(){if(!l.value)return o.$requestLogin();r.push("/my-course")},handleReturnSection:function(){var e,n=new URL(window.location.href).pathname.substring(0,6),c=(null===(e=o.$route.query)||void 0===e?void 0:e.suid)||"";r.push("/".concat("/video"===n?"video":"book","/").concat(t.bookId,"?").concat(c?"suid=".concat(c,"&"):"","scrollMenuIndex=1"))},clickVip:function(){o.$TEA("member_course_nav_click"),l.value&&l.value.is_vip?r.push({path:"/membership"}):r.push({path:"/vip",query:{utm_source:"h5_course_nav"}})},shopVipEntry:function(){o.$TEA("member_course_nav_display")}}}}),f=(o(1363),o(29)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isMobileBrowser?n("BAffix",{staticClass:"wrapper",class:{visible:t.isHeaderVisible}},[n("div",{staticClass:"book-sticky-header"},[t.section?n("div",{staticClass:"return-section",on:{click:t.handleReturnSection}},[n("img",{attrs:{src:o(1360),alt:""}}),t._v(" "),n("span",[t._v("返回目录")])]):n("router-link",{staticClass:"course",attrs:{to:"/course"}},[n("CourseIcon",{staticClass:"course-img"}),t._v(" "),n("span",[t._v("课程")])],1),t._v(" "),n("div",{staticClass:"right-box"},[n("div",{staticClass:"vip-title",on:{click:t.clickVip}},[n("img",{staticClass:"vip-img",attrs:{src:o(1361),alt:"vip"},on:{load:t.shopVipEntry}}),t._v(" "),n("div",{staticClass:"vip-words"},[t._v("会员")])]),t._v(" "),n("div",{staticClass:"my-course",class:{"is-login-course":t.currentUser},attrs:{target:"_blank"},on:{click:t.handleToMycourse}},[t._v("\n        课程中心\n      ")]),t._v(" "),n("UserAuth",{staticClass:"user-auth"})],1)],1),t._v(" "),t._t("stickyNav")],2):t._e()}),[],!1,null,"4c5cda25",null);e.a=component.exports},1347:function(t,e,o){"use strict";o(10);var n=o(0),r=o(110),c=o(16),l=o(1158),d=o(4);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var f={components:{DropDownList:function(){return o.e(31).then(o.bind(null,4793))}},data:function(){return{bdPageUrlForNav:l.e,isShowUserDropdownList:!1,translateGithubURL:c.h}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.mapGetters)({user:d.USER})),watch:{isShowUserDropdownList:function(t){t&&this.$TEA("avatar_menu_visit")}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){t.hideActionList()}))},methods:{hideActionList:function(){this.isShowUserDropdownList=!1},onUserActionClick:function(){this.isShowUserDropdownList=!this.isShowUserDropdownList},openEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getPostEditUrl()},openXiaoceEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getXiaoceEditUrl()},openDraftIndexPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getDraftIndexUrl()},login:function(){this.$requestLogin()},register:function(){this.$requestRegister()},logout:function(){window.confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者！")&&this.$requestLogout()}}},v=(o(1293),o(29)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-auth"},[t.user?o("div",{staticClass:"nav-item menu",on:{click:function(e){return e.stopPropagation(),t.onUserActionClick(e)}}},[o("Avatar",{staticClass:"avatar",attrs:{user:t.user,alt:t.user.username+"的头像"}}),t._v(" "),o("keep-alive",[t.isShowUserDropdownList?o("DropDownList"):t._e()],1)],1):t._e(),t._v(" "),t.user?t._e():o("div",{staticClass:"nav-item auth"},[o("span",{staticClass:"login",on:{click:t.login}},[t._v("登录")])])])}),[],!1,null,"4d55480d",null);e.a=component.exports},1360:function(t,e,o){t.exports=o.p+"dda9d3fdc2f4310c468b2f238d96918b.svg"},1361:function(t,e,o){t.exports=o.p+"24127194d5b158d7eaf8f09a256c5d01.svg"},1362:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.7007 2.60955C18.0312 2.46364 18.4026 2.70567 18.4026 3.06696V4.41189C18.4026 4.60994 18.2857 4.78932 18.1045 4.86931L12.2033 7.47444C12.0747 7.53121 11.9281 7.53123 11.7995 7.47449L5.9017 4.87264C5.72046 4.79269 5.60352 4.61327 5.60352 4.41518V3.07013C5.60352 2.70889 5.97482 2.46686 6.30533 2.61266L12.0014 5.12551L17.7007 2.60955ZM12.2037 22.2099C12.0751 22.2667 11.9285 22.2667 11.7999 22.2099L3.72683 18.6471C3.54563 18.5671 3.42871 18.3877 3.42871 18.1896V6.53611C3.42871 6.17484 3.80008 5.93282 4.13059 6.07868L12.0018 9.55243L19.8696 6.07882C20.2001 5.9329 20.5716 6.17493 20.5716 6.53623V18.1897C20.5716 18.3877 20.4547 18.5671 20.2735 18.6471L12.2037 22.2099ZM11.3787 11.2998C11.2683 11.2998 11.1787 11.3893 11.1787 11.4998V18.0998C11.1787 18.2103 11.2683 18.2998 11.3787 18.2998H12.4787C12.5892 18.2998 12.6787 18.2103 12.6787 18.0998V11.4998C12.6787 11.3893 12.5892 11.2998 12.4787 11.2998H11.3787Z",fill:"#1E80FF"}})]))}}},1363:function(t,e,o){"use strict";o(1249)},1391:function(t,e,o){},1498:function(t,e,o){t.exports=o.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1499:function(t,e,o){t.exports=o.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1500:function(t,e,o){"use strict";o(1391)},1523:function(t,e,o){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),e("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:o(1498)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:o(1499)}})])}],r=o(12),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(r.k)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){t.$requestLogin()}))}},l=(o(1500),o(29)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("div",{staticClass:"wechat-quick-login"},[o("div",{staticClass:"quick-box"},[t._m(0),t._v(" "),o("div",{staticClass:"auth-box"},[o("div",{staticClass:"auth-btn wx",on:{click:t.loginWithWechat}},[t._m(1),t._v(" "),o("span",[t._v("微信快捷登录")])]),t._v(" "),o("div",{staticClass:"auth-btn jj",on:{click:t.authoLogin}},[t._m(2),t._v(" "),o("span",[t._v("稀土掘金账号登录")])])]),t._v(" "),o("div",{staticClass:"agreement-box"},[t._v("\n      注册登录即表示同意\n      "),o("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[t._v("用户协议")]),t._v("\n      、\n      "),o("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[t._v("隐私政策")])]),t._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"box",on:{click:t.close}},[t._v("取消")])])])]):t._e()}),n,!1,null,"3a1cf91f",null);e.a=component.exports},1525:function(t,e,o){"use strict";o(44),o(68);var n=o(3),r=o(95),c=o(210),l=o(31),d=o(120),m=Object(n.b)({components:{BTooltip:r.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(t,e){var o=Object(n.a)((function(){var t,o;return(null===(o=null===(t=e.root.$store.state)||void 0===t?void 0:t.auth)||void 0===o?void 0:o.user)||null})),r=e.root.$getBean("eventBus"),m=Object(n.w)(),f=Object(n.a)((function(){var e,n,r;if(t.bookInfo.isBorrowing){var c=null===(n=null===(e=t.bookInfo)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(r=t.bookInfo)||void 0===r?void 0:r.borrowTimes)>0&&o.value.is_vip?"再次借阅":"VIP借阅"})),v=Object(n.a)((function(){return t.bookInfo.isBorrowing?"有效期至 ".concat(Object(l.b)(1e3*t.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(t.bookInfo.borrowTimes,"次")})),h=Object(n.f)("refreshBook",(function(){return null})),_=Object(d.b)((function(){e.emit("fetch"),h()}),500);Object(n.j)((function(){r.on(r.eventType.SHOW_VIP_FETCH,(function(){_()}))})),Object(n.k)((function(){r.off(r.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:f,buttonVipDescript:v,handleClick:function(){var n={event_page:t.eventPage,book_id:t.bookInfo.id,author_id:t.bookInfo.user_info.user_id,platform:e.root.$device.isMobile?"h5":"web"};return e.root.$TEA("member_rent_click",n),o.value?o.value.isBindedPhone?void(t.bookInfo.isBorrowing?e.emit("read"):o.value.is_vip?r.emit(r.eventType.SHOW_VIP_BORROW_MODAL,t.bookInfo,n):m.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail"}})):e.root.$requestBindPhoneNumber(c.c,{toUrl:location.href}):e.root.$requestLogin()},currentUser:o}}}),f=(o(1766),o(29)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bookInfo.canVipBorrow?n("div",{staticClass:"vip-borrow-button"},[n("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!t.bookInfo.isBorrowing||t.$device.isMobile,"max-width":"244px"}},[n("div",{staticClass:"vip-borrow",on:{click:t.handleClick}},[t.bookInfo.isBorrowing?n("img",{staticClass:"mark",attrs:{src:o(1765),alt:"借阅中"}}):t._e(),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.buttonVipTitle))]),t._v(" "),t.bookInfo.borrowTimes>0&&t.currentUser.is_vip?n("div",{staticClass:"descript"},[t._v("\n        "+t._s(t.buttonVipDescript)+"\n      ")]):t._e()])])],1):t._e()}),[],!1,null,"e9b6c900",null);e.a=component.exports},1530:function(t,e,o){},1531:function(t,e,o){},1664:function(t,e,o){"use strict";o(54);var n=o(3),r=o(1527),c=o(1263),l=Object(n.b)({components:{SaleTooltip:r.a},props:{book:{type:Object,default:function(){return{}}},isOwner:{type:Boolean,default:!1},sectionRoute:{type:Object,default:function(){return{}}},isFloatDiscountLabel:{type:Boolean,default:!1}},emits:["buyBook"],setup:function(t,e){var o,r=e.emit;return{isWap:null===(o=e.root.$device)||void 0===o?void 0:o.isMobile,bookId:Object(n.a)((function(){var e;return(null===(e=t.book)||void 0===e?void 0:e.booklet_id)||""})),hasReadSection:Object(n.a)((function(){var e,o;return!!(null===(o=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===o?void 0:o.last_section_id)})),hasBorrow:Object(n.a)((function(){var e,o;return!!(null===(o=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===o?void 0:o.borrow_times)})),hasDiscount:Object(n.a)((function(){var e,o;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)!==(null===(o=t.book.max_discount)||void 0===o?void 0:o.price)})),currentPrice:Object(n.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)||0)})),originPrice:Object(n.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.price)||0)})),showLabel:Object(n.a)((function(){var e;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.name)||""})),buyBook:function(){r("buyBook")}}}}),d=(o(1764),o(29)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-buy-button-wrap",class:{"discount-label-show":t.showLabel&&!t.isOwner&&!t.hasBorrow,"discount-label-float":t.isFloatDiscountLabel}},[!t.showLabel||t.isOwner||t.hasBorrow?t._e():o("SaleTooltip",{staticClass:"sale-tooltip-entry",attrs:{book:t.book,"is-count-down":!t.isWap,"is-float-discount-label":t.isFloatDiscountLabel}}),t._v(" "),o("div",{staticClass:"book-buy-button"},[t.isOwner?o("router-link",{staticClass:"book-owner",attrs:{"data-book-id":t.bookId,to:t.sectionRoute}},[t._v("\n      "+t._s(t.hasReadSection?"继续学习":"立即学习")+"\n    ")]):o("div",{staticClass:"buy-button",on:{click:function(e){return e.stopPropagation(),t.buyBook(e)}}},[o("div",{staticClass:"price-box",class:{"price-box-line":!(t.hasBorrow||t.hasDiscount)}},[o("span",{staticClass:"price-unit"},[t._v("¥")]),t._v(" "),o("span",[t._v("\n          "+t._s(t.currentPrice+" 立即购买")+"\n        ")])]),t._v(" "),t.hasBorrow?o("div",{staticClass:"borrow-desc"},[t._v("\n        "+t._s("退还 1 张借阅卡")+"\n      ")]):t.hasDiscount?o("div",{staticClass:"origin-price"},[t._v("\n        "+t._s("原价 ¥"+t.originPrice)+"\n      ")]):t._e()])],1)],1)}),[],!1,null,"495d186a",null);e.a=component.exports},1678:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M14.3029 3.69629L8.99959 8.99957L3.69629 14.3029",stroke:"#8A919F","stroke-width":"1.5","stroke-linecap":"round"}}),o("path",{attrs:{d:"M3.69629 3.69629L8.99959 8.99957L14.3029 14.3029",stroke:"#8A919F","stroke-width":"1.5","stroke-linecap":"round"}})]))}}},1723:function(t,e,o){"use strict";var n=o(0),r=o(1138),c=o(45);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var d={data:function(){return{enterTime:0}},mounted:function(){this.handleVisibilityChange(),Object(c.o)(this.handleVisibilityChange)},beforeDestroy:function(){Object(c.q)(this.handleVisibilityChange)},methods:{recordPageStayTime:function(){if(this.enterTime){var t;t=(new Date-this.enterTime)/1e3;var e=Object(r.b)();this.$TEA("article_detail_leave",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({article_id:this.$route.params.id,read_time:t},e)),this.enterTime=0}},handleVisibilityChange:function(){var t=Object(c.d)();document[t]?this.recordPageStayTime():this.enterTime=new Date}}},m=o(29),component=Object(m.a)(d,void 0,void 0,!1,null,null,null);e.a=component.exports},1764:function(t,e,o){"use strict";o(1530)},1765:function(t,e,o){t.exports=o.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1766:function(t,e,o){"use strict";o(1531)},1784:function(t,e,o){},1785:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M3.5683 16.6721C4.83689 15.0647 4.67148 12.732 4.93583 11.0928C14.9591 22.2167 22.2842 29.5021 24.7168 31.6872L22.5492 35.7053C19.4193 34.0134 15.6759 30.5945 14.1955 29.0966C10.8122 25.0256 5.64796 18.9631 3.5683 16.6721Z",fill:"url(#paint0_linear_12722_147437)"}}),o("path",{attrs:{d:"M36.7731 27.0578C37.2688 25.1263 37.3392 24.0411 37.459 23.4082C33.2726 28.2101 26.244 30.2321 23.3198 30.6597L22.5447 35.7006C29.3924 33.8083 34.4646 30.1351 36.6706 28.7842C36.6706 28.0724 36.6706 27.7928 36.7731 27.0578Z",fill:"url(#paint1_linear_12722_147437)"}}),o("path",{attrs:{d:"M37.5098 23.3065L35.8166 22.0752H13.3974C16.8039 27.1232 21.3836 30.3351 23.2476 31.31C31.6202 29.5863 36.2443 25.2561 37.5098 23.3065Z",fill:"url(#paint2_linear_12722_147437)"}}),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask0_12722_147437",maskUnits:"userSpaceOnUse",x:"13",y:"22",width:"25",height:"10"}},[o("path",{attrs:{d:"M37.5098 23.3055L35.8166 22.0742H13.3974C16.8039 27.1222 21.3836 30.3341 23.2476 31.3091C31.6202 29.5853 36.2443 25.2551 37.5098 23.3055Z",fill:"url(#paint3_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask0_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter0_f_12722_147437)"}},[o("circle",{attrs:{cx:"26.2133",cy:"28.5737",r:"5.71429",fill:"#FF8A20"}})]),o("g",{attrs:{filter:"url(#filter1_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"19.6493",cy:"27.6663",rx:"6.64769",ry:"1.56414",transform:"rotate(36.9547 19.6493 27.6663)",fill:"#CB6100"}})])]),o("path",{attrs:{d:"M4.93372 11.0962C8.09408 9.16724 15.5873 6.29083 18.9389 5.09375C31.8163 18.8943 34.8602 20.4676 36.8955 21.3055C35.9926 26.3538 27.3188 29.1207 23.0949 29.8731C19.8525 29.1344 15.6559 24.8454 13.9629 22.7933C10.3922 19.0174 6.45567 13.422 4.93372 11.0962Z",fill:"#FFE7D0"}}),o("path",{attrs:{d:"M4.93372 11.0962C8.09408 9.16724 15.5873 6.29083 18.9389 5.09375C31.8163 18.8943 34.8602 20.4676 36.8955 21.3055C35.9926 26.3538 27.3188 29.1207 23.0949 29.8731C19.8525 29.1344 15.6559 24.8454 13.9629 22.7933C10.3922 19.0174 6.45567 13.422 4.93372 11.0962Z",fill:"url(#paint4_linear_12722_147437)"}}),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask1_12722_147437",maskUnits:"userSpaceOnUse",x:"3",y:"11",width:"35",height:"25"}},[o("path",{attrs:{d:"M4.79177 12.4227C4.66691 13.846 4.52534 15.4598 3.56934 16.6711C5.649 18.9622 10.8132 25.0247 14.1965 29.0956C15.677 30.5936 19.4204 34.0125 22.5502 35.7043L22.5528 35.6995C28.4327 34.0734 33.0028 31.1347 35.5722 29.4826C35.9936 29.2116 36.3611 28.9753 36.6718 28.785C36.6718 28.0732 36.6718 27.7936 36.7744 27.0586C37.1362 25.6489 37.2714 24.69 37.3646 24.0288C37.3991 23.784 37.4279 23.58 37.4602 23.409C33.3887 28.0792 27.5682 30.6782 23.2919 31.2286C16.6699 27.9153 11.4209 19.7455 4.93677 11.1084C4.87163 11.5123 4.83259 11.9573 4.79177 12.4227Z",fill:"url(#paint5_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask1_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter2_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"27.4586",cy:"29.6756",rx:"5.25605",ry:"3.91825",transform:"rotate(-20.7799 27.4586 29.6756)",fill:"#FFE4CC","fill-opacity":"0.6"}})]),o("path",{attrs:{d:"M22.7825 34.1141C22.5766 33.898 22.4075 33.7651 22.3486 33.7256C22.4859 33.831 22.6691 34.1691 22.7435 34.3249L23.501 33.9824C23.2323 33.9877 22.91 34.0724 22.7825 34.1141Z",fill:"#ED691E"}}),o("path",{attrs:{d:"M22.1881 32.1936C21.9851 32.1501 21.7659 32.1755 21.6816 32.1936C22.1901 32.5253 22.6952 33.1919 22.8842 33.4837C23.441 33.1409 28.0267 31.3018 29.0867 30.8096C28.2486 30.9468 23.8984 32.528 22.9913 32.917C22.8081 32.694 22.391 32.2371 22.1881 32.1936Z",fill:"url(#paint6_linear_12722_147437)"}}),o("path",{attrs:{d:"M34.9834 27.5412C35.9486 26.8062 36.8597 25.837 37.1946 25.4443L37.0507 26.1626C36.4463 26.7666 35.3662 27.3879 34.9834 27.5412Z",fill:"#EF6A1E"}}),o("path",{attrs:{d:"M35.127 28.4985C35.9214 28.0726 36.7005 27.4249 36.9908 27.1543L37.1363 27.4933C36.5745 28.0454 35.5627 28.3934 35.127 28.4985Z",fill:"#EF6A1E"}}),o("path",{attrs:{d:"M6.98601 16.3756L4.55716 13.2373L4.35449 13.9461C4.67841 14.1081 6.24381 15.6332 6.98601 16.3756Z",fill:"#EF6A1D"}}),o("path",{attrs:{d:"M6.55532 18.3444C6.14718 17.7905 4.5077 15.5376 4.13368 14.9941L3.78809 15.3895C4.09126 15.574 6.02236 17.7788 6.55532 18.3444Z",fill:"#EF6A1D"}})]),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask2_12722_147437",maskUnits:"userSpaceOnUse",x:"4",y:"5",width:"33",height:"25"}},[o("path",{attrs:{d:"M4.93567 11.0953C8.09604 9.16626 15.5893 6.28985 18.9408 5.09277C31.8182 18.8933 34.8621 20.4666 36.8975 21.3046C35.9945 26.3528 27.3208 29.1197 23.0968 29.8722C19.8545 29.1334 15.6579 24.8445 13.9649 22.7924C10.3942 19.0165 6.45762 13.421 4.93567 11.0953Z",fill:"#FFE7D0"}}),o("path",{attrs:{d:"M4.93567 11.0953C8.09604 9.16626 15.5893 6.28985 18.9408 5.09277C31.8182 18.8933 34.8621 20.4666 36.8975 21.3046C35.9945 26.3528 27.3208 29.1197 23.0968 29.8722C19.8545 29.1334 15.6579 24.8445 13.9649 22.7924C10.3942 19.0165 6.45762 13.421 4.93567 11.0953Z",fill:"url(#paint7_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask2_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter3_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"22.4904",cy:"27.1661",rx:"8.00363",ry:"4.35881",transform:"rotate(40.888 22.4904 27.1661)",fill:"#FFE6CF"}})]),o("g",{attrs:{filter:"url(#filter4_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"21.4372",cy:"19.1227",rx:"6.55531",ry:"3.57005",transform:"rotate(40.888 21.4372 19.1227)",fill:"#FFE6CF"}})])]),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.6595 14.8538C14.7962 14.292 15.383 13.9523 15.9701 14.0952L18.9149 14.8115L19.0598 12.1778C19.0901 11.6277 19.5826 11.2074 20.16 11.2392C20.7373 11.2709 21.1808 11.7427 21.1505 12.2928L21.0168 14.725L22.1883 13.9534C22.6712 13.6354 23.3205 13.769 23.6385 14.2519C23.9566 14.7348 23.8229 15.3841 23.34 15.7021L21.7437 16.7534L22.6897 17.7504L24.3595 16.5854C24.8337 16.2546 25.4863 16.3708 25.8172 16.845C26.148 17.3192 26.0318 17.9718 25.5576 18.3027L24.1473 19.2866L25.6191 20.8379C26.0171 21.2574 25.9997 21.9201 25.5803 22.318C25.1608 22.716 24.4982 22.6986 24.1002 22.2792L22.4105 20.4983L20.5581 21.7907C20.0839 22.1216 19.4313 22.0054 19.1004 21.5312C18.7696 21.057 18.8858 20.4043 19.36 20.0735L20.9529 18.9621L19.9673 17.9233L18.2489 19.055C17.766 19.373 17.1167 19.2394 16.7987 18.7565C16.4807 18.2736 16.6143 17.6243 17.0972 17.3063L17.9643 16.7352L15.4752 16.1297C14.888 15.9869 14.5229 15.4156 14.6595 14.8538Z",fill:"url(#paint8_linear_12722_147437)"}}),o("defs",[o("filter",{attrs:{id:"filter0_f_12722_147437",x:"16.499",y:"18.8594",width:"19.4287",height:"19.4287",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter1_f_12722_147437",x:"10.2539",y:"19.4775",width:"18.791",height:"16.377",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter2_f_12722_147437",x:"18.3506",y:"21.5645",width:"18.2158",height:"16.2227",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter3_f_12722_147437",x:"9.79883",y:"14.9766",width:"25.3828",height:"24.3799",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"3",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter4_f_12722_147437",x:"9.95703",y:"8.05273",width:"22.9609",height:"22.1396",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"3",result:"effect1_foregroundBlur_12722_147437"}})]),o("linearGradient",{attrs:{id:"paint0_linear_12722_147437",x1:"5.38898",y1:"12.9974",x2:"23.3446",y2:"33.5569",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#E47109"}}),o("stop",{attrs:{offset:"0.199644","stop-color":"#F2821C"}}),o("stop",{attrs:{offset:"0.489148","stop-color":"#FFBE83"}}),o("stop",{attrs:{offset:"0.692037","stop-color":"#FF9A3F"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF7900"}})]),o("linearGradient",{attrs:{id:"paint1_linear_12722_147437",x1:"37.459",y1:"29.5543",x2:"23.4415",y2:"35.7003",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#F78621"}}),o("stop",{attrs:{offset:"0.177947","stop-color":"#FF9C42"}}),o("stop",{attrs:{offset:"0.42989","stop-color":"#FFB776"}}),o("stop",{attrs:{offset:"0.670445","stop-color":"#FFB069"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF8E27"}})]),o("linearGradient",{attrs:{id:"paint2_linear_12722_147437",x1:"26.928",y1:"25.7178",x2:"28.3566",y2:"33.5749",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB7102"}}),o("stop",{attrs:{offset:"0.958333","stop-color":"#ED780E"}})]),o("linearGradient",{attrs:{id:"paint3_linear_12722_147437",x1:"26.3206",y1:"28.253",x2:"28.2678",y2:"32.1474",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB7102"}}),o("stop",{attrs:{offset:"0.958333","stop-color":"#ED780E"}})]),o("linearGradient",{attrs:{id:"paint4_linear_12722_147437",x1:"15.6793",y1:"7.41443",x2:"28.1344",y2:"27.4748",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFD1A5"}}),o("stop",{attrs:{offset:"0.141096","stop-color":"#FFD5AD","stop-opacity":"0.571368"}}),o("stop",{attrs:{offset:"0.329179","stop-color":"#FFDBB8","stop-opacity":"0"}}),o("stop",{attrs:{offset:"0.671875","stop-color":"#FFC893","stop-opacity":"0.760021"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFC792"}})]),o("linearGradient",{attrs:{id:"paint5_linear_12722_147437",x1:"37.4602",y1:"29.5911",x2:"18.3264",y2:"32.6037",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FF9230"}}),o("stop",{attrs:{offset:"0.077495","stop-color":"#FFA14C"}}),o("stop",{attrs:{offset:"0.391424","stop-color":"#FFB776"}}),o("stop",{attrs:{offset:"0.552085","stop-color":"#FFB069"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFAB5F"}})]),o("linearGradient",{attrs:{id:"paint6_linear_12722_147437",x1:"22.08",y1:"32.5308",x2:"29.4928",y2:"30.8096",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB671C"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF672D","stop-opacity":"0"}})]),o("linearGradient",{attrs:{id:"paint7_linear_12722_147437",x1:"15.6813",y1:"7.41346",x2:"28.1363",y2:"27.4739",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFD1A5"}}),o("stop",{attrs:{offset:"0.141096","stop-color":"#FFD5AD","stop-opacity":"0.571368"}}),o("stop",{attrs:{offset:"0.329179","stop-color":"#FFDBB8","stop-opacity":"0"}}),o("stop",{attrs:{offset:"0.671875","stop-color":"#FFC893","stop-opacity":"0.760021"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFC792"}})]),o("linearGradient",{attrs:{id:"paint8_linear_12722_147437",x1:"17.3954",y1:"12.5316",x2:"24.9921",y2:"22.7643",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFB169"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF6229"}})])])]))}}},1787:function(t,e,o){"use strict";o.d(e,"a",(function(){return f}));o(10),o(63),o(19);var n=o(5),r=o(7),c=o(138),l=o(17),d=o(12),m=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1e3,t.abrupt("return",setTimeout((function(){return Promise.resolve()}),e));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function f(t){return v.apply(this,arguments)}function v(){return(v=Object(n.a)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||Object(d.i)()){t.next=17;break}if(localStorage.getItem(l.a.userFirstVisitDispatchCoupon)!==e){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,c.b.UserCouponReceiveDiscountFirstOrder({},{showError:!1});case 7:if((null==(o=t.sent)?void 0:o.err_no)!==r.ERROR_NO.OK){t.next=12;break}return localStorage.setItem(l.a.userFirstVisitDispatchCoupon,e),t.next=12,m();case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.error("userFirstVisitDispatchCoupon api request error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})))).apply(this,arguments)}},1792:function(t,e,o){"use strict";o.d(e,"a",(function(){return m})),o.d(e,"b",(function(){return f}));o(175),o(176),o(54);var n=o(146),r=o(258),c=o.n(r),l=o(1072),d=o(31),m=function(details){var t=details.id,title=details.title,e=details.description,image=details.image,o=details.username,r=details.createdAt,l=details.updatedAt;return{"@context":"https://schema.org","@type":"BlogPosting",mainEntityOfPage:{"@type":"WebPage","@id":t},headline:Object(n.htmlEncode)(title),description:Object(n.htmlEncode)(e),image:image,author:{"@type":"Organization",name:o},publisher:{"@type":"Organization",name:"掘金",logo:{"@type":"ImageObject",url:c.a}},datePublished:Object(d.c)(r,d.a),dateModified:Object(d.c)(l,d.a)}},f=function(t){var e=t.name,o=void 0===e?"分类":e,n=t.alias,r=void 0===n?"":n;return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",name:"稀土掘金",position:1,item:l.d},{"@type":"ListItem",name:o,position:2,item:"https://juejin.cn/".concat(r)},{"@type":"ListItem",name:"文章",position:3}]}}},2073:function(t,e,o){"use strict";o(1784)},2075:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},2076:function(t,e,o){"use strict";o(60),o(319),o(10),o(55),o(64),o(59);var n,r=o(13),c=o(14),l=o(1242);function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=new Map,c=[];return t.forEach((function(t){var d,m,f,v="";t.sectionId===(null===(d=e.reading_progress)||void 0===d?void 0:d.last_section_id)&&(v="上次学到"),(null===(m=t.reading_progress)||void 0===m?void 0:m.reading_progress)>=100&&(v="已学完"),2===(null===(f=t.reading_progress)||void 0===f?void 0:f.has_update)&&(v="有更新");var h="";h=e.price>0?t.isFree?"试学章节":"付费章节":"免费章节",c.push(t.sectionId),r.set(t.sectionId,{sectionId:t.sectionId,title:t.title||"小册章节标题",readCount:t.readCount,commentCount:t.commentCount,readDurationStr:Object(l.b)(t.readDuration),status:v,isFinished:t.isFinished,freeStatus:h,canEdit:o===n.author,vid:t.vid,hasVideo:!!t.vid})})),{sectionMap:r,sectionOrder:c}}function m(){var t,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r&&r.id?(null===(t=r.roles)||void 0===t?void 0:t.isAdmin)?n.admin:r.id===(null===(e=o.user)||void 0===e?void 0:e.user_id)?n.author:o.is_buy?n.buyer:n.common:n.unlogin}!function(t){t.unlogin="unlogin",t.admin="admin",t.author="author",t.buyer="buyer",t.common="common"}(n||(n={}));var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(r.a)(this,t),this.bookId="",this.userRole=n.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=o.booklet_id,this.userRole=m(o,c);var l=d(e,o,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(t,[{key:"getSectionList",value:function(){var t=this,e=[];return this.sectionOrder.forEach((function(o){var n;e.push((n=t.sectionMap.get(o),JSON.parse(JSON.stringify(n))))})),e}},{key:"setSectionFree",value:function(){}}]),t}();e.a=f},2077:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n="https://lf26-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/juejin/dd3cffc9-7abf-408d-9f79-95571b022def.html"},2388:function(t,e,o){"use strict";var n={},r=(o(2073),o(29)),component=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"copy-right"},[e("a",{directives:[{name:"link",rawName:"v-link.blank",value:"https://beian.miit.gov.cn",expression:"'https://beian.miit.gov.cn'",modifiers:{blank:!0}}]},[this._v("京ICP备18012699号-3")]),this._v(" "),e("span",[this._v("©版权所有 北京北比信息技术有限公司")]),this._v(" "),this._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"margin-top":"0"}},[e("span",[this._v("公司地址：北京市海淀区信息路甲28号13层B座13B-5")]),this._v(" "),e("span",[this._v("|")]),this._v(" "),e("span",[this._v("公司座机：010-83434395")])])}],!1,null,"a13d394c",null);e.a=component.exports},2435:function(t,e,o){"use strict";o.d(e,"a",(function(){return f}));o(19);var n=o(5),r=(o(11),o(70),o(23),o(97),o(10),o(28)),c=r.f?{belong:"juejin",persist:1}:{belong:"DEFAULT",persist:0};function l(t){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(regeneratorRuntime.mark((function t(e){var data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data={targets:e.targets||"",belong:e.belong||c.belong,persist:c.persist},o=Object.keys(data).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(data[t]))})).join("&"),t.abrupt("return",fetch("https://".concat(r.m,"/web_shorten"),{method:"post",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var o,n,data,code;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return o=t.sent,n=o.message,data=o.data,code=o.code,t.abrupt("return",{err_no:code,data:data,err_msg:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var m=o(8);function f(t,e){var o=Object(m.ref)(""),r=Object(m.ref)(!1),c=Object(m.computed)((function(){return o.value||t.value})),d=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.value=!1,e.next=4,l({targets:t.value});case 4:(n=e.sent)&&0===n.err_no&&n.data[0]&&(o.value=n.data[0].short_url),r.value=!0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.value=!0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(m.watch)(e,(function(t){t&&!o.value&&d()})),[c,r]}},2527:function(t,e,o){},2528:function(t,e,o){},2529:function(t,e,o){},2530:function(t,e,o){},2531:function(t,e,o){},2532:function(t,e,o){},3528:function(t,e,o){t.exports=o.p+"70f921e402915edaf87269d40c52cb9a.svg"},3529:function(t,e,o){t.exports=o.p+"img/add-group.b4df655.png"},3530:function(t,e,o){t.exports=o.p+"6eed03c6054cf7cfcdfa04e02d042990.svg"},3531:function(t,e,o){t.exports=o.p+"img/free-read-mobile.cbca16d.png"},3532:function(t,e,o){t.exports=o.p+"fee0ba0ebc2dffb4792458908d3c3122.svg"},3533:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7143 3.47656C20.4264 3.47656 21 4.05618 21 4.76675V16.9395C21 17.4978 20.6419 17.9942 20.0972 18.1711L12.3776 20.5429C12.1315 20.6185 11.8685 20.6185 11.6224 20.5429L3.88956 18.167C3.3581 17.9942 3 17.4978 3 16.9395V4.76675C3 4.05618 3.57363 3.47656 4.28571 3.47656C4.42025 3.47656 4.55392 3.49775 4.66822 3.53502L12 5.78316L19.3181 3.53933C19.4461 3.49775 19.5798 3.47656 19.7143 3.47656ZM4.7141 5.34079V16.6258L11.1427 18.6008V7.31226L4.7141 5.34079ZM12.859 7.31183L19.2875 5.34079V16.6259L12.859 18.6008V7.31183Z",fill:"#1E80FF"}})]))}}},3534:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"7",height:"6",viewBox:"0 0 7 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M0.722168 1.03902C0.91743 0.843763 1.23401 0.843763 1.42927 1.03902L3.60934 3.21909L5.72693 1.10151C5.92219 0.906247 6.23877 0.906246 6.43404 1.10151L6.78759 1.45506C6.98285 1.65032 6.98285 1.96691 6.78759 2.16217L3.95916 4.9906C3.7639 5.18586 3.44732 5.18586 3.25206 4.9906L2.8985 4.63704C2.88098 4.61952 2.86503 4.60103 2.85066 4.58173L0.368615 2.09968C0.173352 1.90442 0.173352 1.58784 0.368614 1.39258L0.722168 1.03902Z",fill:"#4E5969"}})]))}}},3535:function(t,e,o){"use strict";o(2527)},3536:function(t,e,o){t.exports=o.p+"img/defaultImgUrl.c0fd17b.png"},3537:function(t,e,o){"use strict";o(2528)},3538:function(t,e,o){"use strict";o(2529)},3539:function(t,e,o){o(11);var n=o(162),r=o(206);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,m=data.class,f=data.staticClass,style=data.style,v=data.staticStyle,h=data.attrs,_=void 0===h?{}:h,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[m,f],style:[style,v],attrs:Object.assign({width:"23",height:"22",viewBox:"0 0 23 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M18.25 11C18.25 14.7279 15.2279 17.75 11.5 17.75C7.77209 17.75 4.75 14.7279 4.75 11C4.75 7.27209 7.77209 4.25 11.5 4.25C15.2279 4.25 18.25 7.27209 18.25 11Z",stroke:"#C2C8D1","stroke-width":"1.5"}}),o("path",{attrs:{d:"M11.5022 12.875L11.4998 12.5C11.4998 11.375 12.6248 11 13.292 10.0991C13.9593 9.19828 13.1081 7.625 11.4953 7.625C9.99008 7.625 9.47697 8.58054 9.47461 9.31764V9.49197",stroke:"#C2C8D1","stroke-width":"1.5"}}),o("path",{attrs:{d:"M11.502 13.625V15.1279",stroke:"#C2C8D1","stroke-width":"1.5"}})]))}}},3540:function(t,e,o){"use strict";o(2530)},3541:function(t,e,o){"use strict";o(2531)},3542:function(t,e,o){"use strict";o(2532)},4745:function(t,e,o){"use strict";o.r(e);o(11),o(40),o(60),o(23),o(85),o(71),o(54),o(79),o(97),o(10),o(30),o(51),o(64);var n=o(62),r=o(0),c=(o(19),o(5)),l=o(3),d=o(95),m=o(110),f=o(7),v=o(174),h=o(317),_=o(1787),y=o(3533),C=o.n(y),O=o(3534),w=o.n(O),k=o(1071),j=o(1162),x=o(1070),I=o(2388),P=o(1663),S=o(1664),L=o(2075),B=o.n(L),M=o(4),R=o(2076);function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var D={name:"BookDirectoryInfo",components:{BAlert:d.Alert,LockIcon:B.a},props:["info","free","list"],data:function(){return{userRole:"",sectionList:[]}},computed:T(T({},Object(m.mapGetters)({user:M.USER})),{},{bookId:function(){return this.$route.params.id},isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.info)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===h.a.video}}),watch:{list:function(){this.initData()},user:function(){this.initData()}},created:function(){this.initData()},methods:{initData:function(){var t=new R.a(this.list,this.info,this.user);this.userRole=t.userRole,this.sectionList=t.getSectionList()},routeSectionId:function(t){var e,o=t.sectionId;if(!t.isFinished&&"admin"!==this.userRole&&"author"!==this.userRole)return{};var n=this.$device.isMobile?"m/":"",r=(null===(e=this.$route.query)||void 0===e?void 0:e.suid)||"";return{path:"/".concat(this.isVideoCourse?"video":"book","/").concat(n).concat(this.bookId,"/section/").concat(o).concat(r?"?suid=".concat(r):"")}}}},$=(o(3535),o(29)),A=Object($.a)(D,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-directory",class:{"is-admin":"admin"===t.userRole,"is-author":"author"===t.userRole,"is-buyer":"buyer"===t.userRole}},["admin"===t.userRole?o("b-alert",{attrs:{"show-icon":""}},[t._v("\n    当前是管理员状态,以下所有章节都可点击阅读\n  ")]):"author"===t.userRole?o("b-alert",{attrs:{"show-icon":""}},[t._v("\n    您是小册作者,以下所有章节都可点击阅读\n  ")]):t._e(),t._v(" "),o("div",{staticClass:"section-list"},t._l(t.sectionList,(function(e,n){return o("router-link",{key:e.sectionId,staticClass:"section",class:{unfinished:!e.isFinished},attrs:{to:t.routeSectionId(e)}},[o("div",{staticClass:"left"},[o("div",{staticClass:"index"},[t._v(t._s(n+1))])]),t._v(" "),o("div",{staticClass:"center"},[o("div",{staticClass:"title"},[t.isVideoCourse||e.hasVideo?o("span",{staticClass:"icon-camera"}):t._e(),t._v(" "),o("span",{staticClass:"title-text"},[t._v(t._s(e.title))])]),t._v(" "),o("div",{staticClass:"sub-line"},[e.isFinished?["已学完"===e.status?o("div",{staticClass:"label done"},[t._v("\n              已学完\n            ")]):"上次学到"===e.status?o("div",{staticClass:"label progress"},[t._v("\n              上次学到\n            ")]):"有更新"===e.status?o("div",{staticClass:"label update"},[t._v("\n              有更新\n            ")]):t._e(),t._v(" "),o("span",[t._v("学习时长: "+t._s(e.readDurationStr))])]:o("div",[t._v("写作中...")])],2)]),t._v(" "),o("div",{staticClass:"right"},[e.isFinished?"buyer"===t.userRole||t.info.isBorrowing?t._e():["付费章节"===e.freeStatus?o("div",{staticClass:"lock"},[o("LockIcon")],1):t._e(),t._v(" "),"试学章节"===e.freeStatus?o("div",{staticClass:"label"},[t._v("试学")]):t._e()]:o("div",{staticClass:"lock"},[o("LockIcon")],1)],2)])})),1)],1)}),[],!1,null,"77b59cef",null).exports,U=(o(55),o(59),o(89),o(3536)),V=o.n(U),F={props:["info"],data:function(){return{defaultImgUrl:V.a}},computed:{isMobile:function(){return this.$device.isMobile}},methods:{read:function(){this.$emit("read")},close:function(){this.$emit("close")},downloadImage:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var image,o,n,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return image=e.sent,e.next=5,image.blob();case 5:o=e.sent,n=URL.createObjectURL(o),(link=document.createElement("a")).href=n,link.download="/juejin/booklet/wechatGroupQrcodeImage",document.body.appendChild(link),link.click(),document.body.removeChild(link);case 13:case"end":return e.stop()}}),e)})))()}}},N=(o(3537),Object($.a)(F,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"masker"},[o("div",{staticClass:"box",class:{"not-bought":!t.info.isBuy}},[o("div",{staticClass:"close-btn",on:{click:t.close}}),t._v(" "),o("div",{staticClass:"title"},[t._v("加入作者互动群")]),t._v(" "),t.info.isBuy?o("div",{staticClass:"desc"},[t._v("\n      扫描二维码回复\n      "),o("span",{staticClass:"code"},[t._v(t._s(t.info.wechatGroupSignal))]),t._v("\n      入群\n    ")]):t._e(),t._v(" "),t.info.isBuy?t._e():o("div",{staticClass:"desc"},[t._v("\n      结识更多同行小伙伴 · 作者在线解答\n    ")]),t._v(" "),o("div",{staticClass:"qr-box",class:{"qr-box-mobile":t.isMobile}},[t.info.isBuy?o("img",{attrs:{src:t.info.wechatGroupQrcodeImage}}):o("img",{staticClass:"not-bought",attrs:{src:t.defaultImgUrl}})]),t._v(" "),t.info.isBuy?t._e():o("div",{staticClass:"desc"},[t._v("购买小册后可扫码加入作者互动群")]),t._v(" "),t.isMobile&&t.info.isBuy?o("a",{staticClass:"btn-read",on:{click:function(e){return t.downloadImage(t.info.wechatGroupQrcodeImage)}}},[t._v("\n      保存二维码到本地\n    ")]):t._e()])])}),[],!1,null,"767e8f1a",null).exports),H=o(1359),z=o(1482),Z=o(1384),G=Object(l.b)({components:{BookThumb:H.a,NewTag:z.a,VipTag:Z.a},props:{bookInfo:{type:Object,default:function(){return{}}},routeQuery:{type:Object,default:function(){return{}}}},setup:function(t){return{bookRoute:Object(l.a)((function(){var e;return{name:"bookInfo",params:{id:(null===(e=t.bookInfo)||void 0===e?void 0:e.booklet_id)||""},query:t.routeQuery}}))}}}),W=(o(3538),Object($.a)(G,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("router-link",{staticClass:"book-recommend",attrs:{to:t.bookRoute,target:"_blank"}},[o("BookThumb",{staticClass:"book-img",attrs:{book:t.bookInfo}}),t._v(" "),o("div",{staticClass:"book-desc"},[o("div",{staticClass:"book-title"},[o("NewTag",{staticClass:"tag",attrs:{"is-new":t.bookInfo.is_new}}),t._v(" "),t.bookInfo.base_info.can_vip_borrow?o("VipTag",{staticClass:"tag",attrs:{name:"VIP",width:30,height:20}}):t._e(),t._v("\n      "+t._s(t.bookInfo.base_info.title)+"\n    ")],1),t._v(" "),o("div",{staticClass:"book-summary"},[t._v(t._s(t.bookInfo.base_info.summary))])])],1)}),[],!1,null,"4d8a08e6",null).exports),K=o(1525),X=o(1956),Y=o(1346),Q=o(1185),J=o(1723),tt=o(384),et=o(1523),ot=o(16),nt=o(251),it=o(28),meta=o(1072),st=o(1138),at=o(24),ct=o(103),lt=o(1242),ut=o(45),pt=o(314),object=o(203),mt=o(1792),ft=o(245),vt=o(208),bt=o(34),ht=o(8),_t=o(1785),yt=o.n(_t),gt=o(1678),Ct=o.n(gt),Ot=o(3539),wt=o.n(Ot),kt=o(373),jt=o(2077),xt=o(2435),It=o(1091),Pt=o(1096),St=Object(ht.defineComponent)({components:{BModal:d.Modal,AppLink:kt.a,CloseIcon:Ct.a,BenefitIcon:yt.a,HelpIcon:wt.a},props:{bookId:{type:String,default:function(){return""}},commission:{type:Number,default:function(){return 0}},enableDs:{type:Boolean,default:function(){return!1}}},setup:function(t,e){var o=e.root,n=Object(ht.ref)(!1),r=Object(ht.computed)((function(){var t,e;return(null===(e=null===(t=o.$store.state.auth)||void 0===t?void 0:t.user)||void 0===e?void 0:e.user_id)||""})),c=Object(ht.computed)((function(){return"https://".concat(it.c,"/book/").concat(t.bookId,"?suid=").concat(r.value,"&source=pc")})),l=Object(xt.a)(c,n),m=Object(bt.a)(l,2),f=m[0],v=m[1],h=Object(ht.computed)((function(){return"https://".concat(it.c,"/book/distribute/").concat(t.bookId,"?suid=").concat(r.value)})),_=Object(xt.a)(h,n),y=Object(bt.a)(_,1)[0],C=Object(ht.computed)((function(){return Object(Pt.a)(y.value)})),O=function(){n.value=!n.value};return{ruleUrl:jt.a,showUrl:f,qrCodeDataUrl:C,visible:n,apiLoad:v,toggleModal:O,openModal:function(){Object(ft.m)(o.$TEA,{page:"detail_course",book_id:t.bookId}),o.$ensureAuthorized().then((function(){O()})).catch((function(t){console.error(t)}))},copyLink:function(){Object(ft.n)(o.$TEA,{book_id:t.bookId});try{Object(It.a)(f.value),d.Message.success("链接复制成功")}catch(t){d.Message.error("链接复制失败")}},enterHelpVisitPage:function(){Object(ft.o)(o.$TEA)}}}}),Lt=(o(3540),Object($.a)(St,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"benefit-guide-widget"},[t.enableDs?o("div",{staticClass:"guide-nav-box",on:{click:function(e){return e.stopPropagation(),t.openModal(e)}}},[t._v("\n    "+t._s(t.commission)+"\n  ")]):t._e(),t._v(" "),o("b-modal",{staticClass:"benefit-guide-widget-modal",attrs:{width:"520px",value:t.visible,"mask-closable":!1,"footer-hide":!0,closable:!1},on:{close:t.toggleModal}},[o("CloseIcon",{staticClass:"closeIcon",on:{click:function(e){return e.stopPropagation(),t.toggleModal(e)}}}),t._v(" "),o("div",{staticClass:"title-box"},[o("BenefitIcon",{staticClass:"benefitIcon"}),t._v(" "),o("span",{staticClass:"txt title"},[t._v("推广赚")]),t._v(" "),o("span",{staticClass:"txt money-unit"},[t._v("¥")]),t._v(" "),o("span",{staticClass:"txt"},[t._v(t._s(t.commission))]),t._v(" "),o("AppLink",{staticClass:"help-link",attrs:{href:t.ruleUrl,blank:!0},nativeOn:{click:function(e){return t.enterHelpVisitPage(e)}}},[o("HelpIcon",{staticClass:"helpIcon"})],1)],1),t._v(" "),o("div",{staticClass:"sub-title-box"},[o("span",{staticClass:"txt"},[t._v("邀请好友成功购买本课程，每单最高得")]),t._v(" "),o("span",{staticClass:"txt money-unit"},[t._v("¥")]),t._v(" "),o("span",{staticClass:"txt benefit"},[t._v(t._s(t.commission))]),t._v(" "),o("span",[t._v("现金奖励")])]),t._v(" "),o("div",{staticClass:"desc-box"},[t._v("\n      推广收益及提现请到「\n      "),o("AppLink",{staticClass:"jj-app-link",attrs:{href:"/app?source=course",blank:!0}},[t._v("\n        稀土掘金APP\n      ")]),t._v("\n      -我的-推广中心」操作\n    ")],1),t._v(" "),o("div",{staticClass:"qrcode-box"},[o("img",{staticClass:"qrcode-img",attrs:{src:t.qrCodeDataUrl,alt:"推广二维码"}}),t._v(" "),o("div",{staticClass:"desc"},[t._v("扫码获取推广海报")])]),t._v(" "),o("div",{staticClass:"short-box"},[o("div",{staticClass:"short-url-box"},[t.apiLoad?o("span",{staticClass:"short-url"},[t._v(t._s(t.showUrl))]):t._e()]),t._v(" "),o("div",{staticClass:"short-btn",on:{click:t.copyLink}},[t._v("复制推广链接")])])],1)],1)}),[],!1,null,"3e8ab078",null).exports);function Bt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function Mt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Bt(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Bt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Rt=Object(l.b)({components:{Arrows:w.a,BookStickyHeader:Y.a,BookRecommend:W,BAffix:d.Affix,BDivider:d.Divider,Book:P.a,BookGuidanceJoinWechat:N,WechatQuickLogin:et.a,BookDirectory:A,ImageViewer:Q.a,MarkdownViewer:function(){return Promise.all([o.e(4),o.e(5),o.e(7),o.e(11),o.e(97)]).then(o.bind(null,1481))},CopyRight:I.a,XituSkeleton:tt.a,BenefitGuideWidget:Lt,ApplyIcon:C.a,VipBorrowButton:K.a,BookBuyButton:S.a,BookThumb:H.a,CommentCommon:j.a},mixins:[J.a],setup:function(){var t=Object(l.v)(),e=Object(k.a)(t.value.params.id).commentCount;return{isShowCommentMode:Object(l.a)((function(){return e.value>0})),CommentPosition:x.a}},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var o,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.route,n=t.store,r=t.error,e.next=3,Object(vt.c)(Object(c.a)(regeneratorRuntime.mark((function t(){var e,c,l,d,m,f,v,_,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 2:if(!n.state.auth.user){t.next=4;break}return t.abrupt("return");case 4:return e=o.params.id,t.next=7,Object(h.b)(e);case 7:if(c=t.sent,l=c.bookInfo,d=c.sections,m=c.summaryHtml,f=c.summaryMarkdown,l){t.next=15;break}return n.dispatch(M.SHOW_NOT_FOUND_VIEW),t.abrupt("return",r({statusCode:404}));case 15:return t.next=17,Object(h.c)({categoryId:"0",limit:6});case 17:if(v=t.sent,_=v.list,y={loading:!1,bookInfo:Object.assign({},l,{summaryHtml:m,summaryMarkdown:f}),sectionList:d,totalTime:Object(lt.b)(d.filter((function(t){return t.isFinished})).map((function(t){return t.read_time})).reduce((function(pre,t){return pre+t}),0),!0)},!("array"===Object(object.c)(_)&&(null==_?void 0:_.length)>0)){t.next=24;break}return t.abrupt("return",Mt(Mt({},y),{},{bookList:_.filter((function(t){return t.id!==e})).slice(0,6)}));case 24:return t.abrupt("return",y);case 25:case"end":return t.stop()}}),t)}))),(function(e){return Object(ct.c)(t,e)}),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{bookRecommendScrollLoading:!1,isHasFreeSection:!1,isShowBookletCommentTab:!0,cursor:"0",hasMore:!0,bookRecommendList:[],bookRecommendListMobile:[],isShowAllContent:!1,isOverThousandPx:!1,totalTime:"",bookInfo:null,bookList:[],sectionList:[],isViewMenuOnTop:!1,isViewMenuOnTopMobile:!1,scrollMenuIndex:0,fixedBuyShow:!1,queryBuyList:{pageNum:1,pageSize:20},isBookBoughtGuideVisible:!1,bookCommentsTotal:0,isBookEvaluateVisible:!1,bookBoughtId:null,actionItem:{more:{active:!1}},sourceDiscount:10,loading:!0,isShowBorrow:!1,isVipShow:!0,defaultReturnNumber:1}},computed:Mt(Mt({},Object(m.mapGetters)({logined:M.LOGINED,user:M.USER})),{},{isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===f.BookletCourseType.Video},isMobileBrowser:function(){return this.$device.isMobile},hasHeader:function(){return!this.isMobileBrowser},hasSourceDiscount:function(){return this.sourceDiscount<10},isDiscountValid:function(){return!!this.bookInfo&&Object(lt.c)(this.bookInfo.discount)},hasTimelimtDiscount:function(){return this.isDiscountValid},bookId:function(){return this.$route.params.id},isAdmin:function(){var t,e=this.user||{},o=null===(t=e.roles)||void 0===t?void 0:t.isAdmin,n=this.author.id===e.id;return o||n},freeSectionList:function(){var t,e=this;if(null===(t=this.sectionList)||void 0===t?void 0:t.length){return this.isAdmin?this.sectionList.map((function(t){return t.sectionId})).filter((function(t){return t})):this.sectionList.map((function(t){return!(!(e.free||t.isFree||e.bookInfo.isBorrowing)||!t.isFinished)&&t.sectionId})).filter((function(t){return t}))}return[]},lastReadSection:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.reading_progress)||void 0===e?void 0:e.last_section_id)||""},hasFreeSection:function(){var t,e=!this.free&&(null===(t=this.freeSectionList)||void 0===t?void 0:t.length)>0;return e&&1!==this.scrollMenuIndex&&(this.isHasFreeSection=!0),e},free:function(){var t,e,o;if(!this.bookInfo)return!1;var n=this.bookInfo,r=n.price,c=n.isBuy,l=0===r,d=(null===(t=this.user)||void 0===t?void 0:t.id)===(null===(o=null===(e=this.bookInfo)||void 0===e?void 0:e.user)||void 0===o?void 0:o.id);return l||c||d||this.isAdmin},hasGroupAuth:function(){var t,e,o;if(!this.bookInfo)return!1;var n=this.bookInfo.isBuy,r=(null===(t=this.user)||void 0===t?void 0:t.id)===(null===(o=null===(e=this.bookInfo)||void 0===e?void 0:e.user)||void 0===o?void 0:o.id);return(n||r||this.isAdmin)&&this.bookInfo.wechatGroupSignal&&this.bookInfo.wechatGroupQrcodeImage},author:function(){var t;return(null===(t=this.bookInfo)||void 0===t?void 0:t.user)||{}},scheme:function(){return Object(nt.d)("https://".concat(it.d,"/book/").concat(this.bookId),nt.a.bookDetail.gd_label)},commentSource:function(){var t,e;return{itemId:this.bookId,itemType:12,userId:null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.user_info)||void 0===e?void 0:e.user_id}},handleBgcShow:function(){return this.isMobileBrowser?this.bookInfo.base_info.background_img?{background:"url("+this.bookInfo.base_info.background_img+") no-repeat center center",backgroundSize:"cover"}:{backgroundColor:"#3d5d8b"}:{}},isDistribute:function(){var t,e;return!!(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.is_distribution)},commission:function(){var t;return(null===(t=this.bookInfo)||void 0===t?void 0:t.commission)||0},distributeURL:function(){var t;return"/book/distribute/".concat(this.bookId,"?suid=").concat((null===(t=this.user)||void 0===t?void 0:t.user_id)||"")||!1}}),watch:{$route:function(){this.fetch()}},shareInfo:function(){var t=this.bookInfo||{},e=t.img;return{title:"".concat(t.title," - ").concat(this.author.username," - 掘金小册"),noTemplate:!0,description:t.desc,thumb:e,url:this.$route.fullPath}},head:function(){var t,e,o,n,r,c,l,d,m,f,v,h,_,y;if(this.bookInfo&&Object.keys(this.bookInfo).length&&this.author&&Object.keys(this.author).length){var title=this.bookInfo&&this.bookInfo.title||"",C=null===(t=this.author)||void 0===t?void 0:t.username;title=title?title+" - ":"",C=C?C+" - ":"";var image=[];(null===(e=this.bookInfo)||void 0===e?void 0:e.img)&&image.push(null===(o=this.bookInfo)||void 0===o?void 0:o.img);var O=Object(mt.a)({id:"".concat(meta.d,"/book/").concat(this.bookId),title:null===(n=this.bookInfo)||void 0===n?void 0:n.title,description:null===(r=this.bookInfo)||void 0===r?void 0:r.abstract,username:null===(c=this.author)||void 0===c?void 0:c.username,createdAt:null===(d=null===(l=this.bookInfo)||void 0===l?void 0:l.base_info)||void 0===d?void 0:d.ctime,updatedAt:null===(f=null===(m=this.bookInfo)||void 0===m?void 0:m.base_info)||void 0===f?void 0:f.mtime,image:image}),w="".concat(null===(v=this.bookInfo)||void 0===v?void 0:v.abstract,"。「").concat(null===(h=this.bookInfo)||void 0===h?void 0:h.title,"」由").concat(null===(_=this.author)||void 0===_?void 0:_.username,"撰写，").concat(null===(y=this.bookInfo)||void 0===y?void 0:y.buyerCount,"人购买");return{titleTemplate:null,title:"".concat(title).concat(C,"掘金小册"),meta:[{vmid:"description",name:"description",content:w}],script:[{type:"application/ld+json",json:O}]}}},mounted:function(){var t=this;this.fetch().then((function(){t.enterBookTEA(),Object(ut.o)(t.handleVisibilityChange2)})),this.initFixedBuyShow(),this.initSectionMenu(),this.initContainerClickEvent(),this.getRecommendList(),this.getBookletCommentList()},updated:function(){var t;(null===(t=this.$refs.summaryBody)||void 0===t?void 0:t.offsetHeight)>1e3&&0===this.scrollMenuIndex&&(this.isOverThousandPx=!0,this.isShowAllContent=!0)},beforeDestroy:function(){this.removeScrollListener(),Object(ut.q)(this.handleVisibilityChange2),this.leaveBookTEA(),removeEventListener("scroll",this.handleBookRecommendScroll),this.removeHeaderListener()},methods:{addSeparator:pt.b,formatNumber:pt.c,clickVip:function(){this.$TEA("member_paid_window_click",{platform:this.isMobileBrowser?"H5":"web"})},shopVipEntry:function(){this.$TEA("member_paid_window_display",{platform:this.isMobileBrowser?"H5":"web"})},openDsDetailPage:function(){var t=this;Object(ft.m)(this.$root.$TEA,{page:"detail_course",book_id:this.bookId||""}),this.$root.$ensureAuthorized().then((function(){t.$router.push(t.distributeURL)})).catch((function(t){console.error(t)}))},selectMenu:function(t){var e,o=(null===(e=this.$route.query)||void 0===e?void 0:e.suid)||"";this.$router.push("/".concat(this.isVideoCourse?"video":"book","/").concat(this.bookId,"?").concat(o.length?"suid=".concat(o,"&"):"","scrollMenuIndex=").concat(t)),this.scrollMenuIndex=t,0===t&&(this.$refs.showAllContentWrap&&(this.$refs.showAllContentWrap.style="display: block"),this.$refs.summaryBody&&(this.$refs.summaryBody.className="book-section-view over-thousand")),this.isViewMenuOnTop&&!this.isMobileBrowser&&Object(ut.t)(this.$refs.bookInfoDetailPos,88),this.isViewMenuOnTopMobile&&this.isMobileBrowser&&Object(ut.t)(this.$refs.bookInfoDetailPos,-30)},updateCommentsTotal:function(t){this.bookCommentsTotal=t},closeJoinWechat:function(){this.isBookBoughtGuideVisible=!1,this.$router.replace(this.$bookInfo(this.bookId,this.isVideoCourse?"video":"book"))},getCourseSectionRouteName:function(){var t=this.isMobileBrowser;return this.isVideoCourse?t?"videoCourseWapSection":"videoCourseSection":t?"bookWapSection":"bookSection"},routeReadHistorySection:function(){var t=this.getCourseSectionRouteName(),e=this.bookInfo.readLog,o=e.sectionId,n=e.sign;this.$router.push({name:t,params:{id:this.bookId,sectionId:o},hash:n})},routeBookSection:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,o=this.getCourseSectionRouteName();"0"===e&&(e=0);var n=e||this.freeSectionList[0]||"",r={name:o,params:{id:this.bookId,sectionId:n},query:this.$route.query};if(t)return r;this.$router.push(r)},getXiaoce:function(){var t=this;return this.getXiaoceById().then((function(){t.isVideoCourse&&"bookInfo"===t.$route.name&&t.$router.replace({name:"videoCourseInfo",params:t.$route.params,query:t.$route.query}),t.$nextTick((function(){t.initImageViewer()}))}))},getXiaoceById:function(){var t=this;return this.loading=!0,Object(h.b)(this.bookId).then((function(e){var o;t.loading=!1;var n=e.bookInfo,r=e.sections,c=e.summaryHtml,l=e.summaryMarkdown;if(n||t.$store.dispatch(M.SHOW_NOT_FOUND_VIEW),n){t.bookInfo=Object.assign({},n,{summaryHtml:c,summaryMarkdown:l});var d=null===(o=t.$route.query)||void 0===o?void 0:o.scrollMenuIndex;if(void 0!==d){switch(t.scrollMenuIndex=Number(d),t.scrollMenuIndex){case 0:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_introduction"});break;case 1:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_contents"});break;case 2:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_comments"});break;case 3:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_recommends"})}t.isMobileBrowser&&3===t.scrollMenuIndex&&t.hasMore?addEventListener("scroll",t.handleBookRecommendScroll):removeEventListener("scroll",t.handleBookRecommendScroll)}else t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_introduction"});t.sectionList=r,t.totalTime=Object(lt.b)(r.filter((function(t){return t.isFinished})).map((function(t){return t.read_time})).reduce((function(pre,t){return pre+t}),0),!0),t.$nextTick((function(){t.initImageViewer()})),t.getBookList()}})).catch((function(){t.$store.dispatch(M.SHOW_NOT_FOUND_VIEW),t.loading=!1}))},initImageViewer:function(){var t;null===(t=this.$refs.posterImageViewer)||void 0===t||t.attachContainer(this.$refs.poster)},buyBook:function(){var t=Object(st.b)();return this.$TEA("search_detail_action",Mt(Mt({},t),{},{action_type:at.a.Buy,action_value:this.bookInfo.buyerCount})),this.$coursePayment(this.user,this.bookId)},fetch:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)((null===(o=t.user)||void 0===o?void 0:o.user_id)||"");case 2:return e.abrupt("return",t.getXiaoce());case 3:case"end":return e.stop()}}),e)})))()},getBookList:function(){var t=this;Object(h.c)({categoryId:"0",limit:6}).then((function(e){var o=e.list;"array"===Object(object.c)(o)&&(null==o?void 0:o.length)>0&&(t.bookList=o.filter((function(e){return e.id!==t.bookId})).slice(0,6))}))},getBookletCommentList:function(){var t=this,e={cursor:"0",item_id:this.bookId,item_type:12,limit:20,client_type:ot.e};v.c.QueryItemComments(e).then((function(e){var o=e.data.filter((function(t){return 5===t.comment_info.comment_status}));e.data&&0!==o.length||(t.isShowBookletCommentTab=!1)}))},handleBookRecommendScroll:function(){var t=this,e=document.documentElement.clientHeight,o=document.body.scrollHeight;if(document.documentElement.scrollTop+e>=o-50&&!this.bookRecommendScrollLoading&&this.hasMore){this.bookRecommendScrollLoading=!0;var r={bookletId:this.bookId,cursor:this.cursor,limit:20};Object(h.d)(r).then((function(e){var o=e.list;if(t.cursor=e.cursor,t.hasMore=e.hasMore,"array"===Object(object.c)(o)&&(null==o?void 0:o.length)>0){var r=o.filter((function(e){return e.id!==t.bookId}));t.bookRecommendListMobile=[].concat(Object(n.a)(t.bookRecommendListMobile),Object(n.a)(r))}})).finally((function(){t.bookRecommendScrollLoading=!1}))}},getRecommendList:function(){var t=this,e={bookletId:this.bookId,cursor:"0",limit:20};Object(h.d)(e).then((function(e){var o=e.list;t.cursor=e.cursor,t.hasMore=e.hasMore,"array"===Object(object.c)(o)&&(null==o?void 0:o.length)>0&&(t.bookRecommendList=o.filter((function(e){return e.id!==t.bookId})).slice(0,3),t.bookRecommendListMobile=o.filter((function(e){return e.id!==t.bookId})))}))},initFixedBuyShow:function(){var t=this;this.removeScrollListener=Object(ut.m)(window,(function(){var e=window.pageYOffset<400;t.fixedBuyShow=!e}),50)},initSectionMenu:function(){var t=this;this.removeHeaderListener=Object(ut.m)(window,(function(){var e,o;t.isViewMenuOnTop=window.pageYOffset>=390;var n=(null===(e=t.$refs.bookInfo)||void 0===e?void 0:e.clientHeight)||0,r=0===(null===(o=t.bookInfo)||void 0===o?void 0:o.price)?n-16:n+76;window.pageYOffset<r?t.isViewMenuOnTopMobile=!1:t.isMobileBrowser&&(t.isViewMenuOnTopMobile=!0)}),50)},initContainerClickEvent:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){Object.keys(t.actionItem).forEach((function(e){t.actionItem[e].active=!1}))}))},initSaleWay:function(){this.$route.query.source&&this.initstorageSource()},enterBookTEA:function(){var t=this.bookInfo;if(t&&(null==t?void 0:t.base_info)){var e=this.$route.query;this.$TEA("book_detail_visit",Mt({book_id:t.id,ds_uid:(null==e?void 0:e.suid)||"",is_purchased:(null==t?void 0:t.isBuy)?1:0,book_price:t.base_info.price,book_category:t.base_info.category_id,author_id:t.user.id,is_presale:t.isFinished?0:1,book_discount:this.isDiscountValid?t.discount.rate:10,platform:this.isMobileBrowser?"h5":"web",rent_status:t.isBorrowing?"underway":t.borrowTimes>0?"finish":"never",enter_from:e.enter_from},Object(X.a)(null==t?void 0:t.max_discount))),this.$options.enterTime=new Date}},leaveBookTEA:function(){var t,e=this.$route.query;this.$TEA("book_detail_leave",{stay_time:new Date-this.$options.enterTime,is_purchased:(null===(t=this.bookInfo)||void 0===t?void 0:t.isBuy)?1:0,ds_uid:(null==e?void 0:e.suid)||""})},handleVisibilityChange2:function(){"visible"===document.visibilityState?this.enterBookTEA():this.leaveBookTEA()},handleShowAllContent:function(){this.$refs.showAllContentWrap.style="display: none",this.$refs.summaryBody.style="height: 100%",this.$TEA("book_detail_more_introduction_click")},handleAddGroup:function(){this.isBookBoughtGuideVisible=!0;var t;t=this.bookInfo.isBuy?1:0,this.$TEA("learning_group_click",{is_purchased:t})},handleBookDetailMoreCommentClick:function(){this.isVideoCourse?this.$router.push("/video/".concat(this.bookId,"?scrollMenuIndex=2")):this.$router.push("/book/".concat(this.bookId,"?scrollMenuIndex=2")),this.$TEA("book_detail_more_comment_click")}},enterTime:0}),Et=(o(3541),o(3542),Object($.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-info-view-wrapper"},[n("BookStickyHeader"),t._v(" "),n("view-container",{staticClass:"view-container--bookinfo",attrs:{header:t.hasHeader,scheme:t.scheme}},[n("div",{staticClass:"book-info-view",class:{mobile:t.isMobileBrowser}},[t.bookInfo?n("div",{staticClass:"book-card book-card-header"},[n("div",{ref:"bookInfo",staticClass:"book-info",style:t.handleBgcShow,attrs:{"data-book-id":t.bookId}},[t.isMobileBrowser?t._e():n("div",{ref:"poster",staticClass:"poster-box"},[n("BookThumb",{staticClass:"poster",attrs:{book:t.bookInfo}})],1),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"title-line text-line-2"},[n("router-link",{staticClass:"title",attrs:{to:t.isVideoCourse?t.$videoCourseSection(t.bookId):t.$bookSection(t.bookId)}},[t.bookInfo.is_new?n("div",{staticClass:"presale"},[t._v("新品")]):t._e(),t._v(" "),t.bookInfo.canVipBorrow?n("div",{staticClass:"vip-icon"},[t._v("VIP")]):t._e(),t._v(" "),n("span",{attrs:{title:t.bookInfo.title}},[t._v(t._s(t.bookInfo.title))])]),t._v(" "),t.isDistribute&&!t.isMobileBrowser?n("BenefitGuideWidget",{attrs:{"enable-ds":t.isDistribute,"book-id":t.bookId,commission:t.commission}}):t._e()],1),t._v(" "),n("div",{staticClass:"media"},[n("div",{staticClass:"desc text-line-2",attrs:{title:t.bookInfo.abstract}},[t._v("\n                "+t._s(t.bookInfo.abstract)+"\n              ")]),t._v(" "),n("div",{staticClass:"author",class:{"author-mobile":t.isMobileBrowser}},[n("div",{staticClass:"author-info"},[n("app-link",{staticClass:"user",attrs:{to:t.$userRoute(t.author),blank:!0}},[n("Avatar",{staticClass:"hero",attrs:{user:t.author}}),t._v(" "),n("username",{staticClass:"username",attrs:{user:t.author}})],1)],1),t._v(" "),n("div",{staticClass:"author-desc"},[n("span",{staticClass:"desc"},[t._v("\n                    "+t._s(t.$formatUserIntro(t.author))+"\n                  ")])]),t._v(" "),0!==t.bookInfo.price&&t.bookInfo.wechatGroupQrcodeImage?n("div",{staticClass:"add-group",class:{"add-group-mobile":t.isMobileBrowser},attrs:{title:"加入作者互动群"},on:{click:t.handleAddGroup}},[t.isMobileBrowser?t._e():n("img",{attrs:{src:o(3528)}}),t._v(" "),t.isMobileBrowser?n("img",{attrs:{src:o(3529),alt:""}}):n("span",[t._v("学习群")])]):t._e()])]),t._v(" "),t.isMobileBrowser?t._e():n("div",{staticClass:"other"},[n("BookBuyButton",{attrs:{book:t.bookInfo,"is-owner":t.free,"is-float-discount-label":!0,"section-route":t.routeBookSection(!0,t.lastReadSection)},on:{buyBook:t.buyBook}}),t._v(" "),t.free?n("div",{staticClass:"is-buy",attrs:{"data-book-id":t.bookId}}):t._e(),t._v(" "),t.free?t._e():n("div",{staticClass:"not-buy"},[n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"detail"},on:{fetch:t.fetch,read:function(e){return t.routeBookSection(!1,t.lastReadSection)}}}),t._v(" "),t.hasFreeSection&&!t.bookInfo.isBorrowing?n("router-link",{staticClass:"button--write",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[n("ApplyIcon",{staticClass:"apply-icon"}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n                    "+t._s(t.lastReadSection?"继续试学":"免费试学")+"\n                  ")])],1):t._e()],1),t._v(" "),t.isMobileBrowser?t._e():n("div",{staticClass:"right-side"},[n("div",{staticClass:"learn-people"},[t._v("\n                  "+t._s(t.addSeparator(t.bookInfo.buyerCount))+" 人加入学习\n                ")]),t._v(" "),n("BDivider",{staticStyle:{background:"#515767"},attrs:{type:"vertical"}}),t._v(" "),n("div",{staticClass:"learn-duration"},[t._v("\n                  "+t._s(t.formatNumber(t.sectionList.length||0))+" 小节\n                ")]),t._v(" "),n("div",{staticStyle:{margin:"0 8px"}},[t._v("·")]),t._v(" "),n("div",{staticClass:"total-time"},[t._v("约 "+t._s(t.totalTime))])],1)],1)])]),t._v(" "),t.isMobileBrowser&&t.bookInfo.price>0?n("div",{staticClass:"book-bought"},[n("div",{staticClass:"learn-duration",on:{click:function(e){return t.selectMenu(1,"sectionDirectory")}}},[n("div",{staticClass:"total-section"},[t._v("\n              "+t._s(t.formatNumber(t.sectionList.length||0))+" 小节\n            ")]),t._v(" "),n("div",{staticClass:"total-time"},[t._v("约 "+t._s(t.totalTime))])]),t._v(" "),n("BDivider",{style:"height: 80%; marginTop: 10px",attrs:{type:"vertical"}}),t._v(" "),n("div",{staticClass:"learn-people"},[n("div",{staticClass:"total-people"},[t._v("\n              "+t._s(t.addSeparator(t.bookInfo.buyerCount))+" 人\n            ")]),t._v(" "),n("div",{style:"textAlign: center; opacity: 0.6; lineHeight: 20px;"},[t._v("\n              已加入学习\n            ")])])],1):t._e(),t._v(" "),t.isDistribute&&t.isMobileBrowser?n("div",{staticClass:"book-mobile-distribute",on:{click:function(e){return e.stopPropagation(),t.openDsDetailPage(e)}}},[n("div",{staticClass:"value"},[t._v(t._s(t.commission))])]):t._e(),t._v(" "),t.isMobileBrowser?n("div",{staticClass:"book-mobile-other"},[t.free||!t.hasFreeSection||t.bookInfo.isBorrowing?t._e():n("router-link",{staticClass:"button--write",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[n("ApplyIcon",{staticClass:"apply-icon"}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n              "+t._s(t.lastReadSection?"继续试学":"免费试学")+"\n            ")])],1),t._v(" "),n("BookBuyButton",{attrs:{book:t.bookInfo,"is-owner":t.free,"is-float-discount-label":!0,"section-route":t.routeBookSection(!0,t.lastReadSection)},on:{buyBook:t.buyBook}}),t._v(" "),t.free?t._e():n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"detail"},on:{fetch:t.fetch,read:function(e){return t.routeBookSection(!1,t.lastReadSection)}}})],1):t._e()]):t._e(),t._v(" "),n("div",{ref:"bookInfoDetailPos",staticClass:"book-info-detail"},[n("div",{staticClass:"books-tabs"},[t.bookInfo?t._e():n("div",[t.loading?n("XituSkeleton",{staticClass:"book-card"}):n("div",{staticClass:"view authority-view"},[n("img",{attrs:{src:o(3530)}}),t._v(" "),n("p",{staticClass:"hint"},[t._v("暂无权限")])])],1),t._v(" "),t.bookInfo?n("div",{staticClass:"book-card",class:{"book-card-mobile":t.isMobileBrowser}},[n("div",{staticClass:"book-menu-wrap",class:{top:t.isViewMenuOnTop&&!t.isMobileBrowser,"top-mobile":t.isViewMenuOnTopMobile&&t.isMobileBrowser}},[n("div",{staticClass:"book-menu"},[n("div",{staticClass:"item",class:{active:0===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(0,"summaryBody")}}},[n("span",{staticClass:"text"},[t._v("介绍")])]),t._v(" "),n("div",{staticClass:"item",class:{active:1===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(1,"sectionDirectory")}}},[n("span",{staticClass:"text",staticStyle:{display:"inline-block",position:"relative"}},[t._v("\n                    目录\n                    "),t.isHasFreeSection&&t.hasFreeSection?n("div",{staticClass:"free-read",class:{"free-read-pc":!t.isMobileBrowser}},[t.isMobileBrowser?n("img",{attrs:{src:o(3531),alt:""}}):t._e(),t._v(" "),t.isMobileBrowser?t._e():n("img",{staticStyle:{width:"28px",height:"16px"},attrs:{src:o(3532),alt:""}})]):t._e()])]),t._v(" "),t.isShowBookletCommentTab?n("div",{staticClass:"item",class:{active:2===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(2,"commentBooklet")}}},[n("span",{staticClass:"text"},[t._v("评论")])]):t._e(),t._v(" "),t.isMobileBrowser?n("div",{staticClass:"item",class:{active:3===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(3,"recommendBooklet")}}},[n("span",{staticClass:"text"},[t._v("推荐小册")])]):t._e()])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isViewMenuOnTop||t.isViewMenuOnTopMobile,expression:"isViewMenuOnTop || isViewMenuOnTopMobile"}],staticClass:"transparent-menu",staticStyle:{height:"50px"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sectionList.length&&1===t.scrollMenuIndex,expression:"sectionList.length && scrollMenuIndex === 1"}],ref:"sectionDirectory",staticClass:"book-content"},[n("div",{staticClass:"book-content-head"},[t._v("\n                课程内容\n                "),n("span",{staticClass:"message"},[t._v("\n                  "+t._s(t.bookInfo.isFinished?"已完结":"已更新"+t.formatNumber(t.bookInfo.sectionCount||0)+"小节")+"\n                ")])]),t._v(" "),n("book-directory",{attrs:{free:t.free,info:t.bookInfo,list:t.sectionList}})],1),t._v(" "),t.bookInfo&&0===t.scrollMenuIndex?n("div",{ref:"summaryBody",staticClass:"book-section-view",class:{"over-thousand":t.isOverThousandPx&&t.isMobileBrowser}},[n("markdown-viewer",{staticClass:"markdown-viewer",attrs:{markdown:t.bookInfo.summaryMarkdown,html:t.bookInfo.summaryHtml}}),t._v(" "),t.isOverThousandPx&&t.isMobileBrowser&&t.isShowAllContent?n("div",{ref:"showAllContentWrap",staticClass:"show-all-content-wrap"},[n("span",{staticClass:"show-all-content",on:{click:t.handleShowAllContent}},[t._v("\n                  点击查看全部\n                  "),n("Arrows")],1)]):t._e()],1):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowCommentMode&&t.isMobileBrowser,expression:"isShowCommentMode && isMobileBrowser"}],staticClass:"sift-comment",class:{mobile:t.isMobileBrowser}},[t.bookInfo&&0===t.scrollMenuIndex?n("div",{staticClass:"title"},[t._v("\n                评论\n              ")]):t._e(),t._v(" "),t.bookInfo&&0===t.scrollMenuIndex?n("div",{staticClass:"comment-list"},[n("CommentCommon",{attrs:{size:"small","forbid-input":"",source:t.commentSource,"has-sort":!1,"tea-params":{comment_position:t.CommentPosition.bookDetail},"comment-display-max":3,"filter-star-comments":!0,"hide-reply-btn":!0,"show-title":!1,"start-load-more":!1,"jj-helper-item-id":t.bookId,"jj-helper-item-type":12},on:{onCommentLimit:t.handleBookDetailMoreCommentClick}})],1):t._e()]),t._v(" "),2===t.scrollMenuIndex?n("div",{staticClass:"bookComment",staticStyle:{padding:"0 2rem 2rem"}},[n("CommentCommon",{attrs:{id:"comment-list",size:"default","forbid-input":"",source:t.commentSource,"has-sort":!1,"tea-params":{comment_position:t.CommentPosition.bookDetail},"filter-star-comments":!0,"hide-reply-btn":!0,"show-title":!1,"jj-helper-item-id":t.bookId,"jj-helper-item-type":12}})],1):t._e(),t._v(" "),t.bookRecommendListMobile&&t.isMobileBrowser&&3===t.scrollMenuIndex&&t.bookRecommendListMobile.length?n("div",{ref:"recommendBooklet",staticClass:"book-card",staticStyle:{width:"100vw",margin:"10px 0"}},t._l(t.bookRecommendListMobile,(function(t){return n("Book",{key:t.booklet_id,staticClass:"book-item-h5",attrs:{book:t}})})),1):t._e()]):t._e()]),t._v(" "),t.isMobileBrowser?t._e():n("BAffix",{attrs:{"offset-top":74}},[n("div",{staticClass:"books-recommend"},[n("div",{staticClass:"books-recommend-title"},[t._v("推荐小册")]),t._v(" "),n("div",{staticClass:"books-recommend-list"},t._l(t.bookRecommendList,(function(t){return n("div",{key:t.booklet_id,staticClass:"books-recommend-item"},[n("BookRecommend",{attrs:{"book-info":t,"route-query":{enter_from:"detail_book",utm_source:"detail_book"}}})],1)})),0)])])],1)]),t._v(" "),t.bookInfo?n("copy-right"):t._e(),t._v(" "),n("image-viewer",{ref:"posterImageViewer",attrs:{"background-color":"rgba(0,0,0,.65)",margin:50,full:!0}}),t._v(" "),n("wechat-quick-login"),t._v(" "),t.isBookBoughtGuideVisible?n("BookGuidanceJoinWechat",{attrs:{info:t.bookInfo},on:{read:function(e){return t.routeBookSection(!1)},close:t.closeJoinWechat}}):t._e()],1)],1)}),[],!1,null,"7f58db46",null));e.default=Et.exports}}]);
//# sourceMappingURL=02d610a.js.map