(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1065:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var o,r,l=n(39);function c(e,t){Object(l.h)(e,t)}!function(e){e.FollowShow="follow_show",e.FollowClick="follow_click",e.FollowCancel="follow_cancel",e.FollowingFeedShow="following_feed_show"}(o||(o={})),function(e){e[e.followCommendCard=0]="followCommendCard",e[e.hotAuthors=1]="hotAuthors",e[e.homeUserPopover=2]="homeUserPopover",e[e.postUserCard=4]="postUserCard",e[e.postTop=5]="postTop",e[e.postStickyBar=6]="postStickyBar",e[e.userCenterTop=7]="userCenterTop",e[e.userCenterStickyBar=8]="userCenterStickyBar",e[e.userCenterMomentFeed=9]="userCenterMomentFeed",e[e.userCenterFollowing=10]="userCenterFollowing",e[e.userCenterTeam=11]="userCenterTeam",e[e.userCenterFollowers=12]="userCenterFollowers",e[e.commentUserPopover=13]="commentUserPopover",e[e.pinFeedUserPopover=14]="pinFeedUserPopover",e[e.pinDiggDetail=15]="pinDiggDetail",e[e.pinDetail=16]="pinDetail",e[e.clubDetail=18]="clubDetail",e[e.searchResult=19]="searchResult",e[e.teamCenterTop=20]="teamCenterTop",e[e.other=100]="other"}(r||(r={}))},1075:function(e,t,n){"use strict";var o=n(8),r=n(1174),l=n.n(r),c=n(1175),f=n.n(c),d=n(1176),v=n.n(d),m=n(1177),w=n.n(m),h=n(1178),y=n.n(h),_=Object(o.defineComponent)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(e,t){var n=Object(o.computed)((function(){return e.attention}));return{handleClick:function(n){e.disabled||e.loading||t.emit("click",n)},isAttentionType:n,attentionText:Object(o.computed)((function(){return"mini"===e.size&&e.loading?"":e.cancel?e.loading?"取消":e.cancelAttentionText||"已关注":e.customAttentionText||"关注"})),iconSrc:Object(o.computed)((function(){return e.loading?e.cancel||n.value&&"primary"!==e.type?w.a:y.a:n.value&&e.showIcon?"mini"===e.size?"":e.icon||e.cancel?v.a:"primary"===e.type?l.a:f.a:""}))}}}),O=(n(1179),n(29)),component=Object(O.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"ui-btn",class:[e.type,e.size,e.status,e.cancel?"cancel":"",e.attention?"attention":""],attrs:{disabled:e.disabled||e.loading},on:{click:e.handleClick}},[e.iconSrc?n("img",{staticClass:"img",class:e.loading?"loading":"",attrs:{src:e.iconSrc}}):e._e(),e._v(" "),e.isAttentionType?[e._v(e._s(e.attentionText))]:e._t("default",[e._v(e._s(e.text))])],2)}),[],!1,null,"e1243e7c",null);t.a=component.exports},1076:function(e,t,n){"use strict";n.r(t);n(175),n(176),n(79),n(10);var o=n(3),r=n(8),l=n(33),c=n(1448),f=n(1248),d=n(24),v=n(1075),m=n(314),w=n(1065),h=n(1081),y=Object(r.defineComponent)({components:{Popover:f.a,Button:v.a,ImButton:c.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0},teaFollowType:{type:Number,default:w.b.other}},setup:function(e){var t=Object(o.x)(),n=Object(r.computed)((function(){return t.getters.USER})),c=Object(r.ref)(null),f=Object(r.ref)(),v=Object(r.computed)((function(){return n.value&&n.value.id===e.userId})),w=Object(h.a)({itemId:e.userId,itemType:d.d.UserType,teaFollowType:e.teaFollowType}),y=w.isFollow,_=w.followLoading,O=w.toggleFollow,j=w.setFollowInfo,C=w.traceFollowShow;return Object(r.watch)(c,(function(){c.value&&j({itemId:c.value.id,itemType:d.d.UserType,isFollow:c.value.followed})})),{followingCount:Object(r.computed)((function(){return Object(m.c)(c.value.followingCount||0)})),followerCount:Object(r.computed)((function(){return Object(m.c)(c.value.followerCount||0)})),isFollow:y,fetchUserPromise:f,user:c,self:v,followLoading:_,toggleFollow:O,toFollowing:function(){window.open("/user/".concat(e.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(e.userId,"/followers"),"_blank")},handleShow:function(){e.userId&&e.enablePopover&&(f.value=Object(l.h)(e.userId,{ignore404:!0}).then((function(e){if(e.is_logout)return Promise.reject();c.value=e})))},handleAfterShow:function(){C()}}},computed:{position:function(){return this.user&&(this.$formatUserIntro(this.user)||this.user.description||"暂无简介")}}}),_=(n(1512),n(1513),n(29)),component=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{staticClass:"user-popover",attrs:{promise:e.fetchUserPromise},on:{show:e.handleShow,afterShow:e.handleAfterShow},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(e){e.stopPropagation()}}},[n("app-link",{attrs:{to:e.$userRoute(e.user),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:e.user,alt:e.user.username+"的头像"}})],1),e._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:e.user,"show-jscore-level":e.showJscoreLevel}}),e._v(" "),n("div",{staticClass:"position"},[e._v(e._s(e.position))])],1)],1),e._v(" "),e.self?e._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:e.isFollow,loading:e.followLoading,size:"large","show-icon":!1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFollow()}}}),e._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":e.userId}})],1),e._v(" "),n("div",{staticClass:"meta-row",on:{click:function(e){e.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:e.toFollowing}},[n("div",{staticClass:"count"},[e._v(e._s(e.followingCount))]),e._v(" "),n("div",{staticClass:"title"},[e._v("关注")])]),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",{staticClass:"item",on:{click:e.toFollower}},[n("div",{staticClass:"count"},[e._v(e._s(e.followerCount))]),e._v(" "),n("div",{staticClass:"title"},[e._v("粉丝")])])])])]},proxy:!0}])},[e._v(" "),e._t("default")],2)}),[],!1,null,"d7aef884",null);t.default=component.exports},1081:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(60),n(44),n(177),n(68),n(19);var o=n(5),r=n(3),l=n(95),c=n(135),f=n(24),d=n(4),v=n(179),m=n(1088),w=n(1),h=n(1065),y=n(245);function _(){var e,t,n,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=Object(m.a)(),C=Object(r.x)(),x=Object(r.c)(),T=Object(r.n)(!1),A=Object(r.n)(!1),F=[],S=Object(r.n)(!1),k=Object(r.n)(""),U=Object(r.n)(f.d.UserType),I=Object(r.n)(h.b.other),R=Object(r.n)("关注失败，请稍后重试~"),P=Object(r.n)(""),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.itemId,n=e.itemType,o=e.isFollow,r=e.teaFollowType,l=e.errorText,c=e.successText;void 0!==t&&(k.value=t),void 0!==n&&(U.value=n),void 0!==o&&(S.value=o),void 0!==r&&(I.value=r),void 0!==l&&(R.value=l),void 0!==c&&(P.value=c),"boolean"==typeof o&&(A.value=!0)},E=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==x?void 0:x.proxy.$ensureAuthorized({loginGuideFrom:c.b.focus_login});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:if(!t||"string"==typeof t){e.next=10;break}return e.abrupt("return",!1);case 10:if((null!=t?t:k.value)&&(null!=n?n:U.value)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){var r,c,m,w,_,j,x,A,F,B;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return w=null!=t?t:k.value,_=null!=n?n:U.value,j=null!==(r=null==o?void 0:o.successText)&&void 0!==r?r:P.value,x=null!==(c=null==o?void 0:o.errorText)&&void 0!==c?c:R.value,T.value=!0,A=!0,e.prev=10,e.next=13,O({itemId:w,itemType:_});case 13:0===(F=e.sent).err_no?(S.value=!0,j&&l.Message.success(j)):(A=!1,Object(v.b)(F.err_no)||l.Message.error(F.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),A=!1,l.Message.error(x);case 21:return T.value=!1,[f.d.UserType,f.d.Team].includes(_)&&(B=null!==(m=null==o?void 0:o.teaFollowType)&&void 0!==m?m:I.value,Object(h.c)(h.a.FollowClick,{follow_status:A?1:0,current_page:Object(y.h)(window.location.href),follow_type:B,to_item_id:w,to_item_type:_===f.d.UserType?0:1})),_===f.d.UserType&&C.dispatch(d.FOLLOW_USER),e.abrupt("return",{isSuccess:A,targetStatus:!0});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,o){return e.apply(this,arguments)}}(),D=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){var r,c,v,m,w,_,O,x,A,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return m=null!=t?t:k.value,w=null!=n?n:U.value,_=null!==(r=null==o?void 0:o.successText)&&void 0!==r?r:P.value,O=null!==(c=null==o?void 0:o.errorText)&&void 0!==c?c:R.value,T.value=!0,x=!0,e.prev=10,e.next=13,j({itemId:m,itemType:w});case 13:0===(A=e.sent).err_no?(S.value=!1,_&&l.Message.success("取消".concat(_))):(x=!1,l.Message.error(A.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),x=!1,l.Message.error("取消".concat(O));case 21:return T.value=!1,[f.d.UserType,f.d.Team].includes(w)&&(F=null!==(v=null==o?void 0:o.teaFollowType)&&void 0!==v?v:I.value,Object(h.c)(h.a.FollowCancel,{follow_status:x?1:0,current_page:Object(y.h)(window.location.href),follow_type:F,to_item_id:m,to_item_type:w===f.d.UserType?0:1})),w===f.d.UserType&&C.dispatch(d.UNFOLLOW_USER),e.abrupt("return",{isSuccess:x,targetStatus:!1});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,o){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=o?o:S.value)){e.next=7;break}return e.next=4,D(t,n,r);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,L(t,n,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,o,r){return e.apply(this,arguments)}}(),J=function(e){var t,n,o;var r=null!==(t=null==e?void 0:e.currentPage)&&void 0!==t?t:Object(y.h)(window.location.href),l=null!==(n=null==e?void 0:e.teaFollowType)&&void 0!==n?n:A.value?I.value:void 0,c=null!==(o=null==e?void 0:e.isFollow)&&void 0!==o?o:A.value?S.value:void 0;void 0!==l&&void 0!==c?Object(h.c)(h.a.FollowShow,{current_page:r,follow_type:l,button_status:c?1:0}):F.push({currentPage:r,teaFollowType:l,isFollow:c})};return B(w),Object(r.y)(A,(function(){A.value&&(F.forEach((function(e){var t=e.currentPage,n=e.teaFollowType,o=e.isFollow;J({currentPage:t,teaFollowType:null!=n?n:I.value,isFollow:null!=o?o:S.value})})),F.splice(0,F.length))})),{isFollow:S,followLoading:T,doFollow:(n=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.do((function(){return L(t,n,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,o){return n.apply(this,arguments)}),cancelFollow:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.do((function(){return D(t,n,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,n,o){return t.apply(this,arguments)}),toggleFollow:(e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,o,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.do((function(){return M(t,n,o,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,n,o,r){return e.apply(this,arguments)}),setFollowInfo:B,traceFollowShow:J}}function O(e){var t=e.itemId,n=e.itemType;return Object(w.d)({url:"/interact_api/v1/follow/do",method:"post",showError:!1,body:{id:t,type:n}})}function j(e){var t=e.itemId,n=e.itemType;return Object(w.d)({url:"/interact_api/v1/follow/undo",method:"post",showError:!1,body:{id:t,type:n}})}},1088:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(10);var o=n(13),r=n(14),l=function(){function e(){Object(o.a)(this,e),this.busy=!1}return Object(r.a)(e,[{key:"do",value:function(e){var t=this;return this.busy?Promise.resolve(void 0):(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function c(){return new l}},1104:function(e,t,n){},1144:function(e,t,n){"use strict";n(1467);var o=n(29),component=Object(o.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"container"},[t("em",{staticClass:"triangle"})])}],!1,null,"5ae2b6bc",null);t.a=component.exports},1174:function(e,t,n){e.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},1175:function(e,t,n){e.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},1176:function(e,t,n){e.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},1177:function(e,t,n){e.exports=n.p+"img/loading.b144729.png"},1178:function(e,t,n){e.exports=n.p+"img/loading-light.e96acb8.png"},1179:function(e,t,n){"use strict";n(1104)},1248:function(e,t,n){"use strict";n(10),n(63);var o=n(8),r=n(1144),l=Object(o.defineComponent)({components:{Triangle:r.a},props:{disalbe:{type:Boolean,default:!1},trigger:{type:String,default:"hover"},promise:Promise},emits:["afterShow"],setup:function(e,t){var data=Object(o.reactive)({visible:!1,top:0,left:0,isTop:!1,isInner:!1}),n=Object(o.ref)(null),r=Object(o.ref)(null),l=Object(o.ref)();return{data:data,popoverStyle:Object(o.computed)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:l,showPopover:function(o,c){e.disalbe||(data.isInner="hover"===c,c===e.trigger&&(clearTimeout(r.value),t.emit("show"),n.value=setTimeout((function(){Promise.resolve(e.promise).then((function(){n.value&&(data.visible=!0,t.root.$nextTick((function(){var e=o.target,n=null==e?void 0:e.getBoundingClientRect(),r=e.offsetWidth||33,c=e.offsetHeight||33,f=l.value,d=(null==f?void 0:f.offsetWidth)||260,v=(null==f?void 0:f.offsetHeight)||160,m=n.left-d/2+r/2,w=n.top-v-12;data.isTop=!1,w<60&&(data.isTop=!0,w=n.top+c+8),m=Math.max(0,m),data.left=m,data.top=w,t.emit("afterShow")})))}))}),300)))},hidePopover:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"hover"!==e&&!0===data.isInner||(data.isInner,clearTimeout(n.value),n.value=null,t.emit("hide"),r.value=setTimeout((function(){r.value=null,data.visible=!1}),300))}}}}),c=(n(1509),n(29)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popover-box",on:{mouseenter:function(t){return e.showPopover(t,"hover")},mouseleave:function(t){return e.hidePopover("hover")}}},[n("transition",{attrs:{name:"fade"}},[e.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:e.popoverStyle},[e._t("content"),e._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:e.data.isTop}})],2):e._e()]),e._v(" "),e._t("default")],2)}),[],!1,null,"487cbd49",null);t.a=component.exports},1302:function(e,t,n){},1397:function(e,t,n){},1398:function(e,t,n){},1399:function(e,t,n){},1400:function(e,t,n){},1448:function(e,t,n){"use strict";n(19);var o=n(5),r=n(3),l=n(39),c=n(21),f=Object(r.b)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(e){var t=Object(r.w)(),n=Object(r.a)((function(){return Object(c.h)(t.currentRoute.fullPath)})),f=Object(r.c)();return{handleLinkJump:function(){var r=Object(o.a)(regeneratorRuntime.mark((function o(){var path;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,null==f?void 0:f.proxy.$ensureAuthorized();case 3:o.next=8;break;case 5:return o.prev=5,o.t0=o.catch(0),o.abrupt("return",!1);case 8:Object(l.h)("private_msg_page_show",{visit_source:e.teaType}),path="/notification/im?participantId=".concat(e.userId),n.value?window.location.href=path:t.push(path);case 11:case"end":return o.stop()}}),o,null,[[0,5]])})));return function(){return r.apply(this,arguments)}}()}}}),d=(n(1511),n(29)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a",{staticClass:"im-button",class:{"has-icon":"hasIcon"===e.type},attrs:{href:"/notification/im?participantId="+e.userId},on:{click:function(t){return t.preventDefault(),e.handleLinkJump(t)}}},["hasIcon"===e.type?o("img",{staticClass:"im-icon",attrs:{src:n(1510),alt:"私信"}}):e._e(),e._v(" "),o("div",[e._v("私信")])])}),[],!1,null,"314ccdfc",null);t.a=component.exports},1467:function(e,t,n){"use strict";n(1302)},1509:function(e,t,n){"use strict";n(1397)},1510:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},1511:function(e,t,n){"use strict";n(1398)},1512:function(e,t,n){"use strict";n(1399)},1513:function(e,t,n){"use strict";n(1400)}}]);
//# sourceMappingURL=d178ad7.js.map