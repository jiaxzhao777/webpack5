/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[60,1,3,8,96,97,223,227,230,231,232,333,335,336],{1065:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l}));var r,o,c=n(39);function l(e,t){Object(c.h)(e,t)}!function(e){e.FollowShow="follow_show",e.FollowClick="follow_click",e.FollowCancel="follow_cancel",e.FollowingFeedShow="following_feed_show"}(r||(r={})),function(e){e[e.followCommendCard=0]="followCommendCard",e[e.hotAuthors=1]="hotAuthors",e[e.homeUserPopover=2]="homeUserPopover",e[e.postUserCard=4]="postUserCard",e[e.postTop=5]="postTop",e[e.postStickyBar=6]="postStickyBar",e[e.userCenterTop=7]="userCenterTop",e[e.userCenterStickyBar=8]="userCenterStickyBar",e[e.userCenterMomentFeed=9]="userCenterMomentFeed",e[e.userCenterFollowing=10]="userCenterFollowing",e[e.userCenterTeam=11]="userCenterTeam",e[e.userCenterFollowers=12]="userCenterFollowers",e[e.commentUserPopover=13]="commentUserPopover",e[e.pinFeedUserPopover=14]="pinFeedUserPopover",e[e.pinDiggDetail=15]="pinDiggDetail",e[e.pinDetail=16]="pinDetail",e[e.clubDetail=18]="clubDetail",e[e.searchResult=19]="searchResult",e[e.teamCenterTop=20]="teamCenterTop",e[e.other=100]="other"}(o||(o={}))},1068:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var r,o={hotTag:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51b98a0c69a34689b8ca2c10dd66156d~tplv-k3u1fbpfcp-image.image#?w=43&h=20&s=6724&e=svg&a=1&b=f36937"};!function(e){e.publishComment="jj_publish_comment",e.publishReply="jj_publish_reply",e.changeLike="jj_change_like",e.setCommentCount="jj_set_comment_count",e.changeCommentCount="jj_change_comment_count",e.deleteComment="jj_delete_comment",e.deleteReply="jj_delete_reply"}(r||(r={}))},1070:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var r,o,c=n(39);function l(e,t){Object(c.h)(e,t)}!function(e){e.commentShow="comment_all_show",e.commentItemShow="comment_item_show",e.commentItemDig="comment_item_dig",e.commentButtonClick="comment_button_click",e.replyButtonClick="comment_item_reply",e.moreCommentClick="more_comment_click",e.moreReplyClick="more_replyment_click",e.commentAction="comment_action_2",e.commentMessageShow="comment_information_show",e.commentMessageClick="comment_information_click",e.commentMessageDig="comment_information_dig",e.commentMessageReply="comment_information_reply"}(r||(r={})),function(e){e[e.other=100]="other",e[e.postViewBottom=1]="postViewBottom",e[e.postViewDrawer=2]="postViewDrawer",e[e.pinFeed=3]="pinFeed",e[e.pinDetail=4]="pinDetail",e[e.bookDetail=5]="bookDetail",e[e.bookSectionDetail=6]="bookSectionDetail",e[e.userTimeline=7]="userTimeline"}(o||(o={}))},1071:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),o=n(1068);function c(e){var t=Object(r.n)(e),n=Object(r.c)(),c=null==n?void 0:n.proxy.$getBean("eventBus"),h=Object(r.n)(0);return Object(r.j)((function(){(null==n?void 0:n.proxy)&&c&&(c.onVmLife(null==n?void 0:n.proxy,o.a.setCommentCount,(function(e){f(e)&&t.value&&t.value===e.itemId&&(h.value=e.val)})),c.onVmLife(null==n?void 0:n.proxy,o.a.changeCommentCount,(function(e){f(e)&&t.value&&t.value===e.itemId&&(h.value=h.value+e.val)})))})),{commentCount:h,itemIdRef:t,setCommentCount:function(t){h.value=t,c&&l(c,e,t)},changeCommentCount:function(t){h.value=h.value+t,c&&d(c,e,t)},emitSetCommentCount:function(e,t){c&&l(c,e,t)},emitChangeCommentCount:function(e,t){h.value=h.value+t,c&&d(c,e,t)}}}function l(e,t,n){null==e||e.emit(o.a.setCommentCount,{itemId:t,val:n})}function d(e,t,n){null==e||e.emit(o.a.changeCommentCount,{itemId:t,val:n})}function f(e){return"itemId"in e&&"val"in e}},1075:function(e,t,n){"use strict";var r=n(8),o=n(1174),c=n.n(o),l=n(1175),d=n.n(l),f=n(1176),h=n.n(f),v=n(1177),m=n.n(v),y=n(1178),w=n.n(y),C=Object(r.defineComponent)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(e,t){var n=Object(r.computed)((function(){return e.attention}));return{handleClick:function(n){e.disabled||e.loading||t.emit("click",n)},isAttentionType:n,attentionText:Object(r.computed)((function(){return"mini"===e.size&&e.loading?"":e.cancel?e.loading?"取消":e.cancelAttentionText||"已关注":e.customAttentionText||"关注"})),iconSrc:Object(r.computed)((function(){return e.loading?e.cancel||n.value&&"primary"!==e.type?m.a:w.a:n.value&&e.showIcon?"mini"===e.size?"":e.icon||e.cancel?h.a:"primary"===e.type?c.a:d.a:""}))}}}),_=(n(1179),n(29)),component=Object(_.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"ui-btn",class:[e.type,e.size,e.status,e.cancel?"cancel":"",e.attention?"attention":""],attrs:{disabled:e.disabled||e.loading},on:{click:e.handleClick}},[e.iconSrc?n("img",{staticClass:"img",class:e.loading?"loading":"",attrs:{src:e.iconSrc}}):e._e(),e._v(" "),e.isAttentionType?[e._v(e._s(e.attentionText))]:e._t("default",[e._v(e._s(e.text))])],2)}),[],!1,null,"e1243e7c",null);t.a=component.exports},1076:function(e,t,n){"use strict";n.r(t);n(175),n(176),n(79),n(10);var r=n(3),o=n(8),c=n(33),l=n(1448),d=n(1248),f=n(24),h=n(1075),v=n(314),m=n(1065),y=n(1081),w=Object(o.defineComponent)({components:{Popover:d.a,Button:h.a,ImButton:l.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0},teaFollowType:{type:Number,default:m.b.other}},setup:function(e){var t=Object(r.x)(),n=Object(o.computed)((function(){return t.getters.USER})),l=Object(o.ref)(null),d=Object(o.ref)(),h=Object(o.computed)((function(){return n.value&&n.value.id===e.userId})),m=Object(y.a)({itemId:e.userId,itemType:f.d.UserType,teaFollowType:e.teaFollowType}),w=m.isFollow,C=m.followLoading,_=m.toggleFollow,k=m.setFollowInfo,x=m.traceFollowShow;return Object(o.watch)(l,(function(){l.value&&k({itemId:l.value.id,itemType:f.d.UserType,isFollow:l.value.followed})})),{followingCount:Object(o.computed)((function(){return Object(v.c)(l.value.followingCount||0)})),followerCount:Object(o.computed)((function(){return Object(v.c)(l.value.followerCount||0)})),isFollow:w,fetchUserPromise:d,user:l,self:h,followLoading:C,toggleFollow:_,toFollowing:function(){window.open("/user/".concat(e.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(e.userId,"/followers"),"_blank")},handleShow:function(){e.userId&&e.enablePopover&&(d.value=Object(c.h)(e.userId,{ignore404:!0}).then((function(e){if(e.is_logout)return Promise.reject();l.value=e})))},handleAfterShow:function(){x()}}},computed:{position:function(){return this.user&&(this.$formatUserIntro(this.user)||this.user.description||"暂无简介")}}}),C=(n(1512),n(1513),n(29)),component=Object(C.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{staticClass:"user-popover",attrs:{promise:e.fetchUserPromise},on:{show:e.handleShow,afterShow:e.handleAfterShow},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(e){e.stopPropagation()}}},[n("app-link",{attrs:{to:e.$userRoute(e.user),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:e.user,alt:e.user.username+"的头像"}})],1),e._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:e.user,"show-jscore-level":e.showJscoreLevel}}),e._v(" "),n("div",{staticClass:"position"},[e._v(e._s(e.position))])],1)],1),e._v(" "),e.self?e._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:e.isFollow,loading:e.followLoading,size:"large","show-icon":!1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFollow()}}}),e._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":e.userId}})],1),e._v(" "),n("div",{staticClass:"meta-row",on:{click:function(e){e.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:e.toFollowing}},[n("div",{staticClass:"count"},[e._v(e._s(e.followingCount))]),e._v(" "),n("div",{staticClass:"title"},[e._v("关注")])]),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",{staticClass:"item",on:{click:e.toFollower}},[n("div",{staticClass:"count"},[e._v(e._s(e.followerCount))]),e._v(" "),n("div",{staticClass:"title"},[e._v("粉丝")])])])])]},proxy:!0}])},[e._v(" "),e._t("default")],2)}),[],!1,null,"d7aef884",null);t.default=component.exports},1081:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));n(60),n(44),n(177),n(68),n(19);var r=n(5),o=n(3),c=n(95),l=n(135),d=n(24),f=n(4),h=n(179),v=n(1088),m=n(1),y=n(1065),w=n(245);function C(){var e,t,n,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=Object(v.a)(),x=Object(o.x)(),O=Object(o.c)(),S=Object(o.n)(!1),P=Object(o.n)(!1),j=[],E=Object(o.n)(!1),T=Object(o.n)(""),V=Object(o.n)(d.d.UserType),L=Object(o.n)(y.b.other),I=Object(o.n)("关注失败，请稍后重试~"),R=Object(o.n)(""),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.itemId,n=e.itemType,r=e.isFollow,o=e.teaFollowType,c=e.errorText,l=e.successText;void 0!==t&&(T.value=t),void 0!==n&&(V.value=n),void 0!==r&&(E.value=r),void 0!==o&&(L.value=o),void 0!==c&&(I.value=c),void 0!==l&&(R.value=l),"boolean"==typeof r&&(P.value=!0)},D=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==O?void 0:O.proxy.$ensureAuthorized({loginGuideFrom:l.b.focus_login});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:if(!t||"string"==typeof t){e.next=10;break}return e.abrupt("return",!1);case 10:if((null!=t?t:T.value)&&(null!=n?n:V.value)){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,l,v,m,C,k,O,P,j,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return m=null!=t?t:T.value,C=null!=n?n:V.value,k=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:R.value,O=null!==(l=null==r?void 0:r.errorText)&&void 0!==l?l:I.value,S.value=!0,P=!0,e.prev=10,e.next=13,_({itemId:m,itemType:C});case 13:0===(j=e.sent).err_no?(E.value=!0,k&&c.Message.success(k)):(P=!1,Object(h.b)(j.err_no)||c.Message.error(j.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),P=!1,c.Message.error(O);case 21:return S.value=!1,[d.d.UserType,d.d.Team].includes(C)&&(A=null!==(v=null==r?void 0:r.teaFollowType)&&void 0!==v?v:L.value,Object(y.c)(y.a.FollowClick,{follow_status:P?1:0,current_page:Object(w.h)(window.location.href),follow_type:A,to_item_id:m,to_item_type:C===d.d.UserType?0:1})),C===d.d.UserType&&x.dispatch(f.FOLLOW_USER),e.abrupt("return",{isSuccess:P,targetStatus:!0});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o,l,h,v,m,C,_,O,P,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,n);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",{isSuccess:!1});case 4:return v=null!=t?t:T.value,m=null!=n?n:V.value,C=null!==(o=null==r?void 0:r.successText)&&void 0!==o?o:R.value,_=null!==(l=null==r?void 0:r.errorText)&&void 0!==l?l:I.value,S.value=!0,O=!0,e.prev=10,e.next=13,k({itemId:v,itemType:m});case 13:0===(P=e.sent).err_no?(E.value=!1,C&&c.Message.success("取消".concat(C))):(O=!1,c.Message.error(P.err_msg)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),O=!1,c.Message.error("取消".concat(_));case 21:return S.value=!1,[d.d.UserType,d.d.Team].includes(m)&&(j=null!==(h=null==r?void 0:r.teaFollowType)&&void 0!==h?h:L.value,Object(y.c)(y.a.FollowCancel,{follow_status:O?1:0,current_page:Object(w.h)(window.location.href),follow_type:j,to_item_id:v,to_item_type:m===d.d.UserType?0:1})),m===d.d.UserType&&x.dispatch(f.UNFOLLOW_USER),e.abrupt("return",{isSuccess:O,targetStatus:!1});case 25:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=r?r:E.value)){e.next=7;break}return e.next=4,B(t,n,o);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,M(t,n,o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),F=function(e){var t,n,r;var o=null!==(t=null==e?void 0:e.currentPage)&&void 0!==t?t:Object(w.h)(window.location.href),c=null!==(n=null==e?void 0:e.teaFollowType)&&void 0!==n?n:P.value?L.value:void 0,l=null!==(r=null==e?void 0:e.isFollow)&&void 0!==r?r:P.value?E.value:void 0;void 0!==c&&void 0!==l?Object(y.c)(y.a.FollowShow,{current_page:o,follow_type:c,button_status:l?1:0}):j.push({currentPage:o,teaFollowType:c,isFollow:l})};return A(m),Object(o.y)(P,(function(){P.value&&(j.forEach((function(e){var t=e.currentPage,n=e.teaFollowType,r=e.isFollow;F({currentPage:t,teaFollowType:null!=n?n:L.value,isFollow:null!=r?r:E.value})})),j.splice(0,j.length))})),{isFollow:E,followLoading:S,doFollow:(n=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.do((function(){return M(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)}),cancelFollow:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.do((function(){return B(t,n,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)}),toggleFollow:(e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.do((function(){return N(t,n,r,o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t,n,r,o){return e.apply(this,arguments)}),setFollowInfo:A,traceFollowShow:F}}function _(e){var t=e.itemId,n=e.itemType;return Object(m.d)({url:"/interact_api/v1/follow/do",method:"post",showError:!1,body:{id:t,type:n}})}function k(e){var t=e.itemId,n=e.itemType;return Object(m.d)({url:"/interact_api/v1/follow/undo",method:"post",showError:!1,body:{id:t,type:n}})}},1084:function(e,t,n){"use strict";n(19);var r=n(5),o=n(3),c=n(39),l=n(135),d=(n(23),n(243),n(34)),f=n(95),h=n(7),v=n(174),m=n(16),y=n(179),w=n(1131),C=n(208),_=n(1071),k=n(1068);var x=n(1070),O=(n(79),n(10),n(30),n(55),n(51),n(59),n(89),n(1169)),S=n.n(O),P=n(1170),j=n.n(P),E=n(1171),T=n.n(E),V=n(1150),L=n(1151),I=n(1133),R=n(1146),A=n(247),D=n(1135),M=n(1142),B=n(120);function N(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}var F=Object(o.b)({components:{Tooltip:f.Tooltip,AuthCard:V.a,CloseIcon:S.a,ImageIcon:T.a,Emoji:L.a,InfoIcon:j.a},props:{size:{type:String,default:"default"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},textLimit:{type:Number,default:1e3},imageFileSizeLimit:{type:Number,default:5242880},buttonText:{type:String,default:"发布"}},emits:["onBlur","onFocus","onSubmit","onEmptyBlur"],setup:function(e,t){var n=t.emit,c=Object(o.c)(),d=Object(o.n)(!1),h=Object(o.n)(0),v=Object(o.n)(),m=Object(o.n)(),y=Object(o.n)(),w=Object(o.n)(""),content=Object(o.n)(""),C=Object(o.a)((function(){return e.loading?"提交中...":e.buttonText})),_=Object(o.a)((function(){return(null==c?void 0:c.proxy.$device.isMacOS)?"⌘ + Enter":"Ctrl + Enter"}));Object(o.y)(y,(function(){Object(R.g)(v.value)}));var k=Object(o.n)(!0),x=Object(B.b)((function(){k.value=S()}),300,!0);function O(e){y.value=e,w.value&&window.URL.revokeObjectURL(w.value),w.value=e?window.URL.createObjectURL(e):""}function S(){return!content.value.trim()}function P(e){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.value){t.next=3;break}return t.abrupt("return");case 3:if(r.value="",n){t.next=6;break}return t.abrupt("return");case 6:if(!(n.size>e.imageFileSizeLimit)){t.next=9;break}return f.Message.error("文件过大"),t.abrupt("return");case 9:return t.next=11,Object(D.a)(n,I.a);case 11:if(t.sent){t.next=14;break}return f.Message.error("不支持此格式的图片"),t.abrupt("return");case 14:O(n);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){S()||(h.value>e.textLimit?f.Message.error("字数超过限制，请删减后发送"):n("onSubmit",{content:content.value,files:y.value?[y.value]:[]}))}return Object(o.y)([content,y],(function(){x()})),Object(o.y)(d,(function(e){n(e?"onFocus":"onBlur"),!e&&S()&&n("onEmptyBlur")})),Object(o.y)(content,(function(){h.value=Object(R.h)(content.value)})),{textCount:h,focused:d,focus:function(){Object(o.g)((function(){var e;null===(e=v.value)||void 0===e||e.focus()}))},reset:function(){O(),v.value&&(v.value.innerHTML=""),content.value=""},inputElementRef:m,richInputRef:v,sendTip:_,submitButtonTitle:C,isEmpty:k,imagePreviewUrl:w,changeFile:O,onFocus:function(){null==c||c.proxy.$ensureAuthorized({loginGuideFrom:l.b.comment_login}).then((function(){return d.value=!0})).catch((function(e){return console.log("focus comment input err:",e)}))},onOuterClick:function(){d.value=!1},onFormBoxClick:function(t){var n=t.target;if(!e.disabled){var r=v.value;r&&(r.focus(),r.contains(n)||Object(R.g)(r))}},onInput:function(){v.value&&(d.value=!0,Object(R.e)(v.value),content.value=Object(R.b)(N(v.value.innerHTML)))},onPaste:function(e){if(e.preventDefault(),v.value){Object(R.f)(e,P);var text=Object(R.a)(e),html=Object(A.e)(text)+'<span id="parse-end"></span>';Object(R.c)(v.value,html);var t=v.value.querySelector("#parse-end");t&&(t.scrollIntoView({block:"center"}),t.remove()),d.value=!0,content.value=Object(R.b)(N(v.value.innerHTML))}},onKeydown:function(t){e.disabled||e.loading||Object(M.a)(t,(function(){return E()}))},updateEmoji:function(e){v.value&&(Object(R.c)(v.value,Object(A.d)(e)),d.value=!0,content.value=Object(R.b)(N(v.value.innerHTML)))},showFileDialog:function(){null==c||c.proxy.$ensureAuthorized({loginGuideFrom:l.b.comment_login}).then((function(){var e;return null===(e=m.value)||void 0===e?void 0:e.click()})).catch((function(e){return console.warn("show file dialog err:",e)}))},onFileSelected:P,submit:E}}}),H=(n(1172),n(29)),U=Object(H.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return e.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-input",class:e.size,on:{click:e.onFormBoxClick}},[n("AuthCard",[n("div",{staticClass:"input-box",class:{disabled:e.disabled,focused:e.focused,"not-empty":!e.isEmpty}},[n("div",{ref:"richInputRef",staticClass:"rich-input",class:{empty:e.isEmpty},attrs:{contenteditable:!e.disabled,spellcheck:"false",placeholder:e.placeholder||"输入评论（Enter换行，"+e.sendTip+"发送）",disabled:e.loading},on:{focus:e.onFocus,input:e.onInput,paste:e.onPaste,keydown:e.onKeydown,keyup:function(e){e.stopPropagation()}}}),e._v(" "),e.imagePreviewUrl?n("div",{staticClass:"image-preview-box"},[n("div",{staticClass:"image-preview",style:{backgroundImage:"url("+e.imagePreviewUrl+")"}}),e._v(" "),n("div",{staticClass:"clean-btn",on:{click:function(t){return e.changeFile()}}},[n("CloseIcon")],1)]):e._e(),e._v(" "),n("div",{staticClass:"action-box",class:{disabled:e.disabled,active:!e.disabled&&!e.loading&&!e.isEmpty}},[n("Emoji",{staticClass:"emoji-btn",attrs:{label:""},on:{selectEmoji:e.updateEmoji}}),e._v(" "),n("div",{staticClass:"image-btn",on:{click:e.showFileDialog}},[n("ImageIcon",{staticClass:"icon"})],1),e._v(" "),n("div",{staticStyle:{flex:"1"}}),e._v(" "),n("div",{staticClass:"text-count-wrapper"},[n("div",{staticClass:"text-count",class:{danger:e.textCount>e.textLimit}},[n("span",{staticClass:"text-count-real"},[e._v(e._s(e.textCount))]),e._v(" "),n("span",{staticClass:"text-count-limit"},[e._v("/ "+e._s(e.textLimit))])]),e._v(" "),n("Tooltip",{staticClass:"count-info",attrs:{content:"标点符号、链接等不计算在有效字数内",placement:"bottom","append-to-body":!1}},[n("InfoIcon",{staticClass:"info-icon"})],1)],1),e._v(" "),n("div",{staticClass:"submit"},[n("Tooltip",{attrs:{content:e.sendTip,placement:"top","append-to-body":!1}},[n("button",{staticClass:"submit-btn",class:{disabled:e.disabled,active:!e.disabled&&!e.loading&&!e.isEmpty,loading:e.loading},attrs:{disabled:e.disabled||e.loading||e.isEmpty},on:{click:e.submit}},[e._v("\n              "+e._s(e.submitButtonTitle)+"\n            ")])])],1)],1)])]),e._v(" "),e._t("unLogin"),e._v(" "),n("input",{ref:"inputElementRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.onFileSelected(t.target.files[0])}}})],2)}),[],!1,null,"2320b114",null).exports,z=Object(o.b)({components:{CommentInput:U},inject:{getRecommendScoreInfo:{from:"getRecommendScoreInfo",default:null},getFromPage:{from:"getFromPage",default:null}},props:{avatarVisible:{type:Boolean,default:!0},size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,default:null},reply:{type:Object,default:null},teaParams:{type:Object,default:null},autoFocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},submitTitle:{type:String,default:"发布"}},emits:["onEmptyBlur","onPublishSuccess","onPublishFail","onPublish"],setup:function(e,t){var n=t.emit,O=function(e){var t=e.currentUser,n=Object(o.c)(),c=null==n?void 0:n.proxy.$getBean("eventBus"),l=Object(o.s)(),x=Object(o.n)(!1),O=Object(o.n)(!1),S=Object(_.a)("").emitChangeCommentCount;function P(e){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(regeneratorRuntime.mark((function e(n){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t?void 0:t.userId){e.next=2;break}throw new Error("用户未登录");case 2:if(null==t?void 0:t.isBindPhone){e.next=4;break}throw new Error("用户需要绑定手机号");case 4:if(0!==(n||[]).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,Object(w.a)(t.userId,n).catch((function(){return[]}));case 8:if(0!==((r=e.sent)||[]).length){e.next=11;break}throw new Error("图片上传异常");case 11:return o={gif:0,png:1,jpg:2,jpeg:2},c=function(e){var t=e.Url,n=l.$imgUrlTransformInstance.parseImgUrl(t).extra,r=null==n?void 0:n.format;return{pic_url:t,width:e.ImageHeight,height:e.ImageWidth,pic_type:o[r||"png"]||1}},e.abrupt("return",r.map((function(e){return c(e)})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var content,r,source,o,l,h,w,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(content=t.content,r=t.files,source=n.source,!x.value){e.next=4;break}return e.abrupt("return");case 4:if(0!==r.length||0!==content.trim().length){e.next=7;break}return f.Message.error("请填写评论内容后发送"),e.abrupt("return");case 7:return x.value=!0,O.value=!1,e.next=11,Object(C.a)(P(r));case 11:if(o=e.sent,l=Object(d.a)(o,2),h=l[0],w=l[1],!h&&w){e.next=18;break}return f.Message.error("图片上传失败, 请稍后尝试"),e.abrupt("return");case 18:return e.next=20,v.c.PublishComment({client_type:m.e,item_id:source.itemId,item_type:source.itemType,comment_content:content,comment_pics:w},{showError:!1}).catch((function(){return null}));case 20:if(_=e.sent,x.value=!1,(null==_?void 0:_.err_no)===v.b.ERROR_NO.OK){e.next=27;break}return Object(y.b)(null==_?void 0:_.err_no)||f.Message.error((null==_?void 0:_.err_msg)||"评论失败, 请稍后重试"),console.error("publishCommentToSource error",_),O.value=!0,e.abrupt("return");case 27:return S(source.itemId,1),f.Message.success("评论成功"),null==c||c.emit(k.a.publishComment,{itemId:source.itemId,val:_.data}),e.abrupt("return",_.data);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var content,r,source,o,l,w,_,j,E,T,V;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(content=t.content,r=t.files,source=n.source,o=n.comment,!x.value){e.next=4;break}return e.abrupt("return");case 4:if(0!==content.trim().length){e.next=7;break}return f.Message.error("请填写回复内容后发送"),e.abrupt("return");case 7:return x.value=!0,O.value=!1,e.next=11,Object(C.a)(P(r));case 11:if(w=e.sent,_=Object(d.a)(w,2),j=_[0],E=_[1],!j&&E){e.next=18;break}return f.Message.error("图片上传失败, 请稍后尝试"),e.abrupt("return");case 18:return T=[],o.bot_info&&o.bot_info.bot_id&&T.push({item_type:h.IdType.BotIdType,item_id:o.bot_info.bot_id,name:o.bot_info.bot_name}),e.next=22,v.c.PublishCommentReply({client_type:m.e,item_id:source.itemId,item_type:source.itemType,reply_to_comment_id:o.comment_id,reply_to_user_id:null===(l=o.comment_info)||void 0===l?void 0:l.user_id,reply_content:content,reply_pics:E,mentions:T,reply_to_reply_id:null},{showError:!1}).catch((function(){return null}));case 22:if(V=e.sent,x.value=!1,(null==V?void 0:V.err_no)===v.b.ERROR_NO.OK){e.next=29;break}return Object(y.b)(null==V?void 0:V.err_no)||f.Message.error((null==V?void 0:V.err_msg)||"回复失败, 请稍后重试"),console.error("publishReplyToComment error",V),O.value=!0,e.abrupt("return");case 29:return f.Message.success("回复成功"),S(o.comment_id,1),S(source.itemId,1),null==c||c.emit(k.a.publishReply,{itemId:o.comment_id,val:V.data}),e.abrupt("return",V.data);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var content,r,source,o,l,w,_,j,E,T,V;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(content=t.content,r=t.files,source=n.source,o=n.comment,l=n.reply,!x.value){e.next=4;break}return e.abrupt("return");case 4:if(0!==r.length||0!==content.trim().length){e.next=7;break}return f.Message.error("请填写回复内容后发送"),e.abrupt("return");case 7:return x.value=!0,O.value=!1,e.next=11,Object(C.a)(P(r));case 11:if(w=e.sent,_=Object(d.a)(w,2),j=_[0],E=_[1],!j&&E){e.next=18;break}return f.Message.error("图片上传失败, 请稍后尝试"),e.abrupt("return");case 18:return T=[],l.bot_info&&l.bot_info.bot_id&&T.push({item_type:h.IdType.BotIdType,item_id:l.bot_info.bot_id,name:l.bot_info.bot_name}),e.next=22,v.c.PublishCommentReply({client_type:m.e,item_id:source.itemId,item_type:source.itemType,reply_to_comment_id:o.comment_id,reply_to_reply_id:l.reply_info.reply_id,reply_to_user_id:l.reply_info.user_id,reply_content:content,mentions:T,reply_pics:E},{showError:!1}).catch((function(){return null}));case 22:if(V=e.sent,x.value=!1,(null==V?void 0:V.err_no)===v.b.ERROR_NO.OK){e.next=29;break}return Object(y.b)(null==V?void 0:V.err_no)||f.Message.error((null==V?void 0:V.err_msg)||"回复失败, 请稍后重试"),console.error("PublishComment error",V),O.value=!0,e.abrupt("return");case 29:return f.Message.success("回复成功"),S(o.comment_id,1),S(source.itemId,1),null==c||c.emit(k.a.publishReply,{itemId:o.comment_id,val:V.data}),e.abrupt("return",V.data);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{publishLoading:x,publishError:O,publishCommentToSource:function(e,t){return E.apply(this,arguments)},publishReplyToComment:function(e,t){return T.apply(this,arguments)},publishReplyToCommentReply:function(e,t){return V.apply(this,arguments)}}}({currentUser:e.currentUser}),S=O.publishError,P=O.publishLoading,j=O.publishCommentToSource,E=O.publishReplyToComment,T=O.publishReplyToCommentReply,V=Object(o.c)(),L=Object(o.n)(),I=Object(o.a)((function(){var t,n;return!!P.value||!!(null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&!(null===(n=e.currentUser)||void 0===n?void 0:n.isBindPhone)}));function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function t(r){var o,c,l,d,f,h,v,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n("onPublish"),!(e.reply&&e.comment&&e.source)){t.next=7;break}return t.next=4,T(r,{source:e.source,comment:e.comment,reply:e.reply});case 4:m=t.sent,t.next=17;break;case 7:if(!e.comment||!e.source){t.next=13;break}return t.next=10,E(r,{source:e.source,comment:e.comment});case 10:m=t.sent,t.next=17;break;case 13:if(!e.source){t.next=17;break}return t.next=16,j(r,{source:e.source});case 16:m=t.sent;case 17:m?(null===(o=L.value)||void 0===o||o.reset(),n("onPublishSuccess",m)):n("onPublishFail"),Object(x.c)(x.b.commentAction,{replyment_id:(null===(l=null===(c=e.reply)||void 0===c?void 0:c.reply_info)||void 0===l?void 0:l.reply_id)||"0",mode:(null===(d=e.teaParams)||void 0===d?void 0:d.mode)||"",comment_status:m?1:0,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:(null===(f=e.comment)||void 0===f?void 0:f.is_hot)?1:0,theme_id:null===(h=e.teaParams)||void 0===h?void 0:h.theme_id,section_id:null===(v=e.teaParams)||void 0===v?void 0:v.section_id});case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.j)((function(){e.autoFocus&&Object(o.g)((function(){var e;null===(e=L.value)||void 0===e||e.focus()}))})),{commentInputRef:L,isDisabled:I,publishLoading:P,publishError:S,loginGuidVisibleChange:function(e){e&&Object(c.h)("login_guide_show",{from:l.a.comment,type:l.c.auto})},onLogin:function(){Object(c.h)("login_guide_click",{from:l.a.comment}),null==V||V.proxy.$requestLogin()},onSubmit:function(e){return R.apply(this,arguments)}}}}),$=(n(1173),Object(H.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-form",class:{reply:!!e.comment,"sub-reply":!!e.reply,small:"small"===e.size}},[n("div",{staticClass:"content"},[e.avatarVisible?n("div",{staticClass:"avatar-box"},[n("Avatar",{staticClass:"avatar",attrs:{url:(e.currentUser||{}).avatar,size:50}})],1):e._e(),e._v(" "),n("div",{staticClass:"form-box"},[n("CommentInput",{ref:"commentInputRef",attrs:{size:e.size,"button-text":e.submitTitle,placeholder:e.placeholder,loading:e.publishLoading,disabled:e.isDisabled},on:{onSubmit:e.onSubmit,onEmptyBlur:function(t){return e.$emit("onEmptyBlur")}},scopedSlots:e._u([{key:"unLogin",fn:function(){return[e._t("unLogin")]},proxy:!0}],null,!0)})],1)])])}),[],!1,null,"673c9859",null));t.a=$.exports},1086:function(e,t,n){"use strict";var r={components:{Icon:n(95).Icon},props:{robot:{type:Object,required:!1},maxWidth:{type:String,default:"128px"},universal:{type:Boolean,default:!1},tagName:{type:String,default:"app-link"},tab:{type:String,default:null}},data:function(){return{mapStyle:{maxWidth:this.maxWidth||"128px"}}},computed:{robotname:function(){var e;return(null===(e=this.robot)||void 0===e?void 0:e.bot_name)||""},isOffline:function(){return this.robot&&-1===this.robot.status},userId:function(){var e;return"".concat(null===(e=this.robot)||void 0===e?void 0:e.user_id)||""}}},o=(n(1193),n(29)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.universal?n(e.tagName,{tag:"Component",staticClass:"username",attrs:{to:e.$userRoute(e.userId,e.tab),blank:!0}},[n("span",{staticClass:"name",style:e.mapStyle},[e._v("\n    "+e._s(e.robotname)+"\n  ")]),e._v(" "),n("span",{staticClass:"tag robot-tag"},[e._v("机器人")]),e._v(" "),e.isOffline?n("span",{staticClass:"tag robot-offline"},[e._v("已下线")]):e._e(),e._v(" "),e._t("default")],2):n("client-only",[n(e.tagName,{tag:"Component",staticClass:"username",attrs:{to:e.$userRoute(e.userId,e.tab),blank:!0}},[n("span",{staticClass:"name",style:e.mapStyle},[e._v("\n      "+e._s(e.robotname)+"\n    ")]),e._v(" "),n("span",{staticClass:"tag robot-tag"},[e._v("机器人")]),e._v(" "),e.isOffline?n("span",{staticClass:"tag robot-offline"},[e._v("已下线")]):e._e(),e._v(" "),e._t("default")],2)],1)}),[],!1,null,"734d9ec8",null);t.a=component.exports},1088:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(10);var r=n(13),o=n(14),c=function(){function e(){Object(r.a)(this,e),this.busy=!1}return Object(o.a)(e,[{key:"do",value:function(e){var t=this;return this.busy?Promise.resolve(void 0):(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},1090:function(e,t,n){"use strict";var r=n(8),o=n(1156),c=n(1248),l=n(0),d=n(1086),f=n(1144),h=n(1132),v=n(1075);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w=Object(r.defineComponent)({components:{Button:v.a,Triangle:f.a,Robotname:d.a},props:{robotInfo:Object},data:function(){return{showTips:!1,showBotInfoTips:!1}},computed:{currentUser:function(){return this.$store.getters.USER},robotDetailInfo:function(){var e;return(null===(e=this.robotInfo)||void 0===e?void 0:e.bot_info)||{}},userInfo:function(){var e;return(null===(e=this.robotInfo)||void 0===e?void 0:e.author_user_info)||{}},isOffline:function(){var e,t;return(null===(e=this.robotInfo)||void 0===e?void 0:e.bot_info)&&-1===(null===(t=this.robotInfo)||void 0===t?void 0:t.bot_info.status)},position:function(){var e,t;return(null===(t=null===(e=this.robotInfo)||void 0===e?void 0:e.bot_info)||void 0===t?void 0:t.bot_description)||"暂无简介"},teaInfo:function(){var e,t;return{bot_id:null===(e=this.robotDetailInfo)||void 0===e?void 0:e.bot_id,author_id:null===(t=this.robotDetailInfo)||void 0===t?void 0:t.user_id,user_id:this.currentUser?this.currentUser.id:"unknown"}}},mounted:function(){this.showTea()},methods:{showTip:function(){this.showTips=!0},hideTip:function(){this.showTips=!1},showBotTip:function(){this.position.length>14&&(this.showBotInfoTips=!0)},hideBotTip:function(){this.showBotInfoTips=!1},handleDeveloper:function(){this.$TEA("beconEvent","bot_author_click",this.teaInfo)},showTea:function(){var e;(null===(e=this.robotDetailInfo)||void 0===e?void 0:e.bot_id)&&this.$TEA("bot_detail_show",this.teaInfo)},toCreate:function(){this.$TEA("beconEvent","bot_create_click",y(y({},this.teaInfo),{},{coze_from:0})),window.open("https://www.coze.cn/","_blank")},toSendpins:function(){var e;this.$TEA("beconEvent","bot_talk_click",this.teaInfo),window.open(this.$router.resolve(this.$topicRoute({id:h.a},{robotId:null===(e=this.robotDetailInfo)||void 0===e?void 0:e.bot_id})).href,"_blank")}}}),C=(n(1194),n(29)),_=Object(C.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"info-row",on:{click:function(e){e.stopPropagation()}}},[n("app-link",{attrs:{to:e.$userRoute(e.userInfo.user_id,"robots"),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{size:100,url:e.robotDetailInfo.bot_avatar,alt:e.robotDetailInfo.bot_name+"的头像"}})],1),e._v(" "),n("div",{staticClass:"user-info"},[n("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:e.robotDetailInfo,universal:!1,tab:"robots"}}),e._v(" "),n("div",{staticClass:"position",on:{mouseenter:e.showBotTip,mouseleave:e.hideBotTip}},[e._v("\n        "+e._s(e.position)+"\n      ")]),e._v(" "),n("div",{staticClass:"developer"},[e._v("\n        开发者:\n        "),n("app-link",{attrs:{to:e.$userRoute(e.userInfo.user_id,"robots"),blank:!0},on:{click:e.handleDeveloper}},[n("span",{staticClass:"developer-user"},[e._v("\n            "+e._s(e.userInfo.user_name||e.userInfo.user_id)+"\n          ")])])],1)],1),e._v(" "),e.showBotInfoTips?n("div",{staticClass:"robot_info_tips"},[e._v("\n      "+e._s(e.position)+"\n      "),n("triangle",{staticClass:"triangle-top"})],1):e._e()],1),e._v(" "),n("div",{staticClass:"operate-btn",on:{mouseenter:e.showTip,mouseleave:e.hideTip}},[n("div",{on:{mouseenter:e.showTip,mouseleave:e.hideTip}},[n("Button",{staticClass:"btn",attrs:{attention:!1,size:"large","show-icon":!1,disabled:e.isOffline},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toSendpins(t)}}},[e._v("\n        去互动\n      ")])],1),e._v(" "),n("a",{staticClass:"create-btn btn",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toCreate(t)}}},[n("div",[e._v("去创建")])]),e._v(" "),e.showTips&&e.isOffline?n("p",{staticClass:"tip"},[e._v("\n      机器人已下线无法互动\n      "),n("triangle",{staticClass:"triangle-bottom"})],1):e._e()])])}),[],!1,null,"4d33cb53",null).exports,k=Object(r.defineComponent)({components:{Popover:c.a,RobotCard:_},props:{robotId:String,trigger:{type:String,default:"hover"},enablePopover:{type:Boolean,default:!0}},setup:function(e){var t=Object(r.ref)(null),n=Object(r.ref)();return{fetchUserPromise:n,robotInfo:t,handleShow:function(){e.robotId&&e.enablePopover&&(n.value=Object(o.a)({botId:e.robotId}).then((function(e){t.value=e.data})))}}},computed:{},methods:{showPopover:function(e,t){this.$refs.Popover.showPopover&&this.$refs.Popover.showPopover(e,t)},hidePopover:function(e){this.$refs.Popover.hidePopover&&this.$refs.Popover.hidePopover(e)}}}),x=(n(1195),Object(C.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{ref:"Popover",staticClass:"user-popover",attrs:{promise:e.fetchUserPromise,trigger:e.trigger},on:{show:e.handleShow},scopedSlots:e._u([{key:"content",fn:function(){return[n("RobotCard",{attrs:{"robot-info":e.robotInfo}})]},proxy:!0}])},[e._v(" "),e._t("default")],2)}),[],!1,null,"78a63d78",null));t.a=x.exports},1091:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n(30),n(96),n(243);var r=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(e){throw"copy link error"}};function o(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var e=((null==content?void 0:content.trim())||"").split("\n")[0];return e.length<=30?e:e.substring(0,30)}},1093:function(e,t,n){},1094:function(e,t,n){},1095:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(19);var r=n(5),o=n(3);function c(){var e=Object(o.c)();return{openReportModal:function(t,n){if(e){var r=e.proxy.$getBean("eventBus");r.emit(r.eventType.REPORT_CONTENT,t,n)}}}}function l(e){var t=Object(o.m)({visible:!1,show:!1});function n(){return(n=Object(r.a)(regeneratorRuntime.mark((function n(r,o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.$validLogin()){n.next=2;break}return n.abrupt("return");case 2:t.show||(t.show=!0),t.visible=!0,t.itemId=r,t.idType=o;case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{reportModalData:t,showReportModal:function(e,t){return n.apply(this,arguments)}}}},1099:function(e,t,n){},1100:function(e,t,n){},1101:function(e,t,n){},1102:function(e,t,n){},1103:function(e,t,n){},1104:function(e,t,n){},1106:function(e,t,n){"use strict";n(23);var r=n(3),o=n(1143),c=n(1137),l=n(209),d=(n(79),n(1165)),f=n.n(d),h=Object(r.b)({components:{MoreImageIcon:f.a},props:{count:{type:Number,required:!0,default:1}}}),v=(n(1166),n(29)),m=Object(v.a)(h,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("MoreImageIcon",{staticClass:"icon-svg"}),this._v(" "),t("span",{staticClass:"icon-count"},[t("span",{staticClass:".plus"},[this._v("+")]),this._v(" "),t("span",[this._v(this._s(this.count))])])],1)}),[],!1,null,"6c6510ce",null).exports,y=Object(r.b)({components:{PinGallery:o.a,PinMobileGallery:c.a,MoreImageIcon:m},props:{list:{type:Array,required:!0,default:function(){return[]}},lazy:{type:Boolean,default:!0}},data:function(){return{isShowMobileGallery:!1,galleryVisible:!1}},computed:{galleryList:function(){var e=this;return this.list.map((function(t){var n=Object(l.b)(t.pic_url,e.list.length).isLong;return{url:t.pic_url,isLong:n,isLoaded:!1,isError:!1}}))}},methods:{openGallery:function(){this.$device.isMobile?this.isShowMobileGallery=!0:this.galleryVisible=!0},closeGallery:function(){this.isShowMobileGallery=!1,this.galleryVisible=!1}}}),w=(n(1167),Object(v.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list.length>=1?n("div",{staticClass:"comment-img"},[n("Lazy",{attrs:{"data-src":e.list[0].pic_url,url:e.list[0].pic_url,resize:{w:120,h:120},crop:{w:120,h:120},lazy:e.lazy},on:{click:function(t){return t.stopPropagation(),e.openGallery(t)}}}),e._v(" "),e.list.length>1?n("div",{staticClass:"img-more-icon",on:{click:function(t){return t.stopPropagation(),e.openGallery(t)}}},[e._t("moreIcon",[n("MoreImageIcon",{attrs:{count:e.list.length-1}})])],2):e._e(),e._v(" "),e.galleryVisible?n("PinGallery",{attrs:{list:e.galleryList,"current-index":0},on:{closeGallery:e.closeGallery},nativeOn:{click:function(e){e.stopPropagation()}}}):e._e(),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isShowMobileGallery?n("PinMobileGallery",{attrs:{list:e.list.map((function(e){return e.pic_url})),"current-index":0},on:{closeMobileGallery:e.closeGallery},nativeOn:{click:function(e){e.stopPropagation()}}}):e._e()],1)],1):e._e()}),[],!1,null,"204d24f0",null));t.a=w.exports},1107:function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"l",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return w})),n.d(t,"a",(function(){return C})),n.d(t,"m",(function(){return _})),n.d(t,"e",(function(){return k}));var r=n(1);function o(e,t,n){return Object(r.c)({url:"/tag_api/v1/query_category_list",method:"POST",showError:e,headers:t,jsonBody:n})}function c(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/cancel",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function l(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/save",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function d(data,e,t,n){return Object(r.c)({url:"/content_api/v1/column/articles_cursor",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function f(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/theme/list_by_hot",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function h(data,e,t,n){return Object(r.c)({url:"/recommend_api/v1/short_msg/detail_rec",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function v(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/message/set_all_read",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function m(data,e,t,n){return Object(r.c)({url:"/list_api/v1/annual/user_annual",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function y(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/query_tag_list",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function w(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/query_topic_detail",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function C(data,e,t,n){return Object(r.c)({url:"/booklet_api/v1/reading/submit_progress",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function _(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/topic/list_by_search_cursor",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function k(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/user_list",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}},1109:function(e,t,n){},1110:function(e,t,n){e.exports=n.p+"img/image-error.3338abe.png"},1111:function(e,t,n){},1112:function(e,t,n){},1113:function(e,t,n){},1114:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.99976 7.93206L10.0656 3.86619C10.1633 3.76856 10.3215 3.76856 10.4192 3.86619L10.7727 4.21975C10.8704 4.31738 10.8704 4.47567 10.7727 4.5733L6.35331 8.99272C6.15805 9.18798 5.84147 9.18798 5.6462 8.99272L1.22679 4.5733C1.12916 4.47567 1.12916 4.31738 1.22679 4.21975L1.58034 3.86619C1.67797 3.76856 1.83626 3.76856 1.93389 3.86619L5.99976 7.93206Z"}})]))}}},1115:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"}})]))}}},1116:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM7.96483 7.91404C8.52898 7.91404 8.98631 7.45671 8.98631 6.89257C8.98631 6.32842 8.52898 5.87109 7.96483 5.87109C7.40069 5.87109 6.94336 6.32842 6.94336 6.89257C6.94336 7.45671 7.40069 7.91404 7.96483 7.91404ZM12.1699 6.89257C12.1699 7.45671 11.7126 7.91404 11.1484 7.91404C10.5843 7.91404 10.127 7.45671 10.127 6.89257C10.127 6.32842 10.5843 5.87109 11.1484 5.87109C11.7126 5.87109 12.1699 6.32842 12.1699 6.89257Z"}})]))}}},1117:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},y)},w),d.concat([n("path",{attrs:{d:"M1.66675 3.66927L3.50008 3.66927M3.50008 3.66927L3.50008 13.3359C3.50008 13.52 3.64932 13.6693 3.83342 13.6693L12.1667 13.6693C12.3508 13.6693 12.5001 13.52 12.5001 13.3359V3.66927M3.50008 3.66927L5.33342 3.66927M12.5001 3.66927L14.3334 3.66927M12.5001 3.66927L10.6667 3.66927M5.33342 3.66927V2.33594L10.6667 2.33594V3.66927M5.33342 3.66927L10.6667 3.66927","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M6.66675 6.5V10.5M9.33342 6.5V10.5","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"}})]))}}},1118:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.21356 7.13688C9.49486 7.13688 10.5336 6.09818 10.5336 4.81688C10.5336 3.53557 9.49486 2.49688 8.21356 2.49688C6.93225 2.49688 5.89356 3.53557 5.89356 4.81688C5.89356 6.09818 6.93225 7.13688 8.21356 7.13688ZM8.21356 8.33688C10.1576 8.33688 11.7336 6.76092 11.7336 4.81688C11.7336 2.87283 10.1576 1.29688 8.21356 1.29688C6.26951 1.29688 4.69355 2.87283 4.69355 4.81688C4.69355 6.76092 6.26951 8.33688 8.21356 8.33688ZM5.91749 10.5125C4.30178 10.5125 2.99199 11.8223 2.99199 13.438C2.99199 13.4706 3.01845 13.4971 3.05108 13.4971H7.53515C7.86652 13.4971 8.13515 13.7657 8.13515 14.0971C8.13515 14.4285 7.86652 14.6971 7.53515 14.6971H3.05108C2.35571 14.6971 1.79199 14.1334 1.79199 13.438C1.79199 11.1595 3.63904 9.3125 5.91749 9.3125H7.53515C7.86652 9.3125 8.13515 9.58113 8.13515 9.9125C8.13515 10.2439 7.86652 10.5125 7.53515 10.5125H5.91749ZM9.78025 10.1265C10.0146 9.8922 10.3945 9.8922 10.6288 10.1265L11.908 11.4057L13.1833 10.1304C13.4176 9.89611 13.7975 9.89611 14.0318 10.1304C14.2661 10.3647 14.2661 10.7446 14.0318 10.979L12.7565 12.2542L14.0229 13.5206C14.2572 13.7549 14.2572 14.1348 14.0229 14.3692C13.7886 14.6035 13.4087 14.6035 13.1744 14.3692L11.908 13.1028L10.6377 14.3731C10.4034 14.6074 10.0235 14.6074 9.78914 14.3731C9.55483 14.1388 9.55483 13.7589 9.78914 13.5245L11.0594 12.2542L9.78025 10.975C9.54594 10.7407 9.54594 10.3608 9.78025 10.1265Z"}})]))}}},1119:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.06904 2.67359L13.856 12.6969C13.8684 12.7183 13.8687 12.7297 13.8686 12.7359C13.8684 12.7457 13.8654 12.7606 13.856 12.7769C13.8466 12.7932 13.8352 12.8032 13.8268 12.8083C13.8215 12.8115 13.8114 12.8169 13.7867 12.8169H2.21282C2.18809 12.8169 2.17799 12.8115 2.17273 12.8083C2.16432 12.8032 2.15294 12.7932 2.14354 12.7769C2.13413 12.7606 2.13109 12.7457 2.13092 12.7359C2.13081 12.7297 2.13117 12.7183 2.14354 12.6969L7.93048 2.67359C7.94284 2.65218 7.95258 2.64614 7.95795 2.64316C7.96654 2.6384 7.98095 2.63359 7.99976 2.63359C8.01858 2.63359 8.03299 2.6384 8.04157 2.64316C8.04694 2.64614 8.05668 2.65218 8.06904 2.67359ZM6.89125 2.07359C7.38392 1.22026 8.6156 1.22026 9.10828 2.07359L14.8952 12.0969C15.3879 12.9502 14.7721 14.0169 13.7867 14.0169H2.21282C1.22747 14.0169 0.611633 12.9502 1.10431 12.0969L6.89125 2.07359ZM7.99976 5.29656C8.33113 5.29656 8.59976 5.56519 8.59976 5.89656L8.59976 9.56844C8.59976 9.89981 8.33113 10.1684 7.99976 10.1684C7.66839 10.1684 7.39976 9.89981 7.39976 9.56844V5.89656C7.39976 5.56519 7.66839 5.29656 7.99976 5.29656ZM8.59976 11.2872C8.59976 11.6186 8.33113 11.8872 7.99976 11.8872C7.66839 11.8872 7.39976 11.6186 7.39976 11.2872C7.39976 10.9558 7.66839 10.6872 7.99976 10.6872C8.33113 10.6872 8.59976 10.9558 8.59976 11.2872Z"}})]))}}},1120:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"}})]))}}},1121:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64704 7.10003 2.80015 7.05661 2.93822L7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"}})]))}}},1122:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("circle",{attrs:{cx:"2.33301",cy:"8",r:"1.0625",fill:"#8A919F"}}),n("circle",{attrs:{cx:"8",cy:"8",r:"1.0625",fill:"#8A919F"}}),n("circle",{attrs:{cx:"13.667",cy:"8",r:"1.0625",fill:"#8A919F"}})]))}}},1123:function(e,t,n){},1124:function(e,t,n){},1125:function(e,t,n){},1126:function(e,t,n){},1127:function(e,t,n){},1128:function(e,t,n){},1129:function(e,t,n){},1130:function(e,t,n){},1131:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(23),n(10),n(55),n(59),n(19);var r=n(5),o=n(147),c=n(16),l=n(1),d=n(209);function f(e,t){return h.apply(this,arguments)}function h(){return(h=Object(r.a)(regeneratorRuntime.mark((function e(t,l){var f,h,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(21).then(n.t.bind(null,1271,7));case 3:return f=e.sent,h=f.default,e.next=7,v();case 7:return y=e.sent,w=function(e){return new Promise((function(n,r){try{var o=new h({userId:t,appId:c.e,imageConfig:{serviceId:"k3u1fbpfcp"}}),l=o.addFile({file:e,stsToken:y,type:"image"});o.on("complete",(function(e){n(e.uploadResult)})),o.on("error",(function(e){console.log(e.extra,"bytedUploader Error"),r(e.extra)})),o.start(l)}catch(e){r(e)}}))},e.next=11,Promise.all(l.map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return n=e.sent,r=n.ImageHeight,c=n.ImageWidth,l=n.Uri,e.next=8,m(l);case 8:return f=e.sent,e.next=11,Object(o.imageSourceExtra)(f.data.main_url).then((function(e){return d.c.transform(e,{format:"image"})})).catch((function(){return console.warn("imageSourceExtra fail"),f.data.main_url}));case 11:return h=e.sent,e.abrupt("return",{ImageHeight:r,ImageWidth:c,Uri:l,Url:h});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(0),new Error("上传图片失败");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function v(){return Object(l.d)({url:"/imagex/gen_token",query:{client:"web"}}).then((function(e){return e.data.token}))}function m(e){return Object(l.d)({url:"/imagex/get_img_url",query:{uri:e}})}},1132:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(28),o=[{name:"popular",text:"热门"},{name:"newest",text:"最新"}],c="6824710203112423437",l=r.f?"7173895829281833012":"6824710202562969614",d="@你想互动的机器人，碰撞AI火花吧～"},1133:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d}));var r=["jpg","jpeg","png","gif","webp"],o=5242880,c=9,l=1e3,d=["jpg","png","gif"]},1134:function(e,t,n){},1135:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d}));n(80),n(85),n(71),n(562),n(54),n(10),n(46),n(586),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585);var r=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}];function o(e,t){return function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(e){return n(e)},r.readAsArrayBuffer(e.slice(0,64))}))}(e).then(c).then(l.bind(null,t))}function c(e){return Array.prototype.slice.call(new Uint8Array(e)).reduce((function(e,data){return e+data.toString(16)}),"")}function l(e,header){for(var i=0;i<r.length;i++)if(r[i].regx.test(header))return-1!==e.indexOf(r[i].name);return!1}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readAsText";return new Promise((function(n,r){var o=new FileReader;o.onerror=function(e){r(e)},o.onload=function(){n(o.result)},o[t](e)}))}},1137:function(e,t,n){"use strict";n(23),n(79);var r=n(3),o=n(1163),c=n.n(o),l=Object(r.b)({components:{LoadingIcon:c.a},props:{list:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},data:function(){return{index:this.currentIndex,screenWidth:0,itemStyle:{},imgStyleList:[],startPoint:{},movePoint:{},endPoint:{},groupTranslate:"",hasTransition:!1,loadedNum:0,loading:!0}},computed:{length:function(){return this.list.length},imgList:function(){var e=this;return this.list.map((function(t){return e.$imgUrlTransform(t)}))},groupStyle:function(){var e=this.screenWidth,t=this.length*e,n=this.index*e,r="";r=""===this.groupTranslate?"translateX(-".concat(n,"px)"):0===this.index?"translateX(".concat(this.groupTranslate,"px)"):"translateX(-".concat(n-this.groupTranslate,"px)");var o=this.hasTransition?".6s cubic-bezier(0.165, 0.84, 0.44, 1)":"";return{width:"".concat(t,"px"),transform:r,transition:o}}},watch:{loadedNum:function(e){e===this.length&&(this.setPosition(),this.loading=!1,document.body.addEventListener("touchstart",this.touchStart),document.body.addEventListener("touchmove",this.touchMove),document.body.addEventListener("touchend",this.touchEnd))}},mounted:function(){this.setBodyScroll(!1),this.initSize()},beforeDestroy:function(){this.close()},methods:{setBodyScroll:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],body=document.querySelector("body");body.style.overflow=e?null:"hidden"},close:function(){this.$emit("closeMobileGallery"),this.setBodyScroll()},toggle:function(e){"next"===e&&this.index<this.length-1&&this.index++,"prev"===e&&this.index>0&&this.index--},initSize:function(){var e=document.documentElement.clientWidth;this.screenWidth=e,this.itemStyle={width:"".concat(e,"px")}},setPoint:function(e){var t=e.changedTouches[0],n=t.clientX,r=t.clientY,o={touchstart:this.startPoint,touchmove:this.movePoint,touchend:this.endPoint}[e.type];this.$set(o,"x",n),this.$set(o,"y",r)},touchStart:function(e){this.hasTransition=!1,this.setPoint(e)},touchMove:function(e){this.setPoint(e);var t=this.startPoint.x,n=this.movePoint.x-t,r=n>0?n-30:n+30;Math.abs(n)>30&&(this.groupTranslate=r)},touchEnd:function(e){this.groupTranslate="",this.setPoint(e),this.touchSlide()},touchSlide:function(){var e=this.startPoint.x,t=this.endPoint.x;this.hasTransition=!0,t-e>120&&this.toggle("prev"),t-e<-120&&this.toggle("next")},setPosition:function(){var e=this;this.$nextTick((function(){var t=document.documentElement.clientHeight,n=e.$refs.img,r=[];for(var o in n){var c=n[o].offsetHeight,style={};if(c<t){var l=(t-c)/2;style.top="".concat(l,"px")}r.push(style)}e.imgStyleList=r}))},loaded:function(){this.loadedNum++},onError:function(){this.loadedNum++}}}),d=(n(1164),n(29)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mobile-gallery"},[n("div",{staticClass:"mobile-gallery-counter"},[e._v(e._s(e.index+1)+"/"+e._s(e.length))]),e._v(" "),n("div",{staticClass:"mobile-gallery-close",on:{click:e.close}},[e._v("关闭")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mobile-gallery-loading"},[n("LoadingIcon")],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"mobile-gallery-group",style:e.groupStyle},e._l(e.imgList,(function(img,t){return n("div",{key:t,staticClass:"mobile-gallery-img",style:e.itemStyle},[n("img",{ref:"img",refInFor:!0,style:e.imgStyleList[t],attrs:{src:img},on:{load:e.loaded,error:e.onError}})])})),0)])}),[],!1,null,"1775a238",null);t.a=component.exports},1138:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(44),n(68);var r=n(57),o={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var e=sessionStorage.getItem("SEARCH_PARAMS"),t=JSON.parse(e),n=t.query,o=t.search_attached_info,l=void 0===o?"":o,d=t.rank,f=t.display_search_type;return{query:n,detail_from:r.a.searchResult,search_attached_info:l,rank:d,display_search_type:f}}catch(e){return{}}}},1139:function(e,t,n){"use strict";var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"carousel-loading"},[t("div",{staticClass:"content"},[t("div",{staticClass:"section a"},[t("img",{attrs:{src:n(1207)}})]),this._v(" "),t("div",{staticClass:"section b"},[t("img",{attrs:{src:n(1208)}})]),this._v(" "),t("div",{staticClass:"section c"},[t("img",{attrs:{src:n(1209)}})])])])}],o=(n(1210),n(29)),component=Object(o.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),r,!1,null,"5212cd74",null);t.a=component.exports},1140:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(46);function r(){return"_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36)}},1142:function(e,t,n){"use strict";function r(e,t){if((10==e.keyCode||13==e.keyCode)&&(e.ctrlKey||e.metaKey))return t()}n.d(t,"a",(function(){return r}))},1143:function(e,t,n){"use strict";n(207),n(244),n(60),n(44),n(79),n(68),n(64);var r=n(1140),o=n(120),c={components:{CarouselLoading:n(1139).a},props:{list:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},data:function(){return{activeIndex:this.currentIndex,activeId:"",galleryData:[],renderingList:[],isZoomed:!1}},computed:{prevButtonVisible:function(){return this.activeIndex>0},nextButtonVisible:function(){return this.activeIndex<this.galleryData.length-1},slideClass:function(){var e=this.activeId,t=this.renderingList.find((function(t){return t.id===e}));return t.isLoaded?{zoomable:t.isLong,zoomed:this.isZoomed}:{}},renderingListIndex:function(){var e=this.activeId;return this.renderingList.findIndex((function(t){return t.id===e}))}},watch:{activeIndex:function(e){var t=this.galleryData[e].id;this.activeId=t,this.updateRenderingList(t)}},methods:{getPriviewUrl:function(e){return this.$imgUrlTransform(e)},setBodyScroll:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],body=document.querySelector("body");body.style.overflow=e?null:"hidden"},initGallery:function(){var e;this.setBodyScroll(!1),this.galleryData=this.normalizeGalleryData(this.list);var t=null===(e=this.galleryData[this.activeIndex])||void 0===e?void 0:e.id;this.activeId=t,this.updateRenderingList(t),document.addEventListener("keydown",this.keydownHandler)},loaded:function(){var e=this.renderingListIndex;this.$set(this.renderingList[e],"isLoaded",!0)},error:function(){var e=this.renderingListIndex;this.$set(this.galleryData[e],"isError",!0)},close:function(){this.$emit("closeGallery",!1,this.activeIndex),this.setBodyScroll()},prev:Object(o.a)((function(){this.prevButtonVisible&&this.activeIndex--}),200),next:Object(o.a)((function(){this.nextButtonVisible&&this.activeIndex++}),200),zoom:function(e){e&&(this.isZoomed?this.zoomOut():this.zoomIn())},zoomIn:function(){this.isZoomed=!0},zoomOut:function(){this.isZoomed=!1},updateRenderingList:function(e){var t=this.galleryData.find((function(t){return t.id===e}));!this.renderingList.includes(t)&&this.renderingList.push(t)},normalizeGalleryData:function(e){var t=[];return e.forEach((function(e){var n=Object(r.a)(),o=Object.assign(e,{id:n});t.push(o)})),t},keydownHandler:function(e){this[{27:"close",37:"prev",39:"next"}[e.keyCode]]()}},mounted:function(){this.initGallery()},beforeDestroy:function(){this.setBodyScroll(),document.removeEventListener("keydown",this.keydownHandler)}},l=(n(1256),n(29)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gallery-wrap"},[r("div",{staticClass:"gallery-overlay"}),e._v(" "),r("div",{staticClass:"gallery-inner",class:{"control-hidden":e.isZoomed}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.prevButtonVisible,expression:"prevButtonVisible"}],staticClass:"control prev",on:{click:e.prev}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.nextButtonVisible,expression:"nextButtonVisible"}],staticClass:"control next",on:{click:e.next}}),e._v(" "),r("div",{staticClass:"control close",on:{click:e.close}},[r("svg",{staticClass:"close-icon",attrs:{viewBox:"0 0 15.4 15.4"}},[r("path",{staticClass:"close-path",attrs:{d:"M15.4 1.4L14 0 7.7 6.3 1.4 0 0 1.4l6.3 6.3L0 14l1.4 1.4 6.3-6.3 6.3 6.3 1.4-1.4-6.3-6.3z"}})])]),e._v(" "),r("div",{staticClass:"counter-bar-wrapper"},[r("div",{staticClass:"counter-bar"},[r("div",{staticClass:"counter-hinter"},[r("span",{staticClass:"current-index"},[e._v(e._s(e.activeIndex+1))]),e._v(" "),r("span",[e._v("/ "+e._s(e.list.length))])])])]),e._v(" "),r("div",{staticClass:"gallery-contents"},e._l(e.renderingList,(function(t){return r("div",{key:t.id},[r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.id===e.activeId,expression:"slide.id === activeId"}],staticClass:"slide",class:e.slideClass,on:{click:function(n){t.isLoaded&&e.zoom(t.isLong)}}},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"slide.isError"}],attrs:{src:n(1181)}}),e._v(" "),r("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"slide.isLoaded"}],staticClass:"slide-img",attrs:{src:e.getPriviewUrl(t.url)},on:{load:e.loaded,error:e.error}}),e._v(" "),r("carousel-loading",{directives:[{name:"show",rawName:"v-show",value:!t.isLoaded&&!t.isError,expression:"!slide.isLoaded && !slide.isError"}],staticClass:"loading"})],1)])],1)})),0)])])}),[],!1,null,"e5611d14",null);t.a=component.exports},1144:function(e,t,n){"use strict";n(1467);var r=n(29),component=Object(r.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"container"},[t("em",{staticClass:"triangle"})])}],!1,null,"5ae2b6bc",null);t.a=component.exports},1146:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"h",(function(){return w}));n(80),n(71),n(136),n(30),n(46),n(145),n(51),n(243);var r=n(247);function o(e){e.preventDefault(),window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{var text=window.clipboardData.getData("Text");try{window.getSelection().createRange().pasteHTML(text)}catch(e){var t=document.createTextNode(text);window.getSelection().getRangeAt(0).insertNode(t)}}catch(t){var n=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,n)}}function c(e){if(document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(document.selection){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}function l(){return"function"==typeof document.createRange||"function"==typeof window.getSelection}function d(){var e=null,t=null;return l?(t=document.getSelection()).getRangeAt&&t.rangeCount&&(e=document.getSelection().getRangeAt(0)):e=document.selection.createRange(),e}function f(html){var text=html;return text=text.replace(/<\s*script[^>]*>[\s\S]*?<\/script>/gim,"").replace(/<\s*style[^>]*>[\s\S]*?<\/style>/gim,"").replace(/<!--.*?-->/gim,"").replace(/<!DOCTYPE.*?>/gi,"").replace(/<\/div>/gi,"").replace(/(<br><div>|<div>|<br>)/gi,"\n").replace(/&nbsp;/gi,"").replace(/<.*?>/gi,"").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/g,'"')}function h(e,t){var n="",r=e.clipboardData.items;if(r){for(var i=0;i<r.length;i++)-1!=r[i].type.indexOf("image")&&(n=r[i].getAsFile());"function"==typeof t&&n&&t(n)}}function v(e){window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{return window.clipboardData.getData("Text")}catch(t){return(e.originalEvent||e).clipboardData.getData("text/plain")}}function m(e,html){var t,n,r=d();if(r&&function e(t,n){return!(!n||!t)&&(t===n||e(t,n.parentElement))}(e,r.startContainer)||c(e),e.focus(),window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents(),(e=document.createElement("div")).innerHTML=html;for(var o,l,f=document.createDocumentFragment();o=e.firstChild;)l=f.appendChild(o);n.insertNode(f),l&&((n=n.cloneRange()).setStartAfter(l),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(html)}function y(e){var t=d(),n=t.startContainer;if(3===n.nodeType){for(var text=n.nodeValue,o=t.startOffset-1,c=t.endOffset-1,f=[];o>=0;){if("["===text[o]){f[0]=o;break}o--}for(;c<=text.length-1;){if("]"===text[c]){f[1]=c;break}c++}if(void 0!==f[0]&&void 0!==f[1]){var h=text.slice(f[0],f[1]+1),v=Object(r.d)(h);if(v){var y=document.createRange();y.setStart(n,f[0]),y.setEnd(n,f[1]+1),function(e){if(e){var t=null,n=null;l?((n=document.getSelection()).removeAllRanges(),n.addRange(e)):((t=document.selection.createRange()).setEndPoint("EndToEnd",e),0===e.text.length?t.collapse(!1):t.setEndPoint("StartToStart",e),t.select())}}(y),m(e,v)}}}}function w(content){var e;if(!content)return 0;var t,n,o=content.replace(r.a,(function(){return" o "})).replace(r.b,(function(){return" o "})),c=(n=/```mermaid(?:(?![])[\s\S])*?```?/g,t=(t=o).replace(n,""),n=/\$[\s\S]+?\$\$|\$[\s\S]+?\$/g,t=t.replace(n,""),n=/[\s\S]*\x2D\x2D\x2D\ntheme:[\s\S]*?\n\x2D\x2D\x2D/g,t=t.replace(n,""),n=/[\s\S]*\x2D\x2D\x2D\nhighlight:[\s\S]*?\n\x2D\x2D\x2D/g,t=t.replace(n,""),n=/<[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+?>/g,t=t.replace(n,(function(e){return e.toLowerCase()})),n=/<link[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+?<\/link>/g,t=t.replace(n,""),n=/<style[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+?<\/style>/g,t=t.replace(n,""),n=/<script[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF]+?<\/script>/g,t=t.replace(n,""),n=/<[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\uFFFF][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+?>/g,t=t.replace(n,"\n"),n=/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]{2,}/g,t=t.replace(n,"\n"),n=/!\[.*\]\(http.*?\)/g,t=t.replace(n,""),n=new RegExp("((http|https):\\/\\/)?[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w.,@?^=%&:\\/~+#-]*[\\w@?^=%&\\/~+#-])?","gs"),t=t.replace(n,""),n=/<[^>\n\u4e00-\u9fff]*>/g,(t=t.replace(n,"")).trim()),l=new RegExp("[一-龿㐀-䶿぀-ゟ゠-ヿ]|[a-zA-Z]+|\\d","g"),d=c.match(l);return d&&(null==d?void 0:d.length)&&null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0}},1150:function(e,t,n){"use strict";var r=n(3),o=Object(r.b)({props:{user:{type:Object,default:null}},setup:function(e){var t=Object(r.c)(),n=Object(r.x)(),o=Object(r.a)((function(){return n.getters.USER||{}}));return{isVisible:Object(r.a)((function(){var t,n;return e.user?!e.user.isBindedPhone:!!(null===(t=o.value)||void 0===t?void 0:t.id)&&!(null===(n=o.value)||void 0===n?void 0:n.isBindedPhone)})),bindPhone:function(){null==t||t.proxy.$requestBindPhoneNumber()}}}}),c=(n(1153),n(29)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"auth-card"},[n("transition",{attrs:{name:"fade"}},[e.isVisible?n("div",{staticClass:"auth-cover"},[n("span",{staticClass:"hint"}),e._v("\n      您需要\n      "),n("a",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.bindPhone(t)}}},[e._v("绑定手机号")]),e._v("\n      后才可在社区内发布内容。\n    ")]):e._e()]),e._v(" "),e._t("default")],2)}),[],!1,null,"34f85b71",null);t.a=component.exports},1151:function(e,t,n){"use strict";n(10);var r=n(8),o=n(1154),c=n.n(o),l=Object(r.defineComponent)({components:{EmotionIcon:c.a,Picker:function(){return n.e(49).then(n.bind(null,4795))}},props:{label:{type:String,default:"表情"}},emits:["selectEmoji"],setup:function(e,t){var n=t.root,o=t.emit,c=Object(r.ref)(!1);var l=Object(r.ref)(!1),d=Object(r.watch)(c,(function(){l.value=!0,d()}));return{once:l,visible:c,toggleShow:function(){n.$validLoginAndBindPhone()&&(c.value=!c.value)},hide:function(){c.value=!1},handleChange:function(e){o("selectEmoji",e.source)}}}}),d=(n(1155),n(29)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:e.hide,expression:"hide"}],staticClass:"emoji-container"},[n("div",{staticClass:"emoji-box",class:e.visible&&"active",on:{click:e.toggleShow}},[n("EmotionIcon",{staticClass:"icon"}),e._v(" "),e.label?n("span",[e._v(e._s(e.label))]):e._e()],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.once?n("Picker",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],on:{change:e.handleChange}}):e._e()],1)],1)}),[],!1,null,"0c6d399b",null);t.a=component.exports},1153:function(e,t,n){"use strict";n(1093)},1154:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"}})]))}}},1155:function(e,t,n){"use strict";n(1094)},1156:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));n(19);var r=n(5),o=n(69);function c(e){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r,c,cursor,l,d,f,h,v,m,y,w,C,data,_,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=void 0===n?"":n,c=t.cursor,cursor=void 0===c?"0":c,l=t.limit,d=void 0===l?20:l,f=t.query,h=void 0===f?"":f,v=t.topicId,m=void 0===v?"":v,e.next=3,o.a.QueryBotList({user_id:r||"0",topic_id:m||"0",cursor:cursor,limit:d,query:h});case 3:return y=e.sent,w=y.count,C=void 0===w?0:w,data=y.data,_=y.cursor,k=y.has_more,e.abrupt("return",{total:C,list:Array.isArray(data)?data:[],cursor:_,hasMore:k});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.botId,e.next=3,o.a.QueryBotDetail({bot_id:n});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1157:function(e,t,n){},1158:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h}));var r="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=banner",o="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=link",c="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=more",l="https://bd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",d="https://wenjuan.feishu.cn/m/cfm?t=sxwlA0AtjAxi-l0um",f="https://juejin.cn/book/6844733795329900551/section/6844733795371843597",h="https://juejin.cn/book/6844733795329900551/section/6925688212903952399"},1162:function(e,t,n){"use strict";n(79);var r=n(3),o=n(174),c=(n(44),n(68),n(19),n(5)),l=n(4),d=n(1186),f=n(95),h=n(7),v=n(56);var m=Object(r.b)({components:{Modal:d.a},setup:function(e,t){var n=t.root,o=Object(r.x)(),d=Object(r.n)(),m=Object(r.n)(),y=function(){var e=Object(r.x)(),t=Object(r.a)((function(){var t,n,r;return null!==(r=null===(n=null===(t=null==e?void 0:e.state)||void 0===t?void 0:t.dislike)||void 0===n?void 0:n.whiteList)&&void 0!==r?r:[]}));function n(){return(n=Object(c.a)(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.uid,o=n.disType,!t.value.includes(r)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,v.b.MUpdateDislike({item_ids:[r],item_type:h.IdType.UserIdType,action:1,dis_type:o});case 6:f.Message.success({duration:2e3,closable:!1,isHtml:!0,content:'屏蔽成功，在<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>可取消屏蔽'}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.statusCode)===h.ERROR_NO.AUTHOR_DISLIKE_LIMIT?('<p class="block-failed-message">屏蔽沸点作者<span class="highlight">已达上限100</span>，</p><p class="block-failed-message">是否前往<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>清理屏蔽作者？</p>',f.Message.warning({duration:2e3,closable:!1,isHtml:!0,content:'<p class="block-failed-message">屏蔽沸点作者<span class="highlight">已达上限100</span>，</p><p class="block-failed-message">是否前往<a target="_blank" href="/user/settings/block?type=author&pin=true">「屏蔽管理」</a>清理屏蔽作者？</p>'})):f.Message.warning({duration:2e3,closable:!1,content:"屏蔽失败"});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}return{dislikeWhiteList:t,blockUser:function(e){return n.apply(this,arguments)}}}(),w=y.dislikeWhiteList,C=y.blockUser,_=Object(r.a)((function(){return o.getters[l.USER]})),k=Object(r.n)(!1),x=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$ensureAuthorized();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:if((null===(o=_.value)||void 0===o?void 0:o.user_id)&&t.user_id!==(null===(c=_.value)||void 0===c?void 0:c.user_id)){e.next=11;break}return console.error("doBlockUser error: 不支持未登录或者屏蔽自己"),e.abrupt("return");case 11:if(!w.value.includes(t.user_id)){e.next=14;break}return console.error("doBlockUser error: 屏蔽白名单用户不支持屏蔽"),e.abrupt("return");case 14:k.value=!0,m.value=t,d.value=r;case 17:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return{userInfo:m,isModalShow:k,handleModalOk:function(){k.value=!1,m.value&&d.value&&C({uid:m.value.user_id,disType:d.value})},doBlockUser:x}}}),y=n(29),w=Object(y.a)(m,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Modal",{attrs:{value:e.isModalShow,user:e.userInfo},on:{"on-close":function(t){e.isModalShow=!1},"on-ok":e.handleModalOk}})}),[],!1,null,null,null).exports,C=n(1185),_=n(1095),k=n(1084),x=(n(207),n(244),n(63),n(0)),O=n(1114),S=n.n(O),P=n(385),j=n(1138),E=n(24),T=n(39),V=(n(11),n(40),n(60),n(85),n(71),n(10),n(1259),n(64),n(62)),L=n(34),I=n(16),R=n(208),A=n(1071),D=n(1068);var M=n(1070),B=n(1115),N=n.n(B),F=n(1116),H=n.n(F),U=n(1117),z=n.n(U),$=n(1118),G=n.n($),W=n(1119),Z=n.n(W),K=n(1120),Y=n.n(K),X=n(1121),J=n.n(X),Q=n(1122),ee=n.n(Q);function te(){var e=Object(r.n)(!1),t=Object(r.n)();function n(){var n=t.value;if(n){var r=n.clientHeight;n.scrollHeight>r&&(e.value=!0)}}return Object(r.j)((function(){return n()})),{contentRef:t,needExpand:e,updateNeedExpand:n}}var ne=n(178),ie=n(1086),re=n(1090),oe=n(1076),ae=n(386),se=n(387),ce=n(314),le=n(1065),ue=n(179);function de(e,t){var n=Object(r.c)(),l=null==n?void 0:n.proxy.$getBean("eventBus"),d=Object(r.n)(0),v=Object(r.n)(!1),m=Object(r.n)(!1);Object(r.j)((function(){(null==n?void 0:n.proxy)&&l&&e&&l.onVmLife(null==n?void 0:n.proxy,D.a.changeLike,(function(t){e===t.itemId&&(d.value=d.value+t.val,v.value=t.isActive)}))}));var y=function(){var r=Object(c.a)(regeneratorRuntime.mark((function r(){var c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!m.value){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,null==n?void 0:n.proxy.$ensureAuthorized();case 5:r.next=10;break;case 7:return r.prev=7,r.t0=r.catch(2),r.abrupt("return");case 10:if(m.value=!0,c=v.value,v.value=!v.value,d=null,c){r.next=21;break}return Object(T.h)("like_action",{like_comment_mode:"this.mode"}),r.next=18,o.c.SaveDigg({item_id:e,item_type:t,client_type:h.ClientType.WEB},{showError:!1}).catch((function(){return null}));case 18:d=r.sent,r.next=24;break;case 21:return r.next=23,o.c.CancelDigg({item_id:e,item_type:t,client_type:h.ClientType.WEB},{showError:!1}).catch((function(){return null}));case 23:d=r.sent;case 24:if(m.value=!1,(null==d?void 0:d.err_no)===h.ERROR_NO.OK){r.next=29;break}return Object(ue.b)(null==d?void 0:d.err_no)||f.Message.error((null==d?void 0:d.err_msg)||"网络开小差了, 请稍后再试~"),v.value=c,r.abrupt("return");case 29:l&&fe(l,{itemId:e,val:v.value?1:-1,isActive:v.value});case 30:case"end":return r.stop()}}),r,null,[[2,7]])})));return function(){return r.apply(this,arguments)}}();return{likeCount:d,isLike:v,toggleLike:y}}function fe(e,t){null==e||e.emit(D.a.changeLike,t)}var he=n(1106);function pe(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function ve(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?pe(Object(source),!0).forEach((function(t){Object(x.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):pe(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var ge=Object(r.b)({components:{ImageBox:he.a,CommentForm:k.a,RobotPopover:re.a,Popover:f.Popover,UserPopover:oe.default,VipLevel:ae.a,CommentIcon:N.a,CommentActiveIcon:H.a,LikeIcon:Y.a,LikeActiveIcon:J.a,DeleteIcon:z.a,BlockAuthorIcon:G.a,ReportIcon:Z.a,MoreDotIcon:ee.a,Robotname:ie.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},reply:{type:Object,required:!0,default:null},teaParams:{type:Object,default:null},hideReplyBtn:{type:Boolean,default:!1}},emits:["onFirstVisible","onDeleteClick","onReportClick","onBlockUserClick","onRequestLogin","onPublishReply"],setup:function(e,t){var n=t.emit,o=Object(r.c)(),c=Object(r.a)((function(){return e.reply.user_info})),l=Object(r.a)((function(){var t;return(null===(t=e.reply.reply_user)||void 0===t?void 0:t.user_name)?e.reply.reply_user:{}})),d=Object(r.a)((function(){return e.reply.reply_info||{}})),f=Object(r.a)((function(){var t;return e.comment.comment_info.user_id===(null===(t=e.currentUser)||void 0===t?void 0:t.userId)})),v=Object(r.a)((function(){return e.reply.bot_info})),m=Object(r.a)((function(){return e.reply.bot_info&&e.reply.bot_info.bot_id})),y=Object(r.a)((function(){return e.reply.reply_bot})),w=Object(r.a)((function(){return e.reply.reply_bot&&e.reply.reply_bot.bot_id})),C=Object(r.a)((function(){var t;return c.value.user_id===(null===(t=e.currentUser)||void 0===t?void 0:t.userId)})),_=Object(r.a)((function(){return c.value.user_id===e.source.userId})),k=Object(r.a)((function(){var t,n;return!!(null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&(!!C.value||(null===(n=e.currentUser)||void 0===n?void 0:n.userId)===e.source.userId)})),x=de(d.value.reply_id,h.IdType.ReplyIdType),O=x.likeCount,S=x.isLike,P=x.toggleLike;O.value=d.value.digg_count,S.value=e.reply.user_interact.is_digg;var j=Object(r.a)((function(){return O.value?Object(ce.c)(O.value):"点赞"})),E=Object(r.n)(!1),V=Object(r.n)(!1),L=Object(r.a)((function(){var t;return!!(null===(t=e.currentUser)||void 0===t?void 0:t.isBindPhone)})),I=Object(r.a)((function(){var t;return"回复".concat((m.value?null===(t=v.value)||void 0===t?void 0:t.bot_name:e.reply.user_info.user_name)||"","...")}));return ve(ve({robotInfo:v,isBotReply:m,replyRobot:y,isReplyRobot:w,isExpand:E,likeCountText:j,isLike:S,replyAuthor:c,replyInfo:d,IdType:h.IdType,isReplyAuthor:C,isCommentAuthor:f,isSourceAuthor:_,canDelete:k,replyUser:l},te()),{},{toggleLike:function(){var t,n,r,o,c;P(),Object(M.c)(M.b.commentItemDig,{comment_position:null!==(n=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==n?n:M.a.other,item_id:d.value.reply_id,item_type:h.IdType.ReplyIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(o=null===(r=e.teaParams)||void 0===r?void 0:r.from)&&void 0!==o?o:"other"}),Object(T.h)("like_action",{like_comment_mode:(null===(c=e.teaParams)||void 0===c?void 0:c.mode)||""})},FollowType:le.b,parseUrlEmoji:se.b,imgAssets:D.b,cardVisibleChange:function(t){var r,o,c,l;t&&(n("onFirstVisible"),Object(M.c)(M.b.commentItemShow,{comment_position:null!==(o=null===(r=e.teaParams)||void 0===r?void 0:r.comment_position)&&void 0!==o?o:M.a.other,item_id:d.value.reply_id,item_type:h.IdType.ReplyIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(l=null===(c=e.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}))},toggleReplyEditorVisible:function(){var t,r,c,l,f;Object(M.c)(M.b.replyButtonClick,{comment_position:null!==(r=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==r?r:M.a.other,item_id:d.value.reply_id,item_type:h.IdType.ReplyIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(l=null===(c=e.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),(null===(f=e.currentUser)||void 0===f?void 0:f.userId)?V.value=!V.value:null==o||o.proxy.$ensureAuthorized().catch((function(){n("onRequestLogin")}))},replyEditorVisible:V,replyAuthority:L,replyPlaceholder:I,onReplyFormEmptyBlur:function(){setTimeout((function(){V.value=!1}))},onPublishSuccess:function(e){V.value=!1,n("onPublishReply",e)}})}}),me=(n(1196),Object(y.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:e.cardVisibleChange,expression:"cardVisibleChange",modifiers:{once:!0}}],staticClass:"reply-card",class:e.size,attrs:{"data-jj-helper-comment-type":"reply","data-jj-helper-comment-id":e.replyInfo.reply_id,"data-jj-helper-comment-status":e.replyInfo.reply_status,"data-jj-helper-item-id":e.source.itemId,"data-jj-helper-item-type":e.source.itemType}},[n("div",{staticClass:"reply-avatar"},[e.isBotReply?n("RobotPopover",{attrs:{"robot-id":e.robotInfo.bot_id}},[n("AppLink",{attrs:{to:e.$userRoute(""+e.robotInfo.user_id,"robots"),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{size:50,url:e.robotInfo.bot_avatar,alt:e.robotInfo.bot_name+"的头像"}})],1)],1):n("UserPopover",{attrs:{"user-id":e.replyAuthor.user_id,"enable-popover":!e.replyAuthor.is_logout,"show-jscore-level":!0,"tea-follow-type":e.FollowType.commentUserPopover}},[n("AppLink",{attrs:{to:e.$userRoute(e.replyAuthor.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{size:50,url:e.replyAuthor.avatar_large,alt:e.replyAuthor.user_name+"的头像"}},[n("VipLevel",{staticClass:"avatar-tag",attrs:{user:e.replyAuthor}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"reply-wrapper"},[n("div",{staticClass:"reply-content"},[n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.visible.once",value:e.updateNeedExpand,expression:"updateNeedExpand",modifiers:{visible:!0,once:!0}}],ref:"contentRef",staticClass:"content",class:{expand:e.isExpand}},[n("div",{staticClass:"user-info"},[e.isBotReply?n("RobotPopover",{attrs:{"robot-id":e.robotInfo.bot_id}},[n("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:e.robotInfo,universal:!1,tab:"robots"}})],1):n("UserPopover",{attrs:{"user-id":e.replyAuthor.user_id,"enable-popover":!e.replyAuthor.is_logout,"show-jscore-level":!0,"tea-follow-type":e.FollowType.commentUserPopover}},[n("Username",{staticClass:"username",attrs:{"max-width":"120px",user:e.replyAuthor,universal:!1,"show-jpower-level":!1,"show-vip-level":!1,"show-jscore-level":!1}})],1),e._v(" "),e.replyAuthor.user_id===e.source.userId?n("div",{staticClass:"author-tag"},[e._v("\n            作者\n          ")]):e._e(),e._v(" "),e.replyUser.user_id?[n("span",[e._v("回复")]),e._v(" "),e.isReplyRobot?n("RobotPopover",{attrs:{"robot-id":e.replyRobot.bot_id}},[n("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:e.replyRobot,universal:!1,tab:"robots"}})],1):n("UserPopover",{attrs:{"user-id":e.replyUser.user_id,"enable-popover":!e.replyUser.is_logout,"show-jscore-level":!0,"tea-follow-type":e.FollowType.commentUserPopover}},[n("Username",{staticClass:"username",attrs:{"max-width":"120px",user:e.replyUser,universal:!1,"show-jpower-level":!1,"show-vip-level":!1,"show-jscore-level":!1}})],1),e._v(" "),e.replyUser.user_id===e.source.userId?n("div",{staticClass:"author-tag"},[e._v("\n              作者\n            ")]):e._e()]:e._e(),e._v(" "),n("span",[e._v(":")])],2),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.parseUrlEmoji(e.replyInfo.reply_content))}})]),e._v(" "),e.needExpand?n("div",{staticClass:"expand-action-wrap"},[e.isExpand?n("span",{staticClass:"expand-action",on:{click:function(t){e.isExpand=!1}}},[e._v("\n          收起\n        ")]):n("span",{staticClass:"expand-action",on:{click:function(t){e.isExpand=!0}}},[e._v("\n          展开\n        ")])]):e._e(),e._v(" "),n("div",{staticClass:"reply-img-box"},[n("ImageBox",{attrs:{list:e.replyInfo.reply_pics}})],1)]),e._v(" "),n("div",{staticClass:"reply-action"},[n("time",{staticClass:"action-time",attrs:{dateTime:e._f("iso")(1e3*e.replyInfo.ctime),title:new Date(1e3*e.replyInfo.ctime)}},[e._v("\n        "+e._s(e._f("relative")(1e3*e.replyInfo.ctime))+"\n      ")]),e._v(" "),n("div",{staticClass:"action-digg",class:e.isLike&&"active",on:{click:e.toggleLike}},[e.isLike?n("LikeActiveIcon",{staticClass:"icon"}):n("LikeIcon",{staticClass:"icon"}),e._v("\n        "+e._s(e.likeCountText)+"\n      ")],1),e._v(" "),e.hideReplyBtn?e._e():n("div",{staticClass:"action-reply",class:e.replyEditorVisible&&"active",on:{click:function(t){return t.stopPropagation(),e.toggleReplyEditorVisible(t)}}},[e.replyEditorVisible?n("CommentActiveIcon",{staticClass:"icon"}):n("CommentIcon",{staticClass:"icon"}),e._v("\n        "+e._s(e.replyEditorVisible?"取消回复":"回复")+"\n      ")],1),e._v(" "),n("div",{staticStyle:{flex:"1"},attrs:{"data-jj-comment-action":e.replyInfo.reply_id}}),e._v(" "),n("div",{staticClass:"more-action"},[n("Popover",{staticClass:"more-popover",attrs:{"append-to-body":!1,"visible-arrow":!1,trigger:"hover",placement:"bottom-end"},scopedSlots:e._u([{key:"content",fn:function(){return[n("ul",{staticClass:"more-menu"},[e.canDelete?n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onDeleteClick",{itemId:e.replyInfo.reply_id,itemType:e.IdType.ReplyIdType})}}},[n("DeleteIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("删除")])],1):e._e(),e._v(" "),e.isReplyAuthor?e._e():n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onBlockUserClick",{userInfo:e.replyAuthor,from:e.IdType.ReplyIdType})}}},[n("BlockAuthorIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("\n                  屏蔽作者："+e._s(e.replyAuthor.user_name)+"\n                ")])],1),e._v(" "),e.isReplyAuthor?e._e():n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onReportClick",{itemId:e.replyInfo.reply_id,itemType:e.IdType.CommentIdType})}}},[n("ReportIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("举报")])],1)])]},proxy:!0}])},[n("div",{staticClass:"more-btn"},[n("MoreDotIcon")],1)])],1)]),e._v(" "),n("keep-alive",[e.replyEditorVisible?n("div",{staticClass:"reply-editor"},[n("CommentForm",{staticClass:"reply-editor",attrs:{size:e.size,"current-user":e.currentUser,"avatar-visible":!1,source:e.source,comment:e.comment,reply:e.reply,"auto-focus":e.replyAuthority,placeholder:e.replyPlaceholder,"tea-params":e.teaParams,"submit-title":"回复"},on:{onEmptyBlur:e.onReplyFormEmptyBlur,onPublishSuccess:e.onPublishSuccess}})],1):e._e()])],1)])}),[],!1,null,"624473bc",null).exports),ye=Object(r.b)({components:{Reply:me,MoreIcon:S.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},teaParams:{type:Object,default:null},previewReply:{type:Boolean,default:!0},hideReplyBtn:{type:Boolean,default:!1}},emits:["onReportClick","onBlockUserClick","onPublishReply"],setup:function(e){var t=function(e){var t=e.sourceId,n=e.sourceType,l=e.comment,d=e.pageSize,v=void 0===d?10:d,m=e.ifPreviewReply,y=void 0===m||m,w=Object(r.c)(),C=Object(r.n)(""),_=null==w?void 0:w.proxy.$getBean("eventBus"),k=Object(r.n)("0"),x=Object(r.n)([]),O=Object(r.n)(!1),S=Object(r.n)(!0),P=Object(r.n)(!1),j=Object(r.a)((function(){return x.value.reduce((function(e,t){return e[t.reply_info.reply_id]=t,e}),{})})),E=Object(A.a)(l.comment_id),T=E.commentCount,M=E.setCommentCount,B=E.emitChangeCommentCount;M(l.comment_info.reply_count),y?(x.value=l.reply_infos||[],x.value.length>=T.value&&(S.value=!1)):x.value.length>=T.value&&(S.value=!1);var N=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var r,c,d,h,m,data,cursor,y,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.value&&S.value){e.next=2;break}return e.abrupt("return");case 2:return O.value=!0,P.value=!1,e.next=6,Object(R.a)(o.c.QueryCommentReplies({comment_id:l.comment_id,item_id:t,item_type:n,cursor:k.value,limit:v,client_type:I.e},{showError:!1}));case 6:if(r=e.sent,c=Object(L.a)(r,2),d=c[0],h=c[1],O.value=!1,!d&&(null==h?void 0:h.err_no)===o.b.ERROR_NO.OK){e.next=16;break}return P.value=!0,f.Message.error((null==h?void 0:h.err_msg)||"拉取回复失败, 请稍后重试"),console.error(d||h),e.abrupt("return");case 16:m=h.data,data=void 0===m?[]:m,cursor=h.cursor,y=h.count,w=h.has_more,M(y),C.value=k.value,k.value=cursor,S.value=w,x.value=x.value.concat(data.filter((function(e){return!j.value[e.reply_info.reply_id]})));case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F={},H=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.value[n]&&!F[n]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,null==w?void 0:w.proxy.$ensureAuthorized();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return");case 10:if(window.confirm("确定删除这条回复吗？")){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,o.c.DeleteCommentReply({comment_id:l.comment_id,reply_id:n},{showError:!1}).catch((function(){return null}));case 15:if(r=e.sent,F[n]=!1,(null==r?void 0:r.err_no)===h.ERROR_NO.OK){e.next=20;break}return f.Message.error((null==r?void 0:r.err_msg)||"网络开小差了, 请稍后再试"),e.abrupt("return");case 20:f.Message.success("删除成功"),M(T.value-1),B(t,-1),null==_||_.emit(D.a.deleteReply,{sourceId:t,commentId:l.comment_id,replyId:n});case 24:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){x.value=[e].concat(Object(V.a)(x.value))};return Object(r.j)((function(){(null==w?void 0:w.proxy)&&_&&t&&(_.onVmLife(null==w?void 0:w.proxy,D.a.publishReply,(function(e){l.comment_id===e.itemId&&U(e.val)})),_.onVmLife(null==w?void 0:w.proxy,D.a.deleteReply,(function(e){l.comment_id===e.commentId&&(x.value=x.value.filter((function(t){return t.reply_info.reply_id!==e.replyId})))})))})),{loading:O,fetchError:P,currentCursor:C,nextCursor:k,replyList:x,hasMore:S,replyCount:T,resetList:function(){C.value="",k.value="0",x.value=[],O.value=!1,S.value=!0,P.value=!1},fetchData:N,deleteReply:H,publishReply:U}}({sourceId:e.source.itemId,sourceType:e.source.itemType,comment:e.comment,pageSize:30,ifPreviewReply:e.previewReply}),n=t.currentCursor,l=t.nextCursor,d=t.replyList,v=t.fetchData,m=t.deleteReply,y=t.hasMore;return{currentCursor:n,nextCursor:l,replyList:d,fetchData:function(){var t,n;Object(M.c)(M.b.moreReplyClick,{comment_position:null!==(n=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==n?n:M.a.other,item_id:e.comment.comment_id,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0}),v()},deleteReply:m,replyCount:t.replyCount,loading:t.loading,hasMore:y,fetchError:t.fetchError}}}),be=(n(1197),Object(y.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.replyList.length?n("div",{staticClass:"reply-list",class:e.size},[e._l(e.replyList,(function(t){return n("Reply",{key:t.reply_info.reply_id,staticClass:"reply-item",attrs:{"data-cid":t.reply_info.reply_id,size:e.size,"current-user":e.currentUser,source:e.source,comment:e.comment,reply:t,"tea-params":e.teaParams,"hide-reply-btn":e.hideReplyBtn},on:{onReportClick:function(t){return e.$emit("onReportClick",t)},onBlockUserClick:function(t){return e.$emit("onBlockUserClick",t)},onDeleteClick:function(n){return e.deleteReply(t.reply_info.reply_id)},onPublishReply:function(t){return e.$emit("onPublishReply",t)}}})})),e._v(" "),e.hasMore?n("div",{staticClass:"top-has-more",class:e.size,on:{click:e.fetchData}},[e.fetchError?n("span",[e._v("加载出错, 请点击重试")]):e.loading?n("span",[e._v("加载中...")]):e.currentCursor?n("span",[e._v("\n      加载更多回复\n      "),n("MoreIcon")],1):n("span",[e._v("\n      查看全部 "+e._s(e.replyCount)+" 条回复\n      "),n("MoreIcon")],1)]):e._e()],2):e.hasMore&&e.replyCount>0?n("div",{staticClass:"top-has-more",on:{click:e.fetchData}},[e.fetchError?n("span",[e._v("加载出错, 请点击重试")]):e.loading?n("span",[e._v("加载中...")]):n("span",[e._v("\n    查看全部 "+e._s(e.replyCount)+" 条回复\n    "),n("MoreIcon")],1)]):e._e()}),[],!1,null,"48aabfe4",null).exports);function we(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Ce(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?we(Object(source),!0).forEach((function(t){Object(x.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):we(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _e=Object(r.b)({components:{Popover:f.Popover,UserPopover:oe.default,VipLevel:ae.a,Lazy:ne.a,CommentForm:k.a,ReplyList:be,CommentIcon:N.a,CommentActiveIcon:H.a,LikeIcon:Y.a,ImageBox:he.a,LikeActiveIcon:J.a,DeleteIcon:z.a,BlockAuthorIcon:G.a,ReportIcon:Z.a,MoreDotIcon:ee.a,Robotname:ie.a,RobotPopover:re.a},props:{size:{type:String,default:"default"},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},comment:{type:Object,required:!0,default:null},previewReply:{type:Boolean,default:!0},teaParams:{type:Object,default:null},hideReplyBtn:{type:Boolean,default:!1}},emits:["onFirstVisible","onDeleteClick","onReportClick","onBlockUserClick","onRequestLogin","onPublishComment"],setup:function(e,t){var n=t.emit,o=Object(r.c)(),c=Object(r.a)((function(){return e.comment.user_info||{}})),l=Object(r.a)((function(){return e.comment.bot_info})),d=Object(r.a)((function(){return e.comment.bot_info&&e.comment.bot_info.bot_id})),f=Object(r.a)((function(){return e.comment.comment_info||{}})),v=Object(r.a)((function(){return c.value.is_logout})),m=Object(r.a)((function(){var t;return(null===(t=e.currentUser)||void 0===t?void 0:t.userId)===c.value.user_id})),y=Object(r.a)((function(){return c.value.user_id===e.source.userId})),w=Object(r.a)((function(){var t,n;return!!(null===(t=e.currentUser)||void 0===t?void 0:t.userId)&&(!!m.value||(null===(n=e.currentUser)||void 0===n?void 0:n.userId)===e.source.userId)})),C=Object(A.a)(e.comment.comment_id).commentCount;C.value=f.value.reply_count||0;var _=de(e.comment.comment_id,h.IdType.CommentIdType),k=_.likeCount,x=_.isLike,O=_.toggleLike;k.value=f.value.digg_count||0,x.value=!!f.value.is_digg;var S=Object(r.a)((function(){return C.value?Object(ce.c)(C.value):"评论"})),P=Object(r.a)((function(){return k.value?Object(ce.c)(k.value):"点赞"})),j=Object(r.n)(!1),E=Object(r.n)(!1),V=Object(r.a)((function(){var t;return!!(null===(t=e.currentUser)||void 0===t?void 0:t.isBindPhone)})),L=Object(r.a)((function(){var t;return"回复".concat(d.value?null===(t=l.value)||void 0===t?void 0:t.bot_name:e.comment.user_info.user_name,"...")}));return Ce(Ce({},te()),{},{isExpand:j,isBotComment:d,commentRobot:l,likeCountText:P,commentCountText:S,isLike:x,commentAuthor:c,commentInfo:f,IdType:h.IdType,isCommentAuthor:m,isSourceAuthor:y,canDelete:w,commentAuthorLogout:v,toggleLike:function(){var t,n,r,o,c;O(),Object(M.c)(M.b.commentItemDig,{comment_position:null!==(n=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==n?n:M.a.other,item_id:f.value.comment_id,item_type:h.IdType.CommentIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(o=null===(r=e.teaParams)||void 0===r?void 0:r.from)&&void 0!==o?o:"other"}),Object(T.h)("like_action",{like_comment_mode:(null===(c=e.teaParams)||void 0===c?void 0:c.mode)||""})},FollowType:le.b,parseUrlEmoji:se.b,imgAssets:D.b,cardVisibleChange:function(t){var r,o,c,l;t&&(Object(M.c)(M.b.commentItemShow,{comment_position:null!==(o=null===(r=e.teaParams)||void 0===r?void 0:r.comment_position)&&void 0!==o?o:M.a.other,item_id:f.value.comment_id,item_type:h.IdType.CommentIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(l=null===(c=e.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),n("onFirstVisible"))},toggleReplyEditorVisible:function(){var t,r,c,l,d;Object(M.c)(M.b.replyButtonClick,{comment_position:null!==(r=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==r?r:M.a.other,item_id:f.value.comment_id,item_type:h.IdType.CommentIdType,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment:e.comment.is_hot?1:0,from:null!==(l=null===(c=e.teaParams)||void 0===c?void 0:c.from)&&void 0!==l?l:"other"}),(null===(d=e.currentUser)||void 0===d?void 0:d.userId)?E.value=!E.value:null==o||o.proxy.$ensureAuthorized().catch((function(){n("onRequestLogin")}))},replyEditorVisible:E,replyAuthority:V,replyPlaceholder:L,onReplyFormEmptyBlur:function(){setTimeout((function(){E.value=!1}),100)},onPublishSuccess:function(e){E.value=!1,n("onPublishComment",e)},onPublishReply:function(e){n("onPublishReply",e)}})}}),ke=(n(1198),Object(y.a)(_e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-card",class:e.size,attrs:{"data-jj-helper-comment-type":"comment","data-jj-helper-comment-id":e.comment.comment_id,"data-jj-helper-comment-status":e.commentInfo.comment_status,"data-jj-helper-item-id":e.source.itemId,"data-jj-helper-item-type":e.source.itemType}},[n("div",{staticClass:"comment-avatar"},[e.isBotComment?n("RobotPopover",{attrs:{"robot-id":e.commentRobot.bot_id}},[n("AppLink",{attrs:{to:e.$userRoute(""+e.commentRobot.user_id,"robots"),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{size:50,url:e.commentRobot.bot_avatar,alt:e.commentRobot.bot_name+"的头像"}})],1)],1):n("UserPopover",{attrs:{"user-id":e.commentAuthor.user_id,"enable-popover":!e.commentAuthorLogout,"show-jscore-level":!0,"tea-follow-type":e.FollowType.commentUserPopover}},[n("AppLink",{attrs:{to:e.$userRoute(e.commentAuthor.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{size:50,url:e.commentAuthor.avatar_large,alt:e.commentAuthor.user_name+"的头像"}},[n("VipLevel",{staticClass:"avatar-tag",attrs:{user:e.commentAuthor}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"comment-wrapper"},[n("div",{staticClass:"comment-header"},[e.isBotComment?n("RobotPopover",{staticStyle:{"flex-shrink":"0","flex-grow":"0"},attrs:{"robot-id":e.commentRobot.bot_id}},[n("Robotname",{staticClass:"username",attrs:{"max-width":"300px",robot:e.commentRobot,universal:!1,tab:"robots"}})],1):n("UserPopover",{attrs:{"user-id":e.commentAuthor.user_id,"enable-popover":!e.commentAuthorLogout,"show-jscore-level":!0,"tea-follow-type":e.FollowType.commentUserPopover}},[n("Username",{staticClass:"username",attrs:{"max-width":"300px",user:e.commentAuthor,universal:!1,"show-jpower-level":!0,"show-vip-level":!1,"show-jscore-level":!1}})],1),e._v(" "),e.isSourceAuthor&&!e.isBotComment?n("div",{staticClass:"author-tag"},[e._v("\n        作者\n      ")]):e._e(),e._v(" "),n("div",{staticClass:"author-intro"},[e._v("\n        "+e._s(e.isBotComment?e.commentRobot.bot_description:e.$formatUserIntro(e.commentAuthor))+"\n      ")]),e._v(" "),n("div",{staticStyle:{flex:"1"}}),e._v(" "),e.comment.is_hot?n("div",{staticStyle:{display:"flex","flex-shrink":"0","flex-grow":"0"}},[n("Lazy",{staticClass:"hot-icon",attrs:{url:e.imgAssets.hotTag}})],1):e._e()],1),e._v(" "),n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:e.cardVisibleChange,expression:"cardVisibleChange",modifiers:{once:!0}}],staticClass:"comment-content"},[n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.visible.once",value:e.updateNeedExpand,expression:"updateNeedExpand",modifiers:{visible:!0,once:!0}}],ref:"contentRef",staticClass:"content",class:{expand:e.isExpand},domProps:{innerHTML:e._s(e.parseUrlEmoji(e.commentInfo.comment_content))}}),e._v(" "),e.needExpand?n("div",{staticClass:"expand-action-wrap"},[e.isExpand?n("span",{staticClass:"expand-action",on:{click:function(t){e.isExpand=!1}}},[e._v("\n          收起\n        ")]):n("span",{staticClass:"expand-action",on:{click:function(t){e.isExpand=!0}}},[e._v("\n          展开\n        ")])]):e._e(),e._v(" "),e.commentInfo.comment_pics&&e.commentInfo.comment_pics.length?n("div",{staticClass:"comment-img-box"},[n("ImageBox",{attrs:{list:e.commentInfo.comment_pics}})],1):e._e()]),e._v(" "),n("div",{staticClass:"comment-action",attrs:{"jj-comment-anchor-bottom":"true"}},[n("time",{staticClass:"action-time",attrs:{dateTime:e._f("iso")(1e3*e.commentInfo.ctime),title:new Date(1e3*e.commentInfo.ctime)}},[e._v("\n        "+e._s(e._f("relative")(1e3*e.commentInfo.ctime))+"\n      ")]),e._v(" "),n("div",{staticClass:"action-digg",class:e.isLike&&"active",on:{click:function(t){return t.stopPropagation(),e.toggleLike(t)}}},[e.isLike?n("LikeActiveIcon",{staticClass:"icon"}):n("LikeIcon",{staticClass:"icon"}),e._v("\n        "+e._s(e.likeCountText)+"\n      ")],1),e._v(" "),e.hideReplyBtn?e._e():n("div",{staticClass:"action-reply",class:e.replyEditorVisible&&"active",on:{click:function(t){return t.stopPropagation(),e.toggleReplyEditorVisible(t)}}},[e.replyEditorVisible?n("CommentActiveIcon",{staticClass:"icon"}):n("CommentIcon",{staticClass:"icon"}),e._v("\n        "+e._s(e.replyEditorVisible?"取消回复":e.commentCountText)+"\n      ")],1),e._v(" "),n("div",{staticStyle:{flex:"1"},attrs:{"data-jj-comment-action":e.comment.comment_id}}),e._v(" "),n("div",{staticClass:"more-action"},[n("Popover",{staticClass:"more-popover",attrs:{"append-to-body":!1,"visible-arrow":!1,trigger:"hover",placement:"bottom-end"},scopedSlots:e._u([{key:"content",fn:function(){return[n("ul",{staticClass:"more-menu"},[e.canDelete&&!e.isBotComment?n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onDeleteClick",{itemId:e.commentInfo.comment_id,itemType:e.IdType.CommentIdType})}}},[n("DeleteIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("删除")])],1):e._e(),e._v(" "),e.isCommentAuthor||e.isBotComment?e._e():n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onBlockUserClick",{userInfo:e.commentAuthor,from:e.IdType.CommentIdType})}}},[n("BlockAuthorIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("\n                  屏蔽作者："+e._s(e.commentAuthor.user_name)+"\n                ")])],1),e._v(" "),e.isCommentAuthor?e._e():n("li",{on:{click:function(t){return t.stopPropagation(),e.$emit("onReportClick",{itemId:e.commentInfo.comment_id,itemType:e.IdType.CommentIdType})}}},[n("ReportIcon",{staticClass:"menu-icon"}),e._v(" "),n("div",{staticClass:"menu-label"},[e._v("举报")])],1)])]},proxy:!0}])},[n("div",{staticClass:"more-btn"},[n("MoreDotIcon")],1)])],1)]),e._v(" "),n("keep-alive",[e.replyEditorVisible?n("div",{staticClass:"comment-reply-editor"},[n("CommentForm",{staticClass:"comment-form",attrs:{size:e.size,"current-user":e.currentUser,source:e.source,comment:e.comment,"avatar-visible":!1,"auto-focus":e.replyAuthority,placeholder:e.replyPlaceholder,"tea-params":e.teaParams,"submit-title":"回复"},on:{onEmptyBlur:e.onReplyFormEmptyBlur,onPublishSuccess:e.onPublishSuccess}})],1):e._e()]),e._v(" "),n("div",{staticClass:"comment-reply-wrapper"},[n("ReplyList",{attrs:{size:e.size,"current-user":e.currentUser,source:e.source,comment:e.comment,"tea-params":e.teaParams,"preview-reply":e.previewReply,"hide-reply-btn":e.hideReplyBtn},on:{onReportClick:function(t){return e.$emit("onReportClick",t)},onBlockUserClick:function(t){return e.$emit("onBlockUserClick",t)},onPublishReply:e.onPublishReply}})],1)],1)])}),[],!1,null,"01ae2ffd",null).exports);function xe(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Oe(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?xe(Object(source),!0).forEach((function(t){Object(x.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):xe(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var Se=Object(r.b)({components:{Comment:ke,MoreIcon:S.a,CommonEmpty:P.b},props:{startLoadMore:{type:Boolean,default:!0},size:{type:String,default:"default"},count:{type:Number,default:0},teaParams:{type:Object,default:null},currentUser:{type:Object,default:null},source:{type:Object,required:!0,default:null},hasSort:{type:Boolean,default:!1},defaultSort:{type:Number,default:o.a.TimeDesc},firstPageSize:{type:Number,default:3},loadMorePageSize:{type:Number,default:20},commentDisplayMax:{type:Number,default:0},previewReply:{type:Boolean,default:!0},anchorComment:{type:Object,default:null},filterStarComments:{type:Boolean,default:!1},hideReplyBtn:{type:Boolean,default:!1},showEmptyPlaceholder:{type:Boolean,default:!0}},emits:["refetch","onReplyPublish","onDeleteClick","onReportClick","onBlockUserClick","onSortChange","onCommentLimit"],setup:function(e,t){var n=t.emit,l=Object(r.n)(!1),d=Object(r.c)(),v=function(e){var t=e.sourceId,n=e.sourceType,l=e.sort,d=e.commentCount,v=void 0===d?0:d,m=e.firstPageSize,y=void 0===m?10:m,w=e.loadMorePageSize,C=void 0===w?20:w,_=e.anchor,k=e.filterStarComments,x=void 0!==k&&k,O=e.commentDisplayMax,S=Object(r.c)(),P=null==S?void 0:S.proxy.$getBean("eventBus"),j=Object(r.n)(l),E=Object(r.n)(""),T=Object(r.n)("0"),M=Object(r.n)([]),B=Object(r.n)(!1),N=Object(r.n)(!0),F=Object(r.n)(!1),H=Object(r.n)(""),U=Object(r.a)((function(){return M.value.reduce((function(e,t){return e[t.comment_id]=t,e}),{})})),z=Object(A.a)(t),$=z.commentCount,G=z.setCommentCount;$.value=v;var W=function(){E.value="",T.value="0",M.value=[],B.value=!1,N.value=!0,F.value=!1},Z=[];function K(){return new Promise((function(e){B.value?Z.push(e):(W(),e())}))}Object(r.y)(B,(function(){!B.value&&Z.length>0&&(Z.forEach((function(e){return e()})),Z=[],W())}));var Y=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var r,c,l,d,v,m,data,cursor,w,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.value&&N.value){e.next=2;break}return e.abrupt("return");case 2:return B.value=!0,F.value=!1,e.next=6,Object(R.a)(o.c.QueryItemComments({item_id:t,item_type:n,cursor:T.value,limit:"0"===T.value?y:C,sort:j.value,client_type:I.e},{showError:!1}));case 6:if(r=e.sent,c=Object(L.a)(r,2),l=c[0],d=c[1],!_||"0"!==T.value||H.value){e.next=15;break}return e.next=13,o.c.GetCommentDetail({item_id:_.itemId,item_type:_.itemType},{showError:!1}).catch((function(e){return console.warn("err get anchor comment detail, err:",e)}));case 13:(null==(v=e.sent)?void 0:v.err_no)!==o.b.ERROR_NO.OK?console.error("GetCommentDetail error",v):(H.value=_.itemId,M.value=[v.data]);case 15:if(B.value=!1,!l&&(null==d?void 0:d.err_no)===o.b.ERROR_NO.OK){e.next=21;break}return F.value=!0,f.Message.error((null==d?void 0:d.err_msg)||"拉取评论失败, 请稍后重试"),console.error(l||d),e.abrupt("return");case 21:m=d.data,data=void 0===m?[]:m,cursor=d.cursor,w=d.count,k=d.has_more,G(w),E.value=T.value,T.value=cursor,N.value=k,M.value=M.value.concat(data.filter((function(e){return!U.value[e.comment_id]&&(!x||e.comment_info.comment_status===h.CommentStatus.Star)}))),O&&(M.value=M.value.slice(0,O));case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X={},J=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=U.value[n],U.value[n]&&!X[n]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,null==S?void 0:S.proxy.$ensureAuthorized();case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return");case 11:if(window.confirm("确定删除这条评论吗？")){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,o.c.DeleteComment({comment_id:n},{showError:!1}).catch((function(){return null}));case 16:if(c=e.sent,X[n]=!1,(null==c?void 0:c.err_no)===h.ERROR_NO.OK){e.next=21;break}return f.Message.error((null==c?void 0:c.err_msg)||"网络开小差了, 请稍后再试"),e.abrupt("return");case 21:f.Message.success("删除成功"),G($.value+(-1-1*r.comment_info.reply_count)),null==P||P.emit(D.a.deleteComment,{sourceId:t,commentId:n});case 24:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){M.value=[e].concat(Object(V.a)(M.value))};return Object(r.j)((function(){(null==S?void 0:S.proxy)&&P&&t&&(P.onVmLife(null==S?void 0:S.proxy,D.a.publishComment,(function(e){t===e.itemId&&Q(e.val)})),P.onVmLife(null==S?void 0:S.proxy,D.a.deleteComment,(function(e){t===e.sourceId&&(M.value=M.value.filter((function(t){return t.comment_id!==e.commentId})))})))})),{anchorShow:H,loading:B,fetchError:F,currentCursor:E,nextCursor:T,commentList:M,hasMore:N,commentCount:$,sort:j,setSort:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j.value=e,t.next=3,K();case 3:return t.next=5,Y();case 5:case"end":return t.stop()}}),t)})))()},resetList:K,fetchData:Y,deleteComment:J,publishComment:Q}}({sourceId:e.source.itemId,sourceType:e.source.itemType,sort:e.defaultSort,commentCount:e.count,firstPageSize:e.firstPageSize,loadMorePageSize:e.loadMorePageSize,anchor:e.anchorComment,filterStarComments:e.filterStarComments,commentDisplayMax:e.commentDisplayMax}),m=v.sort,y=v.loading,w=v.fetchError,C=v.hasMore,_=v.commentCount,k=v.commentList,O=v.currentCursor,S=v.nextCursor,P=v.anchorShow,B=v.setSort,N=v.fetchData,F=v.publishComment,H=v.deleteComment;Object(r.y)((function(){return e.defaultSort}),(function(){B(e.defaultSort)})),Object(r.y)(P,(function(e){e&&Object(r.g)((function(){var t,n,r,o=null==d?void 0:d.proxy.$el.querySelector('[data-cid="'.concat(e,'"]'));if(o){if(o.classList.add("anchor-active"),((null===(n=null===(t=k.value.find((function(t){return String(t.comment_id)===e})))||void 0===t?void 0:t.reply_infos)||void 0===n?void 0:n.length)||0)>0){var c=o.getBoundingClientRect().bottom,l=((null===(r=o.querySelector("[jj-comment-anchor-bottom=true]"))||void 0===r?void 0:r.getBoundingClientRect())||{}).bottom,f=c-(void 0===l?c:l)-4;o.style.setProperty("--juejin-anchor-bottom","".concat(f,"px"))}else o.style.setProperty("--juejin-anchor-bottom","0");setTimeout((function(){o.classList.remove("anchor-active")}),3e3)}}))}));var U=Object(r.n)(e.startLoadMore);Object(r.j)((function(){return N()}));var z=Object(r.a)((function(){return Oe(Oe({},e.teaParams),{},{mode:m.value===o.a.HotDesc?"hot":"new"})})),$=!0;return Object(r.y)(l,(function(){var t;$&&0!==(k.value||[]).length&&($=!1,Object(M.c)(M.b.commentShow,{comment_position:null!==(t=z.value.comment_position)&&void 0!==t?t:M.a.other,par_item_id:e.source.itemId,mode:z.value.mode||(m.value===o.a.HotDesc?"hot":"new"),hot_comment_status:k.value.findIndex((function(e){return e.is_hot}))>=0?1:0}))})),Object(r.y)(k,(function(){var t;$&&l.value&&0!==(k.value||[]).length&&($=!1,Object(M.c)(M.b.commentShow,{comment_position:null!==(t=z.value.comment_position)&&void 0!==t?t:M.a.other,par_item_id:e.source.itemId,mode:z.value.mode||(m.value===o.a.HotDesc?"hot":"new"),hot_comment_status:k.value.findIndex((function(e){return e.is_hot}))>=0?1:0}))})),{visible:l,newTeaParams:z,enableLoadMore:U,deleteComment:H,commentCount:_,loading:y,fetchError:w,hasMore:C,commentList:k,currentCursor:O,nextCursor:S,Sort:o.a,sort:m,fetchData:N,setSort:function(e){var t,n=(t={},Object(x.a)(t,o.a.HotDesc,"hot"),Object(x.a)(t,o.a.TimeDesc,"new"),t);Object(T.h)("comment_switch",{switch:n[e]||""}),$=!0,B(e)},publishComment:F,refetch:function(){n("refetch")},loadMoreTriggerVisible:function(t){t&&C.value&&U.value&&(!e.commentDisplayMax||k.value.length<e.commentDisplayMax)&&N()},doEnableLoadMore:function(){var t,n;U.value||(U.value=!0,N(),Object(M.c)(M.b.moreCommentClick,{comment_position:null!==(n=null===(t=e.teaParams)||void 0===t?void 0:t.comment_position)&&void 0!==n?n:M.a.other,par_item_id:e.source.itemId,par_item_type:e.source.itemType,hot_comment_status:k.value.findIndex((function(e){return e.is_hot}))>=0?1:0}))},onCommentPublish:function(){if(Object(j.a)()){var e=Object(j.b)();Object(T.h)("search_detail_action",Oe(Oe({},e),{},{action_type:E.a.Comment,action_value:_.value}))}},onVisibleChange:function(e){l.value=e}}}}),Pe=(n(1199),Object(y.a)(Se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"visible-change",rawName:"v-visible-change:[0]",value:e.onVisibleChange,expression:"onVisibleChange",arg:0}],staticClass:"comment-list-wrapper",class:e.size},[e.hasSort&&(e.commentList.length>0||e.loading)?n("div",{staticClass:"comment-list-header"},[n("div",{staticClass:"sort"},[n("div",{staticClass:"item",class:e.sort===e.Sort.HotDesc&&"active",on:{click:function(t){return e.setSort(e.Sort.HotDesc)}}},[e._v("\n        最热\n      ")]),e._v(" "),n("div",{staticClass:"divider"}),e._v(" "),n("div",{staticClass:"item",class:e.sort===e.Sort.TimeDesc&&"active",on:{click:function(t){return e.setSort(e.Sort.TimeDesc)}}},[e._v("\n        最新\n      ")])])]):e._e(),e._v(" "),0===e.commentList.length&&"0"===e.currentCursor?[e.showEmptyPlaceholder?n("CommonEmpty",{attrs:{description:"暂无评论数据"}}):e._e()]:[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&!e.currentCursor,expression:"loading && !currentCursor"}],staticClass:"comment-list"},e._l(e.commentList,(function(t){return n("Comment",{key:t.comment_id,staticClass:"comment-item",attrs:{"data-cid":t.comment_id,size:e.size,"current-user":e.currentUser,source:e.source,comment:t,"tea-params":e.newTeaParams,"preview-reply":e.previewReply,"hide-reply-btn":e.hideReplyBtn},on:{onDeleteClick:function(t){return e.deleteComment(t.itemId)},onReportClick:function(t){return e.$emit("onReportClick",t)},onBlockUserClick:function(t){return e.$emit("onBlockUserClick",t)},onPublishComment:e.onCommentPublish,onPublishReply:e.onCommentPublish}})})),1),e._v(" "),"0"!==e.nextCursor?[e.hasMore?e.fetchError?n("div",{staticClass:"fetch-more-comment",on:{click:function(t){return t.stopPropagation(),e.fetchData(t)}}},[e._v("\n        加载失败, 请点击重试\n      ")]):e.loading?n("div",{directives:[{name:"visible-change",rawName:"v-visible-change",value:e.loadMoreTriggerVisible,expression:"loadMoreTriggerVisible"}],staticClass:"fetch-more-comment"},[e._v("\n        加载中...\n      ")]):e.commentDisplayMax&&e.commentList.length>=e.commentDisplayMax?n("div",{staticClass:"fetch-more-comment",on:{click:function(t){return e.$emit("onCommentLimit")}}},[e._v("\n        查看全部 "+e._s(e.commentCount)+" 条评论\n      ")]):n("div",{directives:[{name:"visible-change",rawName:"v-visible-change",value:e.loadMoreTriggerVisible,expression:"loadMoreTriggerVisible"}],staticClass:"fetch-more-comment",on:{click:e.doEnableLoadMore}},[n("span",[e._v("\n          "+e._s(e.enableLoadMore?"加载更多评论":"查看全部 "+e.commentCount+" 条评论")+"\n          "),n("MoreIcon",{staticStyle:{position:"relative",top:"1px"}})],1)]):n("div")]:e._e()]],2)}),[],!1,null,"3c9d31de",null).exports),je=Object(r.b)({components:{CommentForm:k.a,CommentList:Pe,DislikeUserModal:w,ImageViewer:C.a},props:{source:{type:Object,required:!0,default:null},startLoadMore:{type:Boolean,default:!0},size:{type:String,default:"default"},count:{type:Number,default:0},commentDisplayMax:{type:Number,default:0},teaParams:{type:Object,default:null},forbidInput:{type:Boolean,default:!1},hotMaxLimit:{type:Number,default:5},hasSort:{type:Boolean,default:!1},defaultSort:{type:Number,default:o.a.TimeDesc},anchorComment:{type:Object,default:null},previewReply:{type:Boolean,default:!0},firstPageSize:{type:Number,default:20},loadMorePageSize:{type:Number,default:20},filterStarComments:{type:Boolean,default:!1},hideReplyBtn:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},showEmptyPlaceholder:{type:Boolean,default:!0}},emits:["onCommentLimit"],setup:function(e){var t=Object(r.c)(),n=Object(r.x)(),o=Object(r.a)((function(){return n.getters.USER||{}})),c=Object(r.a)((function(){return n.getters.USER_INITIATED})),l=Object(r.a)((function(){var e;if(o.value&&o.value.id)return{userId:o.value.id,isBindPhone:!!o.value.isBindedPhone,username:o.value.user_name,avatar:o.value.avatar_large,isAdmin:!!(null===(e=o.value.roles)||void 0===e?void 0:e.isAdmin)}})),d=Object(A.a)(e.source.itemId).commentCount;d.value=e.count;var f=Object(r.n)(),h=Object(_.a)().openReportModal,v=Object(r.n)(),m=Object(r.n)(),y=Object(r.a)((function(){return 0===d.value?"抢首评，友善交流":"平等表达，友善交流"}));return Object(r.j)((function(){var e;null===(e=v.value)||void 0===e||e.attachContainer(null==t?void 0:t.proxy.$el)})),{placeholder:y,commentListRef:m,commentCount:d,userInited:c,imageViewer:v,currentUserInfo:l,dislikeUserRef:f,blockUser:function(e){var t;null===(t=f.value)||void 0===t||t.doBlockUser(e.userInfo,e.from)},reportItem:function(e){var t=e.itemId,n=e.itemType;h(t,n)}}}}),Ee=(n(1200),Object(y.a)(je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jj-comment-list-container",class:[{"hidden-title":!e.showTitle,small:"small"===e.size}],attrs:{"data-jj-helper":"comment-container"}},[e.userInited?[e.showTitle?e._t("title",[n("div",{staticClass:"title"},[e._v("评论 "+e._s(e.commentCount))])]):e._e(),e._v(" "),e.forbidInput?e._e():n("CommentForm",{staticClass:"comment-editor",attrs:{size:e.size,placeholder:e.placeholder,"current-user":e.currentUserInfo,source:e.source,"tea-params":e.teaParams,small:e.size,"avatar-visible":!0,"submit-title":"发送"},scopedSlots:e._u([{key:"unLogin",fn:function(){return[e._t("unLogin")]},proxy:!0}],null,!0)}),e._v(" "),n("CommentList",{ref:"commentListRef",staticClass:"comment-list-root",attrs:{size:e.size,"current-user":e.currentUserInfo,source:e.source,count:e.commentCount,"has-sort":e.hasSort,"default-sort":e.defaultSort,"anchor-comment":e.anchorComment,"comment-display-max":e.commentDisplayMax,"preview-reply":e.previewReply,"first-page-size":e.firstPageSize,"load-more-page-size":e.loadMorePageSize,"start-load-more":e.startLoadMore,"tea-params":e.teaParams,"filter-star-comments":e.filterStarComments,"hide-reply-btn":e.hideReplyBtn,"show-empty-placeholder":e.showEmptyPlaceholder},on:{onBlockUserClick:e.blockUser,onReportClick:e.reportItem,onCommentLimit:function(t){return e.$emit("onCommentLimit")}}})]:e._e(),e._v(" "),n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),e._v(" "),n("DislikeUserModal",{ref:"dislikeUserRef"})],2)}),[],!1,null,"5b99e65b",null));t.a=Ee.exports},1163:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[{"enable-background":"new 0 0 50 50"},style,v],attrs:Object.assign({version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",style:"enable-background:new 0 0 50 50;","xml:space":"preserve"},y)},w),d.concat([n("path",{attrs:{fill:"#0371df",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"}},[n("animateTransform",{attrs:{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"}})])]))}}},1164:function(e,t,n){"use strict";n(1099)},1165:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:["icon",f,h],style:[style,v],attrs:Object.assign({t:"1711971469505",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9601",width:"16",height:"16"},y)},w),d.concat([n("path",{attrs:{d:"M791.04 95.232H327.68c-76.8 0-138.752 62.464-138.752 138.752v8.192C135.168 261.12 96.256 312.832 96.256 373.248v416.768c0 76.8 62.464 138.752 138.752 138.752h463.36c76.8 0 127.488-62.464 127.488-138.752 54.272-18.944 104.448-78.848 104.448-138.752V234.496c0-76.8-62.464-139.264-139.264-139.264z m104.448 556.032c0 33.792-41.472 88.064-69.632 104.448V373.248c0-76.8-62.464-138.752-138.752-138.752H235.008c0-51.2 53.248-104.448 104.448-104.448h451.584c51.2 0 104.448 53.248 104.448 104.448v416.768z",fill:"#333333","p-id":"9602"}})]))}}},1166:function(e,t,n){"use strict";n(1100)},1167:function(e,t,n){"use strict";n(1101)},1169:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:"#E4E6EB"}}),n("path",{attrs:{d:"M0.5 8C0.5 3.85786 3.85786 0.5 8 0.5C12.1421 0.5 15.5 3.85786 15.5 8C15.5 12.1421 12.1421 15.5 8 15.5C3.85786 15.5 0.5 12.1421 0.5 8Z",stroke:"#E4E6EB","stroke-opacity":"0.5"}}),n("path",{attrs:{d:"M5.8789 5.40701C5.74872 5.27683 5.53767 5.27683 5.40749 5.40701C5.27732 5.53718 5.27732 5.74824 5.40749 5.87841L7.52882 7.99973L5.40749 10.1211C5.27732 10.2512 5.27732 10.4623 5.40749 10.5925C5.53767 10.7226 5.74872 10.7226 5.8789 10.5925L8.00022 8.47113L10.1215 10.5925C10.2517 10.7226 10.4628 10.7226 10.5929 10.5925C10.7231 10.4623 10.7231 10.2512 10.5929 10.1211L8.47162 7.99973L10.5929 5.87841C10.7231 5.74824 10.7231 5.53718 10.5929 5.40701C10.4628 5.27683 10.2517 5.27683 10.1215 5.40701L8.00022 7.52832L5.8789 5.40701Z",fill:"#515767"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.73748 5.54843C5.68541 5.49636 5.60099 5.49636 5.54892 5.54843C5.49685 5.6005 5.49685 5.68492 5.54892 5.73699L7.81166 7.99972L5.54892 10.2625C5.49685 10.3145 5.49685 10.399 5.54892 10.451C5.60099 10.5031 5.68541 10.5031 5.73748 10.451L8.00022 8.18829L10.263 10.451C10.315 10.5031 10.3994 10.5031 10.4515 10.451C10.5036 10.399 10.5036 10.3145 10.4515 10.2625L8.18878 7.99972L10.4515 5.73699C10.5036 5.68492 10.5036 5.6005 10.4515 5.54843C10.3994 5.49636 10.315 5.49636 10.263 5.54843L8.00022 7.81116L5.73748 5.54843ZM5.26607 5.26559C5.47435 5.05731 5.81204 5.0573 6.02032 5.26558L8.00022 7.24548L9.98011 5.26558C10.1884 5.05731 10.5261 5.05731 10.7344 5.26558C10.9426 5.47386 10.9426 5.81155 10.7344 6.01983L8.75447 7.99973L10.7344 9.97963C10.9426 10.1879 10.9426 10.5256 10.7344 10.7339C10.5261 10.9422 10.1884 10.9422 9.98011 10.7339L8.00022 8.75397L6.02032 10.7339C5.81204 10.9422 5.47435 10.9422 5.26607 10.7339C5.05779 10.5256 5.05779 10.1879 5.26607 9.97963L7.24597 7.99973L5.26607 6.01983C5.05779 5.81155 5.05779 5.47387 5.26607 5.26559Z",fill:"#515767"}})]))}}},1170:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("g",[n("path",{attrs:{d:"M14.75 8C14.75 11.7279 11.7279 14.75 8 14.75C4.27209 14.75 1.25 11.7279 1.25 8C1.25 4.27209 4.27209 1.25 8 1.25C11.7279 1.25 14.75 4.27209 14.75 8Z","stroke-width":"1.25"}}),n("path",{attrs:{d:"M8.00216 9.875L7.99976 9.5C7.99976 8.375 9.12476 8 9.79203 7.09914C10.4593 6.19828 9.6081 4.625 7.9953 4.625C6.49008 4.625 5.97697 5.58054 5.97461 6.31764V6.49197","stroke-width":"1.25"}}),n("path",{attrs:{d:"M8.00195 10.625V12.1279","stroke-width":"1.25"}})])]))}}},1171:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},1172:function(e,t,n){"use strict";n(1102)},1173:function(e,t,n){"use strict";n(1103)},1174:function(e,t,n){e.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},1175:function(e,t,n){e.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},1176:function(e,t,n){e.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},1177:function(e,t,n){e.exports=n.p+"img/loading.b144729.png"},1178:function(e,t,n){e.exports=n.p+"img/loading-light.e96acb8.png"},1179:function(e,t,n){"use strict";n(1104)},1181:function(e,t,n){e.exports=n.p+"4891f76395a92ddc73cb71cf555f49e0.svg"},1185:function(e,t,n){"use strict";n(30),n(145);var r=n(45);n(11),n(10);function o(e){return new Promise((function(t,n){var img=new window.Image;img.onload=function(){return t({width:img.naturalWidth,height:img.naturalHeight,url:e})},img.onerror=function(){return n()},img.src=e}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(e){var t=e.thumbUrl,n=e.originalUrl,rect=e.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:t,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(e){var t=this,n=e.thumbUrl,rect=e.rect,r=this.token;o(n).then((function(e){if(t.isInSameView(r)&&!t.loaded&&!t.error){var o=t.computeRenderedRect(e.width,e.height);t.applyRect(o),t.src=n,t.applyTransform(t.computeTransform(o,rect))}})).catch((function(e){t.isInSameView(r)&&console.error(e)}))},loadImage:function(e){var t=this,n=e.originalUrl,rect=e.rect,r=this.token;this.loading=!0,o(n).then((function(image){if(t.isInSameView(r)){var e=!!t.src,o=!t.full&&t.isLargeLongImage(image),c=t.computeRenderedRect(image.width,image.height,o);t.applyRect(c),t.src=n,t.loading=!1,t.loaded=!0,o&&t.lockScroll(),e||t.applyTransform(t.computeTransform(c,rect))}})).catch((function(e){t.isInSameView(r)&&(console.error(e),t.loading=!1,t.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(e){var t=this;this.imageStyle.transform=e,this.$nextTick((function(){t.forceReflow(),t.imageStyle.transform=""}))},initScrollEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType.ROOT_CONTAINER_SCROLL;t.onVmLife(this,n,(function(){e.src&&e.close()}))},computeRenderedRect:function(e,t,n){var o=Object(r.h)(),c=this.getSafeAreaSize();if(n){var l=Math.min(o.width,e,960),d=l*t/e;return{top:0,left:(o.width-l)/2,width:l,height:d}}var f=e/c.width,h=t/c.height,v=Math.max(f,h,1),m=e/v,y=t/v;return{top:(o.height-y)/2,left:(o.width-m)/2,width:m,height:y}},computeTransform:function(e,rect){var t=rect.width/e.width,n=rect.height/e.height,r=rect.width-e.width,o=rect.height-e.height,c=rect.top-e.top+o/2,l=rect.left-e.left+r/2,d="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),f="scale3d(".concat(t,", ").concat(n,", 1)");return"".concat(d," ").concat(f)},forceReflow:function(){document.body.clientWidth},isInSameView:function(e){return e===this.token},isLargeLongImage:function(image){var e=this.getSafeAreaSize(),t=e.width,n=e.height,r=n/t,o=image.height/image.width,c=o>1&&o>r;return(image.width>t||image.height>n)&&c},getSafeAreaSize:function(){var e=Object(r.h)(),t=e.width,n=e.height;return{width:Math.max(0,t-2*(+this.margin||0)),height:Math.max(0,n-2*(+this.margin||0))}},lockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},d=(n(1190),n(29)),f=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.src?r("div",{staticClass:"image-viewer",class:{loading:e.loading},on:{click:e.close}},[r("div",{staticClass:"image-box",style:{backgroundColor:e.backgroundColor}},[e.error?r("img",{staticClass:"image error",attrs:{src:n(1110)}}):r("img",{staticClass:"image",style:e.imageStyle,attrs:{src:e.src}})])]):e._e()])}),[],!1,null,"10b7b0e6",null).exports,h=(n(63),n(1258)),v=n.n(h),m=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},y={props:["backgroundColor","margin","full"],data:m,methods:{show:function(e){var t=e.thumbUrl,n=e.originalUrl,rect=e.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:t,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,m()),this.unlockScroll()},loadTumb:function(e){var t=this,n=e.thumbUrl,r=(e.rect,this.token);o(n).then((function(e){!t.isInSameView(r)||t.loaded||t.error||(t.src=n)})).catch((function(e){t.isInSameView(r)&&console.error(e)}))},loadImage:function(e){var t=this,n=e.originalUrl,r=(e.rect,this.token);this.loading=!0,o(n).then((function(image){if(t.isInSameView(r)){var e=!t.full&&t.isLargeLongImage(image);t.src=n,t.loading=!1,t.loaded=!0,t.isLargeLongMode=e,t.canZoom=t.isLargeImage(image),t.initGesture(),t.isLargeLongMode&&t.lockScroll()}})).catch((function(e){t.isInSameView(r)&&(console.error(e),t.loading=!1,t.error=!0)}))},isInSameView:function(e){return e===this.token},isLargeLongImage:function(image){var e=Object(r.h)(),t=e.width,n=e.height,o=n/t,c=image.height/image.width,l=c>1&&c>o;return(image.width>t||image.height>n)&&l},isLargeImage:function(image){var e=Object(r.h)(),t=e.width;return e.height<image.height||t<image.width},lockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType.ROOT_CONTAINER_SCROLL;t.onVmLife(this,n,(function(){e.src&&!e.isZoomMode&&e.close()}))},adjustOffset:function(){var e=Object(r.h)(),t=e.width,n=e.height,rect=this.$refs.image.getBoundingClientRect();rect.width<t?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<t&&(this.offsetX+=t-rect.left-rect.width),rect.height<n?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<n&&(this.offsetY+=n-rect.top-rect.height)},initGesture:function(){var e=this;this.$nextTick((function(){e.finger=new v.a(e.$refs.imageBox,{singleTap:function(t){e.isZoomMode?(e.isZoomMode=!1,e.offsetX=0,e.offsetY=0):e.close()},doubleTap:function(t){e.canZoom&&(e.isZoomMode=!e.isZoomMode,e.isZoomMode?e.lockScroll():(e.unlockScroll(),e.offsetX=0,e.offsetY=0))},pressMove:function(t){var n=t.deltaX,r=t.deltaY;e.isZoomMode&&(e.offsetX+=n,e.offsetY+=r)},touchEnd:function(){e.isZoomMode&&window.setTimeout((function(){e.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}};n(1191);var w={components:{Desktop:f,Mobile:Object(d.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.src?r("div",{staticClass:"image-viewer mobile",class:{loading:e.loading}},[r("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":e.isLargeLongMode},style:{backgroundColor:e.backgroundColor}},[e.error?r("img",{staticClass:"image error",attrs:{src:n(1110)}}):r("img",{ref:"image",staticClass:"image",class:{zoom:e.isZoomMode},style:{transform:"translate3d("+e.offsetX+"px, "+e.offsetY+"px, 0)"},attrs:{src:e.src}})])]):e._e()])}),[],!1,null,"93a27598",null).exports},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()},methods:{attachContainer:function(e){this.container!==e&&(this.removeEventListener(),this.addEventListener(e),this.container=e)},onClick:function(e){var t,n=e.target;if(this.isMatched(n)){var r=(t=n).getAttribute("data-src")||t.getAttribute("src")||function(e){var t=(e.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return t&&t[1]}(t);if(r){var o=this.$imgUrlTransform(r),rect=n.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:r,originalUrl:o,rect:rect})}}},addEventListener:function(e){var t=this;e.__removeIamgeViewListener=Object(r.k)(e,"click",(function(e){t.onClick(e)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(e){return!e.classList.contains("equation")&&!this.$el.contains(e)&&Object(r.j)(e,this.selector||"img")}}},C=(n(1192),Object(d.a)(w,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image-viewer-box"},[t(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"34cee571",null));t.a=C.exports},1186:function(e,t,n){"use strict";n(44),n(68);var r=n(3),o=n(8),c=n(95),l=Object(o.defineComponent)({components:{Modal:c.Modal,Button:c.Button},props:{value:{type:Boolean},user:{type:Object}},emits:["on-close","on-ok"],setup:function(e,t){var n=t.emit,c=Object(r.x)(),l=Object(o.computed)((function(){var e,t,n;return null!==(n=null===(t=null===(e=null==c?void 0:c.state)||void 0===e?void 0:e.dislike)||void 0===t?void 0:t.officialList)&&void 0!==n?n:[]}));return{isOfficial:Object(o.computed)((function(){var t,n,r;return null===(n=null===(t=l.value)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,null===(r=e.user)||void 0===r?void 0:r.user_id)})),username:Object(o.computed)((function(){var t;return null===(t=e.user)||void 0===t?void 0:t.user_name})),isModalShow:Object(o.computed)((function(){return e.value})),handleModalOk:function(){return n("on-ok")},handleModalClose:function(){return n("on-close")}}}}),d=(n(1189),n(29)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{staticClass:"dislike-modal",attrs:{value:e.isModalShow,"footer-hide":!0,closable:!1}},[n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[e._v("确定屏蔽该用户")]),e._v(" "),n("div",{staticClass:"content"},[e.isOfficial?n("span",[e._v("\n        确定屏蔽官方账号\n        "),n("span",{staticClass:"username"},[e._v(e._s(e.username))]),e._v("\n        吗 ？屏蔽后可能错过丰富礼品和重要信息哦\n      ")]):n("span",[e._v("\n        屏蔽后，对方将不能关注你、与你产生任何互动，无法查看你的主页\n      ")])]),e._v(" "),n("div",{staticClass:"footer"},[n("Button",{staticClass:"btn-cancel",on:{click:e.handleModalClose}},[e._v("取消")]),e._v(" "),n("Button",{staticClass:"btn-confirm",attrs:{type:"primary"},on:{click:e.handleModalOk}},[e._v("\n        确定\n      ")])],1)])])}),[],!1,null,"50548bfc",null);t.a=component.exports},1188:function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return _}));var r=n(1386),o=n.n(r),c=n(1387),l=n.n(c),d=n(1388),f=n.n(d),h=n(1389),v=n.n(h),m=n(1390),y=function(s){return s.attributes["*"].push("data*"),s},w=1512,C=["arduino","bash","c","cpp","csharp","css","diff","go","ini","java","javascript","json","kotlin","less","lua","makefile","markdown","objectivec","perl","php","phpTemplate","plaintext","python","pythonRepl","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","xml","yaml","html","dart","scala","vbscript","erlang","matlab"],_={vbscript:n.n(m).a,erlang:l.a,matlab:f.a,dart:o.a,scala:v.a}},1189:function(e,t,n){"use strict";n(1109)},1190:function(e,t,n){"use strict";n(1111)},1191:function(e,t,n){"use strict";n(1112)},1192:function(e,t,n){"use strict";n(1113)},1193:function(e,t,n){"use strict";n(1123)},1194:function(e,t,n){"use strict";n(1124)},1195:function(e,t,n){"use strict";n(1125)},1196:function(e,t,n){"use strict";n(1126)},1197:function(e,t,n){"use strict";n(1127)},1198:function(e,t,n){"use strict";n(1128)},1199:function(e,t,n){"use strict";n(1129)},1200:function(e,t,n){"use strict";n(1130)},1207:function(e,t,n){e.exports=n.p+"d460af1d9506ad49cc03903fc5d2de97.svg"},1208:function(e,t,n){e.exports=n.p+"9fc831d0e760589958834ed5d9185a5f.svg"},1209:function(e,t,n){e.exports=n.p+"a93eb981f13c8d482a9e95eaf09de453.svg"},1210:function(e,t,n){"use strict";n(1134)},1211:function(e,t,n){},1242:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c}));n(79),n(389),n(10),n(30),n(46),n(51),n(96);function r(e,t){if(0===e)return 0;var n=function(e,t){var n,r,o=0,c=e.toString(),l=t.toString();try{o+=(null===(n=c.split(".")[1])||void 0===n?void 0:n.length)||0}catch(e){console.error(e)}try{o+=(null===(r=l.split(".")[1])||void 0===r?void 0:r.length)||0}catch(e){console.error(e)}c=Number(c.replace(".","")),l=Number(l.replace(".",""));var d=c*l/Math.pow(10,o),f=t>0?.01:0;return Math.max(f,d)}(e,isNaN(t)?1:t/10);return 0===n?0:n.toFixed(2)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startTime:0,endTime:0},t=e.startTime,n=e.endTime,time=(new Date).getTime();return time>t&&time<n}function c(e,t){if(t){if(e<0||!e)return"0小时";var n=e/3600;return n<.1?"0小时":n.toFixed(1)+"小时"}if(e<0||!e)return"0秒";if(0<=e&&e<60)return e+"秒";var r=Math.floor(e/3600),o=r>0?Math.floor(e%60):Math.floor(e/60),s=Math.floor(e%60);return r>0?o>0?r+"小时"+o+"分":r+"小时":s>0?o+"分"+s+"秒":o+"分"}},1248:function(e,t,n){"use strict";n(10),n(63);var r=n(8),o=n(1144),c=Object(r.defineComponent)({components:{Triangle:o.a},props:{disalbe:{type:Boolean,default:!1},trigger:{type:String,default:"hover"},promise:Promise},emits:["afterShow"],setup:function(e,t){var data=Object(r.reactive)({visible:!1,top:0,left:0,isTop:!1,isInner:!1}),n=Object(r.ref)(null),o=Object(r.ref)(null),c=Object(r.ref)();return{data:data,popoverStyle:Object(r.computed)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:c,showPopover:function(r,l){e.disalbe||(data.isInner="hover"===l,l===e.trigger&&(clearTimeout(o.value),t.emit("show"),n.value=setTimeout((function(){Promise.resolve(e.promise).then((function(){n.value&&(data.visible=!0,t.root.$nextTick((function(){var e=r.target,n=null==e?void 0:e.getBoundingClientRect(),o=e.offsetWidth||33,l=e.offsetHeight||33,d=c.value,f=(null==d?void 0:d.offsetWidth)||260,h=(null==d?void 0:d.offsetHeight)||160,v=n.left-f/2+o/2,m=n.top-h-12;data.isTop=!1,m<60&&(data.isTop=!0,m=n.top+l+8),v=Math.max(0,v),data.left=v,data.top=m,t.emit("afterShow")})))}))}),300)))},hidePopover:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"hover"!==e&&!0===data.isInner||(data.isInner,clearTimeout(n.value),n.value=null,t.emit("hide"),o.value=setTimeout((function(){o.value=null,data.visible=!1}),300))}}}}),l=(n(1509),n(29)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popover-box",on:{mouseenter:function(t){return e.showPopover(t,"hover")},mouseleave:function(t){return e.hidePopover("hover")}}},[n("transition",{attrs:{name:"fade"}},[e.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:e.popoverStyle},[e._t("content"),e._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:e.data.isTop}})],2):e._e()]),e._v(" "),e._t("default")],2)}),[],!1,null,"487cbd49",null);t.a=component.exports},1251:function(e,t,n){"use strict";e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},1256:function(e,t,n){"use strict";n(1157)},1257:function(e,t,n){"use strict";n.r(t),n.d(t,"generateCatalog",(function(){return y})),n.d(t,"rehypeCustom",(function(){return w})),n.d(t,"rehypeReplaceImgSrc",(function(){return C}));n(392),n(44),n(70),n(23),n(85),n(71),n(10),n(136),n(30),n(46),n(587),n(68),n(55),n(51),n(137),n(59);var r=n(1484),o=n.n(r),c=n(1281),l=n(257),d=n(28),f=n(209),h=n(21),v=n(1188);function m(e,t){var n;e.properties.src=f.c.transform((null===(n=e.properties)||void 0===n?void 0:n.src)||"",{resize:{w:v.a},format:void 0===t?"auto":t?"webp":"png"}),e.properties.loading="lazy"}function y(e){var t={title:"root",hash:"",children:[],deep:0,_level:-1};return e.reduce((function(e,t){var n,r,title=function e(t){var n;return"text"===(null==t?void 0:t.type)?String(t.value||""):(null===(n=null==t?void 0:t.children)||void 0===n?void 0:n.length)?t.children.map((function(t){return e(t)})).join(""):""}(t);if(title){for(var o={title:title||"<未识别标题>",hash:"#".concat(null===(n=null==t?void 0:t.properties)||void 0===n?void 0:n["data-id"]),deep:0,children:[],_level:parseInt(t.tagName.slice(1),10)},c=e;c&&c._level>=o._level;)c=c._parent;return o._parent=c,o.deep=c.deep+1,o.deep<=3&&(o.visible=!0),null===(r=c.children)||void 0===r||r.push(o),o}return e}),t),t.children||[]}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.supportWebP,n=void 0!==t&&t,r=e.onCatalogGenerated,f=e.onMetaInfoParsed;return function(e,t){var v,w=t.frontmatter,C=(null==w?void 0:w.theme)||"juejin",_=o.a[C]||o.a.juejin,k=(null==w?void 0:w.highlight)||_.highlight;null===(v=e.children)||void 0===v||v.unshift({type:"element",tagName:"style",children:[{type:"text",value:_.style}]},{type:"element",tagName:"style",properties:{"data-highlight":!0,"data-highlight-key":k}});var x=new Set,O=[],S=0;if(f&&t.hasJcode&&x.add(l.b.CodeEditor),Object(c.a)(e,"element",(function(e,t,r){var o,c,v,y;if(e.properties||(e.properties={}),f){void 0!==e.properties["data-grid-img"]&&x.add(l.b.ImgGrid);var w=e.properties&&Array.isArray(e.properties.className)?e.properties.className:[],C=w.includes("math-inline"),_=w.includes("math-display");(C||_)&&x.add(l.b.Math)}switch(e.tagName){case"a":var p=e.properties||{},k=p.href||"";k&&!k.toString().startsWith("#")&&(p.target="_blank"),p.title=k;var P=e.children;if(P&&P[0]&&"text"===P[0].type){/^(https?:\/\/)?[-a-z0-9@:%._+~#=]{1,256}\.[a-z]{2,6}/i.test(P[0].value)&&(P[0].value=P[0].value.replace(/^https?:\/\//i,"").replace(/\/(.*)$/,(function(e){return e.length>12?"".concat(e.slice(0,12),"…"):e})))}if(Object(h.f)(k)&&(p.ref="nofollow noopener noreferrer",p.href=Object(h.j)(k)?Object(h.d)(k):k),"text"===(null===(c=null===(o=e.children)||void 0===o?void 0:o[0])||void 0===c?void 0:c.type)){var j=null===(y=null===(v=e.children)||void 0===v?void 0:v[0])||void 0===y?void 0:y.value;f&&"string"==typeof j&&"jcode"===j&&new RegExp("^https?:\\/\\/".concat(d.i,"\\/pen\\/"),"i").test(k)&&x.add(l.b.CodeEditor)}break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":e.properties["data-id"]="heading-".concat(S++),O.push(e);break;case"img":m(e,n),f&&x.add(l.b.MediumZoom);break;case"code":if(!r||"pre"!==r.tagName)return;if(f)(e.properties.className||[]).includes("language-mermaid")?x.add(l.b.Mermaid):x.add(l.b.CodeBlock)}})),null==f||f(JSON.stringify({plugins:Array.from(x.keys())})),r){var P=y(O);r(JSON.stringify(P,["title","hash","deep","children","visible"]))}}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.supportWebP,n=void 0!==t&&t;return function(e){Object(c.a)(e,"element",(function(e){switch(e.properties||(e.properties={}),e.tagName){case"img":m(e,n)}}))}}},1258:function(e,t,n){!function(){function t(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function n(e,n){var r=function(e,n){var r=t(e)*t(n);if(0===r)return 0;var o=function(e,t){return e.x*t.x+e.y*t.y}(e,n)/r;return o>1&&(o=1),Math.acos(o)}(e,n);return function(e,t){return e.x*t.y-t.x*e.y}(e,n)>0&&(r*=-1),180*r/Math.PI}var r=function(e){this.handlers=[],this.el=e};function o(e,t){var n=new r(e);return n.add(t),n}r.prototype.add=function(e){this.handlers.push(e)},r.prototype.del=function(e){e||(this.handlers=[]);for(var i=this.handlers.length;i>=0;i--)this.handlers[i]===e&&this.handlers.splice(i,1)},r.prototype.dispatch=function(){for(var i=0,e=this.handlers.length;i<e;i++){var t=this.handlers[i];"function"==typeof t&&t.apply(this.el,arguments)}};var c=function(e,option){this.element="string"==typeof e?document.querySelector(e):e,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var t=function(){};this.rotate=o(this.element,option.rotate||t),this.touchStart=o(this.element,option.touchStart||t),this.multipointStart=o(this.element,option.multipointStart||t),this.multipointEnd=o(this.element,option.multipointEnd||t),this.pinch=o(this.element,option.pinch||t),this.swipe=o(this.element,option.swipe||t),this.tap=o(this.element,option.tap||t),this.doubleTap=o(this.element,option.doubleTap||t),this.longTap=o(this.element,option.longTap||t),this.singleTap=o(this.element,option.singleTap||t),this.pressMove=o(this.element,option.pressMove||t),this.twoFingerPressMove=o(this.element,option.twoFingerPressMove||t),this.touchMove=o(this.element,option.touchMove||t),this.touchEnd=o(this.element,option.touchEnd||t),this.touchCancel=o(this.element,option.touchCancel||t),this._cancelAllHandler=this.cancelAll.bind(this),window.removeEventListener("scroll",this._cancelAllHandler),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};c.prototype={start:function(e){if(e.touches){this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(e,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var r={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};n.x=r.x,n.y=r.y,this.pinchStartLen=t(n),this.multipointStart.dispatch(e,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(e,this.element),this._preventTap=!0}.bind(this),750)}},move:function(e){if(e.touches){var r=this.preV,o=e.touches.length,c=e.touches[0].pageX,l=e.touches[0].pageY;if(this.isDoubleTap=!1,o>1){var d=e.touches[1].pageX,f=e.touches[1].pageY,h={x:e.touches[1].pageX-c,y:e.touches[1].pageY-l};null!==r.x&&(this.pinchStartLen>0&&(e.zoom=t(h)/this.pinchStartLen,this.pinch.dispatch(e,this.element)),e.angle=n(h,r),this.rotate.dispatch(e,this.element)),r.x=h.x,r.y=h.y,null!==this.x2&&null!==this.sx2?(e.deltaX=(c-this.x2+d-this.sx2)/2,e.deltaY=(l-this.y2+f-this.sy2)/2):(e.deltaX=0,e.deltaY=0),this.twoFingerPressMove.dispatch(e,this.element),this.sx2=d,this.sy2=f}else null!==this.x2?(e.deltaX=c-this.x2,e.deltaY=l-this.y2):(e.deltaX=0,e.deltaY=0),this.pressMove.dispatch(e,this.element);this.touchMove.dispatch(e,this.element),this._cancelLongTap(),this.x2=c,this.y2=l,o>1&&e.preventDefault()}},end:function(e){if(e.changedTouches){this._cancelLongTap();var t=this;e.touches.length<2&&(this.multipointEnd.dispatch(e,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){t.swipe.dispatch(e,t.element)}),0)):(this.tapTimeout=setTimeout((function(){t._preventTap||t.tap.dispatch(e,t.element),t.isDoubleTap&&(t.doubleTap.dispatch(e,t.element),clearTimeout(t.singleTapTimeout),t.isDoubleTap=!1)}),0),t.isDoubleTap||(t.singleTapTimeout=setTimeout((function(){t.singleTap.dispatch(e,t.element)}),250))),this.touchEnd.dispatch(e,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(e){this.cancelAll(),this.touchCancel.dispatch(e,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"},on:function(e,t){this[e]&&this[e].add(t)},off:function(e,t){this[e]&&this[e].del(t)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,null}},e.exports=c}()},1259:function(e,t,n){"use strict";var r=n(15),o=n(396);r({target:"String",proto:!0,forced:n(397)("anchor")},{anchor:function(e){return o(this,"a","name",e)}})},1263:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));n(389),n(30),n(51),n(98);function r(e){return e>=1e4?"".concat((e/1e4).toFixed(1),"w"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):"".concat(e)}function o(e){return e>1e8?"".concat(parseInt("".concat(e/1e8)),"亿+"):e>1e4?"".concat(parseInt("".concat(e/1e4)),"w+"):"".concat(e)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e/100).toFixed(2)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?0:e/100}},1264:function(e,t,n){},1293:function(e,t,n){"use strict";n(1211)},1294:function(e,t,n){},1295:function(e,t,n){},1297:function(e,t,n){e.exports=function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t=function(e){return"IMG"===e.tagName},n=function(e){return e&&1===e.nodeType},r=function(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()},i=function(e){try{return Array.isArray(e)?e.filter(t):function(e){return NodeList.prototype.isPrototypeOf(e)}(e)?[].slice.call(e).filter(t):n(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}},o=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t},c=function(e){var t=e.getBoundingClientRect(),n=t.top,r=t.left,i=t.width,o=t.height,c=e.cloneNode(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return c.removeAttribute("id"),c.style.position="absolute",c.style.top=n+a+"px",c.style.left=r+l+"px",c.style.width=i+"px",c.style.height=o+"px",c.style.transform="",c},a=function(t,n){var r=e({bubbles:!1,cancelable:!1,detail:void 0},n);if("function"==typeof window.CustomEvent)return new CustomEvent(t,r);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),i};return function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function t(l){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=window.Promise||function(e){function t(){}e(t,t)},u=function(e){var t=e.target;t!==L?-1!==S.indexOf(t)&&_({target:t}):C()},s=function(){if(!j&&V.original){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(E-e)>T.scrollOffset&&setTimeout(C,150)}},h=function(e){var t=e.key||e.keyCode;"Escape"!==t&&"Esc"!==t&&27!==t||C()},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t;if(t.background&&(L.style.background=t.background),t.container&&t.container instanceof Object&&(r.container=e({},T.container,t.container)),t.template){var i=n(t.template)?t.template:document.querySelector(t.template);r.template=i}return T=e({},T,r),S.forEach((function(e){e.dispatchEvent(a("medium-zoom:update",{detail:{zoom:I}}))})),I},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(e({},T,n))},v=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return[].concat(e,i(t))}),[]);return r.filter((function(e){return-1===S.indexOf(e)})).forEach((function(e){S.push(e),e.classList.add("medium-zoom-image")})),P.forEach((function(e){var t=e.type,n=e.listener,i=e.options;r.forEach((function(e){e.addEventListener(t,n,i)}))})),I},m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];V.zoomed&&C();var r=t.length>0?t.reduce((function(e,t){return[].concat(e,i(t))}),[]):S;return r.forEach((function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(a("medium-zoom:detach",{detail:{zoom:I}}))})),S=S.filter((function(e){return-1===r.indexOf(e)})),I},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.forEach((function(r){r.addEventListener("medium-zoom:"+e,t,n)})),P.push({type:"medium-zoom:"+e,listener:t,options:n}),I},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.forEach((function(r){r.removeEventListener("medium-zoom:"+e,t,n)})),P=P.filter((function(n){return!(n.type==="medium-zoom:"+e&&n.listener.toString()===t.toString())})),I},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.target,o=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},i=void 0,o=void 0;if(T.container)if(T.container instanceof Object)i=(t=e({},t,T.container)).width-t.left-t.right-2*T.margin,o=t.height-t.top-t.bottom-2*T.margin;else{var c=(n(T.container)?T.container:document.querySelector(T.container)).getBoundingClientRect(),a=c.width,l=c.height,d=c.left,f=c.top;t=e({},t,{width:a,height:l,left:d,top:f})}i=i||t.width-2*T.margin,o=o||t.height-2*T.margin;var u=V.zoomedHd||V.original,s=r(u)?i:u.naturalWidth||i,h=r(u)?o:u.naturalHeight||o,p=u.getBoundingClientRect(),g=p.top,v=p.left,m=p.width,y=p.height,w=Math.min(Math.max(m,s),i)/m,b=Math.min(Math.max(y,h),o)/y,C=Math.min(w,b),_="scale("+C+") translate3d("+((i-m)/2-v+T.margin+t.left)/C+"px, "+((o-y)/2-g+T.margin+t.top)/C+"px, 0)";V.zoomed.style.transform=_,V.zoomedHd&&(V.zoomedHd.style.transform=_)};return new f((function(e){if(i&&-1===S.indexOf(i))e(I);else if(V.zoomed)e(I);else{if(i)V.original=i;else{if(!(S.length>0))return void e(I);var t=S;V.original=t[0]}if(V.original.dispatchEvent(a("medium-zoom:open",{detail:{zoom:I}})),E=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,j=!0,V.zoomed=c(V.original),document.body.appendChild(L),T.template){var r=n(T.template)?T.template:document.querySelector(T.template);V.template=document.createElement("div"),V.template.appendChild(r.content.cloneNode(!0)),document.body.appendChild(V.template)}if(V.original.parentElement&&"PICTURE"===V.original.parentElement.tagName&&V.original.currentSrc&&(V.zoomed.src=V.original.currentSrc),document.body.appendChild(V.zoomed),window.requestAnimationFrame((function(){document.body.classList.add("medium-zoom--opened")})),V.original.classList.add("medium-zoom-image--hidden"),V.zoomed.classList.add("medium-zoom-image--opened"),V.zoomed.addEventListener("click",C),V.zoomed.addEventListener("transitionend",(function t(){j=!1,V.zoomed.removeEventListener("transitionend",t),V.original.dispatchEvent(a("medium-zoom:opened",{detail:{zoom:I}})),e(I)})),V.original.getAttribute("data-zoom-src")){V.zoomedHd=V.zoomed.cloneNode(),V.zoomedHd.removeAttribute("srcset"),V.zoomedHd.removeAttribute("sizes"),V.zoomedHd.removeAttribute("loading"),V.zoomedHd.src=V.zoomed.getAttribute("data-zoom-src"),V.zoomedHd.onerror=function(){clearInterval(l),console.warn("Unable to reach the zoom image target "+V.zoomedHd.src),V.zoomedHd=null,o()};var l=setInterval((function(){V.zoomedHd.complete&&(clearInterval(l),V.zoomedHd.classList.add("medium-zoom-image--opened"),V.zoomedHd.addEventListener("click",C),document.body.appendChild(V.zoomedHd),o())}),10)}else if(V.original.hasAttribute("srcset")){V.zoomedHd=V.zoomed.cloneNode(),V.zoomedHd.removeAttribute("sizes"),V.zoomedHd.removeAttribute("loading");var d=V.zoomedHd.addEventListener("load",(function(){V.zoomedHd.removeEventListener("load",d),V.zoomedHd.classList.add("medium-zoom-image--opened"),V.zoomedHd.addEventListener("click",C),document.body.appendChild(V.zoomedHd),o()}))}else o()}}))},C=function(){return new f((function(e){!j&&V.original?(j=!0,document.body.classList.remove("medium-zoom--opened"),V.zoomed.style.transform="",V.zoomedHd&&(V.zoomedHd.style.transform=""),V.template&&(V.template.style.transition="opacity 150ms",V.template.style.opacity=0),V.original.dispatchEvent(a("medium-zoom:close",{detail:{zoom:I}})),V.zoomed.addEventListener("transitionend",(function t(){V.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(V.zoomed),V.zoomedHd&&document.body.removeChild(V.zoomedHd),document.body.removeChild(L),V.zoomed.classList.remove("medium-zoom-image--opened"),V.template&&document.body.removeChild(V.template),j=!1,V.zoomed.removeEventListener("transitionend",t),V.original.dispatchEvent(a("medium-zoom:closed",{detail:{zoom:I}})),V.original=null,V.zoomed=null,V.zoomedHd=null,V.template=null,e(I)}))):e(I)}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;return V.original?C():b({target:t})},k=function(){return T},x=function(){return S},O=function(){return V.original},S=[],P=[],j=!1,E=0,T=d,V={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(l)?T=l:(l||"string"==typeof l)&&v(l),T=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},T);var L=o(T.background);document.addEventListener("click",u),document.addEventListener("keyup",h),document.addEventListener("scroll",s),window.addEventListener("resize",C);var I={open:b,close:C,toggle:_,update:p,clone:g,attach:v,detach:m,on:y,off:w,getOptions:k,getImages:x,getZoomedImage:O};return I}}()},1298:function(e,t,n){(function(e,n){var r="[object Arguments]",o="[object Function]",c="[object GeneratorFunction]",l="[object Map]",d="[object Set]",f=/\w*$/,h=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,m={};m[r]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object DataView]"]=m["[object Boolean]"]=m["[object Date]"]=m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m[l]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m[d]=m["[object String]"]=m["[object Symbol]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Error]"]=m[o]=m["[object WeakMap]"]=!1;var y="object"==typeof e&&e&&e.Object===Object&&e,w="object"==typeof self&&self&&self.Object===Object&&self,C=y||w||Function("return this")(),_=t&&!t.nodeType&&t,k=_&&"object"==typeof n&&n&&!n.nodeType&&n,x=k&&k.exports===_;function O(map,e){return map.set(e[0],e[1]),map}function S(e,t){return e.add(t),e}function P(e,t,n,r){var o=-1,c=e?e.length:0;for(r&&c&&(n=e[++o]);++o<c;)n=t(n,e[o],o,e);return n}function j(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function E(map){var e=-1,t=Array(map.size);return map.forEach((function(n,r){t[++e]=[r,n]})),t}function T(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var L,I=Array.prototype,R=Function.prototype,A=Object.prototype,D=C["__core-js_shared__"],M=(L=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",B=R.toString,N=A.hasOwnProperty,F=A.toString,H=RegExp("^"+B.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=x?C.Buffer:void 0,z=C.Symbol,$=C.Uint8Array,G=T(Object.getPrototypeOf,Object),W=Object.create,Z=A.propertyIsEnumerable,K=I.splice,Y=Object.getOwnPropertySymbols,X=U?U.isBuffer:void 0,J=T(Object.keys,Object),Q=xe(C,"DataView"),ee=xe(C,"Map"),te=xe(C,"Promise"),ne=xe(C,"Set"),ie=xe(C,"WeakMap"),re=xe(Object,"create"),oe=Ee(Q),ae=Ee(ee),se=Ee(te),ce=Ee(ne),le=Ee(ie),ue=z?z.prototype:void 0,de=ue?ue.valueOf:void 0;function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function he(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){this.__data__=new he(e)}function ge(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Le(e)}(e)&&N.call(e,"callee")&&(!Z.call(e,"callee")||F.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,c=!!o;for(var l in e)!t&&!N.call(e,l)||c&&("length"==l||Pe(l,o))||n.push(l);return n}function me(object,e,t){var n=object[e];N.call(object,e)&&Te(n,t)&&(void 0!==t||e in object)||(object[e]=t)}function ye(e,t){for(var n=e.length;n--;)if(Te(e[n][0],t))return n;return-1}function be(e,t,n,h,v,object,y){var w;if(h&&(w=object?h(e,v,object,y):h(e)),void 0!==w)return w;if(!Ae(e))return e;var C=Ve(e);if(C){if(w=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&N.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(source,e){var t=-1,n=source.length;e||(e=Array(n));for(;++t<n;)e[t]=source[t];return e}(e,w)}else{var _=Se(e),k=_==o||_==c;if(Ie(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==_||_==r||k&&!object){if(j(e))return object?e:{};if(w=function(object){return"function"!=typeof object.constructor||je(object)?{}:(e=G(object),Ae(e)?W(e):{});var e}(k?{}:e),!t)return function(source,object){return _e(source,Oe(source),object)}(e,function(object,source){return object&&_e(source,De(source),object)}(w,e))}else{if(!m[_])return object?e:{};w=function(object,e,t,n){var r=object.constructor;switch(e){case"[object ArrayBuffer]":return Ce(object);case"[object Boolean]":case"[object Date]":return new r(+object);case"[object DataView]":return function(e,t){var n=t?Ce(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(object,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Ce(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(object,n);case l:return function(map,e,t){return P(e?t(E(map),!0):E(map),O,new map.constructor)}(object,n,t);case"[object Number]":case"[object String]":return new r(object);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,f.exec(e));return t.lastIndex=e.lastIndex,t}(object);case d:return function(e,t,n){return P(t?n(V(e),!0):V(e),S,new e.constructor)}(object,n,t);case"[object Symbol]":return symbol=object,de?Object(de.call(symbol)):{}}var symbol}(e,_,be,t)}}y||(y=new ve);var x=y.get(e);if(x)return x;if(y.set(e,w),!C)var T=n?function(object){return function(object,e,t){var n=e(object);return Ve(object)?n:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(n,t(object))}(object,De,Oe)}(e):De(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(T||e,(function(r,o){T&&(r=e[o=r]),me(w,o,be(r,t,n,h,o,e,y))})),w}function we(e){return!(!Ae(e)||(t=e,M&&M in t))&&(Re(e)||j(e)?H:h).test(Ee(e));var t}function Ce(e){var t=new e.constructor(e.byteLength);return new $(t).set(new $(e)),t}function _e(source,e,object,t){object||(object={});for(var n=-1,r=e.length;++n<r;){var o=e[n],c=t?t(object[o],source[o],o,object,source):void 0;me(object,o,void 0===c?source[o]:c)}return object}function ke(map,e){var t,n,data=map.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?data["string"==typeof e?"string":"hash"]:data.map}function xe(object,e){var t=function(object,e){return null==object?void 0:object[e]}(object,e);return we(t)?t:void 0}fe.prototype.clear=function(){this.__data__=re?re(null):{}},fe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},fe.prototype.get=function(e){var data=this.__data__;if(re){var t=data[e];return"__lodash_hash_undefined__"===t?void 0:t}return N.call(data,e)?data[e]:void 0},fe.prototype.has=function(e){var data=this.__data__;return re?void 0!==data[e]:N.call(data,e)},fe.prototype.set=function(e,t){return this.__data__[e]=re&&void 0===t?"__lodash_hash_undefined__":t,this},he.prototype.clear=function(){this.__data__=[]},he.prototype.delete=function(e){var data=this.__data__,t=ye(data,e);return!(t<0)&&(t==data.length-1?data.pop():K.call(data,t,1),!0)},he.prototype.get=function(e){var data=this.__data__,t=ye(data,e);return t<0?void 0:data[t][1]},he.prototype.has=function(e){return ye(this.__data__,e)>-1},he.prototype.set=function(e,t){var data=this.__data__,n=ye(data,e);return n<0?data.push([e,t]):data[n][1]=t,this},pe.prototype.clear=function(){this.__data__={hash:new fe,map:new(ee||he),string:new fe}},pe.prototype.delete=function(e){return ke(this,e).delete(e)},pe.prototype.get=function(e){return ke(this,e).get(e)},pe.prototype.has=function(e){return ke(this,e).has(e)},pe.prototype.set=function(e,t){return ke(this,e).set(e,t),this},ve.prototype.clear=function(){this.__data__=new he},ve.prototype.delete=function(e){return this.__data__.delete(e)},ve.prototype.get=function(e){return this.__data__.get(e)},ve.prototype.has=function(e){return this.__data__.has(e)},ve.prototype.set=function(e,t){var n=this.__data__;if(n instanceof he){var r=n.__data__;if(!ee||r.length<199)return r.push([e,t]),this;n=this.__data__=new pe(r)}return n.set(e,t),this};var Oe=Y?T(Y,Object):function(){return[]},Se=function(e){return F.call(e)};function Pe(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||v.test(e))&&e>-1&&e%1==0&&e<t}function je(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||A)}function Ee(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Te(e,t){return e===t||e!=e&&t!=t}(Q&&"[object DataView]"!=Se(new Q(new ArrayBuffer(1)))||ee&&Se(new ee)!=l||te&&"[object Promise]"!=Se(te.resolve())||ne&&Se(new ne)!=d||ie&&"[object WeakMap]"!=Se(new ie))&&(Se=function(e){var t=F.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ee(n):void 0;if(r)switch(r){case oe:return"[object DataView]";case ae:return l;case se:return"[object Promise]";case ce:return d;case le:return"[object WeakMap]"}return t});var Ve=Array.isArray;function Le(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Re(e)}var Ie=X||function(){return!1};function Re(e){var t=Ae(e)?F.call(e):"";return t==o||t==c}function Ae(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function De(object){return Le(object)?ge(object):function(object){if(!je(object))return J(object);var e=[];for(var t in Object(object))N.call(object,t)&&"constructor"!=t&&e.push(t);return e}(object)}n.exports=function(e){return be(e,!0,!0)}}).call(this,n(81),n(250)(e))},1300:function(e,t,n){e.exports=n.p+"img/loading-placeholder.9112506.png"},1301:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq4AAAMMAQMAAACokrcUAAAABlBMVEUTGiQYIS3+UMXuAAAAgElEQVR42uzMMQ0AAAwCsPnXTMJU8LUCel2IVqvVarVarVar1Wq1Wq1Wq9VqtVqtVqvVttqFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDtwSEBAAAAgKD/r11hAwAAAAAAAGATjapzHPFOaqgAAAAASUVORK5CYII="},1302:function(e,t,n){},1347:function(e,t,n){"use strict";n(10);var r=n(0),o=n(110),c=n(16),l=n(1158),d=n(4);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var h={components:{DropDownList:function(){return n.e(31).then(n.bind(null,4793))}},data:function(){return{bdPageUrlForNav:l.e,isShowUserDropdownList:!1,translateGithubURL:c.h}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.mapGetters)({user:d.USER})),watch:{isShowUserDropdownList:function(e){e&&this.$TEA("avatar_menu_visit")}},mounted:function(){var e=this,t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.ROOT_CONTAINER_CLICK,(function(){e.hideActionList()}))},methods:{hideActionList:function(){this.isShowUserDropdownList=!1},onUserActionClick:function(){this.isShowUserDropdownList=!this.isShowUserDropdownList},openEditorPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getPostEditUrl()},openXiaoceEditorPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getXiaoceEditUrl()},openDraftIndexPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getDraftIndexUrl()},login:function(){this.$requestLogin()},register:function(){this.$requestRegister()},logout:function(){window.confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者！")&&this.$requestLogout()}}},v=(n(1293),n(29)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-auth"},[e.user?n("div",{staticClass:"nav-item menu",on:{click:function(t){return t.stopPropagation(),e.onUserActionClick(t)}}},[n("Avatar",{staticClass:"avatar",attrs:{user:e.user,alt:e.user.username+"的头像"}}),e._v(" "),n("keep-alive",[e.isShowUserDropdownList?n("DropDownList"):e._e()],1)],1):e._e(),e._v(" "),e.user?e._e():n("div",{staticClass:"nav-item auth"},[n("span",{staticClass:"login",on:{click:e.login}},[e._v("登录")])])])}),[],!1,null,"4d55480d",null);t.a=component.exports},1351:function(e,t,n){"use strict";e.exports=function(){return{viewerEffect({markdownBody:e}){Array.from(e.querySelectorAll("[data-grid-img]")).forEach(a=>{a.style.display="flex",a.style.justifyContent="center",a.style.alignContent="center"})}}}},1352:function(e,t,n){n(80),n(70),n(71),n(10),n(30),n(46),e.exports=function(e,input,t){var n,d,f,pattern,h,v,m,y,w=(t.before||"")+(input||"")+(t.after||""),C=[],_=[],k={},x=-1;for(;++x<e.unsafe.length;)if(pattern=e.unsafe[x],o(e.stack,pattern))for(h=r(pattern);v=h.exec(w);)n="before"in pattern||pattern.atBreak,d="after"in pattern,f=v.index+(n?v[1].length:0),-1===C.indexOf(f)?(C.push(f),k[f]={before:n,after:d}):(k[f].before&&!n&&(k[f].before=!1),k[f].after&&!d&&(k[f].after=!1));C.sort(c),m=t.before?t.before.length:0,y=w.length-(t.after?t.after.length:0),x=-1;for(;++x<C.length;)(f=C[x])<m||f>=y||f+1<y&&C[x+1]===f+1&&k[f].after&&!k[f+1].before&&!k[f+1].after||(m!==f&&_.push(l(w.slice(m,f),"\\")),m=f,!/[!-/:-@[-`{-~]/.test(w.charAt(f))||t.encode&&-1!==t.encode.indexOf(w.charAt(f))?(_.push("&#x"+w.charCodeAt(f).toString(16).toUpperCase()+";"),m++):_.push("\\"));return _.push(l(w.slice(m,y),t.after)),_.join("")};var r=n(1462),o=n(1375);function c(a,b){return a-b}function l(e,t){for(var n,r=/\\(?=[!-/:-@[-`{-~])/g,o=[],c=[],l=-1,d=0,f=e+t;n=r.exec(f);)o.push(n.index);for(;++l<o.length;)d!==o[l]&&c.push(e.slice(d,o[l])),c.push("\\"),d=o[l];return c.push(e.slice(d)),c.join("")}},1353:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const n in e)if("default"!==n){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}return t.default=e,Object.freeze(t)}e.exports=function(e){let t;return{viewerEffect({markdownBody:o}){const c=[...o.querySelectorAll("img")].filter(t=>{var n,r;return(null==(r=null==(n=null==e?void 0:e.filter)?void 0:n.call(e,t))||r)&&!t.closest("a")});0!==c.length&&(async()=>{t||(t=await Promise.resolve().then(()=>r(n(1297)))),t.default(c,e)})()}}}},1354:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1379),o=n.n(r);function c(e){var t,n=e.markdownBody.querySelector("style[data-highlight]"),r=(null===(t=null==n?void 0:n.dataset)||void 0===t?void 0:t.highlightKey)||"github";(n&&!n.innerText||!n)&&(o.a[null!=r?r:""]||o.a.github)().then((function(e){return e.default})).then((function(t){if(n)n.innerText=t;else{var r=document.createElement("style");r.innerText=t,e.markdownBody.appendChild(r)}}))}},1359:function(e,t,n){"use strict";n(79);var r=n(3),o=n(7),c=(n(1453),n(29)),l=Object(c.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"video-label"},[this._v("视频")])}),[],!1,null,"2f5eaa22",null).exports,d=n(144),f=n(72),h=Object(r.b)({components:{Thumb:d.a,VideoBookLabel:l},props:{book:{type:Object,default:function(){return{}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup:function(e,t){var n=t.root.$device.isMobile,c=n?100:150,l=n?140:210,d=Object(r.a)((function(){var t;return(null===(t=e.book)||void 0===t?void 0:t.base_info)||{}}));return{isVideoBook:Object(r.a)((function(){var e;return(null===(e=d.value)||void 0===e?void 0:e.course_type)===o.BookletCourseType.Video})),defaultBookThumbUrl:f.d,coverSize:{width:e.width?e.width:c,height:e.height?e.height:l},bookBaseInfo:d}}}),v=(n(1454),Object(c.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-thumb"},[n("Thumb",{staticClass:"book-thumb-img",attrs:{alt:"「"+e.bookBaseInfo.title+"」封面",url:e.bookBaseInfo.cover_img,default:e.defaultBookThumbUrl,quality:95,width:e.coverSize.width,height:e.coverSize.height}}),e._v(" "),e.isVideoBook?n("VideoBookLabel"):e._e()],1)}),[],!1,null,"14ace766",null));t.a=v.exports},1365:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(n(1366));e.exports=function({test:e,internalProps:t={},externalProps:n={target:"_blank",rel:"nofollow noopener noreferrer"}}){return{rehype:p=>p.use(()=>r=>{o.default(r,"element",r=>{var o;if("a"!==r.tagName||!(null===(o=r.properties)||void 0===o?void 0:o.href))return;const c=r.properties.href;/https?:\/\//.test(c)&&Object.assign(r.properties,e(c)?n:t)})})}}},1366:function(e,t,n){"use strict";n(80),e.exports=d;var r=n(1350),o=r.CONTINUE,c=r.SKIP,l=r.EXIT;function d(e,t,n,o){"function"==typeof t&&"function"!=typeof n&&(o=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],o=r?r.children.indexOf(e):null;return n(e,o,r)}),o)}d.CONTINUE=o,d.SKIP=c,d.EXIT=l},1367:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(n(1368));e.exports=function(e){return{remark:u=>u.use(o.default,e)}}},1368:function(e,t,n){"use strict";var r,o=n(1369),c=n(1371),l=n(1372);e.exports=function(e){var data=this.data();!r&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(r=!0,console.warn("[remark-footnotes] Warning: please upgrade to remark 13 to use this plugin"));function t(e,t){data[e]?data[e].push(t):data[e]=[t]}t("micromarkExtensions",o(e)),t("fromMarkdownExtensions",c),t("toMarkdownExtensions",l)}},1369:function(e,t,n){e.exports=function(e){var t={tokenize:C,resolveAll:m},n={add:"after",tokenize:_,resolveAll:m,resolveTo:y},r={tokenize:k,continuation:{tokenize:x},exit:O},text={91:{tokenize:w}};(e||{}).inlineNotes&&(text[93]=n,text[94]=t);return{_hiddenFootnoteSupport:{},document:{91:r},text:text}};var r=n(1251),o=n(1370),c=n(1254),l=n(1418),d=n(1441),f=n(1458),h=n(1459),v={tokenize:function(e,t,n){var r=this;return c(e,(function(code){return 4===d(r.events,"footnoteDefinitionIndent")?t(code):n(code)}),"footnoteDefinitionIndent",5)},partial:!0};function m(e){for(var t,n=e.length,r=-1;++r<n;)t=e[r][1],"enter"===e[r][0]&&"inlineNoteStart"===t.type&&(t.type="data",e.splice(r+1,4),n-=4);return e}function y(e,t){for(var n,text,r,o,c,d=e.length-4;d--;)if(r=e[d][1],"enter"===e[d][0]&&"inlineNoteStart"===r.type){c=d,o="inlineNote";break}n={type:o,start:f(e[c][1].start),end:f(e[e.length-1][1].end)},text={type:"inlineNoteText",start:f(e[c+4][1].end),end:f(e[e.length-3][1].start)};var v=[["enter",n,t],e[c+1],e[c+2],e[c+3],e[c+4],["enter",text,t]];return l(v,v.length,0,h(t.parser.constructs.insideSpan.null,e.slice(c+6,-4),t)),v.push(["exit",text,t],e[e.length-2],e[e.length-3],["exit",n,t]),l(e,d,e.length-d,v),e}function w(e,t,n){var data,o=this,c=o.parser.footnotes||(o.parser.footnotes=[]),l=0;return function(code){return 91!==code?n(code):(e.enter("footnoteCall"),e.enter("footnoteCallLabelMarker"),e.consume(code),e.exit("footnoteCallLabelMarker"),d)};function d(code){return 94!==code?n(code):(e.enter("footnoteCallMarker"),e.consume(code),e.exit("footnoteCallMarker"),e.enter("footnoteCallString"),e.enter("chunkString").contentType="string",f)}function f(code){var d;return null===code||91===code||l++>999?n(code):93===code?data?(e.exit("chunkString"),d=e.exit("footnoteCallString"),c.indexOf(r(o.sliceSerialize(d)))<0?n(code):function(code){return e.enter("footnoteCallLabelMarker"),e.consume(code),e.exit("footnoteCallLabelMarker"),e.exit("footnoteCall"),t}(code)):n(code):(e.consume(code),code<0||32===code||(data=!0),92===code?h:f)}function h(code){return 91===code||92===code||93===code?(e.consume(code),l++,f):f(code)}}function C(e,t,n){return function(code){return 94!==code?n(code):(e.enter("inlineNoteStart"),e.enter("inlineNoteMarker"),e.consume(code),e.exit("inlineNoteMarker"),r)};function r(code){return 91!==code?n(code):(e.enter("inlineNoteStartMarker"),e.consume(code),e.exit("inlineNoteStartMarker"),e.exit("inlineNoteStart"),t)}}function _(e,t,n){var r=this;return function(code){var o,c=r.events.length;for(;c--;)if("inlineNoteStart"===r.events[c][1].type){o=!0;break}if(93!==code||!o)return n(code);return e.enter("inlineNoteEnd"),e.enter("inlineNoteEndMarker"),e.consume(code),e.exit("inlineNoteEndMarker"),e.exit("inlineNoteEnd"),t}}function k(e,t,n){var c,data,l=this,d=l.parser.footnotes||(l.parser.footnotes=[]),f=0;return function(code){if(91!==code)return n(code);return e.enter("footnoteDefinition")._container=!0,e.enter("footnoteDefinitionLabel"),e.enter("footnoteDefinitionLabelMarker"),e.consume(code),e.exit("footnoteDefinitionLabelMarker"),h};function h(code){return 94!==code?n(code):(e.enter("footnoteDefinitionMarker"),e.consume(code),e.exit("footnoteDefinitionMarker"),e.enter("footnoteDefinitionLabelString"),v)}function v(code){var t;return null===code||91===code||f>999?n(code):93===code?data?(t=e.exit("footnoteDefinitionLabelString"),c=r(l.sliceSerialize(t)),e.enter("footnoteDefinitionLabelMarker"),e.consume(code),e.exit("footnoteDefinitionLabelMarker"),e.exit("footnoteDefinitionLabel"),y):n(code):-5===code||-4===code||-3===code?(e.enter("lineEnding"),e.consume(code),e.exit("lineEnding"),f++,v):(e.enter("chunkString").contentType="string",label(code))}function label(code){return null===code||-5===code||-4===code||-3===code||91===code||93===code||f>999?(e.exit("chunkString"),v(code)):(code<0||32===code||(data=!0),f++,e.consume(code),92===code?m:label)}function m(code){return 91===code||92===code||93===code?(e.consume(code),f++,label):label(code)}function y(code){return 58!==code?n(code):(e.enter("definitionMarker"),e.consume(code),e.exit("definitionMarker"),e.check(o,w,C))}function w(code){return l.containerState.initialBlankLine=!0,_(code)}function C(code){return-2===code||-1===code||32===code?(e.enter("footnoteDefinitionWhitespace"),e.consume(code),e.exit("footnoteDefinitionWhitespace"),_(code)):_(code)}function _(code){return d.indexOf(c)<0&&d.push(c),t(code)}}function x(e,t,n){var r=this;return e.check(o,(function(code){r.containerState.initialBlankLine&&(r.containerState.furtherBlankLines=!0);return t(code)}),(function(code){if(r.containerState.furtherBlankLines||-2!==code&&-1!==code&&32!==code)return n(code);return r.containerState.initialBlankLine=void 0,r.containerState.furtherBlankLines=void 0,e.attempt(v,t,n)(code)}))}function O(e){e.exit("footnoteDefinition")}},1370:function(e,t,n){"use strict";var r=n(1457),o=n(1254),c={tokenize:function(e,t,n){return o(e,(function(code){return null===code||r(code)?t(code):n(code)}),"linePrefix")},partial:!0};e.exports=c},1371:function(e,t,n){var r=n(1251);t.canContainEols=["footnote"],t.enter={footnoteDefinition:function(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)},footnoteDefinitionLabelString:function(){this.buffer()},footnoteCall:function(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)},footnoteCallString:function(){this.buffer()},inlineNote:function(e){this.enter({type:"footnote",children:[]},e)}},t.exit={footnoteDefinition:function(e){this.exit(e)},footnoteDefinitionLabelString:function(e){var label=this.resume();this.stack[this.stack.length-1].label=label,this.stack[this.stack.length-1].identifier=r(this.sliceSerialize(e)).toLowerCase()},footnoteCall:function(e){this.exit(e)},footnoteCallString:function(e){var label=this.resume();this.stack[this.stack.length-1].label=label,this.stack[this.stack.length-1].identifier=r(this.sliceSerialize(e)).toLowerCase()},inlineNote:function(e){this.exit(e)}}},1372:function(e,t,n){t.unsafe=[{character:"[",inConstruct:["phrasing","label","reference"]}],t.handlers={footnote:h,footnoteDefinition:function(e,t,n){var o,f=n.enter("footnoteDefinition"),h=n.enter("label"),label="[^"+d(n,r(e),{before:"^",after:"]"})+"]:";return h(),o=l(c(e,n),(function(line,e,t){if(e)return(t?"":"    ")+line;return(t?label:label+" ")+line})),f(),o},footnoteReference:f};var r=n(1373),o=n(1419),c=n(1460),l=n(1461),d=n(1352);function f(e,t,n){var o=n.enter("footnoteReference"),c=n.enter("reference"),l=d(n,r(e),{before:"^",after:"]"});return c(),o(),"[^"+l+"]"}function h(e,t,n){var r=n.enter("footnote"),c=n.enter("label"),l="^["+o(e,n,{before:"[",after:"]"})+"]";return c(),r(),l}f.peek=function(){return"["},h.peek=function(){return"^"}},1373:function(e,t,n){n(30),n(51),e.exports=function(e){if(e.label||!e.identifier)return e.label||"";return e.identifier.replace(o,"$1").replace(c,l)};var r=n(1374),o=/\\([!-/:-@[-`{-~])/g,c=/&(#(\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function l(e,t){return r(t)||e}},1374:function(e,t,n){"use strict";var r;e.exports=function(e){var t,n="&"+e+";";if((r=r||document.createElement("i")).innerHTML=n,59===(t=r.textContent).charCodeAt(t.length-1)&&"semi"!==e)return!1;return t!==n&&t}},1375:function(e,t,n){function r(e,t,n){var r;if(!t)return n;for("string"==typeof t&&(t=[t]),r=-1;++r<t.length;)if(-1!==e.indexOf(t[r]))return!0;return!1}n(80),e.exports=function(e,pattern){return r(e,pattern.inConstruct,!0)&&!r(e,pattern.notInConstruct)}},1376:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(n(1463)),c={strike:"Strikethrough",strikeText:"text",task:"Task list",taskText:"todo",table:"Table",tableHeading:"Heading"};const l='<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 24h38M24 24c16 6 10 20 0 20s-12-8-12-8M36 12s-3-8-12-8-12.564 7.6-8.39 14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 36s4 8 12 8 12.564-7.6 8.39-14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',d='<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M42 20v19a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h21"/><path d="m16 20 10 8L41 7"/></g><defs><clipPath id="a"><path fill="currentColor" d="M0 0h48v48H0z"/></clipPath></defs></svg>',f='<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M40.15 5H7.85A2.85 2.85 0 0 0 5 7.85v32.3A2.85 2.85 0 0 0 7.85 43h32.3A2.85 2.85 0 0 0 43 40.15V7.85A2.85 2.85 0 0 0 40.15 5z" stroke="currentColor" stroke-width="4"/><path d="M17 5v38M31 5v38M5 17h38M5 31h38" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>';e.exports=function({locale:e,...t}={}){const n={...c,...e};return{remark:p=>p.use(o.default,t),actions:[{title:n.strike,icon:l,cheatsheet:`~~${n.strikeText}~~`,handler:{type:"action",click({wrapText:e,editor:t}){e("~~"),t.focus()}}},{title:n.task,icon:d,cheatsheet:"- [ ] "+n.taskText,handler:{type:"action",click({replaceLines:e,editor:t}){e(line=>"- [ ] "+line),t.focus()}}},{title:n.table,icon:f,handler:{type:"action",click({editor:e,appendBlock:t,codemirror:r}){const{line:line}=t(`| ${n.tableHeading} |  |\n| --- | --- |\n|  |  |\n`);e.setSelection(r.Pos(line,2),r.Pos(line,2+n.tableHeading.length)),e.focus()}}}]}}},1377:function(e,t,n){e.exports=n.p+"img/auditing-placeholder.1726838.png"},1378:function(e,t,n){e.exports=n.p+"img/auditing-placeholder-mobile.7c24b8f.png"},1379:function(e,t,n){e.exports={"a11y-dark":()=>n.e(234).then(n.t.bind(null,1568,7)),"a11y-light":()=>n.e(235).then(n.t.bind(null,1569,7)),agate:()=>n.e(236).then(n.t.bind(null,1570,7)),"an-old-hope":()=>n.e(237).then(n.t.bind(null,1571,7)),androidstudio:()=>n.e(238).then(n.t.bind(null,1572,7)),"arduino-light":()=>n.e(239).then(n.t.bind(null,1573,7)),arta:()=>n.e(240).then(n.t.bind(null,1574,7)),ascetic:()=>n.e(241).then(n.t.bind(null,1575,7)),"atelier-cave-dark":()=>n.e(242).then(n.t.bind(null,1576,7)),"atelier-cave-light":()=>n.e(243).then(n.t.bind(null,1577,7)),"atelier-dune-dark":()=>n.e(244).then(n.t.bind(null,1578,7)),"atelier-dune-light":()=>n.e(245).then(n.t.bind(null,1579,7)),"atelier-estuary-dark":()=>n.e(246).then(n.t.bind(null,1580,7)),"atelier-estuary-light":()=>n.e(247).then(n.t.bind(null,1581,7)),"atelier-forest-dark":()=>n.e(248).then(n.t.bind(null,1582,7)),"atelier-forest-light":()=>n.e(249).then(n.t.bind(null,1583,7)),"atelier-heath-dark":()=>n.e(250).then(n.t.bind(null,1584,7)),"atelier-heath-light":()=>n.e(251).then(n.t.bind(null,1585,7)),"atelier-lakeside-dark":()=>n.e(252).then(n.t.bind(null,1586,7)),"atelier-lakeside-light":()=>n.e(253).then(n.t.bind(null,1587,7)),"atelier-plateau-dark":()=>n.e(254).then(n.t.bind(null,1588,7)),"atelier-plateau-light":()=>n.e(255).then(n.t.bind(null,1589,7)),"atelier-savanna-dark":()=>n.e(256).then(n.t.bind(null,1590,7)),"atelier-savanna-light":()=>n.e(257).then(n.t.bind(null,1591,7)),"atelier-seaside-dark":()=>n.e(258).then(n.t.bind(null,1592,7)),"atelier-seaside-light":()=>n.e(259).then(n.t.bind(null,1593,7)),"atelier-sulphurpool-dark":()=>n.e(260).then(n.t.bind(null,1594,7)),"atelier-sulphurpool-light":()=>n.e(261).then(n.t.bind(null,1595,7)),"atom-one-dark-reasonable":()=>n.e(262).then(n.t.bind(null,1596,7)),"atom-one-dark":()=>n.e(263).then(n.t.bind(null,1597,7)),"atom-one-light":()=>n.e(264).then(n.t.bind(null,1598,7)),"brown-paper":()=>n.e(265).then(n.t.bind(null,1599,7)),"codepen-embed":()=>n.e(266).then(n.t.bind(null,1600,7)),"color-brewer":()=>n.e(267).then(n.t.bind(null,1601,7)),darcula:()=>n.e(268).then(n.t.bind(null,1602,7)),dark:()=>n.e(269).then(n.t.bind(null,1603,7)),default:()=>n.e(270).then(n.t.bind(null,1604,7)),docco:()=>n.e(271).then(n.t.bind(null,1605,7)),dracula:()=>n.e(272).then(n.t.bind(null,1606,7)),far:()=>n.e(273).then(n.t.bind(null,1607,7)),foundation:()=>n.e(274).then(n.t.bind(null,1608,7)),"github-gist":()=>n.e(275).then(n.t.bind(null,1609,7)),github:()=>n.e(276).then(n.t.bind(null,1610,7)),gml:()=>n.e(277).then(n.t.bind(null,1611,7)),googlecode:()=>n.e(278).then(n.t.bind(null,1612,7)),"gradient-dark":()=>n.e(279).then(n.t.bind(null,1613,7)),"gradient-light":()=>n.e(280).then(n.t.bind(null,1614,7)),grayscale:()=>n.e(281).then(n.t.bind(null,1615,7)),"gruvbox-dark":()=>n.e(282).then(n.t.bind(null,1616,7)),"gruvbox-light":()=>n.e(283).then(n.t.bind(null,1617,7)),hopscotch:()=>n.e(284).then(n.t.bind(null,1618,7)),hybrid:()=>n.e(285).then(n.t.bind(null,1619,7)),idea:()=>n.e(286).then(n.t.bind(null,1620,7)),"ir-black":()=>n.e(287).then(n.t.bind(null,1621,7)),"isbl-editor-dark":()=>n.e(288).then(n.t.bind(null,1622,7)),"isbl-editor-light":()=>n.e(289).then(n.t.bind(null,1623,7)),"kimbie.dark":()=>n.e(290).then(n.t.bind(null,1624,7)),"kimbie.light":()=>n.e(291).then(n.t.bind(null,1625,7)),lightfair:()=>n.e(292).then(n.t.bind(null,1626,7)),lioshi:()=>n.e(293).then(n.t.bind(null,1627,7)),magula:()=>n.e(294).then(n.t.bind(null,1628,7)),"mono-blue":()=>n.e(295).then(n.t.bind(null,1629,7)),"monokai-sublime":()=>n.e(296).then(n.t.bind(null,1630,7)),monokai:()=>n.e(297).then(n.t.bind(null,1631,7)),"night-owl":()=>n.e(298).then(n.t.bind(null,1632,7)),"nnfx-dark":()=>n.e(299).then(n.t.bind(null,1633,7)),nnfx:()=>n.e(300).then(n.t.bind(null,1634,7)),nord:()=>n.e(301).then(n.t.bind(null,1635,7)),obsidian:()=>n.e(302).then(n.t.bind(null,1636,7)),ocean:()=>n.e(303).then(n.t.bind(null,1637,7)),"paraiso-dark":()=>n.e(304).then(n.t.bind(null,1638,7)),"paraiso-light":()=>n.e(305).then(n.t.bind(null,1639,7)),pojoaque:()=>n.e(306).then(n.t.bind(null,1640,7)),purebasic:()=>n.e(307).then(n.t.bind(null,1641,7)),qtcreator_dark:()=>n.e(308).then(n.t.bind(null,1642,7)),qtcreator_light:()=>n.e(309).then(n.t.bind(null,1643,7)),railscasts:()=>n.e(310).then(n.t.bind(null,1644,7)),rainbow:()=>n.e(311).then(n.t.bind(null,1645,7)),routeros:()=>n.e(312).then(n.t.bind(null,1646,7)),"school-book":()=>n.e(313).then(n.t.bind(null,1647,7)),"shades-of-purple":()=>n.e(314).then(n.t.bind(null,1648,7)),"solarized-dark":()=>n.e(315).then(n.t.bind(null,1649,7)),"solarized-light":()=>n.e(316).then(n.t.bind(null,1650,7)),srcery:()=>n.e(317).then(n.t.bind(null,1651,7)),sunburst:()=>n.e(318).then(n.t.bind(null,1652,7)),"tomorrow-night-blue":()=>n.e(319).then(n.t.bind(null,1653,7)),"tomorrow-night-bright":()=>n.e(320).then(n.t.bind(null,1654,7)),"tomorrow-night-eighties":()=>n.e(321).then(n.t.bind(null,1655,7)),"tomorrow-night":()=>n.e(322).then(n.t.bind(null,1656,7)),tomorrow:()=>n.e(323).then(n.t.bind(null,1657,7)),vs:()=>n.e(324).then(n.t.bind(null,1658,7)),vs2015:()=>n.e(325).then(n.t.bind(null,1659,7)),xcode:()=>n.e(326).then(n.t.bind(null,1660,7)),xt256:()=>n.e(327).then(n.t.bind(null,1661,7)),zenburn:()=>n.e(328).then(n.t.bind(null,1662,7))}},1391:function(e,t,n){},1394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e[e.fold=0]="fold",e[e.header=1]="header",e[e.headerLeft=2]="headerLeft",e[e.headerRight=3]="headerRight",e[e.codeShowNum=4]="codeShowNum",e[e.style=5]="style",e[e.foldBtn=6]="foldBtn",e[e.lang=7]="lang",e[e.lineNum=8]="lineNum",e[e.codeLine=9]="codeLine",e[e.lineNumHide=10]="lineNumHide",e[e.lineNumBtnContainer=11]="lineNumBtnContainer",e[e.lineNumCheckbox=12]="lineNumCheckbox",e[e.lineNumText=13]="lineNumText",e[e.copyCodeBtn=14]="copyCodeBtn"}(r||(r={}));const o=(()=>{const map={};for(const e in r)map[e]="code-block-extension-"+e;return map})(),c=`\n.${o.header}{\n  display: flex;\n  // background-color: inherit;\n  user-select: none;\n  height:28px;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0px 4px 5px -6px #888888;\n  margin-bottom: 3px;\n}\n.${o.header}.${o.fold}{\n  box-shadow: none;\n  margin-bottom:0;\n}\n.${o.headerLeft}, .${o.headerRight}{\n  display: flex;\n  align-items: center;\n}\n.${o.headerLeft}{\n  margin-left: 10px;\n}\n.${o.headerRight}{\n  margin-right:10px;\n}\n\n.${o.headerLeft} > .${o.foldBtn}{\n display:flex;\n align-items: center;\n justify-content: center;\n width: 18px;\n height: 18px;\n filter: invert(0.8);\n}\n.${o.headerLeft} > .${o.foldBtn}:hover{\n  filter: invert(0.5);\n  cursor: pointer;\n}\n.${o.foldBtn} > svg{\n  height:100%;\n}\n.${o.headerLeft} > .${o.foldBtn}.${o.fold}{\n  transform: rotate(-90deg);\n}\n.${o.lang}{\n  margin-left: 20px;\n  font-size: 12px;\n  filter: invert(0.5);\n  opacity:0.6;\n}\n\n.${o.copyCodeBtn}{\n  font-size: 12px;\n  filter: invert(0.5);\n  margin:0 10px;\n  opacity:0.6;\n}\n.${o.copyCodeBtn}:hover{\n  filter: invert(0.7);\n  cursor: pointer;\n}\n\npre > code.${o.fold}{\n  display: none !important;\n}\n\npre > code.${o.codeShowNum} {\n  padding-left: 0 !important;\n}\n\n\n\n.${o.lineNumHide}.${o.codeLine}:before{\n  display: none !important;\n}\n\n.${o.codeLine}{\n  background-color: inherit;\n}\n.${o.codeLine}:before{\n  content: attr(data-line-num);\n  color: gray;\n  user-select: none;\n  background-color: inherit;\n  text-align: center;\n  display: inline-block;\n  width: 18px;\n  padding: 0 10px;\n  box-sizing: content-box;\n  position: sticky;\n  left: 0; \n}\n\n.${o.lineNumBtnContainer}{\n  display:flex;\n  align-items: center;\n}\n.${o.lineNumText}{\n  filter: invert(0.5);\n  font-size: 12px; \n  margin-left:3px;\n}\n.${o.lineNumCheckbox}::before{\n  display: none !important;\n}\n.copy-code-btn{\n  display: none !important;\n}\n.hljs[lang]::before{\n  display: none !important;\n}\n`,l=["mermaid"],d=(e,t)=>{let n="";return null==e||e.classList.forEach(e=>{var r;e.startsWith("language-")&&(n=null!==(r=e.split("-").pop())&&void 0!==r?r:"",n.length>t&&(n=n.slice(0,20)+"..."))}),n},f=(e,t,...n)=>{const element=document.createElement(e);return t&&(element.innerHTML=t),n.length&&element.classList.add(...n),element},h=e=>{if(!e)return;e.classList.add(o.codeShowNum);const t=null==e?void 0:e.innerHTML.split("\n");""===t[t.length-1]&&t.pop(),e.innerHTML="",t.forEach((line,t)=>{const n=f("span",line,o.codeLine);n.dataset.lineNum=String(t+1),e.append(n,"\n")})},v=(e,t)=>{e&&(e.classList.add(o.codeShowNum),t.forEach(e=>e.classList.remove(o.lineNumHide)))},m=(e,t)=>{e&&(e.classList.remove(o.codeShowNum),t.forEach(e=>e.classList.add(o.lineNumHide)))},y=e=>{const{showLanguages:t=!0,defaultFold:n=!1,showFoldButton:r=!0,showLineNumButton:y=!1,showLineNum:w=!0,showCopyCodeButton:C=!0,onFoldChange:_,onLineNumButtonClick:k,onCopyCode:x,langOverflowLength:O=20,onHeaderShow:S,onLineNumShow:P}=null!=e?e:{};return{viewerEffect({markdownBody:e}){(e=>{Array.from(e.getElementsByClassName("copy-code-btn")).forEach(e=>e.remove())})(e);const j=e.querySelectorAll("pre");if(null==j?void 0:j.length){if(!document.getElementsByClassName(o.style).length){const style=f("style",c,o.style);document.head.appendChild(style)}for(const c of j){const j=c.firstElementChild;if(!j)continue;const E=(element=j)?window.getComputedStyle(element).backgroundColor:"inherit",T=d(j,O);if(l.includes(T))continue;const V=f("div",null,o.header);V.style.backgroundColor=E;const L=f("div",null,o.headerLeft),I=f("div",null,o.headerRight);if(c.insertBefore(V,j),null==S||S(V),V.append(L,I),h(j),r){const e=f("div",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z"  data-name="Down"/></svg>',o.foldBtn);e.onclick=()=>{e.classList.toggle(o.fold),null==j||j.classList.toggle(o.fold),V.classList.toggle(o.fold),null==_||_(e.classList.contains(o.fold))},L.appendChild(e),n&&(e.classList.add(o.fold),null==j||j.classList.add(o.fold))}if(t){const e=f("span",T,o.lang);L.appendChild(e)}const R=Array.from(e.getElementsByClassName(o.codeLine));if(w?null==P||P(j):m(j,R),C){const e=f("div","复制代码",o.copyCodeBtn);e.onclick=()=>{var e;const content=null!==(e=null==j?void 0:j.textContent)&&void 0!==e?e:"";null==x||x(content)},I.append(e)}if(y){const e="showLineNum";let t="true"===localStorage.getItem(e);const n=f("div",null,o.lineNumBtnContainer),r=f("input",null,o.lineNumCheckbox);r.type="checkbox",r.checked=t,t?v(j,R):m(j,R),r.onchange=n=>{var r;const c=Array.from(document.getElementsByClassName(o.codeLine)),l=Array.from(document.getElementsByClassName(o.lineNumCheckbox)),d=null===(r=n.target)||void 0===r?void 0:r.checked;null==k||k(d),localStorage.setItem(e,d),l.forEach(e=>e.checked=d),t=d,t?v(j,c):m(j,c)};const text=f("span","行号",o.lineNumText);I.appendChild(n),n.append(r,text)}}var element}}}};t.codeBlockExtension=y,t.default=y},1395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o;function o(e){if(null==e)return c;if("string"==typeof e)return function(e){return function(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=o(e[n]);return function(){var e=-1;for(;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function c(){return!0}var l=function(e){return e};var d=f;function f(e,t,n,o){var c,d;"function"==typeof t&&"function"!=typeof n&&(o=n,n=t,t=null),d=r(t),c=o?-1:1,function e(r,f,h){var v,m="object"==typeof r&&null!==r?r:{};"string"==typeof m.type&&(v="string"==typeof m.tagName?m.tagName:"string"==typeof m.name?m.name:void 0,y.displayName="node ("+l(m.type+(v?"<"+v+">":""))+")");return y;function y(){var l,v,m=h.concat(r),y=[];if((!t||d(r,f,h[h.length-1]||null))&&!1===(y=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[!0,e];return[e]}(n(r,h)))[0])return y;if(r.children&&"skip"!==y[0])for(v=(o?r.children.length:-1)+c;v>-1&&v<r.children.length;){if(!1===(l=e(r.children[v],v,m)())[0])return l;v="number"==typeof l[1]?l[1]:v+c}return y}}(e,null,[])()}f.CONTINUE=!0,f.SKIP="skip",f.EXIT=!1;var h=w,v=d.CONTINUE,m=d.SKIP,y=d.EXIT;function w(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),d(e,t,(function(e,t){var r=t[t.length-1],o=r?r.children.indexOf(e):null;return n(e,o,r)}),r)}w.CONTINUE=v,w.SKIP=m,w.EXIT=y;var C=function(){for(var e={},i=0;i<arguments.length;i++){var source=arguments[i];for(var t in source)_.call(source,t)&&(e[t]=source[t])}return e},_=Object.prototype.hasOwnProperty;var k=O,x=O.prototype;function O(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}x.space=null,x.normal={},x.property={};var S=function(e){var t,n,r=e.length,o=[],c=[],l=-1;for(;++l<r;)t=e[l],o.push(t.property),c.push(t.normal),n=t.space;return new k(C.apply(null,o),C.apply(null,c),n)};var P=function(e){return e.toLowerCase()};var j=T,E=T.prototype;function T(e,t){this.property=e,this.attribute=t}E.space=null,E.attribute=null,E.property=null,E.boolean=!1,E.booleanish=!1,E.overloadedBoolean=!1,E.number=!1,E.commaSeparated=!1,E.spaceSeparated=!1,E.commaOrSpaceSeparated=!1,E.mustUseProperty=!1,E.defined=!1;var V=0;function L(){return Math.pow(2,++V)}var I={boolean:L(),booleanish:L(),overloadedBoolean:L(),number:L(),spaceSeparated:L(),commaSeparated:L(),commaOrSpaceSeparated:L()},R=M;M.prototype=new j,M.prototype.defined=!0;var A=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],D=A.length;function M(e,t,mask,n){var r,o=-1;for(mark(this,"space",n),j.call(this,e,t);++o<D;)mark(this,r=A[o],(mask&I[r])===I[r])}function mark(e,t,n){n&&(e[t]=n)}var B=function(e){var t,n,r=e.space,o=e.mustUseProperty||[],c=e.attributes||{},l=e.properties,d=e.transform,f={},h={};for(t in l)n=new R(t,d(c,t),l[t],r),-1!==o.indexOf(t)&&(n.mustUseProperty=!0),f[t]=n,h[P(t)]=t,h[P(n.attribute)]=t;return new k(f,h,r)};var N=B({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}});var F=B({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});var H=function(e,t){return t in e?e[t]:t};var U=function(e,t){return H(e,t.toLowerCase())};var z=B({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:U,properties:{xmlns:null,xmlnsXLink:null}}),$=I.booleanish,G=I.number,W=I.spaceSeparated,Z=B({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:$,ariaAutoComplete:null,ariaBusy:$,ariaChecked:$,ariaColCount:G,ariaColIndex:G,ariaColSpan:G,ariaControls:W,ariaCurrent:null,ariaDescribedBy:W,ariaDetails:null,ariaDisabled:$,ariaDropEffect:W,ariaErrorMessage:null,ariaExpanded:$,ariaFlowTo:W,ariaGrabbed:$,ariaHasPopup:null,ariaHidden:$,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:W,ariaLevel:G,ariaLive:null,ariaModal:$,ariaMultiLine:$,ariaMultiSelectable:$,ariaOrientation:null,ariaOwns:W,ariaPlaceholder:null,ariaPosInSet:G,ariaPressed:$,ariaReadOnly:$,ariaRelevant:null,ariaRequired:$,ariaRoleDescription:W,ariaRowCount:G,ariaRowIndex:G,ariaRowSpan:G,ariaSelected:$,ariaSetSize:G,ariaSort:null,ariaValueMax:G,ariaValueMin:G,ariaValueNow:G,ariaValueText:null,role:null}});var K=I.boolean,Y=I.booleanish,X=I.number,J=I.spaceSeparated,Q=I.commaSeparated,ee=S([F,N,z,Z,B({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:U,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Q,acceptCharset:J,accessKey:J,action:null,allow:null,allowFullScreen:K,allowPaymentRequest:K,allowUserMedia:K,alt:null,as:null,async:K,autoCapitalize:null,autoComplete:J,autoFocus:K,autoPlay:K,capture:K,charSet:null,checked:K,cite:null,className:J,cols:X,colSpan:null,content:null,contentEditable:Y,controls:K,controlsList:J,coords:X|Q,crossOrigin:null,data:null,dateTime:null,decoding:null,default:K,defer:K,dir:null,dirName:null,disabled:K,download:I.overloadedBoolean,draggable:Y,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:K,formTarget:null,headers:J,height:X,hidden:K,high:X,href:null,hrefLang:null,htmlFor:J,httpEquiv:J,id:null,imageSizes:null,imageSrcSet:Q,inputMode:null,integrity:null,is:null,isMap:K,itemId:null,itemProp:J,itemRef:J,itemScope:K,itemType:J,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:K,low:X,manifest:null,max:null,maxLength:X,media:null,method:null,min:null,minLength:X,multiple:K,muted:K,name:null,nonce:null,noModule:K,noValidate:K,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:K,optimum:X,pattern:null,ping:J,placeholder:null,playsInline:K,poster:null,preload:null,readOnly:K,referrerPolicy:null,rel:J,required:K,reversed:K,rows:X,rowSpan:X,sandbox:J,scope:null,scoped:K,seamless:K,selected:K,shape:null,size:X,sizes:null,slot:null,span:X,spellCheck:Y,src:null,srcDoc:null,srcLang:null,srcSet:Q,start:X,step:null,style:null,tabIndex:X,target:null,title:null,translate:null,type:null,typeMustMatch:K,useMap:null,value:Y,width:X,wrap:null,align:null,aLink:null,archive:J,axis:null,background:null,bgColor:null,border:X,borderColor:null,bottomMargin:X,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:K,declare:K,event:null,face:null,frame:null,frameBorder:null,hSpace:X,leftMargin:X,link:null,longDesc:null,lowSrc:null,marginHeight:X,marginWidth:X,noResize:K,noHref:K,noShade:K,noWrap:K,object:null,profile:null,prompt:null,rev:null,rightMargin:X,rules:null,scheme:null,scrolling:Y,standby:null,summary:null,text:null,topMargin:X,valueType:null,version:null,vAlign:null,vLink:null,vSpace:X,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:K,disableRemotePlayback:K,prefix:null,property:null,results:X,security:null,unselectable:null}})]),te=function(e,t){var n=P(t),r=t,o=j;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&"data"===n.slice(0,4)&&ne.test(t)&&("-"===t.charAt(4)?r=function(e){var t=e.slice(5).replace(ie,ae);return"data"+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(ie.test(t))return e;"-"!==(t=t.replace(re,oe)).charAt(0)&&(t="-"+t);return"data"+t}(t),o=R);return new o(r,t)},ne=/^data[-\w.:]+$/i,ie=/-[a-z]/g,re=/[A-Z]/g;function oe(e){return"-"+e.toLowerCase()}function ae(e){return e.charAt(1).toUpperCase()}var se=function(e,t){var n,r,o,c=e||"",l=t||"div",d={},f=0;for(;f<c.length;)ce.lastIndex=f,o=ce.exec(c),(n=c.slice(f,o?o.index:c.length))&&(r?"#"===r?d.id=n:d.className?d.className.push(n):d.className=[n]:l=n,f+=n.length),o&&(r=o[0],f++);return{type:"element",tagName:l,properties:d,children:[]}},ce=/[#.]/g;var le=function(e){var input=String(e||"").trim();return""===input?[]:input.split(ue)},ue=/[ \t\n\r\f]+/g;var de={parse:le,stringify:function(e){return e.join(" ").trim()}}.parse,fe={parse:function(e){var t,n=[],input=String(e||""),r=input.indexOf(","),o=0,c=!1;for(;!c;)-1===r&&(r=input.length,c=!0),!(t=input.slice(o,r).trim())&&c||n.push(t),o=r+1,r=input.indexOf(",",o);return n},stringify:function(e,t){var n=t||{},r=!1===n.padLeft?"":" ",o=n.padRight?" ":"";""===e[e.length-1]&&(e=e.concat(""));return e.join(o+","+r).trim()}}.parse,he=function(e,t,n){var r=n?function(e){var t,n=e.length,r=-1,o={};for(;++r<n;)t=e[r],o[t.toLowerCase()]=t;return o}(n):null;return function(e,n){var c,l=se(e,t),d=Array.prototype.slice.call(arguments,2),f=l.tagName.toLowerCase();l.tagName=r&&pe.call(r,f)?r[f]:f,n&&ve(n,l)&&(d.unshift(n),n=null);if(n)for(c in n)o(l.properties,c,n[c]);ge(l.children,d),"template"===l.tagName&&(l.content={type:"root",children:l.children},l.children=[]);return l};function o(t,n,r){var o,c,l;null!=r&&r==r&&(c=(o=te(e,n)).property,"string"==typeof(l=r)&&(o.spaceSeparated?l=de(l):o.commaSeparated?l=fe(l):o.commaOrSpaceSeparated&&(l=de(fe(l).join(" ")))),"style"===c&&"string"!=typeof r&&(l=function(e){var t,n=[];for(t in e)n.push([t,e[t]].join(": "));return n.join("; ")}(l)),"className"===c&&t.className&&(l=t.className.concat(l)),t[c]=function(e,t,n){var r,o,c;if("object"!=typeof n||!("length"in n))return me(e,t,n);o=n.length,r=-1,c=[];for(;++r<o;)c[r]=me(e,t,n[r]);return c}(o,c,l))}},pe={}.hasOwnProperty;function ve(e,t){return"string"==typeof e||"length"in e||function(e,t){var n=t.type;if("input"===e||!n||"string"!=typeof n)return!1;if("object"==typeof t.children&&"length"in t.children)return!0;if(n=n.toLowerCase(),"button"===e)return"menu"!==n&&"submit"!==n&&"reset"!==n&&"button"!==n;return"value"in t}(t.tagName,e)}function ge(e,t){var n,r;if("string"!=typeof t&&"number"!=typeof t)if("object"==typeof t&&"length"in t)for(n=-1,r=t.length;++n<r;)ge(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");e.push(t)}else e.push({type:"text",value:String(t)})}function me(e,t,n){var r=n;return e.number||e.positiveNumber?isNaN(r)||""===r||(r=Number(r)):(e.boolean||e.overloadedBoolean)&&("string"!=typeof r||""!==r&&P(n)!==P(t)||(r=!0)),r}var html=he(ee,"div");html.displayName="html";var ye=html;const be="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8e14f9701a846b389ec138eb2b6349a~tplv-k3u1fbpfcp-jj:0:0:0:0:q75.image#?w=1008&h=483&s=7674&e=png&b=000000",we={whiteListConfig:[{domain:"ixigua.com",placeholder:be,idToIframeUrl:e=>{const{id:t,autoPlay:n}=e;return`https://www.ixigua.com/iframe/${t}?autoplay=${n?1:0}`},fullScreen:!0,idReg:/ixigua\.com\/(\d+)/,referrerPolicy:"unsafe-url",frameBorder:0}],placeholder:be},Ce=["jvideo"],_e="width:100%;aspect-ratio: 16/9;border-radius:8px;border:0.5px solid rgba(128,128,128,0.4);",ke='\n<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.78953 0.214554L7.60142 3.02641H8.30444L11.1166 0.214554C11.2389 0.0923144 11.4313 0.0829113 11.5643 0.186345L11.5962 0.214554L12.0758 0.694114C12.1981 0.816354 12.2075 1.0087 12.1041 1.14173L12.0758 1.17367L10.2226 3.02641L15.121 3.02667C15.4785 3.02667 15.7715 3.30334 15.7974 3.65426L15.7992 3.70487V14.217C15.7992 14.5745 15.5225 14.8674 15.1716 14.8933L15.121 14.8952H0.87748C0.519913 14.8952 0.226971 14.6185 0.201079 14.2676L0.199219 14.217V3.70487C0.199219 3.34734 0.475908 3.05442 0.82686 3.02853L0.87748 3.02667L5.6833 3.02641L3.83032 1.17367C3.69789 1.04125 3.69789 0.826541 3.83032 0.694114L4.30993 0.214554C4.44237 0.0821277 4.65709 0.0821277 4.78953 0.214554ZM14.4434 4.38274H1.55646V13.5384H14.4434V4.38274ZM6.64199 6.5155C6.70475 6.5155 6.76628 6.53291 6.81973 6.5658L10.2422 8.67176C10.4017 8.76991 10.4515 8.97878 10.3533 9.13828C10.3255 9.18349 10.2874 9.22153 10.2422 9.24935L6.81973 11.3553C6.66022 11.4535 6.45133 11.4037 6.35317 11.2442C6.32028 11.1908 6.30286 11.1293 6.30286 11.0665V6.8546C6.30286 6.66732 6.4547 6.5155 6.64199 6.5155Z" fill="#1D2129"/>\n</svg>\n';t.videoEditor=function(e){const{handleShowUploader:t,showNewIcon:n=!0,localStorageKey:r="jj-video-used",visible:o=!1}=e;return"undefined"==typeof localStorage||Boolean(localStorage.getItem(r)),o?{actions:[{icon:ke,title:"上传视频",handler:{type:"action",click:({editor:e})=>{localStorage.setItem(r,"true"),Array.from(document.querySelectorAll(".bytemd-toolbar .jj-video-new-tag")).forEach(e=>e.style.display="none"),t(content=>{e.replaceSelection(content)})}}}]}:{}},t.videoViewer=function(e){const{whiteListConfig:t,className:n,placeholder:r,onLoad:o}=null!=e?e:we;return{rehype:p=>p.use(()=>(e,o)=>{h(e,"element",(e,c,l)=>{var d,f,h;if("a"===e.tagName)try{const c=null===(d=null==e?void 0:e.properties)||void 0===d?void 0:d.href;if(!c)return;if(!Ce.includes(null===(f=e.children[0])||void 0===f?void 0:f.value))return;const{host:l}=new URL(c),v=null==t?void 0:t.find(e=>l.includes(e.domain));if(!v)return;o.hasVideo=o.hasVideo?o.hasVideo+1:1,e.tagName="span",e.properties&&(e.properties.class="jj-video-container",e.properties.style="box-sizing:border-box;display:block;");const m=((e,t)=>{var n;const{idReg:r}=t;return null===(n=e.match(r))||void 0===n?void 0:n[1]})(c,v);if(!m)return void console.log("failed to get video id");const{idToIframeUrl:y,fullScreen:w,referrerPolicy:C,frameBorder:_=0}=v,k=y({id:m});if(!k)return;const x=ye("iframe",{class:["jj-video-frame",n].join(" "),style:"position:absolute;visibility:hidden;"+_e,src:k,loading:"lazy",allowFullscreen:w,frameborder:_,referrerpolicy:C}),O=null!==(h=v.placeholder)&&void 0!==h?h:r,S=ye("span",{class:["jj-video-placeholder"].join(" ")},[ye("img",{class:["jj-video-placeholder-img"].join(" "),src:O,style:""+_e})]);e.children=[x,S]}catch(e){}})}),viewerEffect({markdownBody:e}){const t=Array.from(e.querySelectorAll(".jj-video-container"));for(const e of t){const iframe=e.querySelector("iframe"),t=e.querySelector(".jj-video-placeholder");if(!iframe)return;iframe.onload=e=>{console.log("jj video load"),null==t||t.remove(),iframe.style.position="static",iframe.style.visibility="visible",null==o||o(e)}}}}}},1396:function(e,t,n){},1397:function(e,t,n){},1398:function(e,t,n){},1399:function(e,t,n){},1400:function(e,t,n){},1401:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return k}));n(19);var r=n(5),o=n(3),c=n(7),l=n(69),d=n(26),f=n(17),h=n(246),v=n(65);function m(e){var t=Object(h.i)({maxDurationMS:9e4}),n=t.stayDuration,f=t.isCancelled,v=t.cancel;function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ViewContent,item_id:t});case 5:(n=e.sent).err_no!==c.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):v(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("error reportViewContentJScore err:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(o.z)((function(){n.value>=9e4&&function(e){m.apply(this,arguments)}(e)}))}function y(){return w.apply(this,arguments)}function w(){return(w=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],n=t?Object(v.f)(sessionStorage.getItem(f.b.reportBindPhoneJScore)||"null"):{growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.BindPhone,item_id:"0"}){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t||sessionStorage.setItem(f.b.reportBindPhoneJScore,JSON.stringify(n)),e.next=8,l.a.AddPointReport(n);case 8:(r=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(r.err_msg)),sessionStorage.removeItem(f.b.reportBindPhoneJScore),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.warn("error reportBindPhoneJScore, set to sessionStorage, ".concat(JSON.stringify(n)," err:"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}function C(){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportUploadAvatarJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.AddPointReport({growth_type:d.GrowthType.JScore,task_id:d.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(t=e.sent).err_no!==c.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportModifyScreenNameJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},1402:function(e,t,n){(function(t){e.exports=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n=function(e){return e&&e.Math==Math&&e},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},o=function(e){try{return!!e()}catch(e){return!0}},c=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,d=l&&!a.call({1:2},1);s.f=d?function(e){var t=l(this,e);return!!t&&t.enumerable}:a;var u,f,h=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},v={}.toString,p=function(e){return v.call(e).slice(8,-1)},m=p,g="".split,y=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==m(e)?g.call(e,""):Object(e)}:Object,w=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},C=y,b=w,_=function(e){return C(b(e))},k=function(e){return"object"==typeof e?null!==e:"function"==typeof e},x=r,O=function(e){return"function"==typeof e?e:void 0},S=function(e,t){return arguments.length<2?O(x[e]):x[e]&&x[e][t]},P=S("navigator","userAgent")||"",j=r,E=P,T=j.process,V=j.Deno,L=T&&T.versions||V&&V.version,I=L&&L.v8;I?f=(u=I.split("."))[0]<4?1:u[0]+u[1]:E&&(!(u=E.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=E.match(/Chrome\/(\d+)/))&&(f=u[1]);var R=f&&+f,A=R,D=o,M=!!Object.getOwnPropertySymbols&&!D((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&A&&A<41})),B=M&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,N=S,F=B?function(e){return"symbol"==typeof e}:function(e){var t=N("Symbol");return"function"==typeof t&&Object(e)instanceof t},H=k,U={exports:{}},z=r,$=function(e,t){try{Object.defineProperty(z,e,{value:t,configurable:!0,writable:!0})}catch(n){z[e]=t}return t},G=$,W="__core-js_shared__",Z=r[W]||G(W,{}),K=Z;(U.exports=function(e,t){return K[e]||(K[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var Y=w,q=function(e){return Object(Y(e))},X=q,J={}.hasOwnProperty,Q=Object.hasOwn||function(e,t){return J.call(X(e),t)},ee=0,te=Math.random(),ne=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++ee+te).toString(36)},ie=r,re=U.exports,oe=Q,ae=ne,se=M,ce=B,le=re("wks"),ue=ie.Symbol,de=ce?ue:ue&&ue.withoutSetter||ae,fe=function(e){return oe(le,e)&&(se||"string"==typeof le[e])||(se&&oe(ue,e)?le[e]=ue[e]:le[e]=de("Symbol."+e)),le[e]},he=k,pe=F,ve=fe("toPrimitive"),ge=function(e,t){if(!he(e)||pe(e))return e;var n,i=e[ve];if(void 0!==i){if(void 0===t&&(t="default"),n=i.call(e,t),!he(n)||pe(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!H(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!H(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!H(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(e,t)},me=ge,ye=F,be=function(e){var t=me(e,"string");return ye(t)?t:String(t)},we=k,Ce=r.document,_e=we(Ce)&&we(Ce.createElement),ke=function(e){return _e?Ce.createElement(e):{}},xe=ke,Oe=!c&&!o((function(){return 7!=Object.defineProperty(xe("div"),"a",{get:function(){return 7}}).a})),Se=c,Pe=s,je=h,Ee=_,Te=be,Ve=Q,Le=Oe,Ie=Object.getOwnPropertyDescriptor;i.f=Se?Ie:function(e,t){if(e=Ee(e),t=Te(t),Le)try{return Ie(e,t)}catch(e){}if(Ve(e,t))return je(!Pe.f.call(e,t),e[t])};var Re={},Ae=k,De=function(e){if(!Ae(e))throw TypeError(String(e)+" is not an object");return e},Me=c,Be=Oe,Ne=De,Fe=be,He=Object.defineProperty;Re.f=Me?He:function(e,t,n){if(Ne(e),t=Fe(t),Ne(n),Be)try{return He(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Ue=Re,ze=h,$e=c?function(e,t,n){return Ue.f(e,t,ze(1,n))}:function(e,t,n){return e[t]=n,e},Ge={exports:{}},We=Z,qe=Function.toString;"function"!=typeof We.inspectSource&&(We.inspectSource=function(e){return qe.call(e)});var Ze,Ke,Ye,Xe=We.inspectSource,Je=Xe,Qe=r.WeakMap,et="function"==typeof Qe&&/native code/.test(Je(Qe)),tt=U.exports,nt=ne,it=tt("keys"),rt=function(e){return it[e]||(it[e]=nt(e))},ot={},at=et,st=k,ct=$e,lt=Q,ut=Z,ft=rt,ht=ot,dt="Object already initialized",pt=r.WeakMap;if(at||ut.state){var vt=ut.state||(ut.state=new pt),gt=vt.get,mt=vt.has,yt=vt.set;Ze=function(e,t){if(mt.call(vt,e))throw new TypeError(dt);return t.facade=e,yt.call(vt,e,t),t},Ke=function(e){return gt.call(vt,e)||{}},Ye=function(e){return mt.call(vt,e)}}else{var bt=ft("state");ht[bt]=!0,Ze=function(e,t){if(lt(e,bt))throw new TypeError(dt);return t.facade=e,ct(e,bt,t),t},Ke=function(e){return lt(e,bt)?e[bt]:{}},Ye=function(e){return lt(e,bt)}}var wt={set:Ze,get:Ke,has:Ye,enforce:function(e){return Ye(e)?Ke(e):Ze(e,{})},getterFor:function(e){return function(t){var n;if(!st(t)||(n=Ke(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ct=r,_t=$e,kt=Q,xt=$,Ot=Xe,St=wt.get,Pt=wt.enforce,jt=String(String).split("String");(Ge.exports=function(e,t,n,i){var r,o=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||kt(n,"name")||_t(n,"name",t),(r=Pt(n)).source||(r.source=jt.join("string"==typeof t?t:""))),e!==Ct?(o?!a&&e[t]&&(s=!0):delete e[t],s?e[t]=n:_t(e,t,n)):s?e[t]=n:xt(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&St(this).source||Ot(this)}));var Et={},Tt=Math.ceil,Vt=Math.floor,Lt=function(e){return isNaN(e=+e)?0:(e>0?Vt:Tt)(e)},It=Lt,Rt=Math.min,At=function(e){return e>0?Rt(It(e),9007199254740991):0},Dt=Lt,Mt=Math.max,Bt=Math.min,Nt=function(e,t){var n=Dt(e);return n<0?Mt(n+t,0):Bt(n,t)},Ft=_,Ht=At,Ut=Nt,zt=function(e){return function(t,n,i){var r,o=Ft(t),s=Ht(o.length),a=Ut(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},$t={includes:zt(!0),indexOf:zt(!1)},Gt=Q,Wt=_,qt=$t.indexOf,Zt=ot,Kt=function(e,t){var n,i=Wt(e),r=0,o=[];for(n in i)!Gt(Zt,n)&&Gt(i,n)&&o.push(n);for(;t.length>r;)Gt(i,n=t[r++])&&(~qt(o,n)||o.push(n));return o},Yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xt=Kt,Jt=Yt.concat("length","prototype");Et.f=Object.getOwnPropertyNames||function(e){return Xt(e,Jt)};var Qt={};Qt.f=Object.getOwnPropertySymbols;var en,tn=Et,nn=Qt,rn=De,on=S("Reflect","ownKeys")||function(e){var t=tn.f(rn(e)),n=nn.f;return n?t.concat(n(e)):t},an=Q,sn=on,cn=i,ln=Re,un=o,dn=/#|\.prototype\./,fn=function(e,t){var n=pn[hn(e)];return n==gn||n!=vn&&("function"==typeof t?un(t):!!t)},hn=fn.normalize=function(e){return String(e).replace(dn,".").toLowerCase()},pn=fn.data={},vn=fn.NATIVE="N",gn=fn.POLYFILL="P",mn=fn,yn=r,bn=i.f,wn=$e,Cn=Ge.exports,_n=$,kn=function(e,t){for(var n=sn(t),i=ln.f,r=cn.f,o=0;o<n.length;o++){var s=n[o];an(e,s)||i(e,s,r(t,s))}},xn=mn,On=function(e,t){var n,i,r,o,s,a=e.target,c=e.global,l=e.stat;if(n=c?yn:l?yn[a]||_n(a,{}):(yn[a]||{}).prototype)for(i in t){if(o=t[i],r=e.noTargetGet?(s=bn(n,i))&&s.value:n[i],!xn(c?i:a+(l?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;kn(o,r)}(e.sham||r&&r.sham)&&wn(o,"sham",!0),Cn(n,i,o,e)}},Sn=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Pn=Kt,jn=Yt,En=Object.keys||function(e){return Pn(e,jn)},Tn=Re,Vn=De,Ln=En,In=c?Object.defineProperties:function(e,t){Vn(e);for(var n,i=Ln(t),r=i.length,o=0;r>o;)Tn.f(e,n=i[o++],t[n]);return e},Rn=S("document","documentElement"),An=De,Dn=In,Mn=Yt,Bn=ot,Nn=Rn,Fn=ke,Hn=rt("IE_PROTO"),Un=function(){},zn=function(e){return"<script>"+e+"<\/script>"},$n=function(e){e.write(zn("")),e.close();var t=e.parentWindow.Object;return e=null,t},Gn=function(){try{en=new ActiveXObject("htmlfile")}catch(e){}var e,t;Gn="undefined"!=typeof document?document.domain&&en?$n(en):((t=Fn("iframe")).style.display="none",Nn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(zn("document.F=Object")),e.close(),e.F):$n(en);for(var n=Mn.length;n--;)delete Gn.prototype[Mn[n]];return Gn()};Bn[Hn]=!0;var Wn=Object.create||function(e,t){var n;return null!==e?(Un.prototype=An(e),n=new Un,Un.prototype=null,n[Hn]=e):n=Gn(),void 0===t?n:Dn(n,t)},qn=Sn,Zn=k,Kn=[].slice,Yn={},Xn=function(e,t,n){if(!(t in Yn)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";Yn[t]=Function("C,a","return new C("+i.join(",")+")")}return Yn[t](e,n)},Jn=Function.bind||function(e){var t=qn(this),n=Kn.call(arguments,1),i=function(){var r=n.concat(Kn.call(arguments));return this instanceof i?Xn(t,r.length,r):t.apply(e,r)};return Zn(t.prototype)&&(i.prototype=t.prototype),i},Qn=On,ei=Sn,ti=De,ni=k,ii=Wn,ri=Jn,oi=o,ai=S("Reflect","construct"),si=oi((function(){function e(){}return!(ai((function(){}),[],e)instanceof e)})),ci=!oi((function(){ai((function(){}))})),li=si||ci;function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(e,t){if(t&&("object"===hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pi(e)}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qn({target:"Reflect",stat:!0,forced:li,sham:li},{construct:function(e,t){ei(e),ti(t);var n=arguments.length<3?e:ei(arguments[2]);if(ci&&!si)return ai(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(ri.apply(e,i))}var r=n.prototype,o=ii(ni(r)?r:Object.prototype),s=Function.apply.call(e,o,t);return ni(s)?s:o}});var yi=p,bi=Array.isArray||function(e){return"Array"==yi(e)},wi=F,Ci=function(e){if(wi(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},_i={},ki=_,xi=Et.f,Oi={}.toString,Si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_i.f=function(e){return Si&&"[object Window]"==Oi.call(e)?function(e){try{return xi(e)}catch(e){return Si.slice()}}(e):xi(ki(e))};var Pi={},ji=fe;Pi.f=ji;var Ei=r,Ti=Q,Vi=Pi,Li=Re.f,Ii=Re.f,Ri=Q,Ai=fe("toStringTag"),Di=function(e,t,n){e&&!Ri(e=n?e:e.prototype,Ai)&&Ii(e,Ai,{configurable:!0,value:t})},Mi=Sn,Bi=function(e,t,n){if(Mi(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},Ni=k,Fi=bi,Hi=fe("species"),Ui=function(e,t){return new(function(e){var t;return Fi(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Fi(t.prototype)?Ni(t)&&null===(t=t[Hi])&&(t=void 0):t=void 0),void 0===t?Array:t}(e))(0===t?0:t)},zi=Bi,$i=y,Gi=q,Wi=At,qi=Ui,Zi=[].push,Ki=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,u,d){for(var f,h,p=Gi(c),v=$i(p),g=zi(l,u,3),m=Wi(v.length),y=0,w=d||qi,b=t?w(c,m):n||s?w(c,0):void 0;m>y;y++)if((a||y in v)&&(h=g(f=v[y],y,p),e))if(t)b[y]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:Zi.call(b,f)}else switch(e){case 4:return!1;case 7:Zi.call(b,f)}return o?-1:i||r?r:b}},Yi={forEach:Ki(0),map:Ki(1),filter:Ki(2),some:Ki(3),every:Ki(4),find:Ki(5),findIndex:Ki(6),filterReject:Ki(7)},Xi=On,Ji=r,Qi=S,tr=c,er=M,nr=o,ir=Q,rr=bi,or=k,ar=F,sr=De,cr=q,lr=_,hr=be,ur=Ci,dr=h,fr=Wn,pr=En,vr=Et,gr=_i,mr=Qt,yr=i,br=Re,wr=s,Cr=$e,_r=Ge.exports,kr=U.exports,xr=ot,Or=ne,Sr=fe,Pr=Pi,jr=Di,Er=wt,Tr=Yi.forEach,Vr=rt("hidden"),Lr="Symbol",Ir=Sr("toPrimitive"),Rr=Er.set,Ar=Er.getterFor(Lr),Dr=Object.prototype,Mr=Ji.Symbol,Br=Qi("JSON","stringify"),Nr=yr.f,Fr=br.f,Hr=gr.f,Ur=wr.f,zr=kr("symbols"),$r=kr("op-symbols"),Gr=kr("string-to-symbol-registry"),Wr=kr("symbol-to-string-registry"),qr=kr("wks"),Zr=Ji.QObject,Kr=!Zr||!Zr.prototype||!Zr.prototype.findChild,Yr=tr&&nr((function(){return 7!=fr(Fr({},"a",{get:function(){return Fr(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Nr(Dr,t);i&&delete Dr[t],Fr(e,t,n),i&&e!==Dr&&Fr(Dr,t,i)}:Fr,Xr=function(e,t){var n=zr[e]=fr(Mr.prototype);return Rr(n,{type:Lr,tag:e,description:t}),tr||(n.description=t),n},Jr=function(e,t,n){e===Dr&&Jr($r,t,n),sr(e);var i=hr(t);return sr(n),ir(zr,i)?(n.enumerable?(ir(e,Vr)&&e[Vr][i]&&(e[Vr][i]=!1),n=fr(n,{enumerable:dr(0,!1)})):(ir(e,Vr)||Fr(e,Vr,dr(1,{})),e[Vr][i]=!0),Yr(e,i,n)):Fr(e,i,n)},Qr=function(e,t){sr(e);var n=lr(t),i=pr(n).concat(io(n));return Tr(i,(function(t){tr&&!eo.call(n,t)||Jr(e,t,n[t])})),e},eo=function(e){var t=hr(e),n=Ur.call(this,t);return!(this===Dr&&ir(zr,t)&&!ir($r,t))&&(!(n||!ir(this,t)||!ir(zr,t)||ir(this,Vr)&&this[Vr][t])||n)},to=function(e,t){var n=lr(e),i=hr(t);if(n!==Dr||!ir(zr,i)||ir($r,i)){var r=Nr(n,i);return!r||!ir(zr,i)||ir(n,Vr)&&n[Vr][i]||(r.enumerable=!0),r}},no=function(e){var t=Hr(lr(e)),n=[];return Tr(t,(function(e){ir(zr,e)||ir(xr,e)||n.push(e)})),n},io=function(e){var t=e===Dr,n=Hr(t?$r:lr(e)),i=[];return Tr(n,(function(e){!ir(zr,e)||t&&!ir(Dr,e)||i.push(zr[e])})),i};er||(_r((Mr=function(){if(this instanceof Mr)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?ur(arguments[0]):void 0,t=Or(e),n=function(e){this===Dr&&n.call($r,e),ir(this,Vr)&&ir(this[Vr],t)&&(this[Vr][t]=!1),Yr(this,t,dr(1,e))};return tr&&Kr&&Yr(Dr,t,{configurable:!0,set:n}),Xr(t,e)}).prototype,"toString",(function(){return Ar(this).tag})),_r(Mr,"withoutSetter",(function(e){return Xr(Or(e),e)})),wr.f=eo,br.f=Jr,yr.f=to,vr.f=gr.f=no,mr.f=io,Pr.f=function(e){return Xr(Sr(e),e)},tr&&(Fr(Mr.prototype,"description",{configurable:!0,get:function(){return Ar(this).description}}),_r(Dr,"propertyIsEnumerable",eo,{unsafe:!0}))),Xi({global:!0,wrap:!0,forced:!er,sham:!er},{Symbol:Mr}),Tr(pr(qr),(function(e){!function(e){var t=Ei.Symbol||(Ei.Symbol={});Ti(t,e)||Li(t,e,{value:Vi.f(e)})}(e)})),Xi({target:Lr,stat:!0,forced:!er},{for:function(e){var t=ur(e);if(ir(Gr,t))return Gr[t];var n=Mr(t);return Gr[t]=n,Wr[n]=t,n},keyFor:function(e){if(!ar(e))throw TypeError(e+" is not a symbol");if(ir(Wr,e))return Wr[e]},useSetter:function(){Kr=!0},useSimple:function(){Kr=!1}}),Xi({target:"Object",stat:!0,forced:!er,sham:!tr},{create:function(e,t){return void 0===t?fr(e):Qr(fr(e),t)},defineProperty:Jr,defineProperties:Qr,getOwnPropertyDescriptor:to}),Xi({target:"Object",stat:!0,forced:!er},{getOwnPropertyNames:no,getOwnPropertySymbols:io}),Xi({target:"Object",stat:!0,forced:nr((function(){mr.f(1)}))},{getOwnPropertySymbols:function(e){return mr.f(cr(e))}}),Br&&Xi({target:"JSON",stat:!0,forced:!er||nr((function(){var e=Mr();return"[null]"!=Br([e])||"{}"!=Br({a:e})||"{}"!=Br(Object(e))}))},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(or(t)||void 0!==e)&&!ar(e))return rr(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!ar(t))return t}),r[1]=t,Br.apply(null,r)}}),Mr.prototype[Ir]||Cr(Mr.prototype,Ir,Mr.prototype.valueOf),jr(Mr,Lr),xr[Vr]=!0;var ro=On,oo=o,ao=_,so=i.f,co=c,lo=oo((function(){so(1)}));ro({target:"Object",stat:!0,forced:!co||lo,sham:!co},{getOwnPropertyDescriptor:function(e,t){return so(ao(e),t)}});var uo=be,fo=Re,ho=h,po=function(e,t,n){var i=uo(t);i in e?fo.f(e,i,ho(0,n)):e[i]=n},vo=on,go=_,mo=i,yo=po;function bo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wo(e,t,n){return t&&bo(e.prototype,t),n&&bo(e,n),e}function Co(e,t,n){return(Co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gi(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}On({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(e){for(var t,n,i=go(e),r=mo.f,o=vo(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&yo(s,t,n);return s}});var _o=Wn,ko=Re,xo=fe("unscopables"),Oo=Array.prototype;null==Oo[xo]&&ko.f(Oo,xo,{configurable:!0,value:_o(null)});var So=function(e){Oo[xo][e]=!0},Po=On,jo=Yi.find,Eo=So,To=!0;"find"in[]&&Array(1).find((function(){To=!1})),Po({target:"Array",proto:!0,forced:To},{find:function(e){return jo(this,e,arguments.length>1?arguments[1]:void 0)}}),Eo("find");var Vo=o,Lo=R,Io=fe("species"),Ro=function(e){return Lo>=51||!Vo((function(){var t=[];return(t.constructor={})[Io]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ao=On,Do=o,Mo=bi,Bo=k,No=q,Fo=At,Ho=po,Uo=Ui,zo=Ro,$o=R,Go=fe("isConcatSpreadable"),Wo=9007199254740991,qo="Maximum allowed index exceeded",Zo=$o>=51||!Do((function(){var e=[];return e[Go]=!1,e.concat()[0]!==e})),Ko=zo("concat"),Yo=function(e){if(!Bo(e))return!1;var t=e[Go];return void 0!==t?!!t:Mo(e)};Ao({target:"Array",proto:!0,forced:!Zo||!Ko},{concat:function(e){var t,n,i,r,o,s=No(this),a=Uo(s,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(Yo(o=-1===t?s:arguments[t])){if(c+(r=Fo(o.length))>Wo)throw TypeError(qo);for(n=0;n<r;n++,c++)n in o&&Ho(a,c,o[n])}else{if(c>=Wo)throw TypeError(qo);Ho(a,c++,o)}return a.length=c,a}});var Xo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jo=o,Qo=function(e,t){var n=[][e];return!!n&&Jo((function(){n.call(null,t||function(){throw 1},1)}))},ea=Yi.forEach,ta=r,na=Xo,ia=Qo("forEach")?[].forEach:function(e){return ea(this,e,arguments.length>1?arguments[1]:void 0)},ra=$e;for(var oa in na){var aa=ta[oa],sa=aa&&aa.prototype;if(sa&&sa.forEach!==ia)try{ra(sa,"forEach",ia)}catch(e){sa.forEach=ia}}var ca=q,la=En;On({target:"Object",stat:!0,forced:o((function(){la(1)}))},{keys:function(e){return la(ca(e))}});var ua=On,da=k,fa=bi,ha=Nt,pa=At,va=_,ga=po,ma=fe,ya=Ro("slice"),ba=ma("species"),wa=[].slice,Ca=Math.max;ua({target:"Array",proto:!0,forced:!ya},{slice:function(e,t){var n,i,r,o=va(this),s=pa(o.length),a=ha(e,s),c=ha(void 0===t?s:t,s);if(fa(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!fa(n.prototype)?da(n)&&null===(n=n[ba])&&(n=void 0):n=void 0,n===Array||void 0===n))return wa.call(o,a,c);for(i=new(void 0===n?Array:n)(Ca(c-a,0)),r=0;a<c;a++,r++)a in o&&ga(i,r,o[a]);return i.length=r,i}});var _a=De,ka=function(){var e=_a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},xa={},Oa=o,Sa=r.RegExp;xa.UNSUPPORTED_Y=Oa((function(){var e=Sa("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),xa.BROKEN_CARET=Oa((function(){var e=Sa("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Pa=o,ja=r.RegExp,Ea=Pa((function(){var e=ja(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Ta=o,Va=r.RegExp,La=Ta((function(){var e=Va("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Ia=Ci,Ra=ka,Aa=xa,Da=U.exports,Ma=Wn,Ba=wt.get,Na=Ea,Fa=La,Ha=RegExp.prototype.exec,Ua=Da("native-string-replace",String.prototype.replace),za=Ha,$a=function(){var e=/a/,t=/b*/g;return Ha.call(e,"a"),Ha.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Ga=Aa.UNSUPPORTED_Y||Aa.BROKEN_CARET,Wa=void 0!==/()??/.exec("")[1];($a||Wa||Ga||Na||Fa)&&(za=function(e){var t,n,i,r,o,s,a,c=this,l=Ba(c),u=Ia(e),d=l.raw;if(d)return d.lastIndex=c.lastIndex,t=za.call(d,u),c.lastIndex=d.lastIndex,t;var f=l.groups,h=Ga&&c.sticky,p=Ra.call(c),v=c.source,g=0,m=u;if(h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=u.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==u.charAt(c.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),n=new RegExp("^(?:"+v+")",p)),Wa&&(n=new RegExp("^"+v+"$(?!\\s)",p)),$a&&(i=c.lastIndex),r=Ha.call(h?n:c,m),h?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:$a&&r&&(c.lastIndex=c.global?r.index+r[0].length:i),Wa&&r&&r.length>1&&Ua.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&f)for(r.groups=s=Ma(null),o=0;o<f.length;o++)s[(a=f[o])[0]]=r[a[1]];return r});var qa=za;On({target:"RegExp",proto:!0,forced:/./.exec!==qa},{exec:qa});var Za=Ge.exports,Ka=qa,Ya=o,Xa=fe,Ja=$e,Qa=Xa("species"),es=RegExp.prototype,ts=function(e,t,n,i){var r=Xa(e),o=!Ya((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),s=o&&!Ya((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Qa]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!o||!s||n){var a=/./[r],c=t(r,""[e],(function(e,t,n,i,r){var s=t.exec;return s===Ka||s===es.exec?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}));Za(String.prototype,e,c[0]),Za(es,r,c[1])}i&&Ja(es[r],"sham",!0)},ns=k,is=p,rs=fe("match"),os=function(e){var t;return ns(e)&&(void 0!==(t=e[rs])?!!t:"RegExp"==is(e))},as=De,ss=Sn,cs=fe("species"),ls=function(e,t){var n,i=as(e).constructor;return void 0===i||null==(n=as(i)[cs])?t:ss(n)},us=Lt,ds=Ci,fs=w,hs=function(e){return function(t,n){var i,r,o=ds(fs(t)),s=us(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},ps={codeAt:hs(!1),charAt:hs(!0)},vs=ps.charAt,gs=function(e,t,n){return t+(n?vs(e,t).length:1)},ms=p,ys=qa,bs=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==ms(e))throw TypeError("RegExp#exec called on incompatible receiver");return ys.call(e,t)},ws=ts,Cs=os,_s=De,ks=w,xs=ls,Os=gs,Ss=At,Ps=Ci,js=bs,Es=qa,Ts=o,Vs=xa.UNSUPPORTED_Y,Ls=[].push,Is=Math.min,Rs=4294967295;ws("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=Ps(ks(this)),r=void 0===n?Rs:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!Cs(e))return t.call(i,e,r);for(var o,s,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,l+"g");(o=Es.call(d,i))&&!((s=d.lastIndex)>u&&(c.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&Ls.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=r));)d.lastIndex===o.index&&d.lastIndex++;return u===i.length?!a&&d.test("")||c.push(""):c.push(i.slice(u)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=ks(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(Ps(r),t,n)},function(e,r){var o=_s(this),s=Ps(e),a=n(i,o,s,r,i!==t);if(a.done)return a.value;var c=xs(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Vs?"g":"y"),d=new c(Vs?"^(?:"+o.source+")":o,u),f=void 0===r?Rs:r>>>0;if(0===f)return[];if(0===s.length)return null===js(d,s)?[s]:[];for(var h=0,p=0,v=[];p<s.length;){d.lastIndex=Vs?0:p;var g,m=js(d,Vs?s.slice(p):s);if(null===m||(g=Is(Ss(d.lastIndex+(Vs?p:0)),s.length))===h)p=Os(s,p,l);else{if(v.push(s.slice(h,p)),v.length===f)return v;for(var y=1;y<=m.length-1;y++)if(v.push(m[y]),v.length===f)return v;p=h=g}}return v.push(s.slice(h)),v}]}),!!Ts((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Vs);var As=On,Ds=_,Ms=[].join,Bs=y!=Object,Ns=Qo("join",",");As({target:"Array",proto:!0,forced:Bs||!Ns},{join:function(e){return Ms.call(Ds(this),void 0===e?",":e)}});var Fs=On,Hs=Nt,Us=Lt,zs=At,$s=q,Gs=Ui,Ws=po,qs=Ro("splice"),Zs=Math.max,Ks=Math.min,Ys=9007199254740991,Xs="Maximum allowed length exceeded";Fs({target:"Array",proto:!0,forced:!qs},{splice:function(e,t){var n,i,r,o,s,a,c=$s(this),l=zs(c.length),u=Hs(e,l),d=arguments.length;if(0===d?n=i=0:1===d?(n=0,i=l-u):(n=d-2,i=Ks(Zs(Us(t),0),l-u)),l+n-i>Ys)throw TypeError(Xs);for(r=Gs(c,i),o=0;o<i;o++)(s=u+o)in c&&Ws(r,o,c[s]);if(r.length=i,n<i){for(o=u;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>u;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-i+n,r}});var Js={};Js[fe("toStringTag")]="z";var Qs="[object z]"===String(Js),ec=Qs,tc=p,nc=fe("toStringTag"),ic="Arguments"==tc(function(){return arguments}()),rc=ec?tc:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),nc))?n:ic?tc(t):"Object"==(i=tc(t))&&"function"==typeof t.callee?"Arguments":i},oc=rc,ac=Qs?{}.toString:function(){return"[object "+oc(this)+"]"},sc=Qs,cc=Ge.exports,lc=ac;sc||cc(Object.prototype,"toString",lc,{unsafe:!0});var uc=r.Promise,dc=Ge.exports,fc=function(e,t,n){for(var i in t)dc(e,i,t[i],n);return e},hc=k,pc=De,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return pc(n),function(e){if(!hc(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),gc=S,mc=Re,yc=c,bc=fe("species"),wc=function(e){var t=gc(e),n=mc.f;yc&&t&&!t[bc]&&n(t,bc,{configurable:!0,get:function(){return this}})},Cc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},_c={},kc=_c,xc=fe("iterator"),Oc=Array.prototype,Sc=function(e){return void 0!==e&&(kc.Array===e||Oc[xc]===e)},Pc=rc,jc=_c,Ec=fe("iterator"),Tc=function(e){if(null!=e)return e[Ec]||e["@@iterator"]||jc[Pc(e)]},Vc=De,Lc=function(e){var t=e.return;if(void 0!==t)return Vc(t.call(e)).value},Ic=De,Rc=Sc,Ac=At,Dc=Bi,Mc=Tc,Bc=Lc,Nc=function(e,t){this.stopped=e,this.result=t},Fc=fe("iterator"),Hc=!1;try{var Uc=0,zc={next:function(){return{done:!!Uc++}},return:function(){Hc=!0}};zc[Fc]=function(){return this},Array.from(zc,(function(){throw 2}))}catch(e){}var $c,Gc,Wc,qc,Zc=/(?:ipad|iphone|ipod).*applewebkit/i.test(P),Kc="process"==p(r.process),Yc=r,Xc=o,Jc=Bi,Qc=Rn,el=ke,ol=Zc,tl=Kc,nl=Yc.setImmediate,il=Yc.clearImmediate,rl=Yc.process,ul=Yc.MessageChannel,al=Yc.Dispatch,sl=0,dl={};try{$c=Yc.location}catch(e){}var cl=function(e){if(dl.hasOwnProperty(e)){var t=dl[e];delete dl[e],t()}},ll=function(e){return function(){cl(e)}},fl=function(e){cl(e.data)},hl=function(e){Yc.postMessage(String(e),$c.protocol+"//"+$c.host)};nl&&il||(nl=function(e){for(var t=[],n=arguments.length,i=1;n>i;)t.push(arguments[i++]);return dl[++sl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Gc(sl),sl},il=function(e){delete dl[e]},tl?Gc=function(e){rl.nextTick(ll(e))}:al&&al.now?Gc=function(e){al.now(ll(e))}:ul&&!ol?(qc=(Wc=new ul).port2,Wc.port1.onmessage=fl,Gc=Jc(qc.postMessage,qc,1)):Yc.addEventListener&&"function"==typeof postMessage&&!Yc.importScripts&&$c&&"file:"!==$c.protocol&&!Xc(hl)?(Gc=hl,Yc.addEventListener("message",fl,!1)):Gc="onreadystatechange"in el("script")?function(e){Qc.appendChild(el("script")).onreadystatechange=function(){Qc.removeChild(this),cl(e)}}:function(e){setTimeout(ll(e),0)});var pl,vl,gl,ml,yl,bl,wl,Cl,_l={set:nl,clear:il},kl=r,xl=/ipad|iphone|ipod/i.test(P)&&void 0!==kl.Pebble,Ol=/web0s(?!.*chrome)/i.test(P),Sl=r,Pl=i.f,jl=_l.set,El=Zc,Tl=xl,Vl=Ol,Ll=Kc,Il=Sl.MutationObserver||Sl.WebKitMutationObserver,Rl=Sl.document,Al=Sl.process,Dl=Sl.Promise,Ml=Pl(Sl,"queueMicrotask"),Bl=Ml&&Ml.value;Bl||(pl=function(){var e,t;for(Ll&&(e=Al.domain)&&e.exit();vl;){t=vl.fn,vl=vl.next;try{t()}catch(e){throw vl?ml():gl=void 0,e}}gl=void 0,e&&e.enter()},El||Ll||Vl||!Il||!Rl?!Tl&&Dl&&Dl.resolve?((wl=Dl.resolve(void 0)).constructor=Dl,Cl=wl.then,ml=function(){Cl.call(wl,pl)}):ml=Ll?function(){Al.nextTick(pl)}:function(){jl.call(Sl,pl)}:(yl=!0,bl=Rl.createTextNode(""),new Il(pl).observe(bl,{characterData:!0}),ml=function(){bl.data=yl=!yl}));var Nl=Bl||function(e){var t={fn:e,next:void 0};gl&&(gl.next=t),vl||(vl=t,ml()),gl=t},Fl={},Hl=Sn,Ul=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=Hl(t),this.reject=Hl(n)};Fl.f=function(e){return new Ul(e)};var zl,$l,Gl,Wl,ql=De,Zl=k,Kl=Fl,Yl=r,Xl="object"==typeof window,Jl=On,Ql=r,eu=S,tu=uc,nu=Ge.exports,iu=fc,ru=vc,ou=Di,au=wc,su=k,cu=Sn,lu=Cc,uu=Xe,du=function(e,t,n){var i,r,o,s,a,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=Dc(t,u,1+d+h),v=function(e){return i&&Bc(i),new Nc(!0,e)},g=function(e){return d?(Ic(e),h?p(e[0],e[1],v):p(e[0],e[1])):h?p(e,v):p(e)};if(f)i=e;else{if("function"!=typeof(r=Mc(e)))throw TypeError("Target is not iterable");if(Rc(r)){for(o=0,s=Ac(e.length);s>o;o++)if((a=g(e[o]))&&a instanceof Nc)return a;return new Nc(!1)}i=r.call(e)}for(c=i.next;!(l=c.call(i)).done;){try{a=g(l.value)}catch(e){throw Bc(i),e}if("object"==typeof a&&a&&a instanceof Nc)return a}return new Nc(!1)},fu=ls,hu=_l.set,pu=Nl,vu=Fl,gu=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},mu=wt,yu=mn,bu=Xl,wu=Kc,Cu=R,_u=fe("species"),ku="Promise",xu=mu.get,Ou=mu.set,Su=mu.getterFor(ku),Pu=tu&&tu.prototype,ju=tu,Eu=Pu,Tu=Ql.TypeError,Vu=Ql.document,Lu=Ql.process,Iu=vu.f,Ru=Iu,Au=!!(Vu&&Vu.createEvent&&Ql.dispatchEvent),Du="function"==typeof PromiseRejectionEvent,Mu="unhandledrejection",Bu=!1,Nu=yu(ku,(function(){var e=uu(ju),t=e!==String(ju);if(!t&&66===Cu)return!0;if(Cu>=51&&/native code/.test(e))return!1;var n=new ju((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(n.constructor={})[_u]=i,!(Bu=n.then((function(){}))instanceof i)||!t&&bu&&!Du})),Fu=Nu||!function(e,t){if(!t&&!Hc)return!1;var n=!1;try{var i={};i[Fc]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}((function(e){ju.all(e).catch((function(){}))})),Hu=function(e){var t;return!(!su(e)||"function"!=typeof(t=e.then))&&t},Uu=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pu((function(){for(var i=e.value,r=1==e.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=r?l.ok:l.fail,d=l.resolve,f=l.reject,h=l.domain;try{u?(r||(2===e.rejection&&Wu(e),e.rejection=1),!0===u?s=i:(h&&h.enter(),s=u(i),h&&(h.exit(),c=!0)),s===l.promise?f(Tu("Promise-chain cycle")):(a=Hu(s))?a.call(s,d,f):d(s)):f(i)}catch(e){h&&!c&&h.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&$u(e)}))}},zu=function(e,t,n){var i,r;Au?((i=Vu.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),Ql.dispatchEvent(i)):i={promise:t,reason:n},!Du&&(r=Ql["on"+e])?r(i):e===Mu&&function(e,t){var n=Yl.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},$u=function(e){hu.call(Ql,(function(){var t,n=e.facade,i=e.value;if(Gu(e)&&(t=gu((function(){wu?Lu.emit("unhandledRejection",i,n):zu(Mu,n,i)})),e.rejection=wu||Gu(e)?2:1,t.error))throw t.value}))},Gu=function(e){return 1!==e.rejection&&!e.parent},Wu=function(e){hu.call(Ql,(function(){var t=e.facade;wu?Lu.emit("rejectionHandled",t):zu("rejectionhandled",t,e.value)}))},th=function(e,t,n){return function(i){e(t,i,n)}},qu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Uu(e,!0))},Zu=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Tu("Promise can't be resolved itself");var i=Hu(t);i?pu((function(){var n={done:!1};try{i.call(t,th(Zu,n,e),th(qu,n,e))}catch(t){qu(n,t,e)}})):(e.value=t,e.state=1,Uu(e,!1))}catch(t){qu({done:!1},t,e)}}};if(Nu&&(Eu=(ju=function(e){lu(this,ju,ku),cu(e),zl.call(this);var t=xu(this);try{e(th(Zu,t),th(qu,t))}catch(e){qu(t,e)}}).prototype,(zl=function(e){Ou(this,{type:ku,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=iu(Eu,{then:function(e,t){var n=Su(this),i=Iu(fu(this,ju));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=wu?Lu.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Uu(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),$l=function(){var e=new zl,t=xu(e);this.promise=e,this.resolve=th(Zu,t),this.reject=th(qu,t)},vu.f=Iu=function(e){return e===ju||e===Gl?new $l(e):Ru(e)},"function"==typeof tu&&Pu!==Object.prototype)){Wl=Pu.then,Bu||(nu(Pu,"then",(function(e,t){var n=this;return new ju((function(e,t){Wl.call(n,e,t)})).then(e,t)}),{unsafe:!0}),nu(Pu,"catch",Eu.catch,{unsafe:!0}));try{delete Pu.constructor}catch(e){}ru&&ru(Pu,Eu)}Jl({global:!0,wrap:!0,forced:Nu},{Promise:ju}),ou(ju,ku,!1),au(ku),Gl=eu(ku),Jl({target:ku,stat:!0,forced:Nu},{reject:function(e){var t=Iu(this);return t.reject.call(void 0,e),t.promise}}),Jl({target:ku,stat:!0,forced:Nu},{resolve:function(e){return function(e,t){if(ql(e),Zl(t)&&t.constructor===e)return t;var n=Kl.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),Jl({target:ku,stat:!0,forced:Fu},{all:function(e){var t=this,n=Iu(t),i=n.resolve,r=n.reject,o=gu((function(){var n=cu(t.resolve),o=[],s=0,a=1;du(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=Iu(t),i=n.reject,r=gu((function(){var r=cu(t.resolve);du(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var Ku=c,Yu=Re.f,Xu=Function.prototype,Ju=Xu.toString,Qu=/^\s*function ([^ (]*)/;Ku&&!("name"in Xu)&&Yu(Xu,"name",{configurable:!0,get:function(){try{return Ju.call(this).match(Qu)[1]}catch(e){return""}}});var ed=k,nd=vc,id=function(e,t,n){var i,r;return nd&&"function"==typeof(i=t.constructor)&&i!==n&&ed(r=i.prototype)&&r!==n.prototype&&nd(e,r),e},rd=w,od=Ci,ad="[\t\n\v\f\r                　\u2028\u2029\ufeff]",sd=RegExp("^"+ad+ad+"*"),cd=RegExp(ad+ad+"*$"),ld=function(e){return function(t){var n=od(rd(t));return 1&e&&(n=n.replace(sd,"")),2&e&&(n=n.replace(cd,"")),n}},ud={start:ld(1),end:ld(2),trim:ld(3)},fd=c,hd=r,pd=mn,vd=Ge.exports,gd=Q,md=p,yd=id,bd=F,wd=ge,Cd=o,_d=Wn,kd=Et.f,xd=i.f,Od=Re.f,Sd=ud.trim,Pd="Number",jd=hd.Number,Ed=jd.prototype,Td=md(_d(Ed))==Pd,Vd=function(e){if(bd(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,i,r,o,s,a,c,l=wd(e,"number");if("string"==typeof l&&l.length>2)if(43===(t=(l=Sd(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>r)return NaN;return parseInt(o,i)}return+l};if(pd(Pd,!jd(" 0o1")||!jd("0b1")||jd("+0x1"))){for(var Ld,Id=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Id&&(Td?Cd((function(){Ed.valueOf.call(n)})):md(n)!=Pd)?yd(new jd(Vd(t)),n,Id):Vd(t)},Rd=fd?kd(jd):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Ad=0;Rd.length>Ad;Ad++)gd(jd,Ld=Rd[Ad])&&!gd(Id,Ld)&&Od(Id,Ld,xd(jd,Ld));Id.prototype=Ed,Ed.constructor=Id,vd(hd,Pd,Id)}var Dd=Yi.map;On({target:"Array",proto:!0,forced:!Ro("map")},{map:function(e){return Dd(this,e,arguments.length>1?arguments[1]:void 0)}});var Md=Yi.filter;On({target:"Array",proto:!0,forced:!Ro("filter")},{filter:function(e){return Md(this,e,arguments.length>1?arguments[1]:void 0)}});var Bd=c,Nd=o,Fd=En,Hd=Qt,Ud=s,zd=q,$d=y,Gd=Object.assign,Wd=Object.defineProperty,qd=!Gd||Nd((function(){if(Bd&&1!==Gd({b:1},Gd(Wd({},"a",{enumerable:!0,get:function(){Wd(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Gd({},e)[n]||Fd(Gd({},t)).join("")!=i}))?function(e,t){for(var n=zd(e),i=arguments.length,r=1,o=Hd.f,s=Ud.f;i>r;)for(var a,c=$d(arguments[r++]),l=o?Fd(c).concat(o(c)):Fd(c),u=l.length,d=0;u>d;)a=l[d++],Bd&&!s.call(c,a)||(n[a]=c[a]);return n}:Gd,Zd=qd;On({target:"Object",stat:!0,forced:Object.assign!==Zd},{assign:Zd});var Kd={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,r);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(Kd);var Yd=Kd.exports;function Xd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jd(e){return function(e){if(Array.isArray(e))return Xd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qd=De,ef=At,tf=Ci,nf=w,rf=gs,of=bs;ts("match",(function(e,t,n){return[function(t){var n=nf(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](tf(n))},function(e){var i=Qd(this),r=tf(e),o=n(t,i,r);if(o.done)return o.value;if(!i.global)return of(i,r);var s=i.unicode;i.lastIndex=0;for(var a,c=[],l=0;null!==(a=of(i,r));){var u=tf(a[0]);c[l]=u,""===u&&(i.lastIndex=rf(r,ef(i.lastIndex),s)),l++}return 0===l?null:c}]}));var af=c,sf=r,cf=mn,lf=id,uf=$e,df=Re.f,ff=Et.f,hf=os,pf=Ci,vf=ka,gf=xa,mf=Ge.exports,yf=o,bf=Q,wf=wt.enforce,Cf=wc,_f=Ea,kf=La,xf=fe("match"),Of=sf.RegExp,Sf=Of.prototype,Pf=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,jf=/a/g,Ef=/a/g,Tf=new Of(jf)!==jf,Vf=gf.UNSUPPORTED_Y,Lf=af&&(!Tf||Vf||_f||kf||yf((function(){return Ef[xf]=!1,Of(jf)!=jf||Of(Ef)==Ef||"/a/i"!=Of(jf,"i")})));if(cf("RegExp",Lf)){for(var If=function(e,t){var n,i,r,o,s,a,c=this instanceof If,l=hf(e),u=void 0===t,d=[],f=e;if(!c&&l&&u&&e.constructor===If)return e;if((l||e instanceof If)&&(e=e.source,u&&(t="flags"in f?f.flags:vf.call(f))),e=void 0===e?"":pf(e),t=void 0===t?"":pf(t),f=e,_f&&"dotAll"in jf&&(i=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,Vf&&"sticky"in jf&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),kf&&(e=(o=function(e){for(var t,n=e.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(t=e.charAt(i)))t+=e.charAt(++i);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:Pf.test(e.slice(i+1))&&(i+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||bf(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=t:r+=t}return[r,o]}(e))[0],d=o[1]),s=lf(Of(e,t),c?this:Sf,If),(i||r||d.length)&&(a=wf(s),i&&(a.dotAll=!0,a.raw=If(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(t=e.charAt(i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+e.charAt(++i);return r}(e),n)),r&&(a.sticky=!0),d.length&&(a.groups=d)),e!==f)try{uf(s,"source",""===f?"(?:)":f)}catch(e){}return s},Rf=function(e){e in If||df(If,e,{configurable:!0,get:function(){return Of[e]},set:function(t){Of[e]=t}})},Af=ff(Of),Df=0;Af.length>Df;)Rf(Af[Df++]);Sf.constructor=If,If.prototype=Sf,mf(sf,"RegExp",If)}Cf("RegExp");var Mf=Ge.exports,Bf=De,Nf=Ci,Ff=o,Hf=ka,Uf="toString",zf=RegExp.prototype,$f=zf.toString,Gf=Ff((function(){return"/a/b"!=$f.call({source:"a",flags:"b"})})),td=$f.name!=Uf;(Gf||td)&&Mf(RegExp.prototype,Uf,(function(){var e=Bf(this),t=Nf(e.source),n=e.flags;return"/"+t+"/"+Nf(void 0===n&&e instanceof RegExp&&!("flags"in zf)?Hf.call(e):n)}),{unsafe:!0});var Wf=o,qf="\t\n\v\f\r                　\u2028\u2029\ufeff",Zf=ud.trim;On({target:"String",proto:!0,forced:function(e){return Wf((function(){return!!qf[e]()||"​᠎"!="​᠎"[e]()||qf[e].name!==e}))}("trim")},{trim:function(){return Zf(this)}});var Kf=q,Yf=Math.floor,Xf="".replace,Jf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Qf=/\$([$&'`]|\d{1,2})/g,eh=ts,nh=o,ih=De,dd=Lt,rh=At,oh=Ci,ah=w,sh=gs,ch=function(e,t,n,i,r,o){var s=n+e.length,a=i.length,c=Qf;return void 0!==r&&(r=Kf(r),c=Jf),Xf.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=r[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var d=Yf(u/10);return 0===d?o:d<=a?void 0===i[d-1]?c.charAt(1):i[d-1]+c.charAt(1):o}l=i[u-1]}return void 0===l?"":l}))},lh=bs,uh=fe("replace"),dh=Math.max,fh=Math.min,hh="$0"==="a".replace(/./,"$0"),ph=!!/./[uh]&&""===/./[uh]("a","$0");eh("replace",(function(e,t,n){var i=ph?"$":"$0";return[function(e,n){var i=ah(this),r=null==e?void 0:e[uh];return void 0!==r?r.call(e,i,n):t.call(oh(i),e,n)},function(e,r){var o=ih(this),s=oh(e);if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var a=n(t,o,s,r);if(a.done)return a.value}var c="function"==typeof r;c||(r=oh(r));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var d=[];;){var f=lh(o,s);if(null===f)break;if(d.push(f),!l)break;""===oh(f[0])&&(o.lastIndex=sh(s,rh(o.lastIndex),u))}for(var h,p="",v=0,g=0;g<d.length;g++){f=d[g];for(var m=oh(f[0]),y=dh(fh(dd(f.index),s.length),0),w=[],b=1;b<f.length;b++)w.push(void 0===(h=f[b])?h:String(h));var C=f.groups;if(c){var _=[m].concat(w,y,s);void 0!==C&&_.push(C);var k=oh(r.apply(void 0,_))}else k=ch(m,s,y,w,C,r);y>=v&&(p+=s.slice(v,y)+k,v=y+m.length)}return p+s.slice(v)}]}),!!nh((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!hh||ph);var vh=Math.floor,gh=function(e,t){var n=e.length,i=vh(n/2);return n<8?mh(e,t):yh(gh(e.slice(0,i),t),gh(e.slice(i),t),t)},mh=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},yh=function(e,t,n){for(var i=e.length,r=t.length,o=0,s=0,a=[];o<i||s<r;)o<i&&s<r?a.push(n(e[o],t[s])<=0?e[o++]:t[s++]):a.push(o<i?e[o++]:t[s++]);return a},bh=gh,wh=P.match(/firefox\/(\d+)/i),Ch=!!wh&&+wh[1],_h=/MSIE|Trident/.test(P),kh=P.match(/AppleWebKit\/(\d+)\./),xh=!!kh&&+kh[1],Oh=On,Sh=Sn,Ph=q,jh=At,Eh=Ci,Th=o,Vh=bh,Lh=Qo,Ih=Ch,Rh=_h,Ah=R,Dh=xh,Mh=[],Bh=Mh.sort,Nh=Th((function(){Mh.sort(void 0)})),Fh=Th((function(){Mh.sort(null)})),Hh=Lh("sort"),Uh=!Th((function(){if(Ah)return Ah<70;if(!(Ih&&Ih>3)){if(Rh)return!0;if(Dh)return Dh<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Mh.push({k:t+i,v:n})}for(Mh.sort((function(e,t){return t.v-e.v})),i=0;i<Mh.length;i++)t=Mh[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));Oh({target:"Array",proto:!0,forced:Nh||!Fh||!Hh||!Uh},{sort:function(e){void 0!==e&&Sh(e);var t=Ph(this);if(Uh)return void 0===e?Bh.call(t):Bh.call(t,e);var n,i,r=[],o=jh(t.length);for(i=0;i<o;i++)i in t&&r.push(t[i]);for(n=(r=Vh(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Eh(t)>Eh(n)?1:-1}}(e))).length,i=0;i<n;)t[i]=r[i++];for(;i<o;)delete t[i++];return t}});var zh="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,$h={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Gh="%c[xgplayer]",Wh={config:{debug:zh?3:1},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(t=console).log.apply(t,[Gh,$h.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(t=console).warn.apply(t,[Gh,$h.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(t=console)[n].apply(t,[Gh,$h.error,e].concat(r))}}},qh=function(){function e(t){ui(this,e),this.bufferedList=t}return wo(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),rp={};function Zh(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}rp.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},rp.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var r=i.children;return i=null,r.length>0?(r=r[0],n&&rp.addClass(r,n),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(e){return Wh.logError("util.createDomFromHtml",e),null}},rp.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var n=e.className&&"object"===hi(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},rp.addClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){rp.hasClass(e,t)||(e.className&&"object"===hi(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},rp.removeClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){rp.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===hi(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},rp.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){rp.hasClass(e,t)?rp.removeClass(e,t):rp.addClass(e,t)}))},rp.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===rp.typeOf(e[n])?t.push(e[n]):"Object"===rp.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},rp.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(r){Wh.logError("util.findDom",r),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},rp.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},rp.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},rp.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=rp.padStart(Math.floor(e/3600),2,0),n=rp.padStart(Math.floor((e-3600*t)/60),2,0),i=rp.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},rp.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},rp.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},rp.deepCopy=function(e,t){if("Object"===rp.typeOf(t)&&"Object"===rp.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==rp.typeOf(t[n])||t[n]instanceof Node?"Array"===rp.typeOf(t[n])?e[n]="Array"===rp.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:rp.deepCopy(e[n],t[n])})),e},rp.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i;"Array"===rp.typeOf(t[n])&&"Array"===rp.typeOf(e[n])?"Array"===rp.typeOf(e[n])&&(i=e[n]).push.apply(i,Jd(t[n])):rp.typeOf(e[n])!==rp.typeOf(t[n])||null===e[n]||"Object"!==rp.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):rp.deepMerge(e[n],t[n])})),e},rp.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},rp.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},rp.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},rp.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},rp.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),rp.clearTimeout(e,i)}),n);return e._timers.push(i),i},rp.clearTimeout=function(e,t){var n=e._timers;if("Array"===rp.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},rp.clearAllTimers=function(e){var t=e._timers;"Array"===rp.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},rp.createImgBtn=function(e,t,n,i){var r,o,s,a=rp.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,1))})),a.style.width="".concat(r).concat(s),a.style.height="".concat(o).concat(s),a.style.backgroundSize="".concat(r).concat(s," ").concat(o).concat(s),a.style.margin="start"===e?"-".concat(o/2).concat(s," auto auto -").concat(r/2).concat(s):"auto 5px auto 5px"),a},rp.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},rp.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},rp.checkIsFunction=function(e){return e&&"function"==typeof e},rp.checkIsObject=function(e){return null!==e&&"object"===hi(e)},rp.hide=function(e){e.style.display="none"},rp.show=function(e,t){e.style.display=t||"block"},rp.isUndefined=function(e){if(null==e)return!0},rp.setStyleFromCsstext=function(e,t){t&&("String"===rp.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},rp.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(Zh(n[0],t)?r[n[0]]=n[1]:o[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),r},rp.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},rp.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.complete?t&&t():(i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)}),i.src=e}},rp.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},rp.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},rp.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},rp.checkTouchSupport=function(){return"ontouchstart"in window},rp.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var r=[];if(t)for(var o=0;o<n.length;o++){var s=r.length;if(s){var a=r[s-1].end;n[o].start-a<t?n[o].end>a&&(r[s-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new qh(r)},rp.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},rp.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},rp.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},rp.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};var Kh=rp,Yh=/(Android)\s([\d.]+)/,Xh=/(Version)\/([\d.]+)/,Jh=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Qh={get device(){return Qh.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!o,a=!(s||i||n||o),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:o,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:t,isFireFox:r}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?Xh:Yh)?t.exec(e):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&(!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0)},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType&&Jh.map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),this.supportResult=t,e=null,t}},ep=Qh,tp="3.0.0-next.22",np={1:"network",2:"network",3:"decoder",4:"format"},ip=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ui(this,e);var i=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.video){var r=n.mediaError?n.mediaError:t.video.error||{},o=t.duration,s=t.currentTime,a=t.ended,c=t.src,l=t.currentSrc,u=t.video,d=u.readyState,f=u.networkState,h={playerVersion:tp,currentTime:s,duration:o,ended:a,readyState:d,networkState:f,src:c||l,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(e){h[e]=n.ext[e]})),h}if(arguments.length>1){for(var p={playerVersion:tp,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],g=0;g<arguments.length;g++)p[v[g]]=arguments[g];return p.ex=i?(i[arguments[0]]||{}).msg:"",p}},op="play",ap="playing",sp="ended",cp="pause",lp="error",up="seeking",dp="seeked",fp="timeupdate",hp="waiting",pp="canplay",vp="durationchange",gp="volumechange",mp="loadeddata",yp="ratechange",bp="progress",wp="loadstart",Cp="emptied",_p="focus",kp="blur",xp="ready",Op="urlNull",Sp="autoplay_started",Pp="autoplay_was_prevented",jp="complete",Ep="destroy",Tp="urlchange",Vp="fullscreen_change",Lp="cssFullscreen_change",Ip="mini_state_change",Rp="definition_change",Ap="after_definition_change",Dp="video_resize",Mp="pip_change",Bp="rotate",Np="screenShot",Fp="playnext",Hp="shortcut",Up="user_action",zp=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort"],$p={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Gp=Object.freeze({__proto__:null,PLAY:op,PLAYING:ap,ENDED:sp,PAUSE:cp,ERROR:lp,SEEKING:up,SEEKED:dp,TIME_UPDATE:fp,WAITING:hp,CANPLAY:pp,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:vp,VOLUME_CHANGE:gp,LOADED_DATA:mp,RATE_CHANGE:yp,PROGRESS:bp,LOAD_START:wp,EMPTIED:Cp,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:_p,PLAYER_BLUR:kp,READY:xp,URL_NULL:Op,AUTOPLAY_STARTED:Sp,AUTOPLAY_PREVENTED:Pp,COMPLETE:jp,REPLAY:"replay",DESTROY:Ep,URL_CHANGE:Tp,FULLSCREEN_CHANGE:Vp,CSS_FULLSCREEN_CHANGE:Lp,MINI_STATE_CHANGE:Ip,DEFINITION_CHANGE:Rp,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:Ap,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:Dp,PIP_CHANGE:Mp,ROTATE:Bp,SCREEN_SHOT:Np,PLAYNEXT:Fp,SHORTCUT:Hp,XGLOG:"xglog",USER_ACTION:Up,USER_ACTION1:"user_action1",VIDEO_EVENTS:zp,STATS_EVENTS:$p});function Wp(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}function qp(e,t){return function(n){var i={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:Kh.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.video&&t.video.currentTime),"durationchange"===e&&(t._duration=t.video.duration),"volumechange"===e&&(i.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),t.videoEventMiddleware[e])try{t.videoEventMiddleware[e].call(t,i,Wp.bind(t))}catch(n){throw Wp.call(t,e,i),n}else Wp.call(t,e,i)}}var Zp=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n),(i=t.call(this,e))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var r=e["x5-video-player-type"]||e.x5VideoPlayerType;return ep.isWeixin&&ep.os.isAndroid&&r&&(i.videoConfig["x5-video-player-type"]=r,delete i.videoConfig.playsinline,delete i.videoConfig["webkit-playsinline"],delete i.videoConfig["x5-playsinline"]),e.loop&&(i.videoConfig.loop="loop"),i.video=Kh.createDom(i.videoConfig.mediaType,"",i.videoConfig,""),e.defaultPlaybackRate&&(i.video.defaultPlaybackRate=i.video.playbackRate=e.defaultPlaybackRate),"Number"===Kh.typeOf(e.volume)&&(i.volume=e.volume),e.autoplayMuted&&(i.video.muted=!0,i._lastMuted=!0),e.autoplay&&(i.video.autoplay=!0),i._interval={},i.videoEventMiddleware={},i.attachVideoEvents(),i}return wo(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers||(this._evHandlers=zp.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),mi({},t,qp(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.video.appendChild(Kh.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var i=e.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(e){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,e,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var r=0;r<i.length;r++)i[r].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,i=n.code?np[n.code]:"other";n.message,this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new ip(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this.videoConfig=null,this._interval)clearInterval(this._interval[e]),this._interval[e]=null;this.detachVideoEvents(),this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return!!this.video&&this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var i=0,r=e.length;i<r&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?Kh.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var t=this.video.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"errorNote",get:function(){return this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:""}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(e){this.video&&this.video.muted!==e&&(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video.networkState}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){this.video&&e!==1/0&&(this.video.defaultPlaybackRate=e,this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video.readyState}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){this.video&&(this.emit(Tp,e),this.emit(hp),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===Kh.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e!==1/0&&this.video&&(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=Co(gi(n.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=Co(gi(n.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=Co(gi(n.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=Co(gi(n.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){Co(gi(n.prototype),"removeAllListeners",this).call(this)}}]),n}(Yd),Kp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ui(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return wo(e,[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),Yp=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Xp=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Jp=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function Qp(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=t.call.apply(t,[e].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(r)))}function ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var s,a=(s=this.__hooks[e]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(e){!1!==e&&Qp.apply(void 0,[r,t,n.next].concat(Jd(i)))})).catch((function(e){throw e})):Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function tv(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function nv(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,i)}}function iv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function rv(e){e.__hooks=null}function ov(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(r));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(r));if(a&&a.then)a.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(r))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==a)return n.call.apply(n,[e,e].concat(r))}function av(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?av(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):av(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cv(e,t){Wh.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var lv=function(){function e(t){ui(this,e),Kh.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),iv(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return wo(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=Kh.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):cv(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):cv(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):cv(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=sv(sv({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}},{key:"hook",value:function(e,t){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),Kh.clearAllTimers(this),Kh.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),rv(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}();if("undefined"!=typeof Element&&!Element.prototype.matches){var uv=Element.prototype;uv.matches=uv.matchesSelector||uv.mozMatchesSelector||uv.msMatchesSelector||uv.oMatchesSelector||uv.webkitMatchesSelector}function dv(e,t,n,i,r){var o=fv.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}function fv(e,t,n,i){return function(n){n.delegateTarget=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}(n.target,t),n.delegateTarget&&i.call(e,n)}}var hv=function(e,t,n,i,r){return"function"==typeof e.addEventListener?dv.apply(null,arguments):"function"==typeof n?dv.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return dv(e,t,n,i,r)})))},pv={CONTROLS:"controls",ROOT:"root"},vv={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function gv(e){return!!e&&e.indexOf&&/^http/.test(e)}function mv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return Kh.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(gv(e)||gv(e.url))return i.src=gv(e)?e:e.url||"",o=Kh.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(Kh.addClass(o,n),Object.keys(i).map((function(e){o.setAttribute(e,i[e])})),o):(Wh.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(e){return Wh.logError("Plugin named [".concat(r,"]:createIcon"),e),null}return"string"==typeof e?Kh.createDomFromHtml(e,i,n):(Wh.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}var yv,bv,wv,Cv=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ui(this,n),(e=t.call(this,i)).__delegates=[],e}return wo(n,[{key:"__init",value:function(e){if(Co(gi(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,function(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var r=e[i],o=r&&r.class?r.class:"",s=r&&r.attr?r.attr:{},a=null;n&&n[i]&&(o=function(e,t){return"object"===hi(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],o),s=function(e,t){return"object"===hi(e)&&e.attr&&"object"===hi(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],s),a=mv(n[i],i,o,s,t.pluginName)),!a&&r&&(a=mv(r.icon?r.icon:r,s,o,{},t.pluginName)),t.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var r,o,s=this.registerLanguageTexts()||{};r=s,o=this,Object.keys(r).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang,n=o.i18n;return n[e]?n[e]:r[e]&&r[e][t]||""}})}));var a="";try{a=this.render()}catch(e){throw Wh.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(a)(i=n.insert(a,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=Kh.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;var c=this.config.attr||{},l=this.config.style||{};this.setAttr(c),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===hi(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,r,o=n,s=t[o],a={root:e.root};"function"==typeof s?(i=e.config[o]||{},r=s):"object"===hi(s)&&"function"==typeof s.plugin&&(i=s.options?Kh.deepCopy(e.config[o]||{},s.options):e.config[o]||{},r=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),e.registerPlugin(r,a,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=n[t]||i[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var r=Co(gi(n.prototype),"registerPlugin",this).call(this,e,t,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var r=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){r.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===Kh.typeOf(e)?this.root.style[e]=t:void("Object"===Kh.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===Kh.typeOf(e)?this.root.setAttribute(e,t):void("Object"===Kh.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return Wh.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Co(gi(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,r=Number(n),o=e instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=t.children[s];var l=Number(a.getAttribute("data-index"));if(l>=r){c="beforebegin";break}l<r&&(c="afterend")}return o?"afterend"===c?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[s]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=hv(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}));else{var s=hv(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}return o}},{key:"ROOT_TYPES",get:function(){return pv}},{key:"POSITIONS",get:function(){return vv}}]),n}(lv),_v=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),kv=Q,xv=q,Ov=_v,Sv=rt("IE_PROTO"),Pv=Object.prototype,jv=Ov?Object.getPrototypeOf:function(e){return e=xv(e),kv(e,Sv)?e[Sv]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Pv:null},Ev=o,Tv=jv,Vv=$e,Lv=Q,Iv=fe("iterator"),Rv=!1;[].keys&&("next"in(wv=[].keys())?(bv=Tv(Tv(wv)))!==Object.prototype&&(yv=bv):Rv=!0),(null==yv||Ev((function(){var e={};return yv[Iv].call(e)!==e})))&&(yv={}),Lv(yv,Iv)||Vv(yv,Iv,(function(){return this}));var Av={IteratorPrototype:yv,BUGGY_SAFARI_ITERATORS:Rv},Dv=Av.IteratorPrototype,Mv=Wn,Bv=h,Nv=Di,Fv=_c,Hv=function(){return this},Uv=function(e,t,n){var i=t+" Iterator";return e.prototype=Mv(Dv,{next:Bv(1,n)}),Nv(e,i,!1),Fv[i]=Hv,e},zv=On,$v=Uv,Gv=jv,Wv=vc,qv=Di,Zv=$e,Kv=Ge.exports,Yv=_c,Xv=Av.IteratorPrototype,Jv=Av.BUGGY_SAFARI_ITERATORS,Qv=fe("iterator"),eg="values",tg="entries",ng=function(){return this},ig=function(e,t,n,i,r,o,s){$v(n,t,i);var a,c,l,u=function(e){if(e===r&&v)return v;if(!Jv&&e in h)return h[e];switch(e){case"keys":case eg:case tg:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,h=e.prototype,p=h[Qv]||h["@@iterator"]||r&&h[r],v=!Jv&&p||u(r),g="Array"==t&&h.entries||p;if(g&&(a=Gv(g.call(new e)),Xv!==Object.prototype&&a.next&&(Gv(a)!==Xv&&(Wv?Wv(a,Xv):"function"!=typeof a[Qv]&&Zv(a,Qv,ng)),qv(a,d,!0))),r==eg&&p&&p.name!==eg&&(f=!0,v=function(){return p.call(this)}),h[Qv]!==v&&Zv(h,Qv,v),Yv[t]=v,r)if(c={values:u(eg),keys:o?v:u("keys"),entries:u(tg)},s)for(l in c)(Jv||f||!(l in h))&&Kv(h,l,c[l]);else zv({target:t,proto:!0,forced:Jv||f},c);return c},rg=_,og=So,ag=_c,sg=wt,cg=ig,lg="Array Iterator",ug=sg.set,dg=sg.getterFor(lg),fg=cg(Array,"Array",(function(e,t){ug(this,{type:lg,target:rg(e),index:0,kind:t})}),(function(){var e=dg(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");ag.Arguments=ag.Array,og("keys"),og("values"),og("entries");var hg=ps.charAt,pg=Ci,vg=wt,gg=ig,mg="String Iterator",yg=vg.set,bg=vg.getterFor(mg);gg(String,"String",(function(e){yg(this,{type:mg,string:pg(e),index:0})}),(function(){var e,t=bg(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=hg(n,i),t.index+=e.length,{value:e,done:!1})}));var wg=r,Cg=Xo,_g=fg,kg=$e,xg=fe,Og=xg("iterator"),Sg=xg("toStringTag"),Pg=_g.values;for(var jg in Cg){var Eg=wg[jg],Tg=Eg&&Eg.prototype;if(Tg){if(Tg[Og]!==Pg)try{kg(Tg,Og,Pg)}catch(e){Tg[Og]=Pg}if(Tg[Sg]||kg(Tg,Sg,jg),Cg[jg])for(var Vg in _g)if(Tg[Vg]!==_g[Vg])try{kg(Tg,Vg,_g[Vg])}catch(e){Tg[Vg]=_g[Vg]}}}var Lg=function(){function e(){var t=this;if(ui(this,e),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(e){var n=(new Date).getTime();n-t.timeStamp<100||(t.timeStamp=n,t.__trigger(e))})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}return wo(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,i=-1,r=0;r<n.length;r++)n[r]&&e===n[r].target&&(i=r);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}},{key:"__trigger",value:function(e){for(var t=0;t<e.length&&!this.__runHandler(e[t].target);t++);}}]),e}(),Ig=null,Rg={init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.resize()},Ig||(Ig=new Lg),Ig.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var a=Object.keys(o),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=o[a[c]];"Object"===Kh.typeOf(l)?n.config=Object.assign({},n.config,o[a[c]]):"Boolean"===Kh.typeOf(l)&&(n.config.disable=!l);break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new t(n);return r[s.toLowerCase()]=u,r[s.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var r=e._pluginInfoId;if(t.pluginGroup[r]){for(var o=t.pluginGroup[r]._plugins,s=[],a=0,c=Object.keys(o);a<c.length;a++){var l=c[a];if(o[l]&&o[l].beforePlayerInit)try{var u=o[l].beforePlayerInit();s.push(n(u))}catch(e){throw s.push(n(null)),e}}Promise.all([].concat(s)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];n[o]&&n[o].afterPlayerInit&&n[o].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},i=this.pluginGroup[t]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(t,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(t,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup&&this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];if(r&&r._player){this.pluginGroup[n[i]]._player.isUserActive=!1;break}}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n;n=e.root,Ig.unObserver(n,void 0);for(var r=this.pluginGroup[t]._plugins,o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.unRegister(t,a)}var c=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,c){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},Ag={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},Dg=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Mg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"onMouseEnter",(function(t){var n=pi(e).player;n.userTimer&&(Kh.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),mi(pi(e),"onMouseLeave",(function(){pi(e).player.focus()})),e}return wo(n,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==ep.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,r=t.mode;if(!n){"flex"===r&&this.player.addClass(Ag.FLEX_CONTROLS);var o={height:"".concat(i,"px")};Object.keys(o).map((function(t){e.root.style[t]=o[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ip,(function(t){t?Kh.addClass(e.root,"mini-controls"):Kh.removeClass(e.root,"mini-controls")})),"mobile"!==ep.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&Kh.addClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){Kh.removeClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){Kh.addClass(this.root,"show")}},{key:"hide",value:function(){Kh.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:r.position;switch(o){case vv.CONTROLS_LEFT:t.root=this.left;break;case vv.CONTROLS_RIGHT:t.root=this.right;break;case vv.CONTROLS_CENTER:t.root=this.center;break;case vv.CONTROLS:t.root=this.root;break;default:t.root=this.left}return Co(gi(n.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==ep.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var r=Kh.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},mi({},Ag.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(Cv),Bg={},Ng={},Fg=[],Hg={};function Ug(){Object.keys(Bg.en).map((function(e){Ng[e]=e}))}function zg(e){("Array"!==Kh.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e).map((function(e){Bg[e.LANG]?Kh.deepMerge(Bg[e.LANG]||{},e.TEXT||{}):Hg[e.LANG]=e.TEXT})),Ug()}function $g(e){var t=e.LANG,n=e.TEXT||{};Bg[t]||Fg.push(t),Bg[t]?Kh.deepMerge(n,Bg[t]):Bg[t]=n,Hg[t]&&(zg([{LANG:t,TEXT:Hg[t]}]),delete Hg[t]),"zh-cn"===t&&(Bg.zh=Bg["zh-cn"]),Ug()}$g({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var Gg={get textKeys(){return Ng},get langKeys(){return Fg},get lang(){var e={};return Fg.map((function(t){e[t]=Bg[t]})),e.zh=Bg["zh-cn"],e},extend:zg,use:$g};function Wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wg(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zg=["play","pause","replay","retry"],Kg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n);var r,o=Kh.deepMerge({id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},e);iv(pi(i=t.call(this,o)),Zg),i.config=o,(r=pi(i)).logInfo=Wh.logInfo.bind(r),r.logWarn=Wh.logWarn.bind(r),r.logError=Wh.logError.bind(r);var s=i.constructor.defaultPreset;if(i.config.presets.length){var a=i.config.presets.indexOf("default");a>=0&&s&&(i.config.presets[a]=s)}else s&&i.config.presets.push(s);if(i.userTimer=null,i.waitTimer=null,i._state=1,i._hasStart=!1,i.isSeeking=!1,i.isCanplay=!1,i._runPending=!1,i.rotateDeg=0,i.isActive=!1,i.fullscreen=!1,i.cssfullscreen=!1,i.isRotateFullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.root=null,ep.os.isAndroid&&ep.osVersion>0&&ep.osVersion<6&&(i.config.autoplay=!1),i.database=new Kp,i.isUserActive=!1,!i._initDOM())return console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),vi(i);var c=i.config,l=c.definition,u=void 0===l?{}:l;if(!c.url&&u.list&&u.list.length>0){var d=u.list.find((function(e){return e.definition&&e.definition===u.defaultDefinition}));d||(u.defaultDefinition=u.list[0].definition,d=u.list[0]),i.config.url=d.url,i.curDefinition=d.definition}return i._bindEvents(),i._registerPresets(),i._registerPlugins(),Rg.onPluginsReady(pi(i)),i.setState(2),i.emit(xp),i.onReady&&i.onReady(),(i.config.videoInit||i.config.autoplay)&&(!i.hasStart||i.state<4)&&i.start(),i}return wo(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(lp,new ip("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=Rg.checkPlayerRoot(this.root);n&&(Wh.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.config.controls){var s=Rg.register(this,Mg);this.controls=s}var a=this.config.isMobileSimulateMode?"mobile":ep.device;if(this.addClass("".concat(Ag.DEFAULT," ").concat(Ag.INACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":Ag.NO_CONTROLS)),this.config.autoplay?this.addClass(Ag.ENTER):this.addClass(Ag.NO_START),this.config.fluid){var c=this.config,l=c.width,u=c.height;"number"==typeof l&&"number"==typeof u||(l=600,u=337.5);var d={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*u/l,"%")};Object.keys(d).forEach((function(t){e.root.style[t]=d[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=Kh.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=Kh.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=Kh.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=Kh.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&Kh.addClass(this.topBar,Ag.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),this.onFullscreenChange=function(t,n){var i=Kh.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(Up,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),n||i&&(i===e._fullscreenEl||"VIDEO"===i.tagName))Kh.setTimeout(e,(function(){e.resize()}),100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,i,Ag.FULLSCREEN),e.emit(Vp,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){Kh.setTimeout(e,(function(){e.resize()}),100);var r=e._fullScreenOffset;e.config.needFullscreenScroll?(window.scrollTo(r.left,r.top),Kh.setTimeout(e,(function(){e.fullscreen=!1,e._fullScreenOffset=null}),100)):(!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(Ag.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,Ag.FULLSCREEN),e._fullscreenEl=null,e.emit(Vp,!1)}},Yp.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},ep.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once(mp,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once(op,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Yp.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(op,this.playFunc),this.canPlayFunc&&this.off(pp,this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e&&("Array"!==Kh.typeOf(e)||0!==e.length)||(e="",this.emit(Op),Wh.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,i=e.startTime,r=e.defaultPlaybackRate;Wh.logInfo("player","canPlayFunc",i),i&&(t.currentTime=i>t.duration?t.duration:i,t.config.startTime=0),1!==r&&(t.playbackRate=r),n&&t.videoPlay(),t.off(pp,t.canPlayFunc),t.removeClass(Ag.ENTER)}},this._detachSourceEvents(this.video),"Array"===Kh.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,"Number"===Kh.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once(mp,this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;Wh.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(ep.os.isIpad||ep.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(pp,this.canPlayFunc),(!this.hasStart||this.state<4)&&Rg.afterInit(this),this.hasStart=!0,this.setState(4),Kh.setTimeout(this,(function(){t.emit(jp)}),0)}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).forEach((function(e){Gg.use(e)}));var i=t.join("||").toLowerCase().split("||");n.forEach((function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return;if(t.lazy&&t.loader){var r=Rg.lazyRegister(e,t);return void(t.forceBeforeInit&&(r.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})).catch((function(t){Wh.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})),e._loadingPlugins.push(r)))}return e.registerPlugin(t)}catch(e){Wh.logError("_registerPlugins:",e)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){var n,i,r,o,s,a,c,l,u,d,f,h,p,v;n=e,l=void 0===(c=(a=(i=t).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config)).plugins)?[]:c,d=void 0===(u=a.ignores)?[]:u,f=a.icons,h=void 0===f?{}:f,v=void 0===(p=a.i18n)?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(r=n.config.plugins).push.apply(r,Jd(l)),(o=n.config.ignores).push.apply(o,Jd(d)),Object.keys(h).map((function(e){n.config.icons[e]||(n.config.icons[e]=h[e])})),(s=n.config.i18n).push.apply(s,Jd(v))}))}},{key:"registerPlugin",value:function(e,t){var n=null,i=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t);for(var r=Object.keys(this.config),o=0;o<r.length;o++)if(n.pluginName.toLowerCase()===r[o].toLowerCase()){var s=this.config[r[o]];"Object"===Kh.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=Cv.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return Rg.register(this,n,i)}},{key:"deregister",value:function(e){"string"==typeof e?Rg.unRegister(this,e):e instanceof lv&&Rg.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return Rg.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=Rg.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(Kh.hasClass(this.root,e)||Kh.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&Kh.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return Kh.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;return this.hasStart||this.state>=3?Promise.resolve():(this.hasStart=!0,this.setState(3),Rg.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",Wh.logError("start:beforeInit:",e),e})))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===Kh.typeOf(e)&&(n=e.url);var i=this.currentTime,r=this.paused;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=i,r&&t.once("canplay",(function(){t.pause()})),e()};ep.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart||!(this.state<4)){this.state<6&&(this.removeClass(Ag.NO_START),!this.isCanplay&&this.addClass(Ag.ENTER));var t=Co(gi(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(Ag.NOT_ALLOW_AUTOPLAY),e.addClass(Ag.PLAYING),e.state<6&&(Wh.logInfo(">>>>playPromise.then"),e.setState(6),e.emit(Sp))})).catch((function(t){if(Wh.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),e.removeClass(Ag.ENTER),void e.setState(0);"NotAllowedError"===t.name&&(e._errorTimer=Kh.setTimeout(e,(function(){e._errorTimer=null,e.emit(Pp),e.addClass(Ag.NOT_ALLOW_AUTOPLAY),e.removeClass(Ag.ENTER),e.pause(),e.setState(5)}),0))})):(Wh.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.addClass(Ag.PLAYING),this.emit(Sp))),t}this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER);var i=this.start();i&&i.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){Co(gi(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(Ag.PAUSED),ov(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;ov(this,"pause",(function(){Co(gi(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.video&&!isNaN(Number(e))){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=t||(r?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(pp,(function(){switch(n.removeClass(Ag.ENTER),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<6?(this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER),this.currentTime=e,"play"===s&&this.play()):this.currentTime=e}}},{key:"changeDefinition",value:function(e,t){var n=this;if(this.emit(Rp,{from:t,to:e}),this.curDefinition=e.definition,this.hasStart){var i=this.switchURL(e.url);i&&i.then?i.then((function(){n.emit(Ap,{from:t,to:e})})):this.emit(Ap,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(mp,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[Ag.NOT_ALLOW_AUTOPLAY,Ag.PLAYING,Ag.NO_START,Ag.PAUSED,Ag.REPLAY,Ag.ENTER,Ag.ENDED,Ag.ERROR,Ag.LOADING];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(Ag.ENTER),this.emit(Cp)}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,i=this.root,r=this.video;if(i&&r){if(this._hasStart=!1,this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),Kh.clearAllTimers(this),this.emit(Ep),Rg.destroy(this),rv(this),Co(gi(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var o=t.children,s=0;s<o.length;s++)t.removeChild(o[s]);!t&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&i.removeChild(e[t]),e[t]=null}));var a=i.className.split(" ");a.length>0?i.className=a.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(Ag.ENDED),this.currentTime=0,this.isSeeking=!1,ov(this,"replay",(function(){e.once(pp,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit("replay"),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(Ag.ERROR),this.addClass(Ag.LOADING),ov(this,"retry",(function(){var t=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(pp,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=Ag.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=Kh.filterStyleFromText(e)),Kh.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=Kh.filterStyleFromText(t),Kh.addClass(t,i)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=Ag.PARENT_FULLSCREEN),this._orgCss&&(Kh.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),Kh.removeClass(e,n),t&&t!==e&&this._orgPCss&&(Kh.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",Kh.removeClass(t,i))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:Kh.scrollTop(),left:Kh.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var i=Kh.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var r=0;r<Xp.length;r++){var o=Xp[r];if(e[o]){var s="webkitRequestFullscreen"===o?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[o]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||Kh.getFullScreenEl()){this.root;var t=this.video;this._fullActionFrom="exit";try{for(var n=0;n<Jp.length;n++){var i=Jp[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(e){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,i=void 0===n?{}:n,r=!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen();r&&(this.fullscreen=!0,this.emit(Vp,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Lp,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Vp,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Lp,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(Vp,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Vp,!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(_p,qg({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(kp,qg({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoHide,i=void 0===n?!this.config.closePlayerBlur:n,r=t.delay,o=void 0===r?this.config.inactive:r;this.isActive=!0,this.removeClass(Ag.INACTIVE),this.userTimer&&Kh.clearTimeout(this,this.userTimer),i&&(this.userTimer=Kh.setTimeout(this,(function(){e.blur()}),o))}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,n=void 0!==t&&t;if(this.isActive){var i=this.config.closePauseVideoFocus;this.isActive=!1,(n||i||!this.paused&&!this.ended)&&this.addClass(Ag.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.state>=6&&this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.isCanplay=!0,this.waitTimer&&Kh.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(Ag.PAUSED),this.ended&&this.removeClass(Ag.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Ag.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&Kh.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Ag.ENDED),this.setState(7)}},{key:"onError",value:function(){this.setState(0),this.updateAcc("error"),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.addClass(Ag.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Ag.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&Kh.clearTimeout(this,this.waitTimer),this.removeClass(Ag.LOADING),this.removeClass(Ag.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&Kh.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=Kh.setTimeout(this,(function(){e.addClass(Ag.LOADING),Kh.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;[Ag.NO_START,Ag.PAUSED,Ag.ENDED,Ag.ERROR,Ag.REPLAY,Ag.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Ag.LOADING))&&this.video.readyState>2&&(this.removeClass(Ag.LOADING),Kh.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===Kh.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.video&&t&&e){var i="String"===Kh.typeOf(e)?e:e.type||"";n.props&&"Array"!==Kh.typeOf(n.props)&&(n.props=[n.props]),this.emit(Up,qg({eventType:i,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,i=t.length,r=0;r<i;r++)if(t.start(r)<=n&&t.end(r)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,r=0;e.y&&(r=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===Kh.typeOf(i.setConfig)&&i.setConfig(e[n])}))}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this.play(),this.emit(Fp,e)}},{key:"resize",value:function(){var e=this;if(this.video){var t=this.video,n=t.videoWidth,i=t.videoHeight,r=this.config,o=r.fitVideoSize,s=r.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,d=parseInt(n/i*1e3,10),f=parseInt(l/u*1e3,10),h=l,p=u,v={};"auto"===o&&f>d||"fixWidth"===o?(p=l/d*1e3,this.config.fluid?v.paddingTop="".concat(100*p/h,"%"):v.height="".concat(p+c,"px")):("auto"===o&&f<d||"fixHeight"===o)&&(h=d*u/1e3,v.width="".concat(h,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(t){e.root.style[t]=v[t]})),("fillHeight"===s&&f<d||"fillWidth"===s&&f>d)&&this.setAttribute("data-xgfill","cover");var g={videoScale:d,vWidth:h,vHeight:p,cWidth:h,cHeight:p+c};this.emit(Dp,g)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){Wh.logInfo("setState","state from:".concat(Dg[this.state]," to:").concat(Dg[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&(this._state=2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var i=null,r=null;e.forEach((function(e){t.curDefinition===e.definition&&(i=e),n.defaultDefinition===e.definition&&(r=e)})),!r&&e.length>0&&(r=e[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==Gg.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,Rg.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Gg.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return Gg.lang[e]||Gg.lang.en}},{key:"i18nKeys",get:function(){return Gg.textKeys||{}}},{key:"version",get:function(){return tp}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=Co(gi(n.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=Co(gi(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=Co(gi(n.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,t){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return nv.call.apply(nv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),Rg.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return Wh.config.debug},set:function(e){Wh.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return Rg.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){Rg.setCurrentUserActive(e,t)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(Zp);function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xg(){return(new Date).getTime()}mi(Kg,"defaultPreset",null),mi(Kg,"XgVideoProxy",null);var Jg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"_onTimeupdate",(function(){Wh.logInfo("[xgLogger]Events._onTimeupdate"),e._state.isTimeUpdate=!0,e._sendFirstFrame()})),mi(pi(e),"_onAutoplayStart",(function(){Wh.logInfo("[xgLogger]Events._onAutoplayStart"),e._state.autoplayStart=!0,e._sendFirstFrame()})),mi(pi(e),"_onReset",(function(){e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&Kh.clearTimeout(pi(e),e._waitTimer),e._waittTimer&&Kh.clearTimeout(pi(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),mi(pi(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=Xg(),e.emitLog("seekStart",{start:Xg()}))})),mi(pi(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),mi(pi(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=Xg(),e._waitType=1,e.emitLog("waitingStart",{start:e.waitingStart,type:1,endType:"loadstart"}))})),mi(pi(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e._waitTimer=Kh.setTimeout(pi(e),(function(){e._isWaiting&&(e.waitingStart=Xg(),Kh.clearTimeout(pi(e),e._waitTimer),e._waitTimer=null,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e._startWaitTimeout(),e.emitLog("waitingStart",{start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),mi(pi(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),mi(pi(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return wo(n,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(wp,(function(){var t=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,Wh.logInfo("[xgLogger]Events.LOAD_START",t),e.pt=Xg(),e.vt=0,e.fvt=0,e.off(Sp,e._onAutoplayStart),e.off(fp,e._onTimeupdate),e._onWaitingLoadStart(),t?e.once(fp,e._onTimeupdate):e.once(Sp,e._onAutoplayStart)})),this.on(mp,(function(){e.vt=Xg(),e.fvt=e.vt-e.pt,Wh.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")})),this.on(up,this._onSeeking),this.on(dp,this._onSeeked),this.on(Ep,(function(){e.endState("destroy")})),this.on(Tp,(function(){e.endState("urlChange"),e._onReset()})),this.on([ap,pp],this._onPlaying),this.on(hp,this._onWaiting),this.on(lp,this._onError),this.on(Cp,(function(){e.endState("emptied"),e._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=Xg(),this.vt>0&&this._state.isFFLoading&&(Wh.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&Kh.clearTimeout(this,this._waittTimer),this._waittTimer=Kh.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),Kh.clearTimeout(e,e._waittTimer),e._waittTimer=null}),3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=Xg(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(Kh.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(Kh.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=Xg()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:t,type:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit("xglog",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({t:Xg(),host:Kh.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Cv);function Qg(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var tm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"registerIcons",value:function(){return{replay:Qg}}},{key:"afterCreate",value:function(){var e=this;Cv.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(sp,(function(){if(e.playerConfig.loop||Kh.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(op,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),Kh.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(Cv),nm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){Kh.addClass(this.root,"hide")}},{key:"show",value:function(){Kh.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(sp,(function(){e.isEndedShow&&Kh.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(fp,(function(){e.onTimeUpdate()})),this.on(Tp,(function(){Kh.removeClass(e.root,"hide"),Kh.addClass(e.root,"xg-showplay"),e.once(fp,(function(){e.onTimeUpdate()}))}))):this.on(op,(function(){Kh.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?Kh.removeClass(this.root,"xg-showplay"):this.once(fp,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,i=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(Cv);function im(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function rm(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var om={},am=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).autoPlayStart=!1,i}return wo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(xp,(function(){n&&(n.lang&&"en"===n.lang?Kh.addClass(t.root,"lang-is-en"):"jp"===n.lang&&Kh.addClass(t.root,"lang-is-jp"))})),this.on(Sp,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";Kh.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")})),n.autoplay||this.show(),this.on(Pp,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),Kh.removeClass(e.root,t),e.show()})),this.on(op,(function(){e.onPlayPause("play")})),this.on(cp,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var n=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:im,class:"xg-icon-play"},startPause:{icon:rm,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){Kh.addClass(this.root,"hide")}},{key:"show",value:function(){Kh.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){Kh.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){Kh.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};om[e]&&window.clearTimeout(om[e].id),om[e]={},n.start&&n.start(),om[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(om[e].id),delete om[e]}),t)}("pauseplay",400,{start:function(){Kh.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){Kh.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<2||(this.player.paused||6!==t.state?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(!(n.state<6)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(om).map((function(e){window.clearTimeout(om[e].id),delete om[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(Cv),sm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=Kh.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(Cv),cm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:10}}}]),n}(Cv);function lm(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var um=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],dm=um.length;function fm(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===hi(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<dm;t++)e[um[t]]=0;return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var i=n.isBorderBox="border-box"===t.boxSizing,r=0;r<dm;r++){var o=um[r],s=t[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,d=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,h=n.borderTopWidth+n.borderBottomWidth,p=i,v=lm(t.width);!1!==v&&(n.width=v+(p?0:c+f));var g=lm(t.height);return!1!==g&&(n.height=g+(p?0:l+h)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(l+h),n.outerWidth=n.width+u,n.outerHeight=n.height+d,n}}function hm(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier===t)return i}}var pm={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},vm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ui(this,n),(i=t.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=e instanceof Element?e:document.querySelector(e),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):vi(i)}return wo(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),pm[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=pm[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=hm(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=hm(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=hm(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=fm(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(e,t),s=o.x,a=o.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,r),this.position.x=i+s,this.position.y=r+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit("dragMove",this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=fm(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(Yd),gm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n),mi(pi(i=t.call(this,e)),"onCancelClick",(function(e){i.exitMini(),i.isClose=!0})),mi(pi(i),"onCenterClick",(function(e){var t=pi(i).player;t.paused?t.play():t.pause()})),mi(pi(i),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var t=parseInt(Kh.getCss(i.player.root,"height"));t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=pi(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return wo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(cp,(function(){e.setAttr("data-state","pause")})),this.on(op,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(cm,n,cm.pluginName)}var i=Kh.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new vm(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:im,class:"xg-icon-play"},pause:{icon:rm,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Kh.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=i.style[t],i.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(Ip,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Kh.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){i.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(Ip,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=Kh.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(Cv),mm={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},ym=["videoClick","videoDbClick"],bm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"onMouseMove",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus())})),mi(pi(e),"onMouseEnter",(function(t){var n=pi(e),i=n.playerConfig,r=n.player;r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.video.focus()})),mi(pi(e),"onMouseLeave",(function(t){var n=e.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime;i||(r?e.player.focus({autoHide:!0,delay:r}):e.player.blur())})),mi(pi(e),"onVideoClick",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;t.target&&r.closeVideoClick||t.target!==i.video&&t.target!==i.innerContainer&&t.target!==i.video.__canvas||(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,ov(pi(e),ym[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:i.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),mi(pi(e),"onVideoDblClick",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;!t.target||t.target!==i.video&&t.target!==i.video.__canvas||r.closeVideoDblclick||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),ov(pi(e),ym[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:t,fullscreen:i.fullscreen})))})),e}return wo(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,ym.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,n=t.enableContextmenu;t.isMobileSimulateMode||"mobile"===ep.device&&!ep.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,i=t.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(mm).map((function(t){i.addEventListener(t,e[mm[t]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,i=t.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(mm).map((function(t){i.removeEventListener(t,e[mm[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(lv),wm=p,Cm=Lt,_m=Ci,km=w,xm=On,Om=Lt,Sm=function(e){var t=_m(km(this)),n="",i=Cm(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},Pm=o,jm=1..toFixed,Em=Math.floor,Tm=function(e,t,n){return 0===t?n:t%2==1?Tm(e,t-1,n*e):Tm(e*e,t/2,n)},Vm=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=Em(r/1e7)},Lm=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=Em(i/t),i=i%t*1e7},Im=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=String(e[t]);n=""===n?i:n+Sm.call("0",7-i.length)+i}return n};xm({target:"Number",proto:!0,forced:jm&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Pm((function(){jm.call({})}))},{toFixed:function(e){var t,n,i,r,o=function(e){if("number"!=typeof e&&"Number"!=wm(e))throw TypeError("Incorrect invocation");return+e}(this),s=Om(e),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Tm(2,69,1))-69)<0?o*Tm(2,-t,1):o/Tm(2,t,1),n*=4503599627370496,(t=52-t)>0){for(Vm(a,0,n),i=s;i>=7;)Vm(a,1e7,0),i-=7;for(Vm(a,Tm(10,i,1),0),i=t-1;i>=23;)Lm(a,1<<23),i-=23;Lm(a,1<<i),Vm(a,1,1),Lm(a,2),l=Im(a)}else Vm(a,0,n),Vm(a,1<<-t,0),l=Im(a)+Sm.call("0",s);return s>0?c+((r=l.length)<=s?"0."+Sm.call("0",s-r)+l:l.slice(0,r-s)+"."+l.slice(r-s)):c+l}});var Rm="pressend",Am={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Dm={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Mm(e){return e&&e.length>0?e[e.length-1]:null}function Bm(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var Nm=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};ui(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(e){n.config[e]=i[e]})),this.root=t,this.events="mouse"===i.eventType?Dm:Am,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return wo(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger("press",e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger("click",e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],i=-1,r=0;r<n.length;r++)if(n[r]===t){i=r;break}i>=0&&this.__handlers[e].splice(i,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(t){console.error("trigger>>:".concat(e),t)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&Bm(e);var i=Mm(e.touches);t.x=i?parseInt(i.pageX,10):e.pageX,t.y=i?parseInt(i.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger("touchstart",e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&Bm(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(Rm,e),this.trigger("touchend",e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,i=Mm(e.touches),r=i?parseInt(i.pageX,10):e.pageX,o=i?parseInt(i.pageY,10):e.pageX,s=r-t.x,a=o-t.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(Rm,e),t.press=!1,t.moving=!0,this.trigger("touchmove",e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function Fm(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var Hm="auto",Um="seeking",zm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),mi(pi(i=t.call(this,e)),"onTouchStart",(function(e){var t=pi(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=i.getTouche(e);if(a&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,Kh.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),i.find(".xg-dur").innerHTML=Kh.format(i.duration);var c=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(a.pageX-o.left,10),u=parseInt(a.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),mi(pi(i),"onTouchMove",(function(e){var t=i.getTouche(e),n=pi(i),r=n.pos,o=n.config,s=n.player;if(t&&!o.disableGesture&&i.duration&&r.isStart){var a=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(t.pageX-r.left,10),u=parseInt(t.pageY-r.top,10),d=90===s.rotateDeg?u:l,f=90===s.rotateDeg?l:u;if(Math.abs(d-r.x)>a||Math.abs(f-r.y)>a){var h=d-r.x,p=f-r.y,v=r.scope;if(-1===v&&(0===(v=i.checkScope(d,f,h,p,r))&&(c?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*i.timeOffset)),r.scope=v),-1===v||v>0&&!o.gestureY||0===v&&!o.gestureX)return;e.cancelable&&e.preventDefault(),i.executeMove(h,p,v,r.width,r.height),r.x=d,r.y=f}}})),mi(pi(i),"onTouchEnd",(function(e){var t=pi(i),n=t.player,r=t.pos,o=t.playerConfig;r.isStart&&(r.scope>-1&&e.cancelable&&e.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),Kh.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(Hm))})),mi(pi(i),"onRootTouchMove",(function(e){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.pos.isStart?i.onTouchMove(e):i.onTouchStart(e))})),mi(pi(i),"onRootTouchEnd",(function(e){i.pos.isStart&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.onTouchEnd(e))})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Fm,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),Kh.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=Kh.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new Nm(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(vp,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([pp,sp],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(n){e[o[t]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),s.addCallBack("dragend",(function(){e.changeAction(Hm)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Kh.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,i,r){var o=r.width,s=-1;if(e<0||e>o)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&e>r.scopeM1&&e<r.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=e<r.scopeL?1:e>r.scopeR?2:3),s}},{key:"executeMove",value:function(e,t,n,i,r){switch(n){case 0:this.updateTime(e/i*this.config.scopeM);break;case 1:this.updateBrightness(t/r);break;case 2:ep.os.isIos||this.updateVolume(t/r)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;switch(e){case 0:i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)}this.changeAction(Hm)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"onClick",value:function(e){var t=this.player,n=this.config,i=this.playerConfig;t.state<6?i.closeVideoClick||(this.sendUseAction(new Event("click")),t.play()):!n.closedbClick||i.closeVideoClick?t.isActive?t.blur():t.focus():i.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.state>=6&&(this.sendUseAction(new Event("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:i.playbackRate,to:t.rate}),i.playbackRate=t.rate,t.rate=1,this.changeAction(Hm))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,i=this.player.duration;e=Number(e.toFixed(4));var r=parseInt(e*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,t.getPlugin("time")&&t.getPlugin("time").updateTime(r/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,e>0),n.isTouchingSeek&&t.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var i=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,t.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,i=this.xgMask,r=t.light+.8*e;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),t.light=r}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!r&&!i.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Um);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=Kh.format(this.duration),this.find(".xg-cur").innerHTML=Kh.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?Kh.removeClass(this.find(".xg-seek-show"),"xg-back"):Kh.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<4)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(Cv);function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gm(e){e.preventDefault(),e.returnValue=!1}function Wm(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var qm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||Wm(n.target))||!e.checkCode(i,!0)||(Gm(n),e.handleKeyCode(i,t),1))}})),mi(pi(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;Gm(n),e.handleKeyCode(n.keyCode,t)}})),e}return wo(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,i=e.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*t||i>0&&i-r>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&e===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!t||t&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t,n=this.player,r=n.currentTime,i=n.duration,o={currentTime:{from:r,to:t=r+this.seekStep<=i?r+this.seekStep:i-1}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=t}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var i={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.fullscreen,i=t.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),t.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,s=r.keyCode,a=r.disable;s!==e||a||("function"==typeof o?o(t,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](t,n.player),n.emit(Hp,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:i,target:t.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(lv);function Zm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var Km=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"registerIcons",value:function(){return{loadingIcon:Zm}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT}}}]),n}(Cv),Ym=On,Xm=Yi.findIndex,Jm=So,Qm="findIndex",ey=!0;Qm in[]&&Array(1).findIndex((function(){ey=!1})),Ym({target:"Array",proto:!0,forced:ey},{findIndex:function(e){return Xm(this,e,arguments.length>1?arguments[1]:void 0)}}),Jm(Qm);var ty=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],ny=function(){function e(t){ui(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return wo(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,i=this.fragments;this.fragments=i.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=t.newIndex,o=t.curIndex,s=t.millisecond;r!==o&&n.map((function(t,n){n<r?t[e].style.width="100%":n>r&&(t[e].style.width=0)}));var a=i[r],c=0===s?0:(s-a.start)/a.duration;n[r][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==Kh.typeOf(e.played)){var r=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==Kh.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,i){e>n.start&&e<=n.end&&(t=i)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(Kh.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)Kh.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return Kh.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=Kh.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=Kh.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(i),ty.map((function(t){i.appendChild(Kh.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),e}(),iy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),mi(pi(i=t.call(this,e)),"onMoveOnly",(function(e){var t=pi(i),n=t.pos,r=t.config,o=t.player;Kh.event(e);var s=Kh.getEventPos(e,o.zoom),a=90===o.rotateDeg?s.clientY:s.clientX;if(!(n.moving&&Math.abs(n.x-a)<r.miniMoveStep)){n.moving=!0,n.x=a;var c=i.computeTime(e);i.triggerCallbacks("dragmove",c,e)}})),mi(pi(i),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),mi(pi(i),"_mouseDownHandler",(function(e,t){i._state.time=t.currentTime,i.updateWidth(t.currentTime,t.percent,0)})),mi(pi(i),"_mouseUpHandler",(function(e,t){pi(i).pos.moving&&i.updateWidth(t.currentTime,t.percent,2)})),mi(pi(i),"_mouseMoveHandler",(function(e,t){var n=pi(i),r=n._state,o=n.pos,s=n.config,a=n.player;r.time<t.currentTime?t.forward=!0:t.forward=!1,r.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&a.pause(),i.triggerCallbacks("dragstart",t,e)),i.updateWidth(t.currentTime,t.percent,1),i.triggerCallbacks("dragmove",t,e)})),mi(pi(i),"onMouseDown",(function(e){var t=pi(i),n=t.player,r=t.pos,o=t.config,s=t.playerConfig,a=Kh.getEventPos(e,n.zoom),c=90===n.rotateDeg?a.clientY:a.clientX;if(!(n.isMini||o.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){e.stopPropagation(),i.focus(),Kh.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),Kh.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),Kh.event(e),r.x=c,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,Kh.addClass(i.progressBtn,"active");var l=i.computeTime(e);return i._mouseDownHandlerHook(e,l),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),mi(pi(i),"onMouseUp",(function(e){var t=pi(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=t._state;e.stopPropagation(),e.preventDefault(),Kh.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),Kh.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),Kh.event(e),Kh.removeClass(i.progressBtn,"active");var c=i.computeTime(e);o.moving?i.triggerCallbacks("dragend",c,e):i.triggerCallbacks("click",c,e),i._mouseUpHandlerHook(e,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,a.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?!s.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(e)),Kh.setTimeout(pi(i),(function(){i.resetSeekState()}),10),n.focus()})),mi(pi(i),"onMouseMove",(function(e){var t=pi(i),n=t.pos,r=t.player,o=t.config;Kh.checkTouchSupport()&&e.preventDefault(),Kh.event(e);var s=Kh.getEventPos(e,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX,c=Math.abs(n.x-a);if(!(n.moving&&c<o.miniMoveStep||!n.moving&&c<o.miniStartStep)){n.x=a;var l=i.computeTime(e);i._mouseMoveHandlerHook(e,l)}})),mi(pi(i),"onMouseOut",(function(e){i.triggerCallbacks("mouseout",null,e)})),mi(pi(i),"onMouseOver",(function(e){i.triggerCallbacks("mouseover",null,e)})),mi(pi(i),"onMouseEnter",(function(e){var t=pi(i),n=t.player,r=t.pos;i.triggerCallbacks("mouseenter",null,e),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),mi(pi(i),"onMouseLeave",(function(e){i.triggerCallbacks("mouseleave",null,e);var t=pi(i),n=t.player,r=t.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"createInner",value:function(){var e=this;this.innerList=new ny({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===ep.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(fp,(function(){e.onTimeupdate()})),this.on(dp,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(bp,(function(){e.onCacheUpdate()})),this.on(sp,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(Cp,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===hi(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===e)try{i.handler(t,n)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),e)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===e&&n.handler===t&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",Kh.stopPropagation),t.center&&t.center.addEventListener("touchend",Kh.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){Kh.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),Kh.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=e>r.duration?r.duration-.2:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(e){var t,n,i,r=this.player,o=this.root.getBoundingClientRect(),s=o.width,a=o.height,c=o.top,l=o.left,u=Kh.getEventPos(e,r.zoom);90===r.rotateDeg?(t=a,n=c,i=u.clientY):(t=s,n=l,i=u.clientX);var d=i-n,f=(d=d>t?t:d<0?0:d)/t;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:d,width:t,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!(e.isSeeking||this.isProgressMoving||e.state<6)){if(t.now>-1){var i=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&i>300||1===t.direc&&i>-300)return void(t.now=-1);t.now=-1}var r=this.timeOffset+e.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",Kh.stopPropagation),t.center&&t.center.removeEventListener("touchend",Kh.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(Cv),ry=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(cp,(function(){e.animate(t.paused)})),this.on(op,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:im,class:"xg-icon-play"},pause:{icon:rm,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(Cv);function oy(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var ay=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:oy,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){Kh.addClass(this.root,"show")}},{key:"hide",value:function(){Kh.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT_TOP,index:0}}}]),n}(Cv);function sy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function cy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ly=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return wo(n,[{key:"afterCreate",value:function(){var e=this,t=this.config,n=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=Kh.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var n=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Vp,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:ay,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===ep.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:sy,class:"xg-get-fullscreen"},exitFullscreen:{icon:cy,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===ep.device?"touchend":"click",this.handleFullscreen),"mobile"===ep.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):n.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen()}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){Co(gi(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){Co(gi(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(Cv),uy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).isActiving=!1,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(vp,(function(){e.onTimeUpdate()})),this.on(fp,(function(){e.onTimeUpdate()})),this.on(Cp,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&Co(gi(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!(this.config.disable||this.isActiving||e.state<6&&4!==e.state)){var t=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=Kh.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=Kh.format(this.duration))):(this.timeDom.innerHTML=Kh.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=Kh.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=Kh.format(0),this.centerDurDom.innerHTML=Kh.format(0)):(this.timeDom.innerHTML=Kh.format(0),this.durationDom.innerHTML=Kh.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=Kh.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Kh.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(Kh.hide(this.durationDom),Kh.hide(this.timeDom),Kh.hide(this.find(".time-separator")),Kh.show(this.find(".time-live-tag"))):Kh.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(Kh.hide(this.durationDom),Kh.hide(this.timeDom),Kh.hide(this.find(".time-separator")),Kh.show(this.find(".time-live-tag"))):(Kh.hide(this.find(".time-live-tag")),Kh.show(this.find(".time-separator")),Kh.show(this.durationDom),Kh.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=Kh.format(e):this.centerCurDom.innerHTML=Kh.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(dp,n),t.isSeeking?this.once(dp,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(Cv);function dy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function fy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function hy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var py=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"onBarMousedown",(function(t){var n=pi(e).player,i=e.find(".xgplayer-slider"),r=e.find(".xgplayer-bar");i.focus(),Kh.event(t);var o=r.getBoundingClientRect(),s=Kh.getEventPos(t,n.zoom),a=o.height-(s.clientY-o.top);if(s.h=a,s.barH=o.height,e.pos=s,!(a<-2))return e.updateVolumePos(a,t),document.addEventListener("mouseup",e.onBarMouseUp),e.isStart=!0,!1})),mi(pi(e),"onBarMouseMove",(function(t){if(e.isStart){var n=pi(e),i=n.pos,r=n.player;t.preventDefault(),t.stopPropagation(),Kh.event(t);var o=Kh.getEventPos(t,r.zoom);e.isMoving=!0;var s=i.h-o.clientY+i.clientY;s>i.barH||e.updateVolumePos(s,t)}})),mi(pi(e),"onBarMouseUp",(function(t){Kh.event(t),document.removeEventListener("mouseup",e.onBarMouseUp),e.isStart=!1,e.isMoving=!1})),mi(pi(e),"onMouseenter",(function(t){e._timerId&&(Kh.clearTimeout(pi(e),e._timerId),e._timerId=null),Kh.addClass(e.root,"slide-show")})),mi(pi(e),"onMouseleave",(function(t){e._timerId&&(Kh.clearTimeout(pi(e),e._timerId),e._timerId=null),e._timerId=Kh.setTimeout(pi(e),(function(){Kh.removeClass(e.root,"slide-show"),e.isStart&&e.onBarMouseUp(t),e._timerId=null}),200)})),mi(pi(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,i=n.muted,r=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(i,r)}})),e}return wo(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:fy,class:"xg-volume-small"},volumeLarge:{icon:dy,class:"xg-volume"},volumeMuted:{icon:hy,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,i=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),"mobile"===ep.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(gp,this.onVolumeChange),this.once(mp,this.onVolumeChange),"Number"!==Kh.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(e/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(e,"px");var s=Math.max(Math.min(o/1e3,1),0),a={volume:{from:n.volume,to:s}};n.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:a}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(t,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===ep.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(Cv);function vy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var gy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).rotateDeg=i.config.rotateDeg||0,i}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Dp,(function(){e.rotateDeg&&Kh.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var i=this.player,r=i.root,o=i.innerContainer,s=i.video,a=r.offsetWidth,c=o&&t?o.offsetHeight:r.offsetHeight,l="100%",u="100%",d=0,f=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(a,"px"),d=-(c-a)/2,f=-(a-c)/2);var h="translate(".concat(d,"px,").concat(f,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:h,webKitTransform:h,height:u,width:l},v=t?s:r,g=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){v.style[e]=p[e],g&&g.root&&(g.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,t),i.emit(Bp,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:vy}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(Cv);function my(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function yy(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var by="picture-in-picture",wy="fullscreen",Cy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.video.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return wo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(jp,(function(){e.config.showIcon&&(Kh.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:my,class:"xg-get-pip"},pipIconExit:{icon:yy,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;Kh.setTimeout(e,(function(){!n&&t.videoPlay()}),0),!n&&t.videoPlay(),e.setAttr("data-state","normal"),t.emit(Mp,!1)},this.enterPIPCallback=function(n){t.emit(Mp,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=t.video.webkitPresentationMode;e.pMode===wy&&i!==wy&&t.onFullscreenChange(null,!1),e.pMode=i,i===by?e.enterPIPCallback(n):"inline"===i&&e.leavePIPCallback(n)},t.video&&(t.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.video.poster="String"===Kh.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===by}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return("Boolean"!==Kh.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===Kh.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===Kh.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}(Cv);function _y(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ky=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),mi(pi(i=t.call(this,e)),"playNext",(function(e){var t=pi(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),t.emit(Fp,i.idx+1)):(i.nextHandler(),t.emit(Fp))})),i.idx=-1,i}return wo(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:_y}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===ep.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(Cv),xy={exports:{}};!function(e,t){e.exports=function e(t,n,i){var r,o,s=window,a="application/octet-stream",c=i||a,l=t,u=!n&&!i&&l,d=document.createElement("a"),f=function(e){return String(e)},h=s.Blob||s.MozBlob||s.WebKitBlob||f,p=n||"download";if(h=h.call?h.bind(s):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var v=new XMLHttpRequest;return v.open("GET",u,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,p,a)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(w(l),p):b(l);c=(l=w(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var g=0,m=new Uint8Array(l.length),y=m.length;g<y;++g)m[g]=l.charCodeAt(g);l=new h([m],{type:c})}function w(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=i.charCodeAt(o);return new h([s],{type:n})}function b(e,t){if("download"in d)return d.href=e,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=l instanceof h?l:new h([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+c+";base64,"+s.btoa(r))}catch(e){return b("data:"+c+","+encodeURIComponent(r))}(o=new FileReader).onload=function(e){b(this.result)},o.readAsDataURL(r)}return!0}}(xy);var Oy=xy.exports;function Sy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Py=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),mi(pi(i=t.call(this,e)),"download",(function(e){if(!i.isLock){i.emitUserAction(e,"download");var t=i.getAbsoluteURL(i.player.src);Oy(t),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return wo(n,[{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Sy}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(Cv),jy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(Dp,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(Np,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,s=i.quality||r.quality,a=i.type||r.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=e||r.width,n.canvas.height=t||r.height):n.createCanvans(e,t),n.canvasCtx.drawImage(o.video,0,0,e||r.width,t||r.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Dp,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(Cv),Ey=function(){function e(t){ui(this,e),this.config=t.config,this.parent=t.root,this.root=Kh.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===ep.device?"touchend":"click";this._delegates=Cv.delegate.call(this,this.root,"li",n,this.onItemClick)}return wo(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){i.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var i=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(Kh.createDom("li","<span>".concat(e.showText,"</span>"),e,i))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&Kh.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Kh.addClass(t,"selected"),i&&Kh.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Kh.removeClass(this.root,"hide"),Kh.addClass(this.root,"active")}},{key:"hide",value:function(){Kh.removeClass(this.root,"active"),Kh.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),Ty="mobile"===ep.device,Vy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).isActive=!1,i.curValue=null,i.curIndex=0,i}return wo(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;Ty&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&Kh.addClass(this.root,"portrait"),this.once(pp,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),Ty&&this.on(_p,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=Ty?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Kh.addClass(this.root,"show")}},{key:"hide",value:function(){Kh.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;return!n&&(n=this.player.lang),t=!t||Kh.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]),"object"===hi(e[t])?e[t][n]||e[t].zh:e[t]||""}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(this.isActive!==e){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Ty||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),r)return r.renderItemList(e),void this.changeCurrentText();var s={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new Ey(s),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(Cv),Ly=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).curTime=0,i.isPaused=!0,i}return wo(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;Co(gi(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(Rp,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var i=null;t.map((function(e){e.definition===n&&(i=e)})),i||(i=t[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],i=arguments.length>1?arguments[1]:void 0,r=i&&i.definition?i.definition:this.config.defaultDefinition;i&&t.forEach((function(e){e.selected=!1}));var o=0,s=t.map((function(t,n){var i={url:t.url,definition:t.definition||"",showText:e.getTextByLang(t)||t.definition,selected:!1};return(t.selected||t.definition&&t.definition===r)&&(i.selected=!0,o=n),i}));Co(gi(n.prototype),"renderItemList",this).call(this,s,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){Co(gi(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to}),this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(Vy),Iy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).curRate=1,i}return wo(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;Co(gi(n.prototype),"afterCreate",this).call(this),this.on(yp,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&Co(gi(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){Co(gi(n.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var i=0,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===t&&(o.selected=!0,i=r),o.showText=e.getTextByLang(n),o}));Co(gi(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"destroy",value:function(){Co(gi(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(Vy);function Ry(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Ay(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Dy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Lp,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Ry,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Ay,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(Cv),My=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(pp,(function(){e.handleCanPlay()})),this.on(lp,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){Kh.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,i=t.errorNote?this.i18n[t.errorNote]:"";if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(Cv),By=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=i;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),Kh.addClass(this.root,"show"),"arrow"===n.mode&&Kh.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var s=n.interval||r;this.intervalId=setTimeout((function(){t.hide()}),s)}}}},{key:"hide",value:function(){Kh.removeClass(this.root,"show"),Kh.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Ag.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(Cv),Ny={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Fy(e){Object.keys(Ny).map((function(t){void 0===e[t]&&(e[t]=Ny[t])}))}var Hy={initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this._ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(Fy(e),this._ispots.push(e)),this._ispotsInit||!t)){var i=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(e.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=Kh.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},o);Object.keys(r).map((function(e){s.style[e]=r[e]})),n.outer&&n.outer.appendChild(s)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(e.id);if(i&&Object.keys(e).map((function(t){i[t]=e[t]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(e.id,'"]'));if(r){var o=this.calcuPosition(e.time,e.duration),s=e.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",e.text),r.setAttribute("data-time",e.time),o.isMini?Kh.addClass(r,"mini"):Kh.removeClass(r,"mini"),Object.keys(s).map((function(e){r.style[e]=s[e]})),t&&this.showDot(e.id)}}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<t.length;r++)t[r].id===e&&i.push(r);for(var o=i.length-1;o>=0;o--)if(t.splice(i[o],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(e,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this._ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>t.length)for(var o=r-1;o>t.length-1;o--)n.outer.removeChild(i[o]);t.map((function(t,n){n<r?(i[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}},Uy={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},zy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),mi(pi(i=t.call(this,e)),"onMousemove",(function(e){(i._state.f||Kh.hasClass(e.target,"xg-spot-content"))&&(Kh.event(e),e.stopPropagation())})),mi(pi(i),"onMousedown",(function(e){(i._state.f||Kh.hasClass(e.target,"xg-spot-content"))&&(Kh.event(e),e.stopPropagation())})),mi(pi(i),"onDotMouseLeave",(function(e){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null;var t=i.player.plugins.progress;t&&t.enableBlur(),i.show()})),mi(pi(i),"onProgressMouseOver",(function(e,t){if(Kh.hasClass(t.target,"xgplayer-spot")&&!i._curDot){i._curDot=t.target,i.focusDot(t.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i._state={now:0,f:!1},i}return wo(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),function(e){var t=e.config,n=e.player;Object.keys(Hy).map((function(t){e[t]=Hy[t].bind(e)}));var i=n.config.progressDot||t.ispots||[];e._ispots=i.map((function(e){return Fy(e),e})),e._ispotsInit=!1,n.once(vp,(function(){e.initDots()}))}(this)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(Uy).map((function(n){e[Uy[n]]=e[Uy[n]].bind(e),t.addCallBack(n,e[Uy[n]])})),"mobile"!==ep.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){console.log("onProgressDragStart"),this.isDrag=!0,this.videoPreview&&Kh.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&Kh.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(e,t){if(Kh.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n,i,r=this.root,o=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=r.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=e-c/2;u<0&&!a?(u=0,n=e-c/2,!this.thumbnail&&(i=e-c/2-l/2)):u>t-c&&!a?(n=u-(t-c),!this.thumbnail&&(i=u-(t-c)-l/2),u=t-c):!this.thumbnail&&(i=-l/2),o.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",s.style.transform=void 0!==i?"translateX(".concat(i,"px)"):"",r.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(e,t),s.now=n;var a=Kh.format(n);i&&i.target&&Kh.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,r.width,r.height)}}},{key:"changeThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==ep.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i.changeConfig(e),i&&i.usable&&n.isShowThumbnail){Kh.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&r.removeChild(this.thumbnail),this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Kh.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{Kh.addClass(this.root,"short-line no-thumbnail");var o=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&o.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==ep.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i&&Object.keys(e).map((function(t){i.config[t]=e[t]})),i&&i.usable&&n.isShowThumbnail){Kh.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Kh.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else Kh.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return e+t>i.duration&&(t=i.duration-e),i.duration,i.duration,{left:e/i.duration*100,width:t/i.duration*100,isMini:t<o}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,i=t.time/this.player.duration*n;this.updatePosition(i,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),Kh.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(Kh.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Kh.addClass(this.root,"no-timepoint"),e&&(Kh.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(Kh.addClass(this.root,"product"),this.tipText.textContent=e):(Kh.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){Kh.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",Kh.removeClass(this.find(".xg-spot-content"),"show-text"),Kh.removeClass(this.root,"product")}},{key:"hide",value:function(){Kh.addClass(this.root,"hide")}},{key:"show",value:function(){Kh.removeClass(this.root,"hide")}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(Uy).map((function(n){t.removeCallBack(n,e[Uy[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===ep.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),n}(Cv),$y=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).ratio=1,i.interval=-1,i.preloadMark={},i}return wo(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([vp],(function(){var t=e.config,n=t.pic_num,i=t.interval;e.usable&&(e.interval=i>0?i:Math.round(1e3*e.player.duration/n)/1e3)}))}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.pic_num,r=e.interval;this.ratio=t/n*100,this.interval=r>0?r:Math.round(1e3*this.player.duration/i)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,i=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<i&&(Kh.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,s=i.col,a=i.width,c=i.height,l=Math.ceil(e/this.interval),u=(l=l>r?r:l)<o*s?0:Math.ceil(l/(o*s))-1,d=l-u*(s*o),f=d>0?Math.ceil(d/s)-1:0,h=d>0?d-f*s-1:0,p=0,v=0;if(t&&n){var g=t/n;g<a/c?v=(p=t)/(a/c):p=(v=n)*(a/c)}else v=(p=t||a)/(a/c);var m=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:f,colIndex:h,url:m,height:v,width:p,style:{backgroundImage:"url(".concat(m,")"),backgroundSize:"".concat(p*s,"px auto"),backgroundPosition:"-".concat(h*p,"px -").concat(f*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.config,s=o.pic_num,a=o.urls;if(!(s<1)&&a&&0!==a.length){var c=this.getPosition(t,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(r).map((function(t){e.style[t]=r[t]}))}}},{key:"changeConfig",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){void 0!==e.config[n]&&(e.config[n]=t[n])})),this.usable&&this.initThumbnail()}},{key:"createThumbnail",value:function(e,t){var n=Kh.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(Cv),Gy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Cv),Wy="realtime",qy="firstframe";function Zy(){try{return window.performance.now()}catch(e){return(new Date).getTime()}}function Ky(e){return"safari"!==ep.browser||!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.src)}var Yy=null,Xy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"onLoadedData",(function(){if(e.player){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10)}})),mi(pi(e),"start",(function(){var t=e.player.video,n=Zy();Ky(t)&&e.canvasCtx&&(e.stop(),(e.config.mode===Wy||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight),e.preTime=n),e.frameId=window.setTimeout((function(){e.start()}),e.interval))})),mi(pi(e),"stop",(function(){e.frameId&&(window.clearTimeout(e.frameId),e.frameId=null)})),e}return wo(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,i=t.disable,r=t.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(jp,(function(){e.player&&(e.init(),!e.player.paused&&e.start())})),this.once(mp,this.onLoadedData),this.on(Tp,(function(){e.once(mp,e.onLoadedData)})),r!==qy&&(this.on(op,(function(){e.start()})),this.on(cp,(function(){e.stop()}))),r===qy&&this.once(fp,(function(){var t=e.player.video;t&&Ky(t)&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight)})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d");var r=this.playerConfig.poster;if(r){var o="String"===Kh.typeOf(r)?r:"String"===Kh.typeOf(r.poster)?r.poster:null;this.updateImg(o)}}catch(e){Wh.logError("plugin:DynamicBg",e)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){t.canvas&&(t.canvas.height=r,t.canvas.width=i,o=null)},o.src=e}}},{key:"update",value:function(e,t,n){if(this.canvas&&this.canvasCtx&&this.videoPI)try{var i=this._pos,r=this.config,o=this.canvas.getBoundingClientRect(),s=o.width,a=o.height;if(this.videoPI=parseInt(t/n*100,10),s!==i.width||a!==i.height){var c=parseInt(s/a*100,10);i.width=this.canvas.width=s,i.height=this.canvas.height=a;var l=a,u=s;c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),i.rwidth=1.2*u,i.rheight=1.2*l,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(e,i.x,i.y,i.rwidth,i.rheight)}catch(e){Wh.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof Yy?Yy:Yy=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===ep.browser||"firefox"===ep.browser)}}]),n}(Cv),Jy={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Qy=o,eb=fe("iterator"),tb=!Qy((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[eb]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),nb=De,ib=Lc,rb=Bi,ob=q,ab=function(e,t,n,i){try{return i?t(nb(n)[0],n[1]):t(n)}catch(t){throw ib(e),t}},sb=Sc,cb=At,lb=po,ub=Tc,db=2147483647,fb=/[^\0-\u007E]/,hb=/[.\u3002\uFF0E\uFF61]/g,pb="Overflow: input needs wider integers to process",vb=Math.floor,gb=String.fromCharCode,mb=function(e){return e+22+75*(e<26)},yb=function(e,t,n){var i=0;for(e=n?vb(e/700):e>>1,e+=vb(e/t);e>455;i+=36)e=vb(e/35);return vb(i+36*e/(e+38))},bb=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(gb(n));var c=i.length,l=c;for(c&&i.push("-");l<r;){var u=db;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var d=l+1;if(u-o>vb((db-s)/d))throw RangeError(pb);for(s+=(u-o)*d,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++s>db)throw RangeError(pb);if(n==o){for(var f=s,h=36;;h+=36){var p=h<=a?1:h>=a+26?26:h-a;if(f<p)break;var v=f-p,g=36-p;i.push(gb(mb(p+v%g))),f=vb(v/g)}i.push(gb(mb(f))),a=yb(s,d,l==c),s=0,++l}}++s,++o}return i.join("")},wb=De,Cb=Tc,_b=On,kb=S,xb=tb,Ob=Ge.exports,Sb=fc,Pb=Di,jb=Uv,Eb=wt,Tb=Cc,Vb=Q,Lb=Bi,Ib=rc,Rb=De,Ab=k,Db=Ci,Mb=Wn,Bb=h,Nb=function(e){var t=Cb(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return wb(t.call(e))},Fb=Tc,Hb=fe,Ub=kb("fetch"),zb=kb("Request"),$b=zb&&zb.prototype,Gb=kb("Headers"),Wb=Hb("iterator"),qb="URLSearchParams",Zb="URLSearchParamsIterator",Kb=Eb.set,Yb=Eb.getterFor(qb),Xb=Eb.getterFor(Zb),Jb=/\+/g,Qb=Array(4),ew=function(e){return Qb[e-1]||(Qb[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},tw=function(e){try{return decodeURIComponent(e)}catch(t){return e}},nw=function(e){var t=e.replace(Jb," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(ew(n--),tw);return t}},iw=/[!'()~]|%20/g,rw={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ow=function(e){return rw[e]},aw=function(e){return encodeURIComponent(e).replace(iw,ow)},sw=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:nw(i.shift()),value:nw(i.join("="))}))},cw=function(e){this.entries.length=0,sw(this.entries,e)},lw=function(e,t){if(e<t)throw TypeError("Not enough arguments")},uw=jb((function(e,t){Kb(this,{type:Zb,iterator:Nb(Yb(e).entries),kind:t})}),"Iterator",(function(){var e=Xb(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),dw=function(){Tb(this,dw,qb);var e,t,n,i,r,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(Kb(u,{type:qb,entries:d,updateURL:function(){},updateSearchParams:cw}),void 0!==l)if(Ab(l))if("function"==typeof(e=Fb(l)))for(n=(t=e.call(l)).next;!(i=n.call(t)).done;){if((s=(o=(r=Nb(Rb(i.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");d.push({key:Db(s.value),value:Db(a.value)})}else for(c in l)Vb(l,c)&&d.push({key:c,value:Db(l[c])});else sw(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:Db(l))},fw=dw.prototype;if(Sb(fw,{append:function(e,t){lw(arguments.length,2);var n=Yb(this);n.entries.push({key:Db(e),value:Db(t)}),n.updateURL()},delete:function(e){lw(arguments.length,1);for(var t=Yb(this),n=t.entries,i=Db(e),r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){lw(arguments.length,1);for(var t=Yb(this).entries,n=Db(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){lw(arguments.length,1);for(var t=Yb(this).entries,n=Db(e),i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){lw(arguments.length,1);for(var t=Yb(this).entries,n=Db(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){lw(arguments.length,1);for(var n,i=Yb(this),r=i.entries,o=!1,s=Db(e),a=Db(t),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?r.splice(c--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var e,t,n,i=Yb(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=Yb(this).entries,i=Lb(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new uw(this,"keys")},values:function(){return new uw(this,"values")},entries:function(){return new uw(this,"entries")}},{enumerable:!0}),Ob(fw,Wb,fw.entries),Ob(fw,"toString",(function(){for(var e,t=Yb(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(aw(e.key)+"="+aw(e.value));return n.join("&")}),{enumerable:!0}),Pb(dw,qb),_b({global:!0,forced:!xb},{URLSearchParams:dw}),!xb&&"function"==typeof Gb){var hw=function(e){if(Ab(e)){var t,n=e.body;if(Ib(n)===qb)return(t=e.headers?new Gb(e.headers):new Gb).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Mb(e,{body:Bb(0,String(n)),headers:Bb(0,t)})}return e};if("function"==typeof Ub&&_b({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ub(e,arguments.length>1?hw(arguments[1]):{})}}),"function"==typeof zb){var pw=function(e){return Tb(this,pw,"Request"),new zb(e,arguments.length>1?hw(arguments[1]):{})};$b.constructor=pw,pw.prototype=$b,_b({global:!0,forced:!0},{Request:pw})}}var vw,gw={URLSearchParams:dw,getState:Yb},mw=On,yw=c,bw=tb,ww=r,Cw=In,_w=Ge.exports,kw=Cc,xw=Q,Ow=qd,Sw=function(e){var t,n,i,r,o,s,a=ob(e),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,d=void 0!==u,f=ub(a),h=0;if(d&&(u=rb(u,l>2?arguments[2]:void 0,2)),null==f||c==Array&&sb(f))for(n=new c(t=cb(a.length));t>h;h++)s=d?u(a[h],h):a[h],lb(n,h,s);else for(o=(r=f.call(a)).next,n=new c;!(i=o.call(r)).done;h++)s=d?ab(r,u,[i.value,h],!0):i.value,lb(n,h,s);return n.length=h,n},Pw=ps.codeAt,jw=Ci,Ew=Di,Tw=gw,Vw=wt,Lw=ww.URL,Iw=Tw.URLSearchParams,Rw=Tw.getState,Aw=Vw.set,Dw=Vw.getterFor("URL"),Mw=Math.floor,Bw=Math.pow,Nw="Invalid scheme",Fw="Invalid host",Hw="Invalid port",Uw=/[A-Za-z]/,zw=/[\d+-.A-Za-z]/,$w=/\d/,Gw=/^0x/i,Ww=/^[0-7]+$/,qw=/^\d+$/,Zw=/^[\dA-Fa-f]+$/,Kw=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Yw=/[\0\t\n\r #/:<>?@[\\\]^|]/,Xw=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Jw=/[\t\n\r]/g,Qw=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Fw;if(!(n=tC(t.slice(1,-1))))return Fw;e.host=n}else if(lC(e)){if(t=function(e){var t,n,i=[],r=e.toLowerCase().replace(hb,".").split(".");for(t=0;t<r.length;t++)n=r[t],i.push(fb.test(n)?"xn--"+bb(n):n);return i.join(".")}(t),Kw.test(t))return Fw;if(null===(n=eC(t)))return Fw;e.host=n}else{if(Yw.test(t))return Fw;for(n="",i=Sw(t),r=0;r<i.length;r++)n+=sC(i[r],iC);e.host=n}},eC=function(e){var t,n,i,r,o,s,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=c[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=Gw.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?qw:8==o?Ww:Zw).test(r))return e;s=parseInt(r,o)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=Bw(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*Bw(256,3-i);return a},tC=function(e){var t,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,u=++l}for(;f();){if(8==l)return;if(":"!=f()){for(t=n=0;n<4&&Zw.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,l>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;d++}if(!$w.test(f()))return;for(;$w.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;d++}c[l]=256*c[l]+r,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},nC=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Mw(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},iC={},rC=Ow({},iC,{" ":1,'"':1,"<":1,">":1,"`":1}),oC=Ow({},rC,{"#":1,"?":1,"{":1,"}":1}),aC=Ow({},oC,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),sC=function(e,t){var n=Pw(e,0);return n>32&&n<127&&!xw(t,e)?e:encodeURIComponent(e)},cC={ftp:21,file:null,http:80,https:443,ws:80,wss:443},lC=function(e){return xw(cC,e.scheme)},uC=function(e){return""!=e.username||""!=e.password},dC=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},fC=function(e,t){var n;return 2==e.length&&Uw.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},hC=function(e){var t;return e.length>1&&fC(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},pC=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&fC(t[0],!0)||t.pop()},vC=function(e){return"."===e||"%2e"===e.toLowerCase()},gC={},mC={},yC={},bC={},wC={},CC={},_C={},kC={},xC={},OC={},SC={},PC={},jC={},EC={},TC={},VC={},LC={},IC={},RC={},AC={},DC={},MC=function(e,t,n,i){var r,o,s,a,c,l=n||gC,u=0,d="",f=!1,h=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Xw,"")),t=t.replace(Jw,""),r=Sw(t);u<=r.length;){switch(o=r[u],l){case gC:if(!o||!Uw.test(o)){if(n)return Nw;l=yC;continue}d+=o.toLowerCase(),l=mC;break;case mC:if(o&&(zw.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(n)return Nw;d="",l=yC,u=0;continue}if(n&&(lC(e)!=xw(cC,d)||"file"==d&&(uC(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(lC(e)&&cC[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=EC:lC(e)&&i&&i.scheme==e.scheme?l=bC:lC(e)?l=kC:"/"==r[u+1]?(l=wC,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=RC)}break;case yC:if(!i||i.cannotBeABaseURL&&"#"!=o)return Nw;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=DC;break}l="file"==i.scheme?EC:CC;continue;case bC:if("/"!=o||"/"!=r[u+1]){l=CC;continue}l=xC,u++;break;case wC:if("/"==o){l=OC;break}l=IC;continue;case CC:if(e.scheme=i.scheme,o==vw)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&lC(e))l=_C;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=AC;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=IC;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=DC}break;case _C:if(!lC(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=IC;continue}l=OC}else l=xC;break;case kC:if(l=xC,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case xC:if("/"!=o&&"\\"!=o){l=OC;continue}break;case OC:if("@"==o){f&&(d="%40"+d),f=!0,s=Sw(d);for(var v=0;v<s.length;v++){var g=s[v];if(":"!=g||p){var m=sC(g,aC);p?e.password+=m:e.username+=m}else p=!0}d=""}else if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&lC(e)){if(f&&""==d)return"Invalid authority";u-=Sw(d).length+1,d="",l=SC}else d+=o;break;case SC:case PC:if(n&&"file"==e.scheme){l=VC;continue}if(":"!=o||h){if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&lC(e)){if(lC(e)&&""==d)return Fw;if(n&&""==d&&(uC(e)||null!==e.port))return;if(a=Qw(e,d))return a;if(d="",l=LC,n)return;continue}"["==o?h=!0:"]"==o&&(h=!1),d+=o}else{if(""==d)return Fw;if(a=Qw(e,d))return a;if(d="",l=jC,n==PC)return}break;case jC:if(!$w.test(o)){if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&lC(e)||n){if(""!=d){var y=parseInt(d,10);if(y>65535)return Hw;e.port=lC(e)&&y===cC[e.scheme]?null:y,d=""}if(n)return;l=LC;continue}return Hw}d+=o;break;case EC:if(e.scheme="file","/"==o||"\\"==o)l=TC;else{if(!i||"file"!=i.scheme){l=IC;continue}if(o==vw)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",l=AC;else{if("#"!=o){hC(r.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),pC(e)),l=IC;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=DC}}break;case TC:if("/"==o||"\\"==o){l=VC;break}i&&"file"==i.scheme&&!hC(r.slice(u).join(""))&&(fC(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=IC;continue;case VC:if(o==vw||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&fC(d))l=IC;else if(""==d){if(e.host="",n)return;l=LC}else{if(a=Qw(e,d))return a;if("localhost"==e.host&&(e.host=""),n)return;d="",l=LC}continue}d+=o;break;case LC:if(lC(e)){if(l=IC,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=vw&&(l=IC,"/"!=o))continue}else e.fragment="",l=DC;else e.query="",l=AC;break;case IC:if(o==vw||"/"==o||"\\"==o&&lC(e)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(pC(e),"/"==o||"\\"==o&&lC(e)||e.path.push("")):vC(d)?"/"==o||"\\"==o&&lC(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&fC(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==vw||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=AC):"#"==o&&(e.fragment="",l=DC)}else d+=sC(o,oC);break;case RC:"?"==o?(e.query="",l=AC):"#"==o?(e.fragment="",l=DC):o!=vw&&(e.path[0]+=sC(o,iC));break;case AC:n||"#"!=o?o!=vw&&("'"==o&&lC(e)?e.query+="%27":e.query+="#"==o?"%23":sC(o,iC)):(e.fragment="",l=DC);break;case DC:o!=vw&&(e.fragment+=sC(o,rC))}u++}},BC=function(e){var t,n,i=kw(this,BC,"URL"),r=arguments.length>1?arguments[1]:void 0,o=jw(e),s=Aw(i,{type:"URL"});if(void 0!==r)if(r instanceof BC)t=Dw(r);else if(n=MC(t={},jw(r)))throw TypeError(n);if(n=MC(s,o,null,t))throw TypeError(n);var a=s.searchParams=new Iw,c=Rw(a);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(a)||null},yw||(i.href=FC.call(i),i.origin=HC.call(i),i.protocol=UC.call(i),i.username=zC.call(i),i.password=$C.call(i),i.host=GC.call(i),i.hostname=WC.call(i),i.port=qC.call(i),i.pathname=ZC.call(i),i.search=KC.call(i),i.searchParams=YC.call(i),i.hash=XC.call(i))},NC=BC.prototype,FC=function(){var e=Dw(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==r?(l+="//",uC(e)&&(l+=n+(i?":"+i:"")+"@"),l+=nC(r),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},HC=function(){var e=Dw(this),t=e.scheme,n=e.port;if("blob"==t)try{return new BC(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&lC(e)?t+"://"+nC(e.host)+(null!==n?":"+n:""):"null"},UC=function(){return Dw(this).scheme+":"},zC=function(){return Dw(this).username},$C=function(){return Dw(this).password},GC=function(){var e=Dw(this),t=e.host,n=e.port;return null===t?"":null===n?nC(t):nC(t)+":"+n},WC=function(){var e=Dw(this).host;return null===e?"":nC(e)},qC=function(){var e=Dw(this).port;return null===e?"":String(e)},ZC=function(){var e=Dw(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},KC=function(){var e=Dw(this).query;return e?"?"+e:""},YC=function(){return Dw(this).searchParams},XC=function(){var e=Dw(this).fragment;return e?"#"+e:""},JC=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(yw&&Cw(NC,{href:JC(FC,(function(e){var t=Dw(this),n=jw(e),i=MC(t,n);if(i)throw TypeError(i);Rw(t.searchParams).updateSearchParams(t.query)})),origin:JC(HC),protocol:JC(UC,(function(e){var t=Dw(this);MC(t,jw(e)+":",gC)})),username:JC(zC,(function(e){var t=Dw(this),n=Sw(jw(e));if(!dC(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=sC(n[i],aC)}})),password:JC($C,(function(e){var t=Dw(this),n=Sw(jw(e));if(!dC(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=sC(n[i],aC)}})),host:JC(GC,(function(e){var t=Dw(this);t.cannotBeABaseURL||MC(t,jw(e),SC)})),hostname:JC(WC,(function(e){var t=Dw(this);t.cannotBeABaseURL||MC(t,jw(e),PC)})),port:JC(qC,(function(e){var t=Dw(this);dC(t)||(""==(e=jw(e))?t.port=null:MC(t,e,jC))})),pathname:JC(ZC,(function(e){var t=Dw(this);t.cannotBeABaseURL||(t.path=[],MC(t,jw(e),LC))})),search:JC(KC,(function(e){var t=Dw(this);""==(e=jw(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",MC(t,e,AC)),Rw(t.searchParams).updateSearchParams(t.query)})),searchParams:JC(YC),hash:JC(XC,(function(e){var t=Dw(this);""!=(e=jw(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",MC(t,e,DC)):t.fragment=null}))}),_w(NC,"toJSON",(function(){return FC.call(this)}),{enumerable:!0}),_w(NC,"toString",(function(){return FC.call(this)}),{enumerable:!0}),Lw){var QC=Lw.createObjectURL,e_=Lw.revokeObjectURL;QC&&_w(BC,"createObjectURL",(function(e){return QC.apply(Lw,arguments)})),e_&&_w(BC,"revokeObjectURL",(function(e){return e_.apply(Lw,arguments)}))}function t_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(n),!0).forEach((function(t){mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ew(BC,"URL"),mw({global:!0,forced:!bw,sham:!yw},{URL:BC});var i_=$p,r_=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(e=t.call.apply(t,[this].concat(r))),"_recordUserActions",(function(t){var n=e._getTime(),i=Object.assign({},t,{msg:t.msg||t.action});e._stats.info.push(n_(n_({type:"userAction"},n),{},{payload:i}))})),mi(pi(e),"_onReset",(function(){e.reset()})),mi(pi(e),"_recordInfo",(function(t){e.info(t)})),mi(pi(e),"_downloadStats",(function(){var t=e.getStats(),n=new Blob([JSON.stringify(t)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,console.log("linkhref",i),r.download="player.txt",r.disabled=!1,r.click()})),e}return wo(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Up,this._recordUserActions),this.on(i_.STATS_INFO,this._recordInfo),this.on(i_.STATS_DOWNLOAD,this._downloadStats),this.on(i_.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(n_(n_({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=n_({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(t)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(mi(e={},"info",[]),mi(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.video,t=[],n=0;n<e.buffered.length;n++)t.push({start:e.buffered.start(n),end:e.buffered.end(n)});var i={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(e){var t=e.payload.data,n="";try{t instanceof Error?n=t.msg:void 0!==t&&(n=JSON.stringify(t))}catch(e){console.log("err",e)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats.info.forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(lv),o_=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return n}(Kg);return mi(o_,"defaultPreset",(function e(t,n){var i,r,o;ui(this,e);var s=n&&n.isMobileSimulateMode,a=n.isLive,c=[].concat(a?[]:[iy,Gy,zy,uy],[ry,ly,gy,ky,Ly,Iy,Py,jy,py,Cy]),l=[tm,nm,am,Km,sm,My,By,$y,gm];this.plugins=[r_,Jg].concat(Jd(c),l);var u=s?"mobile":ep.device;switch(u){case"pc":(i=this.plugins).push.apply(i,[qm,bm,Dy]);break;case"mobile":(r=this.plugins).push.apply(r,[zm]);break;default:(o=this.plugins).push.apply(o,[qm,bm,Dy])}(ep.os.isIpad||"pc"===u)&&this.plugins.push(Xy),ep.os.isIpad&&this.plugins.push(bm),this.ignores=[],this.i18n=[Jy]})),mi(o_,"Util",Kh),mi(o_,"Sniffer",ep),mi(o_,"Errors",ip),mi(o_,"Events",Gp),mi(o_,"Plugin",Cv),mi(o_,"BasePlugin",lv),mi(o_,"I18N",Gg),mi(o_,"STATE_CLASS",Ag),o_}()}).call(this,n(81))},1415:function(e,t,n){"use strict";n.r(t),n.d(t,"rehype",(function(){return v}));var r=n(4792),o=(n(175),n(176),n(79),n(1442),n(10),n(30),n(46),n(51),n(1465)),c=n.n(o),l=n(4721),d={abandonedHeadElementChild:{reason:"Unexpected metadata element after head",description:"Unexpected element after head. Expected the element before `</head>`",url:!1},abruptClosingOfEmptyComment:{reason:"Unexpected abruptly closed empty comment",description:"Unexpected `>` or `->`. Expected `--\x3e` to close comments"},abruptDoctypePublicIdentifier:{reason:"Unexpected abruptly closed public identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the public identifier"},abruptDoctypeSystemIdentifier:{reason:"Unexpected abruptly closed system identifier",description:"Unexpected `>`. Expected a closing `\"` or `'` after the identifier identifier"},absenceOfDigitsInNumericCharacterReference:{reason:"Unexpected non-digit at start of numeric character reference",description:"Unexpected `%c`. Expected `[0-9]` for decimal references or `[0-9a-fA-F]` for hexadecimal references"},cdataInHtmlContent:{reason:"Unexpected CDATA section in HTML",description:"Unexpected `<![CDATA[` in HTML. Remove it, use a comment, or encode special characters instead"},characterReferenceOutsideUnicodeRange:{reason:"Unexpected too big numeric character reference",description:"Unexpectedly high character reference. Expected character references to be at most hexadecimal 10ffff (or decimal 1114111)"},closingOfElementWithOpenChildElements:{reason:"Unexpected closing tag with open child elements",description:"Unexpectedly closing tag. Expected other tags to be closed first",url:!1},controlCharacterInInputStream:{reason:"Unexpected control character",description:"Unexpected control character `%x`. Expected a non-control code point, 0x00, or ASCII whitespace"},controlCharacterReference:{reason:"Unexpected control character reference",description:"Unexpectedly control character in reference. Expected a non-control code point, 0x00, or ASCII whitespace"},disallowedContentInNoscriptInHead:{reason:"Disallowed content inside `<noscript>` in `<head>`",description:"Unexpected text character `%c`. Only use text in `<noscript>`s in `<body>`",url:!1},duplicateAttribute:{reason:"Unexpected duplicate attribute",description:"Unexpectedly double attribute. Expected attributes to occur only once"},endTagWithAttributes:{reason:"Unexpected attribute on closing tag",description:"Unexpected attribute. Expected `>` instead"},endTagWithTrailingSolidus:{reason:"Unexpected slash at end of closing tag",description:"Unexpected `%c-1`. Expected `>` instead"},endTagWithoutMatchingOpenElement:{reason:"Unexpected unopened end tag",description:"Unexpected end tag. Expected no end tag or another end tag",url:!1},eofBeforeTagName:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected tag name instead"},eofInCdata:{reason:"Unexpected end of file in CDATA",description:"Unexpected end of file. Expected `]]>` to close the CDATA"},eofInComment:{reason:"Unexpected end of file in comment",description:"Unexpected end of file. Expected `--\x3e` to close the comment"},eofInDoctype:{reason:"Unexpected end of file in doctype",description:"Unexpected end of file. Expected a valid doctype (such as `<!doctype html>`)"},eofInElementThatCanContainOnlyText:{reason:"Unexpected end of file in element that can only contain text",description:"Unexpected end of file. Expected text or a closing tag",url:!1},eofInScriptHtmlCommentLikeText:{reason:"Unexpected end of file in comment inside script",description:"Unexpected end of file. Expected `--\x3e` to close the comment"},eofInTag:{reason:"Unexpected end of file in tag",description:"Unexpected end of file. Expected `>` to close the tag"},incorrectlyClosedComment:{reason:"Incorrectly closed comment",description:"Unexpected `%c-1`. Expected `--\x3e` to close the comment"},incorrectlyOpenedComment:{reason:"Incorrectly opened comment",description:"Unexpected `%c`. Expected `\x3c!--` to open the comment"},invalidCharacterSequenceAfterDoctypeName:{reason:"Invalid sequence after doctype name",description:"Unexpected sequence at `%c`. Expected `public` or `system`"},invalidFirstCharacterOfTagName:{reason:"Invalid first character in tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},misplacedDoctype:{reason:"Misplaced doctype",description:"Unexpected doctype. Expected doctype before head",url:!1},misplacedStartTagForHeadElement:{reason:"Misplaced `<head>` start tag",description:"Unexpected start tag `<head>`. Expected `<head>` directly after doctype",url:!1},missingAttributeValue:{reason:"Missing attribute value",description:"Unexpected `%c-1`. Expected an attribute value or no `%c-1` instead"},missingDoctype:{reason:"Missing doctype before other content",description:"Expected a `<!doctype html>` before anything else",url:!1},missingDoctypeName:{reason:"Missing doctype name",description:"Unexpected doctype end at `%c`. Expected `html` instead"},missingDoctypePublicIdentifier:{reason:"Missing public identifier in doctype",description:"Unexpected `%c`. Expected identifier for `public` instead"},missingDoctypeSystemIdentifier:{reason:"Missing system identifier in doctype",description:'Unexpected `%c`. Expected identifier for `system` instead (suggested: `"about:legacy-compat"`)'},missingEndTagName:{reason:"Missing name in end tag",description:"Unexpected `%c`. Expected an ASCII letter instead"},missingQuoteBeforeDoctypePublicIdentifier:{reason:"Missing quote before public identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingQuoteBeforeDoctypeSystemIdentifier:{reason:"Missing quote before system identifier in doctype",description:"Unexpected `%c`. Expected `\"` or `'` instead"},missingSemicolonAfterCharacterReference:{reason:"Missing semicolon after character reference",description:"Unexpected `%c`. Expected `;` instead"},missingWhitespaceAfterDoctypePublicKeyword:{reason:"Missing whitespace after public identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceAfterDoctypeSystemKeyword:{reason:"Missing whitespace after system identifier in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBeforeDoctypeName:{reason:"Missing whitespace before doctype name",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenAttributes:{reason:"Missing whitespace between attributes",description:"Unexpected `%c`. Expected ASCII whitespace instead"},missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:{reason:"Missing whitespace between public and system identifiers in doctype",description:"Unexpected `%c`. Expected ASCII whitespace instead"},nestedComment:{reason:"Unexpected nested comment",description:"Unexpected `\x3c!--`. Expected `--\x3e`"},nestedNoscriptInHead:{reason:"Unexpected nested `<noscript>` in `<head>`",description:"Unexpected `<noscript>`. Expected a closing tag or a meta element",url:!1},nonConformingDoctype:{reason:"Unexpected non-conforming doctype declaration",description:'Expected `<!doctype html>` or `<!doctype html system "about:legacy-compat">`',url:!1},nonVoidHtmlElementStartTagWithTrailingSolidus:{reason:"Unexpected trailing slash on start tag of non-void element",description:"Unexpected `/`. Expected `>` instead"},noncharacterCharacterReference:{reason:"Unexpected noncharacter code point referenced by character reference",description:"Unexpected code point. Do not use noncharacters in HTML"},noncharacterInInputStream:{reason:"Unexpected noncharacter character",description:"Unexpected code point `%x`. Do not use noncharacters in HTML"},nullCharacterReference:{reason:"Unexpected NULL character referenced by character reference",description:"Unexpected code point. Do not use NULL characters in HTML"},openElementsLeftAfterEof:{reason:"Unexpected end of file",description:"Unexpected end of file. Expected closing tag instead",url:!1},surrogateCharacterReference:{reason:"Unexpected surrogate character referenced by character reference",description:"Unexpected code point. Do not use lone surrogate characters in HTML"},surrogateInInputStream:{reason:"Unexpected surrogate character",description:"Unexpected code point `%x`. Do not use lone surrogate characters in HTML"},unexpectedCharacterAfterDoctypeSystemIdentifier:{reason:"Invalid character after system identifier in doctype",description:"Unexpected character at `%c`. Expected `>`"},unexpectedCharacterInAttributeName:{reason:"Unexpected character in attribute name",description:"Unexpected `%c`. Expected whitespace, `/`, `>`, `=`, or probably an ASCII letter"},unexpectedCharacterInUnquotedAttributeValue:{reason:"Unexpected character in unquoted attribute value",description:"Unexpected `%c`. Quote the attribute value to include it"},unexpectedEqualsSignBeforeAttributeName:{reason:"Unexpected equals sign before attribute name",description:"Unexpected `%c`. Add an attribute name before it"},unexpectedNullCharacter:{reason:"Unexpected NULL character",description:"Unexpected code point `%x`. Do not use NULL characters in HTML"},unexpectedQuestionMarkInsteadOfTagName:{reason:"Unexpected question mark instead of tag name",description:"Unexpected `%c`. Expected an ASCII letter instead"},unexpectedSolidusInTag:{reason:"Unexpected slash in tag",description:"Unexpected `%c-1`. Expected it followed by `>` or in a quoted attribute value"},unknownNamedCharacterReference:{reason:"Unexpected unknown named character reference",description:"Unexpected character reference. Expected known named character references"}},f={2:!0,1:!1,0:null};var h=n(4719),v=Object(r.a)().use((function(e){var t=this.data("settings"),n=Object.assign({},t,e);Object.assign(this,{Parser:function(e,t){var r=n.fragment?"parseFragment":"parse",o=n.emitParseErrors?function(r){var code=r.code,o=(y=code,y.replace(/-[a-z]/g,(function(e){return e.charAt(1).toUpperCase()}))),c=n[o],l=null==c||c,h="number"==typeof l?l:l?1:0,v={line:r.startLine,column:r.startCol,offset:r.startOffset},m={line:r.endLine,column:r.endCol,offset:r.endOffset};var y;if(h){var w=d[o]||{reason:"",description:"",url:""},C=t.message(_(w.reason),{start:v,end:m});C.source="parse-error",C.ruleId=code,C.fatal=f[h],C.note=_(w.description),C.url="url"in w&&!1===w.url?null:"https://html.spec.whatwg.org/multipage/parsing.html#parse-error-"+code}function _(t){return t.replace(/%c(?:-(\d+))?/g,(function(t,n){var o=n?-Number.parseInt(n,10):0,c=e.charAt(r.startOffset+o);return"`"===c?"` ` `":c})).replace(/%x/g,(function(){return"0x"+e.charCodeAt(r.startOffset).toString(16).toUpperCase()}))}}:null,h=new c.a({sourceCodeLocationInfo:!0,onParseError:o,scriptingEnabled:!1});return Object(l.a)(h[r](e),{space:n.space,file:t,verbose:n.verbose})}})})).use(h.a).freeze()},1420:function(e,t,n){"use strict";n(1264)},1421:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(11),n(40),n(244),n(44),n(177),n(68);var r=n(62),o=n(3),c=n(7),l=n(65),d=n(12);function f(e){var t=Object(o.n)(e?n(e):void 0);function n(e){if(e){0;var t=Object(l.f)(localStorage.getItem("jj_comment_anchor"));if(t&&0!==t.length){var n=e.parentType,r=e.parentId,o=t.findIndex((function(e){var t=e.parentInfo;return t.parentType===n&&t.parentId===r}));if(!(o<0)){var c=t[o];t.splice(o,1);try{0===t.length?localStorage.removeItem("jj_comment_anchor"):localStorage.setItem("jj_comment_anchor",JSON.stringify(t))}catch(e){console.error("getCommentAnchor error: update localStorage fail")}return Object(d.f)()&&console.log("CommentAnchor: 获取锚点",c),c}Object(d.f)()&&console.log("CommentAnchor: 缓存无命中")}else Object(d.f)()&&console.log("CommentAnchor: 无埋点缓存")}else console.warn("getCommentAnchor error: source info is required")}return{commentAnchor:t,setCommentAnchor:function(e){if((null==e?void 0:e.itemId)&&[c.IdType.CommentIdType,c.IdType.ReplyIdType].includes(null==e?void 0:e.itemType)){t.value=e;var n=Object(l.f)(localStorage.getItem("jj_comment_anchor")||"[]",(function(e){return Array.isArray(e)}))||[];n=n.filter((function(t){var n;return(null===(n=null==t?void 0:t.parentInfo)||void 0===n?void 0:n.parentId)!==e.parentInfo.parentId})),localStorage.setItem("jj_comment_anchor",JSON.stringify([e].concat(Object(r.a)(n))))}},getCommentAnchor:n}}},1448:function(e,t,n){"use strict";n(19);var r=n(5),o=n(3),c=n(39),l=n(21),d=Object(o.b)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(e){var t=Object(o.w)(),n=Object(o.a)((function(){return Object(l.h)(t.currentRoute.fullPath)})),d=Object(o.c)();return{handleLinkJump:function(){var o=Object(r.a)(regeneratorRuntime.mark((function r(){var path;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,null==d?void 0:d.proxy.$ensureAuthorized();case 3:r.next=8;break;case 5:return r.prev=5,r.t0=r.catch(0),r.abrupt("return",!1);case 8:Object(c.h)("private_msg_page_show",{visit_source:e.teaType}),path="/notification/im?participantId=".concat(e.userId),n.value?window.location.href=path:t.push(path);case 11:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(){return o.apply(this,arguments)}}()}}}),f=(n(1511),n(29)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"im-button",class:{"has-icon":"hasIcon"===e.type},attrs:{href:"/notification/im?participantId="+e.userId},on:{click:function(t){return t.preventDefault(),e.handleLinkJump(t)}}},["hasIcon"===e.type?r("img",{staticClass:"im-icon",attrs:{src:n(1510),alt:"私信"}}):e._e(),e._v(" "),r("div",[e._v("私信")])])}),[],!1,null,"314ccdfc",null);t.a=component.exports},1453:function(e,t,n){"use strict";n(1294)},1454:function(e,t,n){"use strict";n(1295)},1456:function(e,t,n){},1467:function(e,t,n){"use strict";n(1302)},1481:function(e,t,n){"use strict";n.r(t);n(11),n(60),n(80),n(71),n(10),n(136),n(30),n(46),n(51),n(137),n(64);var r,o,c=n(0),l=(n(19),n(5)),d=n(3),f=n(1394),h=n(1503),v=n(1351),m=n.n(v),y=n(1395),w=n(1365),C=n.n(w),_=n(1367),k=n.n(_),x=n(1376),O=n.n(x),S=n(1353),P=n.n(S),j=n(1464),E=n(1298),T=n.n(E),V=n(1415),L=n(1466),I=n(1493),R=n(1377),A=n.n(R),D=n(1378),M=n.n(D),B=n(1300),N=n.n(B),F=n(1301),H=n.n(F),U=n(135),z=n(1091),$=n(12),G=n(39),W=n(21),Z=(n(1396),n(1257)),K=n(1188),Y=n(1354),X=function(e){var t=e.supportWebP;return{viewerEffect:Y.a,rehype:function(p){return p.use(Z.rehypeCustom,{supportWebP:t})}}};function J(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ee(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function te(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ee(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ee(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var ne=Object(K.d)(T()(j.a));null===(o=null===(r=null==ne?void 0:ne.attributes)||void 0===r?void 0:r["*"])||void 0===o||o.push("className");var ie="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8e14f9701a846b389ec138eb2b6349a~tplv-k3u1fbpfcp-jj:0:0:0:0:q75.image#?w=1008&h=483&s=7674&e=png&b=000000",re=function(e){var t=e.supportWebP,r=e.isMobile,o=e.postHighlight,c=e.onCopyCode,l=[Object(y.videoViewer)({whiteListConfig:[{domain:"ixigua.com",placeholder:ie,idToIframeUrl:function(e){var t=e.id,n=e.autoPlay;return"https://www.ixigua.com/iframe/".concat(t,"?autoplay=").concat(n?1:0)},fullScreen:!0,idReg:/ixigua\.com\/(\d+)/,referrerPolicy:"unsafe-url",frameBorder:0}],placeholder:ie}),O()(),function(){return n.e(330).then(n.t.bind(null,4702,7)).then((function(e){return(0,e.default)({languages:K.c,subset:K.b})}))},k()(),function(){return n.e(88).then(n.bind(null,4770)).then((function(e){return(0,e.default)()}))},function(){return Promise.all([n.e(2),n.e(91)]).then(n.t.bind(null,4703,7)).then((function(e){return(0,e.default)()}))},function(){return n.e(27).then(n.t.bind(null,4704,7)).then((function(e){return(0,e.default)()}))},P()({background:"rgba(0,0,0,0.7)",filter:function(img){return!img.classList.contains("placeholder-image")}}),C()({test:W.f,internalProps:{target:"_blank"}}),Object(h.viewer)({auditingBackground:r?M.a:A.a,loadingBackground:r?H.a:N.a,optimize:r?{offset:{top:100,bottom:100}}:void 0}),{remark:function(p){return p.use(I.b)}},m()(),X({supportWebP:t})];return o&&l.push((function(){return Promise.all([n.e(14),n.e(332)]).then(n.bind(null,4575)).then((function(e){return(0,e.default)()}))})),Object($.q)(Object($.c)())||l.push(Object(f.codeBlockExtension)({onCopyCode:c,onFoldChange:function(e){Object(G.h)("code_block_extension_fold_click",{is_fold:e?1:0})},onHeaderShow:function(){Object(G.h)("code_block_extension_header_show")},onLineNumShow:function(){Object(G.h)("code_block_extension_line_num_show")}})),l};function oe(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=J(re(t)),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=17;break}if("function"!=typeof(c=o.value)){e.next=14;break}return e.t0=n,e.next=10,c();case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=15;break;case 14:n.push(c);case 15:e.next=4;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(2),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})))).apply(this,arguments)}var se=Object(d.b)({components:{Viewer:function(){return n.e(37).then(n.bind(null,2378)).then((function(e){return e.Viewer}))}},props:{markdown:{type:String},html:{type:String},resultHtml:{type:String,default:""},hitCache:{type:Boolean,default:!1},copyable:{type:Boolean,default:!1},needLoginBeforeCopyCode:{type:Boolean,default:!1},isLogined:{type:Boolean,default:!1}},emits:["ready"],data:function(){return{sanitize:K.d,plugins:[],callbacks:[]}},computed:{renderFrom:function(){return this.resultHtml?"md2htmlResult":this.markdown?"markdown":this.html?"html":(console.warn("result html ".concat(this.resultHtml," markdown:").concat(this.markdown," html:").concat(this.html," are both empty, unknown render from")),"unknown")},withoutViewer:function(){return"markdown"!==this.renderFrom},supportWebP:function(){var e;return Object($.r)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)},sanitizedHtml:function(){switch(this.renderFrom){case"md2htmlResult":return-1===this.resultHtml.indexOf("webp")||this.supportWebP?this.resultHtml:Object(V.rehype)().use(Z.rehypeReplaceImgSrc,{supportWebP:this.supportWebP}).processSync(this.resultHtml);case"html":return Object(V.rehype)().use(L.default,ne).use(Z.rehypeCustom,{supportWebP:this.supportWebP}).processSync(this.html).toString("utf-8");default:return""}},remarkRehypeOptions:function(){return{handlers:Object.assign({},I.a)}},userInitiated:function(){var e,t,n;return null===(n=null===(t=null===(e=this.$store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.auth)||void 0===n?void 0:n.userInitiated}},mounted:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="html"===e.renderFrom&&!Object($.q)(Object($.c)()),t.next=3,oe({supportWebP:e.supportWebP,isMobile:e.$device.isMobile,postHighlight:n,onCopyCode:function(content){try{if(e.needLoginBeforeCopyCode&&!e.isLogined&&e.userInitiated){var t=e.$store.state.auth.loginTeaParams;return Object(G.h)("login_guide_click_v2",te(te({},t),{},{from:U.b.copycode_login})),e.$requestLogin({loginGuideFrom:U.b.copycode_login}),void e.$TEA("login_guide_click",{from:U.a.code})}Object(z.a)(content||""),Object(G.h)("code_block_extension_copy_click",{is_successful:1}),e.$alertMsg("代码复制成功")}catch(t){e.$error("代码复制失败"),Object(G.h)("code_block_extension_copy_click",{is_successful:0})}}});case 3:e.plugins=t.sent,e.withoutViewer&&e.plugins.forEach((function(p){var t,n=null===(t=p.viewerEffect)||void 0===t?void 0:t.call(p,{markdownBody:e.$el});e.callbacks.push(n)})),e.$nextTick((function(){return e.$emit("ready",e.$el)}));case 6:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.withoutViewer&&this.callbacks.forEach((function(e){return e?e():null}))},methods:{handleFootnotesJump:function(e){var t,n=e.currentTarget,r=e.target.getAttribute("href");r&&(null===(t=null==n?void 0:n.querySelector("#user-content-"+r.slice(1)))||void 0===t||t.scrollIntoView(!1))},onContentElementClick:function(e){var t,n,r=e.target;if("A"===r.tagName&&(null===(t=r.getAttribute("href"))||void 0===t?void 0:t.startsWith("#user-content-")))this.handleFootnotesJump(e);else if(this.copyable&&"copy-code-btn"===r.className){var text=r.textContent||"",o=r.parentNode,content=null===(n=null==o?void 0:o.textContent)||void 0===n?void 0:n.replace(new RegExp("\n?".concat(text,"$")),"");try{if(this.needLoginBeforeCopyCode&&!this.isLogined){this.$TEA("login_guide_click",{from:U.a.code});var c=this.$store.state.auth.loginTeaParams;return Object(G.h)("login_guide_click_v2",te(te({},c),{},{from:U.b.copycode_login})),void this.$requestLogin({loginGuideFrom:U.b.copycode_login})}Object(z.a)(content||""),this.$alertMsg("代码复制成功")}catch(e){this.$error("代码复制失败")}}}}}),ce=(n(1420),n(29)),component=Object(ce.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-content",on:{"!click":function(t){return e.onContentElementClick(t)}}},["markdown"===e.renderFrom&&e.plugins.length?n("Viewer",{attrs:{value:e.markdown,plugins:e.plugins,sanitize:e.sanitize,"remark-rehype":e.remarkRehypeOptions}}):n("div",{staticClass:"markdown-body",class:{cache:e.hitCache,html:e.html},domProps:{innerHTML:e._s(e.sanitizedHtml)}})],1)}),[],!1,null,null,null);t.default=component.exports},1498:function(e,t,n){e.exports=n.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1499:function(e,t,n){e.exports=n.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1500:function(e,t,n){"use strict";n(1391)},1509:function(e,t,n){"use strict";n(1397)},1510:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},1511:function(e,t,n){"use strict";n(1398)},1512:function(e,t,n){"use strict";n(1399)},1513:function(e,t,n){"use strict";n(1400)},1523:function(e,t,n){"use strict";var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),t("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("img",{attrs:{src:n(1498)}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("img",{attrs:{src:n(1499)}})])}],o=n(12),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(o.k)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var e=this,t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){e.$requestLogin()}))}},l=(n(1500),n(29)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"wechat-quick-login"},[n("div",{staticClass:"quick-box"},[e._m(0),e._v(" "),n("div",{staticClass:"auth-box"},[n("div",{staticClass:"auth-btn wx",on:{click:e.loginWithWechat}},[e._m(1),e._v(" "),n("span",[e._v("微信快捷登录")])]),e._v(" "),n("div",{staticClass:"auth-btn jj",on:{click:e.authoLogin}},[e._m(2),e._v(" "),n("span",[e._v("稀土掘金账号登录")])])]),e._v(" "),n("div",{staticClass:"agreement-box"},[e._v("\n      注册登录即表示同意\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[e._v("用户协议")]),e._v("\n      、\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[e._v("隐私政策")])]),e._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"box",on:{click:e.close}},[e._v("取消")])])])]):e._e()}),r,!1,null,"3a1cf91f",null);t.a=component.exports},1525:function(e,t,n){"use strict";n(44),n(68);var r=n(3),o=n(95),c=n(210),l=n(31),d=n(120),f=Object(r.b)({components:{BTooltip:o.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(e,t){var n=Object(r.a)((function(){var e,n;return(null===(n=null===(e=t.root.$store.state)||void 0===e?void 0:e.auth)||void 0===n?void 0:n.user)||null})),o=t.root.$getBean("eventBus"),f=Object(r.w)(),h=Object(r.a)((function(){var t,r,o;if(e.bookInfo.isBorrowing){var c=null===(r=null===(t=e.bookInfo)||void 0===t?void 0:t.reading_progress)||void 0===r?void 0:r.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(o=e.bookInfo)||void 0===o?void 0:o.borrowTimes)>0&&n.value.is_vip?"再次借阅":"VIP借阅"})),v=Object(r.a)((function(){return e.bookInfo.isBorrowing?"有效期至 ".concat(Object(l.b)(1e3*e.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(e.bookInfo.borrowTimes,"次")})),m=Object(r.f)("refreshBook",(function(){return null})),y=Object(d.b)((function(){t.emit("fetch"),m()}),500);Object(r.j)((function(){o.on(o.eventType.SHOW_VIP_FETCH,(function(){y()}))})),Object(r.k)((function(){o.off(o.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:h,buttonVipDescript:v,handleClick:function(){var r={event_page:e.eventPage,book_id:e.bookInfo.id,author_id:e.bookInfo.user_info.user_id,platform:t.root.$device.isMobile?"h5":"web"};return t.root.$TEA("member_rent_click",r),n.value?n.value.isBindedPhone?void(e.bookInfo.isBorrowing?t.emit("read"):n.value.is_vip?o.emit(o.eventType.SHOW_VIP_BORROW_MODAL,e.bookInfo,r):f.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail"}})):t.root.$requestBindPhoneNumber(c.c,{toUrl:location.href}):t.root.$requestLogin()},currentUser:n}}}),h=(n(1766),n(29)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.bookInfo.canVipBorrow?r("div",{staticClass:"vip-borrow-button"},[r("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!e.bookInfo.isBorrowing||e.$device.isMobile,"max-width":"244px"}},[r("div",{staticClass:"vip-borrow",on:{click:e.handleClick}},[e.bookInfo.isBorrowing?r("img",{staticClass:"mark",attrs:{src:n(1765),alt:"借阅中"}}):e._e(),e._v(" "),r("div",{staticClass:"title"},[e._v(e._s(e.buttonVipTitle))]),e._v(" "),e.bookInfo.borrowTimes>0&&e.currentUser.is_vip?r("div",{staticClass:"descript"},[e._v("\n        "+e._s(e.buttonVipDescript)+"\n      ")]):e._e()])])],1):e._e()}),[],!1,null,"e9b6c900",null);t.a=component.exports},1527:function(e,t,n){"use strict";n(11),n(54),n(63);var r=n(3),o=n(1668),c=n.n(o),l=n(1669),d=n.n(l),f=Object(r.b)({components:{LabelLeftIcon:c.a,LabelRightIcon:d.a},props:{book:{type:Object,default:function(){return{}}},isCountDown:{type:Boolean,default:!1},isOnlyDay:{type:Boolean,default:!1},isFloatDiscountLabel:{type:Boolean,default:!1},showWapStyle:{type:Boolean,default:!1}},setup:function(e,t){var n=t.root.$device.isMobile,o=Object(r.n)({days:"0",hours:"0",minutes:"0",seconds:"0"}),c=Object(r.n)(),l=Object(r.n)(),d=Object(r.n)(99),f=Object(r.a)((function(){var t,n,r;return!(0!==(null===(n=null===(t=e.book)||void 0===t?void 0:t.base_info)||void 0===n?void 0:n.price)&&!(null===(r=e.book)||void 0===r?void 0:r.is_buy))})),h=Object(r.a)((function(){var t;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.name)||""})),v=Object(r.a)((function(){var t;return!!(null===(t=e.book.max_discount)||void 0===t?void 0:t.is_limited_time)})),m=Object(r.a)((function(){return!f.value&&!e.isFloatDiscountLabel&&e.isCountDown&&h.value&&v.value})),y=Object(r.a)((function(){if(!m.value)return"";if(e.isOnlyDay){var t=e.book.max_discount;return t&&1e3*(null==t?void 0:t.end_time)-Date.now()>0?"剩余 ".concat(Math.floor((1e3*(null==t?void 0:t.end_time)-Date.now())/1e3/60/60/24)," 天"):""}return n?"":"剩余 ".concat(o.value.days," 天 ").concat(o.value.hours,":").concat(o.value.minutes,":").concat(o.value.seconds,".").concat(w(d.value))})),w=function(e){return e<10?"0".concat(e):"".concat(e)},C=function(){var t=e.book.max_discount;if(t&&v.value){var n=1e3*(null==t?void 0:t.end_time)-Date.now();if(n>0){var r="".concat(Math.floor(n/1e3/60/60/24)),l=w(Math.floor(n/1e3/60/60%24)),f=w(Math.floor(n/1e3/60%60)),h=w(Math.floor(n/1e3%60));o.value={days:r,hours:l,minutes:f,seconds:h}}else clearInterval(c.value),d.value=0,window.location.reload();c.value||(c.value=setInterval((function(){var e=d.value;e>0?e-=1:e=99,d.value=e}),10))}};return Object(r.j)((function(){n||!m.value||e.isOnlyDay||(C(),l.value=setInterval((function(){C()}),1e3))})),Object(r.k)((function(){clearInterval(l.value),clearInterval(c.value)})),{isOwner:f,isWap:n,showLabel:h,countDownText:y}}}),h=(n(1670),n(29)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.isOwner&&e.showLabel?n("div",{staticClass:"sale-tooltip-wrap",class:{"sale-tooltip-wrap-wap":e.showWapStyle,"sale-tooltip-wrap-float":e.isFloatDiscountLabel}},[e.isFloatDiscountLabel?n("LabelLeftIcon",{staticClass:"label-icon label-icon-left"}):e._e(),e._v(" "),(e.isFloatDiscountLabel,n("div",{staticClass:"sale-tooltip"},[e._v("\n    "+e._s(e.showLabel)+"\n    "),e.countDownText?n("span",{staticClass:"count-down-text"},[e._v("\n      "+e._s(e.countDownText)+"\n    ")]):e._e()])),e._v(" "),e.isFloatDiscountLabel?n("LabelRightIcon",{staticClass:"label-icon label-icon-right"}):e._e()],1):e._e()}),[],!1,null,"14d8b2f6",null);t.a=component.exports},1530:function(e,t,n){},1531:function(e,t,n){},1664:function(e,t,n){"use strict";n(54);var r=n(3),o=n(1527),c=n(1263),l=Object(r.b)({components:{SaleTooltip:o.a},props:{book:{type:Object,default:function(){return{}}},isOwner:{type:Boolean,default:!1},sectionRoute:{type:Object,default:function(){return{}}},isFloatDiscountLabel:{type:Boolean,default:!1}},emits:["buyBook"],setup:function(e,t){var n,o=t.emit;return{isWap:null===(n=t.root.$device)||void 0===n?void 0:n.isMobile,bookId:Object(r.a)((function(){var t;return(null===(t=e.book)||void 0===t?void 0:t.booklet_id)||""})),hasReadSection:Object(r.a)((function(){var t,n;return!!(null===(n=null===(t=e.book)||void 0===t?void 0:t.reading_progress)||void 0===n?void 0:n.last_section_id)})),hasBorrow:Object(r.a)((function(){var t,n;return!!(null===(n=null===(t=e.book)||void 0===t?void 0:t.reading_progress)||void 0===n?void 0:n.borrow_times)})),hasDiscount:Object(r.a)((function(){var t,n;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.pay_money)!==(null===(n=e.book.max_discount)||void 0===n?void 0:n.price)})),currentPrice:Object(r.a)((function(){var t;return Object(c.d)((null===(t=e.book.max_discount)||void 0===t?void 0:t.pay_money)||0)})),originPrice:Object(r.a)((function(){var t;return Object(c.d)((null===(t=e.book.max_discount)||void 0===t?void 0:t.price)||0)})),showLabel:Object(r.a)((function(){var t;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.name)||""})),buyBook:function(){o("buyBook")}}}}),d=(n(1764),n(29)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-buy-button-wrap",class:{"discount-label-show":e.showLabel&&!e.isOwner&&!e.hasBorrow,"discount-label-float":e.isFloatDiscountLabel}},[!e.showLabel||e.isOwner||e.hasBorrow?e._e():n("SaleTooltip",{staticClass:"sale-tooltip-entry",attrs:{book:e.book,"is-count-down":!e.isWap,"is-float-discount-label":e.isFloatDiscountLabel}}),e._v(" "),n("div",{staticClass:"book-buy-button"},[e.isOwner?n("router-link",{staticClass:"book-owner",attrs:{"data-book-id":e.bookId,to:e.sectionRoute}},[e._v("\n      "+e._s(e.hasReadSection?"继续学习":"立即学习")+"\n    ")]):n("div",{staticClass:"buy-button",on:{click:function(t){return t.stopPropagation(),e.buyBook(t)}}},[n("div",{staticClass:"price-box",class:{"price-box-line":!(e.hasBorrow||e.hasDiscount)}},[n("span",{staticClass:"price-unit"},[e._v("¥")]),e._v(" "),n("span",[e._v("\n          "+e._s(e.currentPrice+" 立即购买")+"\n        ")])]),e._v(" "),e.hasBorrow?n("div",{staticClass:"borrow-desc"},[e._v("\n        "+e._s("退还 1 张借阅卡")+"\n      ")]):e.hasDiscount?n("div",{staticClass:"origin-price"},[e._v("\n        "+e._s("原价 ¥"+e.originPrice)+"\n      ")]):e._e()])],1)],1)}),[],!1,null,"495d186a",null);t.a=component.exports},1668:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"7",height:"20",viewBox:"0 0 7 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{d:"M0 5.33333C0 2.38781 2.38781 0 5.33333 0H76C76 0 72.0072 0 72.0072 4.11765C72.0072 4.91035 72.0072 5.89927 72.0072 6.97946C72.0072 12.8705 67.2534 17.6471 61.3624 17.6471C43.6926 17.6471 9.85589 17.6471 5.99862 17.6471C0.749827 17.6471 0 20 0 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M72.653 0.666667C72.4433 0.869927 72.2462 1.10455 72.0712 1.3752C71.619 2.07469 71.3405 2.97571 71.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C71.3405 12.5042 66.8834 16.9804 61.3624 16.9804H5.99862C3.2911 16.9804 1.65133 17.5844 0.666667 18.2649V5.33333C0.666667 2.756 2.756 0.666667 5.33333 0.666667H72.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1669:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.9997 0C12.5147 0 10.4266 1.69963 9.83447 3.99987H20.165C19.5729 1.69963 17.4848 0 14.9997 0Z",fill:"#FFB6B6"}}),n("path",{attrs:{d:"M-61 5.33333C-61 2.38781 -58.6122 0 -55.6667 0H15C15 0 11.0072 0 11.0072 4.11765C11.0072 4.91035 11.0072 5.89927 11.0072 6.97946C11.0072 12.8705 6.25343 17.6471 0.362395 17.6471C-17.3074 17.6471 -51.1441 17.6471 -55.0014 17.6471C-60.2502 17.6471 -61 20 -61 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M11.653 0.666667C11.4433 0.869927 11.2462 1.10455 11.0712 1.3752C10.619 2.07469 10.3405 2.97571 10.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C10.3405 12.5042 5.88338 16.9804 0.362396 16.9804H-55.0014C-57.7089 16.9804 -59.3487 17.5844 -60.3333 18.2649V5.33333C-60.3333 2.756 -58.244 0.666667 -55.6667 0.666667H11.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1670:function(e,t,n){"use strict";n(1456)},1764:function(e,t,n){"use strict";n(1530)},1765:function(e,t,n){e.exports=n.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1766:function(e,t,n){"use strict";n(1531)},1767:function(e,t,n){},1780:function(e,t,n){},1781:function(e,t,n){},1782:function(e,t,n){},1783:function(e,t,n){},2021:function(e,t,n){"use strict";n(1767)},2067:function(e,t,n){e.exports=n.p+"59853cb27d8fff768e085967326effcc.svg"},2068:function(e,t,n){e.exports=n.p+"0268c8e4553ef603e4795b3be1eeae5c.svg"},2069:function(e,t,n){"use strict";n(1780)},2070:function(e,t,n){"use strict";n(1781)},2071:function(e,t,n){"use strict";n(1782)},2072:function(e,t,n){"use strict";n(1783)},2075:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},2076:function(e,t,n){"use strict";n(60),n(319),n(10),n(55),n(64),n(59);var r,o=n(13),c=n(14),l=n(1242);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=new Map,c=[];return e.forEach((function(e){var d,f,h,v="";e.sectionId===(null===(d=t.reading_progress)||void 0===d?void 0:d.last_section_id)&&(v="上次学到"),(null===(f=e.reading_progress)||void 0===f?void 0:f.reading_progress)>=100&&(v="已学完"),2===(null===(h=e.reading_progress)||void 0===h?void 0:h.has_update)&&(v="有更新");var m="";m=t.price>0?e.isFree?"试学章节":"付费章节":"免费章节",c.push(e.sectionId),o.set(e.sectionId,{sectionId:e.sectionId,title:e.title||"小册章节标题",readCount:e.readCount,commentCount:e.commentCount,readDurationStr:Object(l.b)(e.readDuration),status:v,isFinished:e.isFinished,freeStatus:m,canEdit:n===r.author,vid:e.vid,hasVideo:!!e.vid})})),{sectionMap:o,sectionOrder:c}}function f(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o&&o.id?(null===(e=o.roles)||void 0===e?void 0:e.isAdmin)?r.admin:o.id===(null===(t=n.user)||void 0===t?void 0:t.user_id)?r.author:n.is_buy?r.buyer:r.common:r.unlogin}!function(e){e.unlogin="unlogin",e.admin="admin",e.author="author",e.buyer="buyer",e.common="common"}(r||(r={}));var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.bookId="",this.userRole=r.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=n.booklet_id,this.userRole=f(n,c);var l=d(t,n,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(e,[{key:"getSectionList",value:function(){var e=this,t=[];return this.sectionOrder.forEach((function(n){var r;t.push((r=e.sectionMap.get(n),JSON.parse(JSON.stringify(r))))})),t}},{key:"setSectionFree",value:function(){}}]),e}();t.a=h},2381:function(e,t,n){"use strict";n(97);var r=n(0),o=n(110),c=n(4),l=(n(54),n(1664)),d=n(1359),f=n(1525),h={components:{VipBorrowButton:f.a,BookBuyButton:l.a,BookThumb:d.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}},methods:{buyBook:function(){this.$emit("buy")}}},v=(n(2021),n(29)),m=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buying-guide-wrap"},[n("div",{staticClass:"buying-guide",class:{"buying-guide--m":e.isWapSection}},[n("div",{staticClass:"buying-inner"},[n("div",{staticClass:"poster"},[n("BookThumb",{staticClass:"thumb",attrs:{book:e.bookInfo}})],1),e._v(" "),n("div",{staticClass:"title"},[e._v("此章节为付费章节")]),e._v(" "),n("div",{staticClass:"desc"},[e._v("现在购买立即解锁全部内容")]),e._v(" "),n("div",{staticClass:"button-container"},[n("BookBuyButton",{attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{attrs:{"book-info":e.bookInfo,"event-page":"lock"}})],1)])])])}),[],!1,null,"8cfd59ae",null).exports,y=(n(79),n(10),n(30),n(51),n(96),n(63),n(19),n(5)),w=n(3),C=n(1402),_=n(7),content=n(1107),k=n(1481),x=n(1421),O=n(1162),S=n(1070),P=n(45),j=n(1401),E=n(120),T=n(8),V=n(95),L=Object(T.defineComponent)({props:["curIndex","list","foldPc"],components:{Button:V.Button},setup:function(e,t){var n=t.emit;return{prevPage:function(){n("prev")},nextPage:function(){n("next")},notLastPage:Object(T.computed)((function(){return e.curIndex<e.list.length-1})),notFirstPage:Object(T.computed)((function(){return e.curIndex>0}))}}}),I=(n(2069),Object(v.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("client-only",[r("div",{staticClass:"container",class:{"fold-pc":e.foldPc}},[r("Button",{staticClass:"prev-btn",class:{disabled:!e.notFirstPage},attrs:{disabled:!e.notFirstPage},on:{click:e.prevPage}},[r("div",{staticClass:"content"},[r("img",{attrs:{src:n(2067)}}),e._v(" "),r("span",{staticClass:"text"},[e._v("上一章")])])]),e._v(" "),r("Button",{staticClass:"next-btn",class:{disabled:!e.notLastPage},attrs:{disabled:!e.notLastPage},on:{click:e.nextPage}},[r("div",{staticClass:"content"},[r("span",{staticClass:"text"},[e._v("下一章")]),e._v(" "),r("img",{attrs:{src:n(2068)}})])])],1)])}),[],!1,null,"60d5cc34",null).exports);function R(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D=Object(w.b)({components:{Direction:I,CommentCommon:O.a,MarkdownViewer:k.default,VipBorrowButton:f.a,BookBuyButton:l.a,Video:function(){return Promise.all([n.e(197),n.e(129)]).then(n.bind(null,3114))}},props:["bookInfo","sectionInfo","free","curIndex","list","foldPc","foldCatalog"],emits:["ready"],setup:function(e,t){var n=t.root,r=Object(w.v)(),o=Object(w.x)(),c=Object(w.a)((function(){return o.getters.USER}));Object(j.d)(r.value.params.sectionId);var l=Object(w.a)((function(){return!e.free&&!e.bookInfo.is_buy})),d=Object(x.a)({parentId:r.value.params.sectionId,parentType:_.IdType.SectionIdType}).commentAnchor;return A(A({},function(e,t){var n={miniscreen:t.$device.isMobile?null:{width:320,height:180,isShowIcon:!0,isScrollSwitch:!0},cssFullscreen:!0};return{isLegacyBookletVid:Object(w.a)((function(){var t;return"6844733803647205384"===(null===(t=e.bookInfo)||void 0===t?void 0:t.id)})),handleVideoEvent:function(e){var n=t.$getBean("eventBus");e.on(C.Events.FULLSCREEN_CHANGE,(function(e){n.emit(n.eventType.VIDEO_FULLSCREEN_CHANGE,e)}))},videoConfig:n}}(e,n)),{},{guideToBuy:l,handleBuy:function(){var t;n.$coursePayment(c.value,null===(t=e.bookInfo)||void 0===t?void 0:t.booklet_id)},CommentPosition:S.a,commentAnchor:d})},data:function(){return{htmlContent:"",canFetch:!0,isVideoSupported:!0,commentList:[],query:{entryId:"",startTime:"",pageSize:20},readingPostion:0,videoWrapperHeight:0,mobilePlayerStyle:{}}},computed:A({commentSource:function(){return{itemId:this.section.section_id,itemType:13,userId:this.section.user_id}},curSectionId:function(){return this.$route.params.sectionId},isLastSectionId:function(){var e,t,n=(null===(t=null===(e=this.bookInfo.base_info)||void 0===e?void 0:e.section_ids)||void 0===t?void 0:t.split("|"))||[];return(n.length>0?n[n.length-1]:0)===this.curSectionId},isMobileBrowser:function(){return this.$device.isMobile},section:function(){return Object.assign({},this.sectionInfo,{user:this.bookInfo.user})},showBuyButton:function(){return!this.free&&this.sectionInfo.isFree&&this.sectionInfo&&this.isMobileBrowser&&!this.bookInfo.isBorrowing}},Object(o.mapGetters)({user:c.USER,login:c.LOGIN})),watch:{sectionInfo:{handler:function(e){var t=this;return Object(y.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null==e?void 0:e.id)){n.next=18;break}if(t.htmlContent=e.html,t.bookletId=e.bookId,t.sectionId=e.id,t.readingPostion=Number((null===(r=e.reading_progress)||void 0===r?void 0:r.reading_position)||"0"),t.initPosition(),!(null===(o=t.user)||void 0===o?void 0:o.id)){n.next=18;break}return n.prev=7,n.next=10,Object(content.a)({booklet_id:t.bookletId,section_id:t.sectionId,reading_position:t.readingPostion});case 10:if(0===(c=n.sent).err_no||"0"===c.err_no){n.next=13;break}throw c;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.warn("阅读记录上报失败",n.t0);case 18:t.setupVideoPlayer();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()},immediate:!0}},mounted:function(){var e=this;return Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isMounted=!0,e.initRecordReadPos(),e._handleCurrentReadRecord=function(){var t=e.getCurrentReadPos();e.doRecord(t)},Object(P.o)(e._handleCurrentReadRecord),window.addEventListener("beforeunload",e._handleCurrentReadRecord),e.setupVideoPlayer();case 6:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){if(this.removeScrollListener){this.removeScrollListener();var e=this.getCurrentReadPos();this.doRecord(e)}Object(P.q)(this._handleCurrentReadRecord),window.removeEventListener("beforeunload",this._handleCurrentReadRecord)},methods:{setupVideoPlayer:function(){var e;(null===(e=this.sectionInfo)||void 0===e?void 0:e.vid)&&(this.removeVideoTag(),this.$refs.sectionPage&&this.calculateHeight())},calculateHeight:function(){var e=this.$refs.sectionPage,t=e.offsetLeft,n=e.offsetTop,r=e.offsetWidth;this.mobilePlayerStyle={left:"".concat(t,"px"),top:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(r/16*9,"px")},this.videoWrapperHeight=r/16*9},scrollToComment:function(){var e=document.getElementById("comment-box");e&&Object(P.t)(e,-30)},onReady:function(){var e=this;this.$emit("ready"),setTimeout((function(){return e.initPosition()}),1e3)},initPosition:function(){this.$route.hash?this.initHashToElement(this.$route.hash):0<this.readingPostion&&this.readingPostion<=100&&this.scrollToContentPos(this.readingPostion)},removeVideoTag:function(){var content=this.sectionInfo.html||"";content=content.replace(/^<div\s+data-source="https:\/\/video-cdn\.juejin\.im.+?<\/div>/,""),this.htmlContent=content},buyBook:function(){this.$emit("buy")},initHashToElement:function(e){var t=this;this.$nextTick((function(){var n=e;if(n)if("#comment"===n)t.scrollToComment();else{var r=n.substring(1),o=t.$refs.content.$el.querySelectorAll('[data-id="'.concat(r,'"]'))[0];if(!o)return;var c=t.isMobileBrowser?35:70,l=o.offsetTop;window.scrollTo(0,l-c)}}))},scrollToContentPos:function(e){var t=this;this.$nextTick((function(){var n,r;if(!(null===(r=null===(n=t.$refs)||void 0===n?void 0:n.content)||void 0===r?void 0:r.$el))return 0;var o=Object(P.h)().height,c=t.$refs.content.$el.getBoundingClientRect().height;window.scrollTo(0,c*e/100-o+122)}))},initRecordReadPos:function(){var e,t,n=this;(null===(e=this.user)||void 0===e?void 0:e.id)&&"0"!==(null===(t=this.user)||void 0===t?void 0:t.id)&&(this.removeScrollListener=Object(P.m)(window,Object(E.a)((function(){n.scrollRecord(n.getCurrentReadPos())}),500)))},getCurrentReadPos:function(){var e,t;if(!(null===(t=null===(e=this.$refs)||void 0===e?void 0:e.content)||void 0===t?void 0:t.$el))return 0;var n=Object(P.h)().height,r=this.$refs.content.$el.getBoundingClientRect(),o=r.y,c=r.height;if(0===c)return 0;var l=Math.round((n-o)/c*100);return l<0?0:l>100?100:l},scrollRecord:function(e){(Math.abs(e-this.readingPostion)>5||this.readingPostion<100&&e>=100)&&this.doRecord(e)},doRecord:function(e){var t=this;return Object(y.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(r=t.user)||void 0===r?void 0:r.id){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Object(content.a)({booklet_id:t.bookletId,section_id:t.sectionId,reading_position:e});case 5:if(0===(o=n.sent).err_no||"0"===o.err_no){n.next=8;break}throw o;case 8:t.readingPostion=e,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),console.warn("阅读记录上报失败",n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}}),M=(n(2070),Object(v.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section-content"},[n("div",{ref:"sectionPage",staticClass:"section-page book-section-view",class:[{fold:e.foldPc},{"fold-catalog":e.foldCatalog}]},[e.sectionInfo.vid?n("div",{staticClass:"video-wrapper",style:e.isMobileBrowser?{height:e.videoWrapperHeight+"px"}:{}},[n("client-only",[n("Video",{style:e.isMobileBrowser?e.mobilePlayerStyle:{},attrs:{"video-type":e.isLegacyBookletVid?"mp4":"hls",vid:e.sectionInfo.vid||"","video-config":e.videoConfig},on:{handleEvent:e.handleVideoEvent}})],1)],1):e._e(),e._v(" "),e.sectionInfo.markdown||e.htmlContent?n("MarkdownViewer",{ref:"content",attrs:{markdown:e.sectionInfo.markdown,html:e.htmlContent},on:{ready:e.onReady}}):e._e(),e._v(" "),e.showBuyButton?n("div",{staticClass:"bottom-mobile-buy"},[n("BookBuyButton",{attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{staticClass:"borrow",attrs:{"event-page":"free","book-info":e.bookInfo}})],1):e._e(),e._v(" "),e.sectionInfo.markdown||e.htmlContent?n("Direction",{staticClass:"direction",attrs:{"cur-index":e.curIndex,list:e.list,"fold-pc":e.foldPc},on:{prev:function(t){return e.$emit("prev")},next:function(t){return e.$emit("next")}}}):e._e(),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.sectionInfo.markdown||e.htmlContent,expression:"sectionInfo.markdown || htmlContent"}],ref:"commentBox",staticClass:"book-comments"},[n("div",{staticClass:"box-title"},[e._v("留言")]),e._v(" "),n("CommentCommon",{attrs:{id:"comment-box",size:e.$device.isMobile?"small":"default",count:e.section.comment_count,source:e.commentSource,"has-sort":!1,"tea-params":{comment_position:e.CommentPosition.bookSectionDetail},"anchor-comment":e.commentAnchor,"jj-helper-item-id":e.bookletId,"jj-helper-item-type":12},scopedSlots:e._u([e.guideToBuy?{key:"unLogin",fn:function(){return[n("div",{staticClass:"guide-to-buy",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"content"},[n("span",[e._v("看完啦，")]),e._v(" "),n("span",{staticClass:"buy",on:{click:e.handleBuy}},[e._v("立刻购买")]),e._v(" "),n("span",[e._v("分享一下感受吧~")])])])]},proxy:!0}:null],null,!0)})],1)],1)])}),[],!1,null,"0a543cbe",null).exports),B={components:{BookThumb:d.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}}};n(2071);function N(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var H={components:{SectionBuyingGuide:m,SectionWriting:Object(v.a)(B,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-writing-wrap"},[t("div",{staticClass:"section-writing",class:{"section-writing--m":this.isWapSection}},[t("div",{staticClass:"writing-inner"},[t("div",{staticClass:"poster"},[t("BookThumb",{staticClass:"thumb",attrs:{book:this.bookInfo}})],1),this._v(" "),t("div",{staticClass:"title"},[this._v("此章节正在写作中")])])])])}),[],!1,null,"217a0058",null).exports,SectionContent:M},props:["bookInfo","sectionInfo","free","curIndex","list","foldPc","foldCatalog"],data:function(){return{}},computed:F(F({},Object(o.mapGetters)({logined:c.LOGINED,user:c.USER})),{},{isAuthor:function(){return!!this.user&&this.bookInfo.user.id===(null==this?void 0:this.user.id)},isAdmin:function(){var e,t;return!!this.user&&(null==this||null===(e=this.user)||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.isAdmin)},isLoading:function(){return!(this.bookInfo&&this.sectionInfo&&Object.keys(this.bookInfo).length&&Object.keys(this.sectionInfo).length)},sectionContentComponent:function(){var e,t,n,r,o=0===(null==this||null===(e=this.bookInfo)||void 0===e?void 0:e.price),c=1===(null==this||null===(t=this.sectionInfo)||void 0===t?void 0:t.is_free),l=(null==this||null===(n=this.bookInfo)||void 0===n?void 0:n.is_buy)||!1,d=0===(null==this||null===(r=this.sectionInfo)||void 0===r?void 0:r.status)||!1,f=(null==this?void 0:this.bookInfo.isBorrowing)||!1;return this.isAdmin||this.isAuthor?"section-content":c||o||l||f?d?"section-writing":"section-content":"section-buying-guide"}}),methods:{buyBook:function(){this.$coursePayment(this.user,this.bookInfo.id)}}},U=(n(2072),Object(v.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"section-view"},[e.isLoading?e._e():n(e.sectionContentComponent,{tag:"component",attrs:{"book-info":e.bookInfo,"section-info":e.sectionInfo,free:e.free,"cur-index":e.curIndex,list:e.list,"fold-pc":e.foldPc,"fold-catalog":e.foldCatalog},on:{buy:e.buyBook,prev:function(t){return e.$emit("prev")},next:function(t){return e.$emit("next")},ready:function(t){return e.$emit("ready")}}})],1)}),[],!1,null,"71b55666",null));t.a=U.exports},2533:function(e,t,n){},2534:function(e,t,n){},2535:function(e,t,n){},2536:function(e,t,n){},2537:function(e,t,n){},3543:function(e,t,n){e.exports=n.p+"img/wx-qr.966373a.jpg"},3544:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,l=t._v,data=t.data,d=t.children,f=void 0===d?[]:d,h=data.class,v=data.staticClass,style=data.style,m=data.staticStyle,y=data.attrs,w=void 0===y?{}:y,C=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[h,v],style:[style,m],attrs:Object.assign({width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},w)},C),f.concat([n("title",[l("juejin_logo copy")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[n("g",{attrs:{id:"juejin_logo-copy","sketch:type":"MSArtboardGroup",fill:"#007FFF"}},[n("path",{attrs:{d:"M23.2819984,7.7030545 L19.8538714,5 L16.2721918,7.8241757 L16.0865388,7.97375707 L19.8538714,10.977629 L23.6327866,7.97375707 L23.2819984,7.7030545 Z M36.2727433,18.185664 L19.8439434,31.1400064 L3.42507143,18.1936064 L1,20.1414735 L19.8439434,35 L38.6981457,20.1335312 L36.2727433,18.185664 Z M19.8439434,19.2367048 L10.903809,12.1875172 L8.47840667,14.1353844 L19.8439434,23.0970293 L31.2190771,14.127442 L28.7936748,12.1795749 L19.8439434,19.2367048 Z",id:"Fill-1-Copy-2","sketch:type":"MSShapeGroup"}})])])]))}}},3545:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,l=t._v,data=t.data,d=t.children,f=void 0===d?[]:d,h=data.class,v=data.staticClass,style=data.style,m=data.staticStyle,y=data.attrs,w=void 0===y?{}:y,C=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[h,v],style:[style,m],attrs:Object.assign({width:"16px",height:"13px",viewBox:"0 0 16 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},w)},C),f.concat([n("title",[l("Group 4")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"全屏",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"2_fullscreen_close-sidebar",transform:"translate(-19.000000, -25.000000)",fill:"#979797"}},[n("g",{attrs:{id:"Group-4",transform:"translate(19.000000, 25.000000)"}},[n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"5.5",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"0",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3-Copy",x:"0",y:"11",width:"16",height:"1.5"}})])])])]))}}},3546:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},y)},w),d.concat([n("path",{attrs:{fill:"#BABABA","fill-rule":"evenodd",d:"M11 0h9v9h-9V0zM0 0h9v9H0V0zm0 11h9v9H0v-9zm14-5h3V3h-3v3zM3 6h3V3H3v3zm0 11v-3h3v3H3zm8-6h3v3h-3v-3zm3 3h3v3h-3v-3zm3-3h3v3h-3v-3zm-6 6h3v3h-3v-3zm6 0h3v3h-3v-3z"}})]))}}},3547:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"38",height:"44",viewBox:"0 0 38 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("g",{attrs:{filter:"url(#filter0_d_5954_18586)"}},[n("circle",{attrs:{cx:"16",cy:"20",r:"13.5",transform:"rotate(-180 16 20)",fill:"white",stroke:"#E4E6EB"}}),n("path",{attrs:{d:"M10.6029 14.7C10.3336 14.7 10.1154 14.9183 10.1154 15.1875C10.1154 15.4567 10.3337 15.675 10.6029 15.675L21.3945 15.675C21.6638 15.675 21.882 15.4567 21.882 15.1875C21.882 14.9183 21.6638 14.7 21.3945 14.7L10.6029 14.7ZM10.6029 19.5125C10.3337 19.5125 10.1154 19.7308 10.1154 20C10.1154 20.2692 10.3337 20.4875 10.6029 20.4875L17.0196 20.4875C17.2888 20.4875 17.5071 20.2692 17.5071 20C17.5071 19.7308 17.2888 19.5125 17.0196 19.5125L10.6029 19.5125ZM10.6029 24.325C10.3336 24.325 10.1154 24.5433 10.1154 24.8125C10.1154 25.0817 10.3336 25.3 10.6029 25.3L21.3945 25.3C21.6638 25.3 21.882 25.0817 21.882 24.8125C21.882 24.5433 21.6638 24.325 21.3945 24.325L10.6029 24.325ZM21.5681 20.022L19.7098 18.5767C19.4854 18.4021 19.1584 18.562 19.1584 18.8464L19.1584 21.737C19.1584 22.0213 19.4854 22.1812 19.7098 22.0067L21.5681 20.5614C21.744 20.4246 21.744 20.1588 21.5681 20.022Z",fill:"#8A919F",stroke:"#8A919F","stroke-width":"0.1"}})]),n("defs",[n("filter",{attrs:{id:"filter0_d_5954_18586",x:"-6",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[n("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),n("feColorMatrix",{attrs:{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}}),n("feOffset",{attrs:{dy:"2"}}),n("feGaussianBlur",{attrs:{stdDeviation:"4"}}),n("feComposite",{attrs:{in2:"hardAlpha",operator:"out"}}),n("feColorMatrix",{attrs:{type:"matrix",values:"0 0 0 0 0.425729 0 0 0 0 0.483486 0 0 0 0 0.558333 0 0 0 0.16 0"}}),n("feBlend",{attrs:{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_5954_18586"}}),n("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_5954_18586",result:"shape"}})])])]))}}},3548:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"137",height:"28",viewBox:"0 0 137 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{d:"M17.5865 17.3955H17.5902L28.5163 8.77432L25.5528 6.39453L17.5902 12.6808H17.5865L17.5828 12.6845L9.62018 6.40201L6.6604 8.78181L17.5828 17.3992L17.5865 17.3955Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5872 6.77268L21.823 3.40505L17.5872 0.00748237L17.5835 0L13.3552 3.39757L17.5835 6.76894L17.5872 6.77268Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5865 23.2854L17.5828 23.2891L2.95977 11.7531L0 14.1291L0.284376 14.3574L17.5865 28L28.5238 19.3752L35.1768 14.1254L32.2133 11.7456L17.5865 23.2854Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M133.287 18.4172H131.162L129.923 23.0758H126.825V16.7559H135.364V14.7315H126.825V11.1469H133.074V9.12256H118.454V11.1469H124.703V14.7315H116.164V16.7559H124.703V23.0758H121.601L120.363 18.4172H118.237L119.487 23.0758H115.543V25.1001H135.985V23.0758H132.041L133.287 18.4172Z",fill:"#323232"}}),n("path",{attrs:{d:"M130.522 3.3151L130.2 2.94092H121.321L120.999 3.3151C119.298 5.2467 117.378 6.97337 115.278 8.46009V10.9522C116.206 10.3573 120.183 7.72295 122.327 4.98768H129.235C131.375 7.72295 135.356 10.3573 136.284 10.9522V8.46009C134.169 6.97586 132.235 5.2491 130.522 3.3151Z",fill:"#323232"}}),n("path",{attrs:{d:"M94.9037 8.53127H96.494V6.50323H94.9037V2.88867H92.9056V6.50323H91.3303V8.53127H92.9094V14.7914L91.3303 15.3377V17.5828L92.9094 17.0365V20.7371C92.8414 22.2391 92.5579 23.7236 92.0674 25.145H94.1629C94.6112 23.7165 94.863 22.2335 94.9112 20.7371V16.3442L96.5053 15.7904V13.5229L94.9112 14.0767L94.9037 8.53127Z",fill:"#323232"}}),n("path",{attrs:{d:"M99.1875 2.88867H97.6608V20.7446C97.6727 22.2359 97.4852 23.7221 97.1033 25.1637H99.1875C99.5206 23.7145 99.6851 22.2316 99.6776 20.7446V9.77357H112.321V2.88867H99.1875ZM110.308 7.75303H99.6851V4.91671H110.304L110.308 7.75303Z",fill:"#323232"}}),n("path",{attrs:{d:"M110.305 23.405H107.566V17.6838H110.021H110.702H111.91V11.8166H110.021V15.9363H107.566V11.1431H105.676V15.9363H103.27V11.8166H101.381V17.6838H102.298H103.27H105.676V23.405H102.967V19.173H101.074V25.1524H102.286H102.967H110.305H110.683H112.195V19.173H110.305V23.405Z",fill:"#323232"}}),n("path",{attrs:{d:"M53.0024 2.91846V4.83801L56.5908 6.11397L53.0024 7.38618V9.30573L59.2887 7.07187L65.5749 9.30573V7.38618L61.9865 6.11397L65.5749 4.83801V2.91846L59.2887 5.15232L53.0024 2.91846Z",fill:"#323232"}}),n("path",{attrs:{d:"M79.9508 11.697H88.5944V9.47813H79.9508V2.80273H77.5299V9.47813H68.8863V11.697H77.5299V22.9823H67.76V25.2012H89.7207V22.9823H79.9508V11.697Z",fill:"#323232"}}),n("path",{attrs:{d:"M48.9461 5.39227L52.2913 5.18272V3.24072L43.6813 3.78328V5.72529L47.0265 5.512V8.50545H43.5803V10.4213H47.0265V25.164H48.9461V10.4213H52.3923V8.50545H48.9461V5.39227Z",fill:"#323232"}}),n("path",{attrs:{d:"M57.6539 9.01025H55.6595L55.1768 10.3648H52.9991V12.2357H54.5145L52.55 17.7662H53.8821V24.1534H55.7007V16.8457H58.6642V25.1787H60.5837V16.8457H63.4612V21.059C63.4534 22.1374 63.181 23.1974 62.6679 24.146H64.7147C65.1423 23.173 65.3627 22.1217 65.362 21.059V15.6932V15.1282H60.5837V13.2572H58.6642V15.1282H55.4836L56.5313 12.2245H65.594V10.3536H57.1749L57.6539 9.01025Z",fill:"#323232"}}),n("path",{attrs:{d:"M43.562 24.6246H45.4591L46.2786 11.4272H44.3815L43.562 24.6246Z",fill:"#323232"}}),n("path",{attrs:{d:"M49.7849 11.4272L50.3499 23.2963H52.247L51.682 11.4272H49.7849Z",fill:"#323232"}})]))}}},3549:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"108",height:"22",viewBox:"0 0 108 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{d:"M13.8171 13.6671H13.82L22.4046 6.89348L20.0762 5.02368L13.82 9.96278H13.8171L13.8141 9.96572L7.55792 5.02956L5.23242 6.89936L13.8141 13.67L13.8171 13.6671Z",fill:"#2986FF"}}),n("path",{attrs:{d:"M13.8173 5.32129L17.1453 2.67535L13.8173 0.00587889L13.8143 0L10.4922 2.66947L13.8143 5.31835L13.8173 5.32129Z",fill:"#2986FF"}}),n("path",{attrs:{d:"M13.8177 18.2959L13.8148 18.2988L2.32549 9.23501L0 11.1019L0.223434 11.2812L13.8177 22.0002L22.4112 15.2237L27.6384 11.0989L25.3099 9.22913L13.8177 18.2959Z",fill:"#2986FF"}}),n("path",{attrs:{d:"M104.724 14.4713H103.055L102.081 18.1315H99.6471V13.1659H106.356V11.5754H99.6471V8.75896H104.557V7.16846H93.0705V8.75896H97.9802V11.5754H91.2712V13.1659H97.9802V18.1315H95.543L94.5698 14.4713H92.9L93.8819 18.1315H90.7832V19.722H106.844V18.1315H103.745L104.724 14.4713Z",fill:"white"}}),n("path",{attrs:{d:"M102.55 2.60527L102.297 2.31128H95.3203L95.0674 2.60527C93.7313 4.12293 92.2227 5.47957 90.5723 6.64769V8.60574C91.3014 8.13829 94.4265 6.06851 96.1111 3.91942H101.538C103.22 6.06851 106.348 8.13829 107.077 8.60574V6.64769C105.415 5.48153 103.896 4.12482 102.55 2.60527Z",fill:"white"}}),n("path",{attrs:{d:"M74.5655 6.70352H75.8149V5.1101H74.5655V2.27014H72.9955V5.1101H71.7578V6.70352H72.9985V11.6221L71.7578 12.0513V13.8153L72.9985 13.3861V16.2936C72.9451 17.4738 72.7223 18.6402 72.337 19.7569H73.9833C74.3356 18.6345 74.5334 17.4694 74.5713 16.2936V12.8422L75.8238 12.4071V10.6254L74.5713 11.0605L74.5655 6.70352Z",fill:"white"}}),n("path",{attrs:{d:"M77.9325 2.27014H76.733V16.2995C76.7423 17.4712 76.595 18.6389 76.2949 19.7716H77.9325C78.1942 18.633 78.3234 17.4679 78.3176 16.2995V7.6796H88.2517V2.27014H77.9325ZM86.67 6.09206H78.3235V3.86357H86.667L86.67 6.09206Z",fill:"white"}}),n("path",{attrs:{d:"M86.6669 18.3889H84.5149V13.8938H86.4435H86.9785H87.9281V9.28395H86.4435V12.5208H84.5149V8.75476H83.0302V12.5208H81.1398V9.28395H79.6551V13.8938H80.3754H81.1398H83.0302V18.3889H80.9017V15.0639H79.4141V19.7619H80.3666H80.9017H86.6669H86.9638H88.1516V15.0639H86.6669V18.3889Z",fill:"white"}}),n("path",{attrs:{d:"M41.6426 2.29346V3.80165L44.462 4.80417L41.6426 5.80375V7.31194L46.5817 5.55679L51.5208 7.31194V5.80375L48.7014 4.80417L51.5208 3.80165V2.29346L46.5817 4.0486L41.6426 2.29346Z",fill:"white"}}),n("path",{attrs:{d:"M62.8166 9.19039H69.6079V7.447H62.8166V2.20215H60.9145V7.447H54.1232V9.19039H60.9145V18.0573H53.2383V19.8006H70.4928V18.0573H62.8166V9.19039Z",fill:"white"}}),n("path",{attrs:{d:"M38.4561 4.23636L41.0844 4.07173V2.5459L34.3196 2.97219V4.49802L36.9479 4.33044V6.68239H34.2402V8.18764H36.9479V19.771H38.4561V8.18764H41.1638V6.68239H38.4561V4.23636Z",fill:"white"}}),n("path",{attrs:{d:"M45.2991 7.07898H43.7322L43.3529 8.14327H41.6419V9.61324H42.8325L41.2891 13.9585H42.3357V18.9769H43.7645V13.2353H46.0929V19.7825H47.6011V13.2353H49.8619V16.5456C49.8558 17.393 49.6418 18.2258 49.2387 18.9711H50.8468C51.1828 18.2067 51.356 17.3807 51.3554 16.5456V12.3297V11.8858H47.6011V10.4158H46.0929V11.8858H43.594L44.4172 9.60441H51.5377V8.13444H44.9228L45.2991 7.07898Z",fill:"white"}}),n("path",{attrs:{d:"M34.2266 19.3477H35.7171L36.361 8.97852H34.8704L34.2266 19.3477Z",fill:"white"}}),n("path",{attrs:{d:"M39.1172 8.97852L39.5611 18.304H41.0517L40.6077 8.97852H39.1172Z",fill:"white"}})]))}}},3550:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{d:"M5.79708 5.35411C5.79708 6.0882 5.20197 6.68331 4.46788 6.68331C3.73378 6.68331 3.13867 6.0882 3.13867 5.35411C3.13867 4.62001 3.73378 4.0249 4.46788 4.0249C5.20197 4.0249 5.79708 4.62001 5.79708 5.35411Z",fill:"#8A919F"}}),n("path",{attrs:{d:"M5.79708 12.0001C5.79708 12.7342 5.20197 13.3293 4.46788 13.3293C3.73378 13.3293 3.13867 12.7342 3.13867 12.0001C3.13867 11.266 3.73378 10.6709 4.46788 10.6709C5.20197 10.6709 5.79708 11.266 5.79708 12.0001Z",fill:"#8A919F"}}),n("path",{attrs:{d:"M5.79708 18.6461C5.79708 19.3802 5.20197 19.9753 4.46788 19.9753C3.73378 19.9753 3.13867 19.3802 3.13867 18.6461C3.13867 17.912 3.73378 17.3169 4.46788 17.3169C5.20197 17.3169 5.79708 17.912 5.79708 18.6461Z",fill:"#8A919F"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.01172 5.35406C8.01172 4.98701 8.30927 4.68946 8.67632 4.68946L20.1961 4.68945C20.5631 4.68945 20.8607 4.98701 20.8607 5.35406C20.8607 5.7211 20.5631 6.01866 20.1961 6.01866L8.67632 6.01866C8.30927 6.01866 8.01172 5.72111 8.01172 5.35406Z",fill:"#8A919F"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.01172 12.0001C8.01172 11.633 8.30927 11.3355 8.67632 11.3355L20.1961 11.3355C20.5631 11.3355 20.8607 11.633 20.8607 12.0001C20.8607 12.3671 20.5631 12.6647 20.1961 12.6647L8.67632 12.6647C8.30927 12.6647 8.01172 12.3671 8.01172 12.0001Z",fill:"#8A919F"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.01172 18.6461C8.01172 18.279 8.30927 17.9814 8.67632 17.9814L20.1961 17.9814C20.5631 17.9814 20.8607 18.279 20.8607 18.646C20.8607 19.0131 20.5631 19.3106 20.1961 19.3106L8.67632 19.3107C8.30927 19.3107 8.01172 19.0131 8.01172 18.6461Z",fill:"#8A919F"}})]))}}},3551:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.7435 19.2285C12.4511 18.9361 12.4511 18.462 12.7435 18.1696L18.9131 12.0001L12.7435 5.83058C12.4511 5.53819 12.4511 5.06414 12.7435 4.77175C13.0358 4.47937 13.5099 4.47937 13.8023 4.77175L20.5014 11.4707C20.7938 11.7631 20.7938 12.2371 20.5014 12.5295L17.1519 15.879L13.8023 19.2285C13.5099 19.5209 13.0358 19.5209 12.7435 19.2285Z",fill:"#8A919F"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.49931 19.2285C3.20692 18.9361 3.20692 18.462 3.49931 18.1696L9.66899 12.0001L3.49931 5.83058C3.20692 5.53819 3.20692 5.06414 3.49931 4.77175C3.79171 4.47937 4.26577 4.47937 4.55817 4.77175L11.2573 11.4707C11.5497 11.7631 11.5497 12.2371 11.2573 12.5295L4.55817 19.2285C4.26577 19.5209 3.79171 19.5209 3.49931 19.2285Z",fill:"#8A919F"}})]))}}},3552:function(e,t,n){"use strict";n(2533)},3553:function(e,t,n){"use strict";n(2534)},3554:function(e,t,n){n(11);var r=n(162),o=n(206);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,h],style:[style,v],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.24984 3.33331H12.9165C13.3558 3.33331 13.7157 3.67326 13.7476 4.10445L13.7498 4.16665V15.8333C13.7498 16.2726 13.4099 16.6325 12.9787 16.6644L12.9165 16.6666H1.24984C0.81052 16.6666 0.450602 16.3267 0.41879 15.8955L0.416504 15.8333V4.16665C0.416504 3.72733 0.756453 3.36741 1.18764 3.3356L1.24984 3.33331H12.9165H1.24984ZM12.0831 4.99994H2.08309V14.9999H12.0831V4.99994ZM19.5831 6.47177V13.5281C19.5831 14.1758 18.8058 14.5759 18.1948 14.2427L14.9998 12.4999V7.49993L18.1948 5.75718C18.8058 5.42393 19.5831 5.82402 19.5831 6.47177ZM17.9164 7.94361L16.6664 8.44361V11.5563L17.9164 12.0563V7.94361ZM6.24976 6.66661V9.16661H3.74976V6.66661H6.24976Z",fill:"#8A919F"}})]))}}},3555:function(e,t,n){"use strict";n(2535)},3556:function(e,t,n){"use strict";n(2536)},3557:function(e,t,n){"use strict";n(2537)},4735:function(e,t,n){"use strict";n.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("关注公众号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"qr-img"},[t("img",{attrs:{src:n(3543)}})])}],o=(n(11),n(40),n(60),n(80),n(23),n(54),n(79),n(10),n(30),n(51),n(64),n(63),n(0)),c=n(3),l=n(95),d=n(110),f=n(7),h=n(317),v=n(3544),m=n.n(v),y=n(3545),w=n.n(y),C=n(3546),_=n.n(C),k=n(3547),x=n.n(k),O=n(3548),S=n.n(O),P=n(3549),j=n.n(P),E=n(1664),T=(n(85),n(71),n(243),n(3550)),V=n.n(T),L=n(3551),I=n.n(L),R=n(45),A={name:"Item",props:["item"],methods:{activate:function(e){this.$emit("activate",e)},onActivate:function(e){this.activate(e)}}},D=n(29),M=Object(D.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.item.visible,expression:"item.visible"}],staticClass:"item",class:["d"+e.item.deep,e.item.active&&"active"]},[n("div",{staticClass:"a-container",on:{click:function(t){return t.preventDefault(),e.activate(e.item)}}},[n("a",{class:["catalog-aTag","d"+e.item.deep+"-aTag-title"],attrs:{href:e.item.hash,title:e.item.title}},[e._v("\n      "+e._s(e.item.title)+"\n    ")])]),e._v(" "),e.item.childList.length?n("ul",{staticClass:"sub-list"},e._l(e.item.childList,(function(t,i){return n("item",{key:i,attrs:{item:t},on:{activate:e.onActivate}})})),1):e._e()])}),[],!1,null,null,null).exports;function B(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function F(){return{catalog:H(),reacticve:!0,marginTop:0,scrollTop:0,visible:!0}}function H(e){return Object.assign({deep:0,level:0,parent:null,active:!1,visible:!0,childList:[]},e)}function U(e,t){if(z(t),e){var n=function(e){var t=e;for(;t&&!t.visible;)t=t.parent;return t}(e);n&&(n.active=!0)}}function z(e){e.active=!1,e.childList.forEach(z)}function $(e,t){if(t.hash===e)return t;var n,r=B(t.childList);try{for(r.s();!(n=r.n()).done;){var o=$(e,n.value);if(o)return o}}catch(e){r.e(e)}finally{r.f()}}var G={components:{Tooltip:l.Tooltip,Item:M,FoldIcon:V.a,UnFoldIcon:I.a},props:["title"],data:function(){return F()},watch:{"catalog.childList":function(e){e&&e.length?this.$emit("update:visible",!0):this.$emit("update:visible",!1)},$route:function(e,t){var n,r,o,c;(null==e||null===(n=e.params)||void 0===n?void 0:n.sectionId)===(null==t||null===(r=t.params)||void 0===r?void 0:r.sectionId)&&(null==e||null===(o=e.params)||void 0===o?void 0:o.id)===(null==t||null===(c=t.params)||void 0===c?void 0:c.id)||(this.catalog=H())}},mounted:function(){var e=this;this.removeHashEventListener=Object(R.k)(window,"hashchange",(function(){e.$nextTick((function(){return e.scrollViewByCurrentHash()}))})),this.removeScrollEventListener=Object(R.m)(window,(function(){e.activeItemByCurrentPosition()}),10)},beforeDestroy:function(){this.removeHashEventListener(),this.removeScrollEventListener()},methods:{toggle:function(){this.visible=!this.visible,this.$emit("toggle",this.visible)},generate:function(e){!this.$isServer&&e&&(this.node=e,this.catalog=function(e){var t=[].slice.call(e.querySelectorAll("h1,h2,h3,h4,h5,h6")),n=H();return t.reduce((function(e,t){var title=t.textContent.replace(/\n/g," ").trim();if(title){for(var n=H({title:title||"<未识别标题>",level:+t.nodeName.slice(1),hash:"#"+(t.dataset.id||""),childList:[]}),r=e;r&&r.level>=n.level;)r=r.parent;return n.parent=r,n.deep=r.deep+1,n.visible=n.deep<=3,r.childList.push(n),n}return e}),n),n}(e),this.activeItemByCurrentPosition())},reset:function(){Object.assign(this,F())},activeItemByCurrentPosition:function(){var e=this;if(this.node)for(var t,n=(t=this.node,[].slice.call(t.querySelectorAll("h1,h2,h3,h4,h5,h6"))),r=n.map((function(e){return e.getBoundingClientRect().top})),i=0;i<r.length;i++){var o=r[i],c=r[i+1];if(o<100&&(!c||c>100)){var l=$("#".concat(n[i].dataset.id),this.catalog);if(l&&l.visible){U(l,this.catalog),this.$nextTick((function(){return e.scrollCatalogByCurrentPosition()}));break}}}},scrollCatalogByCurrentPosition:function(){var body=this.$refs.body,e=this.$refs.list,t=null==e?void 0:e.querySelector(".item.active");if(t){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=Math.max(0,body.clientHeight);if(o&&o<r.height){var c=n.top-r.top;this.scrollTop=Math.min(0,o/2-c),body.scrollTo(0,-this.scrollTop)}else this.scrollTop=0}else this.scrollTop=0},onItemActivate:function(e){window.location.hash===e.hash?this.scrollViewByCurrentHash():window.location.hash=e.hash},scrollViewByCurrentHash:function(){Object(R.s)({parent:this.node,offset:-80,getAnchorSelector:function(e){return'[data-id="'.concat(e.slice(1),'"]')}})}}},W=(n(3552),Object(D.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{directives:[{name:"show",rawName:"v-show",value:e.catalog.childList.length,expression:"catalog.childList.length"}],staticClass:"article-catalog"},[n("div",{staticClass:"toggle",class:{fold:!e.visible},on:{click:e.toggle}},[e.visible?n("UnFoldIcon"):n("Tooltip",{staticClass:"catalog-tooltip",attrs:{content:"章节目录",placement:"left","append-to-body":!1}},[n("FoldIcon")],1)],1),e._v(" "),n("div",{ref:"body",staticClass:"catalog-body",class:{hide:!e.visible}},[n("ul",{ref:"list",staticClass:"catalog-list",style:{marginTop:e.marginTop+"px"}},e._l(e.catalog.childList,(function(t,i){return n("item",{key:i,attrs:{item:t},on:{activate:e.onItemActivate}})})),1)])])}),[],!1,null,"0e57bcfe",null).exports),Z=n(1525),K={components:{VipBorrowButton:Z.a},props:["free","curIndex","list","isBorrowing","bookInfo","foldPc"],data:function(){return{}},computed:{notLastPage:function(){return this.curIndex<this.list.length-1},notFirstPage:function(){return this.curIndex>0},bookId:function(){return this.$route.params.id}},methods:{buyBook:function(){this.$emit("buy")},prevPage:function(){this.$emit("prev")},nextPage:function(){this.$emit("next")}}},Y=(n(3553),Object(D.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"handle"},[e._e(),e._v(" "),e.notLastPage||e.free||e.bookInfo.isBorrowing?e._e():n("div",{staticClass:"buy-container"},[n("button",{staticClass:"buy",on:{click:e.buyBook}},[e._v("购买")]),e._v(" "),n("VipBorrowButton",{staticClass:"borrow",attrs:{"book-info":e.bookInfo,"event-page":"free"}})],1)])}),[],!1,null,"0d867ec6",null).exports),X=n(3554),J=n.n(X),Q=n(2075),ee=n.n(Q),te=n(4),ne=n(2076);function ie(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function re(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ie(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ie(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var oe={components:{LockIcon:ee.a,CameraIcon:J.a,BAlert:l.Alert},props:["free","admin","info","list","sectionId","isVideoCourse"],data:function(){return{sectionList:[],userRole:"",initShowDitoryVisible:!0}},computed:re(re({},Object(d.mapGetters)({user:te.USER})),{},{tryRead:function(){var e=this.info,t=e.price,n=e.isBuy;return!(0===t)&&this.admin||!n},bookId:function(){return this.$route.params.id}}),watch:{sectionId:{handler:function(){var e=this;this.$nextTick((function(){var t,n;(null===(t=e.$refs)||void 0===t?void 0:t.activeRef)&&Array.isArray(null===(n=e.$refs)||void 0===n?void 0:n.activeRef)&&e.bookDirectoryVisible(e.$refs.activeRef[0])}))},immediate:!0}},created:function(){this.initData()},methods:{initData:function(){var e=new ne.a(this.list,this.info,this.user);this.userRole=e.userRole,this.sectionList=e.getSectionList()},setFreeSection:function(e,t){this.$emit("setFreeSection",e,t)},routeSectionId:function(e){var t=e.sectionId;t!==this.$route.params.sectionId&&this.$emit("linkSection",t)},bookDirectoryVisible:function(e){e&&!this.$device.isMobile&&this.sectionId&&(null==e||e.scrollIntoView({behavior:this.initShowDitoryVisible?"auto":"smooth",block:"nearest",inline:"center"}),this.initShowDitoryVisible=!1)}}},ae=(n(3555),Object(D.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-directory-comp beautify-scrollbar-warp",class:{"is-admin":"admin"===e.userRole,"is-author":"author"===e.userRole,"is-buyer":"buyer"===e.userRole}},[n("div",{staticStyle:{padding:"0 15px"}},["admin"===e.userRole?n("b-alert",{attrs:{"show-icon":""}},[e._v("\n      当前是管理员状态,以下所有章节都可点击阅读\n    ")]):"author"===e.userRole?n("b-alert",{attrs:{"show-icon":""}},[e._v("\n      您是小册作者,以下所有章节都可点击阅读\n    ")]):e._e()],1),e._v(" "),n("div",{staticClass:"section-list"},e._l(e.sectionList,(function(t,r){return n("a",{key:t.sectionId,ref:e.sectionId===t.sectionId?"activeRef":"",refInFor:!0,staticClass:"section",class:{unfinished:!t.isFinished,"route-active":e.sectionId===t.sectionId},on:{click:function(n){return e.routeSectionId(t)}}},[n("div",{staticClass:"left"},[n("div",{staticClass:"index"},[e._v(e._s(r+1))])]),e._v(" "),n("div",{staticClass:"center"},[n("div",{staticClass:"main-line"},[n("div",{staticClass:"title"},[e.isVideoCourse||t.hasVideo?n("CameraIcon",{staticClass:"icon-camera"}):e._e(),e._v(" "),n("span",{staticClass:"title-text"},[e._v(e._s(t.title))])],1),e._v(" "),n("div",{staticClass:"right"},[t.isFinished?"buyer"===e.userRole||e.info.isBorrowing?e._e():["付费章节"===t.freeStatus?n("div",{staticClass:"lock"},[n("LockIcon")],1):e._e(),e._v(" "),"试学章节"===t.freeStatus?n("div",{staticClass:"label"},[e._v("\n                试学\n              ")]):e._e()]:n("div",{staticClass:"lock"},[n("LockIcon")],1)],2)]),e._v(" "),n("div",{staticClass:"sub-line"},[t.isFinished?["已学完"===t.status?n("div",{staticClass:"label",staticStyle:{color:"var(--juejin-font-3)",background:"var(--juejin-gray-1-1)"}},[e._v("\n              已学完\n            ")]):"上次学到"===t.status?n("div",{staticClass:"label",staticStyle:{color:"var(--juejin-font-brand1-normal)",background:"var(--juejin-brand-5-light)"}},[e._v("\n              上次学到\n            ")]):"有更新"===t.status?n("div",{staticClass:"label",staticStyle:{color:"var(--juejin-danger-1-normal)",background:"var(--juejin-danger-3-light)"}},[e._v("\n              有更新\n            ")]):e._e(),e._v(" "),n("span",[e._v("学习时长: "+e._s(t.readDurationStr))])]:n("div",[e._v("写作中...")])],2)])])})),0)])}),[],!1,null,"153ce864",null).exports),se={props:["curIndex","list"]},ce=(n(3556),Object(D.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-progress"},[n("ul",e._l(e.list,(function(t,r){return n("li",{class:{active:r<=e.curIndex}})})),0)])}),[],!1,null,"6fbc2a2e",null).exports),le=n(2381),ue=n(1347),de=n(1523),fe=n(16),he=n(251),pe=n(28);function ve(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function ge(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ve(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ve(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var me=Object(c.b)({components:{BookCatalog:W,ToggleIcon:x.a,Icon:l.Icon,UserAuth:ue.a,BookDirectory:ae,BookDirection:Y,BookProgress:ce,WechatQuickLogin:de.a,SectionPrev:le.a,SectionNext:le.a,AppOpenDrawer:function(){return Promise.all([n.e(9),n.e(19)]).then(n.bind(null,1753))},QrIcon:_.a,JuejinIcon:m.a,MenuIcon:w.a,JuejinLogoIcon:S.a,VipBorrowButton:Z.a,BookBuyButton:E.a,DarkLogo:j.a},provide:function(){var e=this;return{refreshBook:function(){e.fetch()}}},data:function(){return{sectionError:!1,sectionList:[],bookInfo:null,sectionInfo:{},direction:"next",view:"prev",unfoldM:!1,foldPc:!1,isViewNavOnTop:!1,isHeaderVisible:!0,needHide:!1,qrHide:!1,isPlayingFullscreen:!1,isPlayingCssFullscreen:!1,foldCatalog:!1}},computed:ge(ge({},Object(d.mapGetters)({user:te.USER,logined:te.LOGINED})),{},{isVideoCourse:function(){var e,t;return(null===(t=null===(e=this.bookInfo)||void 0===e?void 0:e.base_info)||void 0===t?void 0:t.course_type)===f.BookletCourseType.Video},isAuthor:function(){var e,t;return(null===(e=this.author)||void 0===e?void 0:e.id)===(null===(t=this.user)||void 0===t?void 0:t.id)},isAdmin:function(){var e,t=this.user||{};return(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.isAdmin)||this.isAuthor},canPayment:function(){var e=this.bookInfo,t=e.price,n=e.isBuy;return t>0&&!n&&!this.isAuthor},directionClass:function(){return"prev"===this.direction?"transition--prev":"transition--next"},bookId:function(){return this.$route.params.id},sectionId:function(){return this.$route.params.sectionId},filterList:function(){var e=this;return this.isAdmin?this.sectionList.map((function(e){return e.sectionId})).filter((function(e){return e})):this.sectionList.map((function(t){return!(!(e.free||t.isFree||e.bookInfo.isBorrowing)||!t.isFinished)&&t.sectionId})).filter((function(e){return e}))},sectionIdList:function(){return this.bookInfo&&this.bookInfo.section||[]},curDirectoryIndex:function(){return this.sectionIdList&&this.sectionIdList.indexOf(this.sectionId)},curFreeDirectoryIndex:function(){var e=this.$route.params.sectionId;return this.filterList.indexOf(e)},free:function(){var e=this.bookInfo,t=e.price,n=e.isBuy,r=0===t;return r||n},author:function(){var e=this.bookInfo;return e&&e.user||{}},isMobile:function(){return this.$device.isMobile},scheme:function(){var e=this.$route.params||{},t=e.id,n=e.sectionId;return Object(he.d)("https://".concat(pe.d,"/book/").concat(t,"/section/").concat(n),he.a.bookSectionDetail.gd_label)},isDarkTheme:function(){var e;return(null===(e=this.$store.state.common)||void 0===e?void 0:e.theme)===fe.f.dark}}),watch:{$route:function(e,t){var n,r,o,c,l,d,f;(null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.sectionId)===(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.sectionId)&&(null===(o=null==e?void 0:e.params)||void 0===o?void 0:o.id)===(null===(c=null==t?void 0:t.params)||void 0===c?void 0:c.id)||(this.bookInfo||null===(l=null==this?void 0:this.fetch)||void 0===l||l.call(this),null===(d=this.getSection)||void 0===d||d.call(this),null===(f=this.loopComponent)||void 0===f||f.call(this))}},shareInfo:function(){var e=this.bookInfo||{};return{title:"".concat(e.title," - ").concat(this.author.username," - 掘金小册"),noTemplate:!0,description:e.desc,thumb:e.img,url:this.$route.fullPath}},head:function(){var title=this.bookInfo&&this.bookInfo.title||"",e=this.author.username||"";return e=e?e+" - ":"",{titleTemplate:null,title:"".concat(title=title?title+" - ":"").concat(e,"掘金小册")}},methods:ge(ge({},Object(d.mapActions)({toogle_suspension:te.CHANGE_SUSPENSION_PANEL})),{},{buyBook:function(){return this.$coursePayment(this.user,this.bookId)},catalogFold:function(e){this.foldCatalog=!e},getXiaoce:function(){var e=this;return this.getXiaoceById().then((function(){e.isVideoCourse&&"bookSection"===e.$route.name&&e.$router.replace({name:"videoCourseSection",params:e.$route.params})}))},getXiaoceById:function(){var e=this;return Object(h.b)(this.bookId).then((function(t){var n=t.bookInfo,r=t.sections;e.bookInfo=n;e.sectionList=r.length?r.map((function(e){return Object.assign(e,{read:!1})})):[],Number(e.sectionId)?e.getSection():e.redirectSection()}))},getSection:function(){var e=this,t=this.sectionId;this.setSectionListIsRead(t),Object(h.e)(t).then((function(t){if(t||e.redirectSection(),!t.id)return Promise.reject(new Error);e.sectionInfo=Object.assign({},t,{html:t.content,markdown:t.markdown_show}),e.enterSectionTEA()})).catch((function(t){console.log("error get book section info err:",t),e.sectionInfo={}}))},setFreeSection:function(e,t){var n=this;this.$getBean("xiaoceBusiness").setFreeSection(e,t).then((function(){n.getListSection()})).catch((function(e){n.$alertMsg(e)}))},redirectSection:function(){var e=this.filterList&&this.filterList[0];e?(this.setSectionListIsRead(e),this.$router.replace({params:{id:this.bookId,sectionId:e}})):this.$router.push({name:this.isVideoCourse?"videoCourseInfo":"bookInfo",params:{id:this.bookId}})},loopComponent:function(){var e=this.view;this.view="prev"===e?"next":"prev"},prevPage:function(e){(e=e||this.filterList[this.curFreeDirectoryIndex-1])&&(this.setSectionListIsRead(e),this.sectionInfo={},this.direction="prev",this.$router.push({params:{sectionId:e},query:this.$route.query}))},nextPage:function(e){(e=e||this.filterList[this.curFreeDirectoryIndex+1])&&(this.setSectionListIsRead(e),this.direction="next",this.sectionInfo={},this.$router.push({params:{sectionId:e},query:this.$route.query}))},setSectionIsRead:function(e,t){var n=Object.assign(this.sectionList[e],{read:t});this.$set(this.sectionList,e,n)},setSectionListIsRead:function(e){var t=this,n=this.sectionIdList.indexOf(e);n>-1&&this.sectionIdList.forEach((function(e,r){r<n?t.setSectionIsRead(r,!0):t.setSectionIsRead(r,!1)}))},linkSection:function(e){var t=this.sectionIdList.indexOf(e);this.curDirectoryIndex>t?(this.direction="prev",this.prevPage(e)):(this.direction="next",this.nextPage(e)),this.unfoldM=!1},toggleSummary:function(){var e=this.unfoldM,t=this.foldPc;this.unfoldM=!e,this.foldPc=!t},toggleQrPopup:function(){var e=this.qrHide;this.qrHide=!e},hideQrPopup:function(){var e=this;this.qrHide=!0,window.localStorage.setItem("bookQrHideSection",!0);var t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.ROOT_CONTAINER_CLICK,(function(){e.qrHide=!0}))},initQrHide:function(){var e=window.localStorage.getItem("bookQrHideSection");this.qrHide=e},initScroll:function(){var e=this;this.removeScrollDirectionChangeEventListener=Object(R.n)(window,(function(t,n){var r="up"===t,o=n<=50;e.needHide=o&&!r,e.isHeaderVisible=o||r}),50),this.removeScrollEventListener=Object(R.m)(window,(function(){window.pageYOffset<=50&&!e.isHeaderVisible?e.isHeaderVisible=!0:e.needHide&&(e.needHide=!1,e.isHeaderVisible=!1)}),50)},initPlayDirection:function(){var e=this;this.removeDirectionListener=Object(R.k)(document,"keyup",(function(t){t.ctrlKey||e.isPlayingFullscreen||e.isPlayingCssFullscreen||(37===t.keyCode?e.prevPage():39===t.keyCode&&e.nextPage())}))},fetch:function(){this.getXiaoce()},reset:function(){this.toogle_suspension(!0)},handleVisibilityChange:function(){"visible"===document.visibilityState&&this.enterSectionTEA()},enterSectionTEA:function(){var e=this.sectionInfo;this.$TEA("book_section_detail_visit",{book_id:e.booklet_id,section_id:e.section_id,is_trial_section:e.is_free,is_purchased:this.bookInfo.isBuy?1:0,platform:this.isMobile?"h5":"web",rent_status:this.bookInfo.isBorrowing?"underway":this.bookInfo.borrowTimes>0?"finish":"never"})},onReady:function(){var e,t,n=this,r=function(){return document.querySelector(".markdown-body")},o=r();o?null===(t=null===(e=this.$refs)||void 0===e?void 0:e.catalogRef)||void 0===t||t.generate(o):setTimeout((function(){var e,t,o=r();null===(t=null===(e=n.$refs)||void 0===e?void 0:e.catalogRef)||void 0===t||t.generate(o)}),1e3)}}),mounted:function(){var e,t,n=this;this.initQrHide(),this.initScroll(),this.toogle_suspension(!1),this.fetch(),this.initPlayDirection();var r=this.$getBean("eventBus");r.onVmLife(this,r.eventType.VIDEO_FULLSCREEN_CHANGE,(function(e){n.isPlayingFullscreen=e})),r.onVmLife(this,r.eventType.VIDEO_CSS_FULLSCREEN_CHANGE,(function(e){n.isPlayingCssFullscreen=e})),Object(R.o)(this.handleVisibilityChange),this.isMobile&&!(null===(t=null===(e=this.$store.state)||void 0===e?void 0:e.header)||void 0===t?void 0:t.isPopupZlink)&&(window.open("https://z.juejin.cn/SMF5","_blank"),this.$store.commit("header/POPUP_ZLINK"))},beforeDestroy:function(){this.reset(),this.removeDirectionListener(),this.removeScrollEventListener(),this.removeScrollDirectionChangeEventListener(),Object(R.q)(this.handleVisibilityChange)}}),ye=(n(3557),Object(D.a)(me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.bookInfo?n("div",{staticClass:"book-read-view"},[n("section",{staticClass:"book-section",class:{"fold-pc":e.foldPc},attrs:{ection:""}},[n("div",{staticClass:"book-summary",class:{"unfold-mobile":e.unfoldM}},[n("div",{staticClass:"book-summary-masker",on:{click:e.toggleSummary}}),e._v(" "),n("div",{staticClass:"book-summary-inner"},[n("div",{staticClass:"toggle-btn",on:{click:e.toggleSummary}},[n("ToggleIcon")],1),e._v(" "),n("div",{staticClass:"book-summary__header"},[n("app-link",{staticClass:"logo",attrs:{to:e.$courseIndex()}},[e.isDarkTheme?n("DarkLogo",{staticStyle:{height:"100%",width:"auto"}}):n("JuejinLogoIcon",{staticStyle:{height:"100%",width:"auto"}})],1),e._v(" "),n("div",{staticClass:"label"},[e._v("课程")]),e._v(" "),1==e.bookInfo.isPublish?n("div",{staticClass:"audit"},[e._v("审核中")]):e._e()],1),e._v(" "),e.free||e.bookInfo.isBorrowing?e._e():n("div",{staticClass:"buy-sticky"},[n("BookBuyButton",{staticClass:"section-buy",attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{attrs:{"event-page":"free","book-info":e.bookInfo},on:{fetch:e.getXiaoceById}})],1),e._v(" "),n("BookDirectory",{staticClass:"book-directory",class:{bought:!e.canPayment||e.bookInfo.isBorrowing},attrs:{free:e.free,admin:e.isAdmin,info:e.bookInfo,list:e.sectionList,"cur-index":e.curDirectoryIndex,"section-id":e.sectionId,"is-video-course":e.isVideoCourse},on:{setFreeSection:e.setFreeSection,linkSection:e.linkSection}}),e._v(" "),n("div",{staticClass:"book-summary__footer",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"qr-icon",on:{click:function(t){return t.stopPropagation(),e.toggleQrPopup(t)}}},[n("QrIcon")],1),e._v(" "),n("div",{staticClass:"qr-tips",class:{show:!e.qrHide}},[n("span",{staticClass:"ion-close",on:{click:e.hideQrPopup}},[n("Icon",{attrs:{type:"close"}})],1),e._v(" "),e._m(0),e._v(" "),e._m(1)])])],1)]),e._v(" "),n("div",{staticClass:"book-content"},[n("div",{staticClass:"book-content-inner"},[n("div",{staticClass:"book-content__header",class:{visible:e.isHeaderVisible}},[n("div",{staticClass:"switch",on:{click:e.toggleSummary}},[n("JuejinIcon",{staticStyle:{width:"30px",height:"30px","vertical-align":"middle"}})],1),e._v(" "),n("div",{staticClass:"title"},[n("app-link",{attrs:{to:e.$bookInfo(e.bookId,e.isVideoCourse?"video":"book")}},[e._v("\n              "+e._s(e.bookInfo.title)+"\n            ")])],1),e._v(" "),n("user-auth",{staticClass:"user-auth"}),e._v(" "),e.foldPc?n("book-progress",{staticClass:"book-progress",attrs:{"cur-index":e.curDirectoryIndex,list:e.sectionIdList}}):e._e()],1),e._v(" "),n("div",{ref:"bookBody",staticClass:"book-body",class:[e.directionClass,{mobile:e.isMobile}]},[n("section-"+e.view,{ref:"sectionBody",tag:"component",staticClass:"book-section-content",attrs:{free:e.free,user:e.user,"book-info":e.bookInfo,"section-info":e.sectionInfo,"cur-index":e.curFreeDirectoryIndex,list:e.filterList,"fold-pc":e.foldPc,"fold-catalog":e.foldCatalog},on:{buy:e.buyBook,prev:e.prevPage,next:e.nextPage,ready:e.onReady}}),e._v(" "),n("BookCatalog",{ref:"catalogRef",on:{toggle:e.catalogFold}})],1),e._v(" "),n("book-direction",{directives:[{name:"show",rawName:"v-show",value:e.sectionInfo&&e.curFreeDirectoryIndex>-1,expression:"sectionInfo && curFreeDirectoryIndex > -1"}],staticClass:"book-direction",attrs:{free:e.free,"cur-index":e.curFreeDirectoryIndex,list:e.filterList,"is-borrowing":e.bookInfo.isBorrowing,"book-info":e.bookInfo,"fold-pc":e.foldPc},on:{buy:e.buyBook,prev:e.prevPage,next:e.nextPage}})],1)])]),e._v(" "),n("WechatQuickLogin"),e._v(" "),n("client-only",[e.$device.isMobile?n("AppOpenDrawer",{attrs:{zlink:"https://z.juejin.cn/SMF5",scheme:e.scheme}}):e._e()],1)],1):e._e()}),r,!1,null,"6d57c37a",null));t.default=ye.exports}}]);
//# sourceMappingURL=7aa6a21.js.map